; ---------------------------------------------------------------------------

tm		struc ;	(sizeof=0x12, standard type)
tm_sec		dw ?
tm_min		dw ?
tm_hour		dw ?
tm_mday		dw ?
tm_mon		dw ?
tm_year		dw ?
tm_wday		dw ?
tm_yday		dw ?
tm_isdst	dw ?
tm		ends

; ---------------------------------------------------------------------------

time		struc ;	(sizeof=0x4, standard type)
ti_min		db ?
ti_hour		db ?
ti_hund		db ?
ti_sec		db ?
time		ends

; ---------------------------------------------------------------------------

date		struc ;	(sizeof=0x4, standard type)
da_year		dw ?
da_day		db ?
da_mon		db ?
date		ends

; ---------------------------------------------------------------------------

ffblk		struc ;	(sizeof=0x2C, standard type)
ff_reserved	db 21 dup(?)
ff_attrib	db ?
ff_ftime	dw ?
ff_fdate	dw ?
ff_fsize	dd ?
ff_name		db 13 dup(?)
_padding	db ?
ffblk		ends

; ---------------------------------------------------------------------------

FILE		struc ;	(sizeof=0x14, standard type)
level		dw ?
flags		dw ?
fd		db ?
hold		db ?
bsize		dw ?
buffer		dd ?			; offset
curp		dd ?			; offset
istemp		dw ?
token		dw ?
FILE		ends


;
; +-------------------------------------------------------------------------+
; |   This file has been generated by The Interactive Disassembler (IDA)    |
; |        Copyright (c) 2009 by Hex-Rays, <support@hex-rays.com>           |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	35C8E214469734B0354C64B957B122B9

; Format      :	MS-DOS executable (EXE)
; Base Address:	0h Range: 0h-142A0h Loaded length: 1023Eh
; Entry	Point :	0:0
; OS type	  :  MS	DOS
; Application type:  Executable	16bit

		.386
		.model large

; ===========================================================================

; Segment type:	Pure code
seg000		segment	byte public 'CODE' use16
		assume cs:seg000
		assume es:nothing, ss:seg002, ds:nothing, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

		public start
start		proc near
		mov	dx, seg	dseg
		mov	cs:DGROUP@, dx
		mov	ah, 30h
		int	21h		; DOS -	GET DOS	VERSION
					; Return: AL = major version number (00h for DOS 1.x)
		mov	bp, ds:2
		mov	bx, ds:2Ch
		mov	ds, dx
		assume ds:dseg
		mov	word_E17C, ax
		mov	segx, es
		mov	word_E176, bx
		mov	word_E18E, bp
		call	sub_16A
		mov	ax, word_E176
		mov	es, ax
		xor	ax, ax
		mov	bx, ax
		mov	di, ax
		mov	cx, 7FFFh
		cld

loc_37:
		repne scasb
		jcxz	short loc_7E
		inc	bx
		cmp	es:[di], al
		jnz	short loc_37
		or	ch, 80h
		neg	cx
		mov	word_E174, cx
		mov	cx, 2
		shl	bx, cl
		add	bx, 10h
		and	bx, 0FFF0h
		mov	word_E178, bx
		mov	dx, ss
		sub	bp, dx
		mov	di, seg	dseg
		mov	es, di
		assume es:dseg
		mov	di, es:word_E33A
		cmp	di, 200h
		jnb	short loc_75
		mov	di, 200h
		mov	es:word_E33A, di

loc_75:
		mov	cl, 4
		shr	di, cl
		inc	di
		cmp	bp, di
		jnb	short loc_81

loc_7E:
		call	__abort
; ---------------------------------------------------------------------------

loc_81:
		mov	bx, di
		add	bx, dx
		mov	word_E186, bx
		mov	word_E18A, bx
		mov	ax, segx
		sub	bx, ax
		mov	es, ax
		assume es:nothing
		mov	ah, 4Ah	; 'J'
		push	di
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		pop	di
		shl	di, cl
		cli
		mov	ss, dx
		assume ss:nothing
		mov	sp, di
		sti
		mov	ax, seg	dseg
		mov	es, ax
		assume es:dseg
		mov	es:word_E33A, di
		xor	ax, ax
		mov	es, cs:DGROUP@
		assume es:nothing
		mov	di, 213Eh
		mov	cx, 6116h
		sub	cx, di
		cld
		rep stosb
		cmp	__nfile, 14h
		jbe	short loc_10C
		cmp	byte ptr word_E17C, 3
		jb	short loc_10C
		ja	short loc_D5
		cmp	byte ptr word_E17C+1, 1Eh
		jb	short loc_10C

loc_D5:
		mov	ax, 5801h
		mov	bx, 2
		int	21h		; DOS -	3+ - GET/SET MEMORY ALLOCATION STRATEGY
					; AL = function	code: set allocation strategy
		jb	short loc_109
		mov	ah, 67h	; 'g'
		mov	bx, __nfile
		int	21h		; DOS -	3.3+ - SET HANDLE COUNT
					; BX = desired number of handles (max 255)
		jb	short loc_109
		mov	ah, 48h	; 'H'
		mov	bx, 1
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jb	short loc_109
		inc	ax
		mov	word_E18E, ax
		dec	ax
		mov	es, ax
		assume es:nothing
		mov	ah, 49h
		int	21h		; DOS -	2+ - FREE MEMORY
					; ES = segment address of area to be freed
		jb	short loc_109
		mov	ax, 5801h
		mov	bx, 0
		int	21h		; DOS -	3+ - GET/SET MEMORY ALLOCATION STRATEGY
					; AL = function	code: set allocation strategy
		jnb	short loc_10C

loc_109:
		call	__abort
; ---------------------------------------------------------------------------

loc_10C:
		xor	bp, bp
		push	bp
		call	__ExceptInit
		pop	ax
		mov	es, cs:DGROUP@
		assume es:nothing
		mov	si, 2120h
		mov	di, 2138h
		call	sub_1DA
		push	word_E172
		push	envp		; envp
		push	word_E16E
		push	argv		; argv
		push	argc		; argc
		call	_main
		push	ax		; status

loc_139:
		call	_exit
; ---------------------------------------------------------------------------

__cleanup:
		mov	es, cs:DGROUP@
		push	si
		push	di
		mov	si, 2138h
		mov	di, 213Eh
		call	sub_21E
		pop	di
		pop	si
		retn
start		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__checknull	proc near
		retn
__checknull	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

__terminate	proc near

arg_0		= byte ptr  2

		mov	bp, sp
		mov	ah, 4Ch	; 'L'
		mov	al, [bp+arg_0]
		int	21h		; DOS -	2+ - QUIT WITH EXIT CODE (EXIT)
__terminate	endp			; AL = exit code

; ---------------------------------------------------------------------------
		mov	dx, 4Bh	; 'K'
		push	ds
		push	dx
		call	___ErrorMessage
		pop	dx
		pop	ds
		mov	ax, 3
		push	ax
		call	__exit

; =============== S U B	R O U T	I N E =======================================


sub_16A		proc near
		push	ds
		mov	ax, 3500h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	word ptr dword_E15A, bx
		mov	word ptr dword_E15A+2, es
		mov	ax, 3504h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	word ptr dword_E15E, bx
		mov	word ptr dword_E15E+2, es
		mov	ax, 3505h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	word ptr dword_E162, bx
		mov	word ptr dword_E162+2, es
		mov	ax, 3506h
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		mov	word ptr dword_E166, bx
		mov	word ptr dword_E166+2, es
		mov	ax, 2500h
		mov	dx, cs
		mov	ds, dx
		assume ds:seg000
		mov	dx, 159h
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		assume ds:dseg
		retn
sub_16A		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__restorezero	proc near
		push	ds
		mov	ax, 2500h
		lds	dx, dword_E15A
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		push	ds
		mov	ax, 2504h
		lds	dx, dword_E15E
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		push	ds
		mov	ax, 2505h
		lds	dx, dword_E162
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		push	ds
		mov	ax, 2506h
		lds	dx, dword_E166
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		retn
__restorezero	endp


; =============== S U B	R O U T	I N E =======================================


sub_1DA		proc near
		mov	ax, 100h
		mov	dx, di
		mov	bx, si

loc_1E1:
		cmp	bx, di
		jz	short loc_1FE
		cmp	byte ptr es:[bx], 0FFh
		jz	short loc_1F9
		mov	cl, es:[bx+1]
		xor	ch, ch
		cmp	cx, ax
		jnb	short loc_1F9
		mov	ax, cx
		mov	dx, bx

loc_1F9:
		add	bx, 6
		jmp	short loc_1E1
; ---------------------------------------------------------------------------

loc_1FE:
		cmp	dx, di
		jz	short locret_21D
		mov	bx, dx
		cmp	byte ptr es:[bx], 0
		mov	byte ptr es:[bx], 0FFh
		push	es
		jz	short loc_216
		call	dword ptr es:[bx+2]
		pop	es
		jmp	short sub_1DA
; ---------------------------------------------------------------------------

loc_216:
		call	word ptr es:[bx+2]
		pop	es
		jmp	short sub_1DA
; ---------------------------------------------------------------------------

locret_21D:
		retn
sub_1DA		endp


; =============== S U B	R O U T	I N E =======================================


sub_21E		proc near
		mov	ah, 0
		mov	dx, di
		mov	bx, si

loc_224:
		cmp	bx, di
		jz	short loc_23F
		cmp	byte ptr es:[bx], 0FFh
		jz	short loc_23A
		cmp	es:[bx+1], ah
		jb	short loc_23A
		mov	ah, es:[bx+1]
		mov	dx, bx

loc_23A:
		add	bx, 6
		jmp	short loc_224
; ---------------------------------------------------------------------------

loc_23F:
		cmp	dx, di
		jz	short locret_25E
		mov	bx, dx
		cmp	byte ptr es:[bx], 0
		mov	byte ptr es:[bx], 0FFh
		push	es
		jz	short loc_257
		call	dword ptr es:[bx+2]
		pop	es
		jmp	short sub_21E
; ---------------------------------------------------------------------------

loc_257:
		call	word ptr es:[bx+2]
		pop	es
		jmp	short sub_21E
; ---------------------------------------------------------------------------

locret_25E:
		retn
sub_21E		endp

; ---------------------------------------------------------------------------
DGROUP@		dw 0
__MMODEL	db 3, 40h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_263		proc near

var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= dword	ptr  6

		enter	14h, 0
		cmp	word_F4FA, 0
		jz	short loc_277
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2]
		call	sub_1AF2

loc_277:
		les	bx, [bp+arg_2]
		cmp	byte ptr es:[bx+22h], 1
		jnz	short loc_284
		jmp	loc_655
; ---------------------------------------------------------------------------

loc_284:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jz	short loc_29D
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		leave
		retn	6
; ---------------------------------------------------------------------------

loc_29D:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jz	short loc_328
		mov	[bp+var_6], 0
		mov	[bp+var_8], 0
		mov	byte ptr es:[bx+22h], 1
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	short loc_310
; ---------------------------------------------------------------------------

loc_2C3:
		les	bx, [bp+var_10]
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]
		cmp	dx, word ptr [bp+arg_2+2]
		jnz	short loc_2D8
		cmp	ax, word ptr [bp+arg_2]
		jz	short loc_31E

loc_2D8:
		les	bx, [bp+var_10]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		push	0
		call	sub_263
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		cmp	dx, [bp+var_6]
		jb	short loc_306
		ja	short loc_2FA
		cmp	ax, [bp+var_8]
		jbe	short loc_306

loc_2FA:
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax

loc_306:
		les	bx, [bp+var_10]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_310:
		mov	word ptr [bp+var_10+2],	dx
		mov	word ptr [bp+var_10], ax
		mov	ax, word ptr [bp+var_10]
		or	ax, word ptr [bp+var_10+2]
		jnz	short loc_2C3

loc_31E:
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx+22h], 0
		jmp	short loc_332
; ---------------------------------------------------------------------------

loc_328:
		mov	[bp+var_6], 0
		mov	[bp+var_8], 0

loc_332:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jnz	short loc_342
		jmp	loc_446
; ---------------------------------------------------------------------------

loc_342:
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jz	short loc_356
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		jmp	short loc_363
; ---------------------------------------------------------------------------

loc_356:
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_5695

loc_363:
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		cmp	word_F4EE, 0
		jz	short loc_3D3
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		cmp	dx, [bp+var_2]
		ja	short loc_3D3
		jnz	short loc_382
		cmp	ax, [bp+var_4]
		ja	short loc_3D3

loc_382:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+18h]
		or	ax, es:[bx+1Ah]
		jz	short loc_3D3
		push	ds
		push	offset aObj	; "obj"
		les	bx, es:[bx+18h]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3D3
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_13CF
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		cmp	dx, [bp+var_6]
		jb	short loc_3D3
		ja	short loc_3C7
		cmp	ax, [bp+var_8]
		jbe	short loc_3D3

loc_3C7:
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax

loc_3D3:
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jz	short loc_402
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		cmp	dx, [bp+var_2]
		ja	short loc_402
		jnz	short loc_3ED
		cmp	ax, [bp+var_4]
		ja	short loc_402

loc_3ED:
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jnz	short loc_3F8
		jmp	loc_65D
; ---------------------------------------------------------------------------

loc_3F8:
		cmp	word_F50A, 0
		jnz	short loc_402
		jmp	loc_65D
; ---------------------------------------------------------------------------

loc_402:
		cmp	word_F502, 0
		jz	short loc_40E
		push	1		; status
		call	sub_8E01
; ---------------------------------------------------------------------------

loc_40E:
		mov	dx, word ptr [bp+arg_2+2]
		mov	ax, word ptr [bp+arg_2]
		mov	word ptr dword_102E8+2,	dx
		mov	word ptr dword_102E8, ax
		mov	word_102EC, 0
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch] ; __int32
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		mov	al, es:[bx+24h]
		cbw
		push	ax		; int
		call	sub_D88
		jmp	loc_5B5
; ---------------------------------------------------------------------------

loc_446:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+18h]
		or	ax, es:[bx+1Ah]
		jnz	short loc_456
		jmp	loc_5F6
; ---------------------------------------------------------------------------

loc_456:
		mov	byte ptr es:[bx+22h], 1
		les	bx, es:[bx+18h]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		jmp	loc_5DD
; ---------------------------------------------------------------------------

loc_46A:
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2]
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		push	word ptr [bp+var_14+2]
		push	word ptr [bp+var_14]
		call	sub_1327
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		or	ax, [bp+var_2]
		jnz	short loc_492
		jmp	loc_5D2
; ---------------------------------------------------------------------------

loc_492:
		mov	ax, [bp+var_4]
		cmp	dx, [bp+var_6]
		jb	short loc_4AD
		ja	short loc_4A1
		cmp	ax, [bp+var_8]
		jbe	short loc_4AD

loc_4A1:
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax

loc_4AD:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jz	short loc_4C4
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		jmp	short loc_4D1
; ---------------------------------------------------------------------------

loc_4C4:
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_5695

loc_4D1:
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		cmp	word_F4EE, 0
		jz	short loc_537
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		cmp	dx, [bp+var_2]
		ja	short loc_537
		jnz	short loc_4F0
		cmp	ax, [bp+var_4]
		ja	short loc_537

loc_4F0:
		push	ds
		push	offset aObj	; "obj"
		les	bx, [bp+arg_2]
		les	bx, es:[bx+18h]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_537
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_13CF
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		cmp	dx, [bp+var_6]
		jb	short loc_537
		ja	short loc_52B
		cmp	ax, [bp+var_8]
		jbe	short loc_537

loc_52B:
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax

loc_537:
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		cmp	dx, [bp+var_2]
		ja	short loc_558
		jnz	short loc_549
		cmp	ax, [bp+var_4]
		ja	short loc_558

loc_549:
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jz	short loc_5C7
		cmp	word_F50A, 0
		jz	short loc_5C7

loc_558:
		cmp	word_F502, 0
		jz	short loc_564
		push	1		; status
		call	sub_8E01
; ---------------------------------------------------------------------------

loc_564:
		mov	dx, word ptr [bp+arg_2+2]
		mov	ax, word ptr [bp+arg_2]
		mov	word ptr dword_102E8+2,	dx
		mov	word ptr dword_102E8, ax
		mov	word_102EC, 1
		push	dx
		push	ax
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		push	word ptr [bp+var_14+2]
		push	word ptr [bp+var_14]
		call	sub_11AF
		push	dx
		push	ax		; src
		les	bx, [bp+var_14]
		push	word ptr es:[bx+12h]
		push	word ptr es:[bx+10h] ; __int32
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		mov	al, es:[bx+24h]
		cbw
		push	ax		; int
		call	sub_D88
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx+22h], 0

loc_5B5:
		call	sub_56D6
		les	bx, [bp+arg_2]
		mov	es:[bx+20h], dx
		mov	es:[bx+1Eh], ax
		leave
		retn	6
; ---------------------------------------------------------------------------

loc_5C7:
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx+22h], 0
		jmp	loc_65D
; ---------------------------------------------------------------------------

loc_5D2:
		les	bx, [bp+var_14]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]

loc_5DD:
		mov	word ptr [bp+var_14+2],	dx
		mov	word ptr [bp+var_14], ax
		mov	ax, word ptr [bp+var_14]
		or	ax, word ptr [bp+var_14+2]
		jz	short loc_5EE
		jmp	loc_46A
; ---------------------------------------------------------------------------

loc_5EE:
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx+22h], 0

loc_5F6:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jz	short loc_60D
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		jmp	short loc_61A
; ---------------------------------------------------------------------------

loc_60D:
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_5695

loc_61A:
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		or	ax, [bp+var_2]
		jnz	short loc_65D
		les	bx, [bp+arg_2]
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jz	short loc_639
		call	sub_56D6
		leave
		retn	6
; ---------------------------------------------------------------------------

loc_639:
		cmp	[bp+arg_0], 0
		jnz	short loc_655
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aSDoesNotExistD ; "'%s' does not exist - don't know how to"...
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8
		jmp	short loc_65D
; ---------------------------------------------------------------------------

loc_655:
		xor	dx, dx
		xor	ax, ax
		leave
		retn	6
; ---------------------------------------------------------------------------

loc_65D:
		les	bx, [bp+arg_2]
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	es:[bx+20h], dx
		mov	es:[bx+1Eh], ax
		leave
		retn	6
sub_263		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_672		proc near

var_4		= dword	ptr -4
@@src		= dword	ptr  4
arg_4		= dword	ptr  8

		enter	4, 0
		push	si
		push	di
		mov	word_102EE, 1
		jmp	loc_733
; ---------------------------------------------------------------------------

loc_681:
		push	0		; attribute
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; path
		call	__creat
		add	sp, 6
		mov	di, ax
		cmp	ax, 0FFFFh
		jnz	short loc_6B5
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6]
		push	ds
		push	offset aFatalCouldNotC ; "Fatal:  Could	not create temporary file"...
		call	sub_8E0F
		add	sp, 8
		push	1		; status
		call	sub_8E01
; ---------------------------------------------------------------------------

loc_6B5:
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+0Ch]
		mov	ax, es:[bx+0Ah]
		jmp	short loc_70F
; ---------------------------------------------------------------------------

loc_6C2:
		les	bx, [bp+var_4]
		push	word ptr es:[bx+6] ; int
		push	word ptr es:[bx+4] ; int
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		call	sub_6C4D
		push	ds
		push	offset byte_1285A ; s
		call	_strlen
		add	sp, 4
		mov	si, ax
		cmp	byte ptr [si+4759h], 0Ah
		jnz	short loc_6F9
		mov	byte ptr [si+4759h], 0Dh
		mov	byte ptr [si+475Ah], 0Ah
		inc	si
		mov	byte ptr [si+475Ah], 0

loc_6F9:
		push	si		; len
		push	ds
		push	offset byte_1285A ; buf
		push	di		; handle
		call	__write
		add	sp, 8
		les	bx, [bp+var_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_70F:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_6C2
		push	di		; handle
		call	__close
		pop	cx
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		mov	word ptr [bp+arg_4+2], dx
		mov	word ptr [bp+arg_4], ax

loc_733:
		mov	ax, word ptr [bp+arg_4]
		or	ax, word ptr [bp+arg_4+2]
		jz	short loc_73E
		jmp	loc_681
; ---------------------------------------------------------------------------

loc_73E:
		mov	word_102EE, 0
		pop	di
		pop	si
		leave
		retn	8
sub_672		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_74A		proc near

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		jmp	short loc_781
; ---------------------------------------------------------------------------

loc_74F:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_75F
		cmp	byte ptr es:[bx+1], 0
		jnz	short loc_770

loc_75F:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; path
		call	_unlink
		add	sp, 4

loc_770:
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax

loc_781:
		mov	ax, word ptr [bp+arg_0]
		or	ax, word ptr [bp+arg_0+2]
		jnz	short loc_74F
		pop	bp
		retn	4
sub_74A		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_78D		proc near
		push	bp
		mov	bp, sp
		cmp	word_F50C, 0
		jz	short loc_7C1
		cmp	word_F50E, 0
		jz	short loc_7CA
		jmp	short loc_7C1
; ---------------------------------------------------------------------------

loc_7A0:
		les	bx, dword_E296
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch]
		call	sub_74A
		les	bx, dword_E296
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr dword_E296+2, dx
		mov	word ptr dword_E296, ax

loc_7C1:
		mov	ax, word ptr dword_E296
		or	ax, word ptr dword_E296+2
		jnz	short loc_7A0

loc_7CA:
		mov	word ptr dword_E296+2, 0
		mov	word ptr dword_E296, 0
		pop	bp
		retn
sub_78D		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_7D8		proc near

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
@@s		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		enter	0Ch, 0
		cmp	word_F4FC, 0
		jz	short loc_7F9
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	ds
		push	offset aS	; "\t%s\n"
		call	sub_8E0F
		add	sp, 8
		xor	ax, ax
		leave
		retn	6
; ---------------------------------------------------------------------------

loc_7F9:
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_816
; ---------------------------------------------------------------------------

loc_813:
		inc	word ptr [bp+@@s]

loc_816:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 0
		jz	short loc_825
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_813

loc_825:
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	short loc_836
; ---------------------------------------------------------------------------

loc_833:
		inc	word ptr [bp+@@s]

loc_836:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_833
		cmp	[bp+arg_0], 0
		jnz	short loc_855
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	ds
		push	offset aS	; "\t%s\n"
		call	sub_8E0F
		add	sp, 8

loc_855:
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		cmp	ax, word_E294
		jbe	short loc_878
		push	ds
		push	offset aCommandArgumen ; "Command arguments too	long"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_878:
		push	[bp+var_A]	; int
		push	[bp+var_C]	; int
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_5886
		leave
		retn	6
sub_7D8		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_88B(int, __int32, char *s2)
sub_88B		proc near

var_A		= word ptr -0Ah
@@src		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= dword	ptr  6
@@s2		= dword	ptr  0Ah

		enter	0Ah, 0
		push	si
		push	di
		mov	di, [bp+arg_0]
		push	7Bh ; '{'       ; c
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s
		call	_strchr
		add	sp, 6
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	7Dh ; '}'       ; c
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s
		call	_strchr
		add	sp, 6
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		mov	ax, word_E294
		add	ax, 0FFFCh
		mov	[bp+var_A], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_905
		mov	ax, word ptr [bp+@@src]
		or	ax, word ptr [bp+@@src+2]
		jz	short loc_905
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s
		call	_strlen
		add	sp, 4
		cmp	ax, [bp+var_A]
		ja	short loc_905
		mov	ax, word ptr [bp+@@src]
		cmp	ax, word ptr [bp+var_4]
		jbe	short loc_905
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		cmp	dx, word ptr [bp+@@src+2]
		jz	short loc_8FD
		jmp	loc_99D
; ---------------------------------------------------------------------------

loc_8FD:
		cmp	ax, word ptr [bp+@@src]
		jz	short loc_905
		jmp	loc_99D
; ---------------------------------------------------------------------------

loc_905:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_934
		mov	ax, word ptr [bp+@@src]
		or	ax, word ptr [bp+@@src+2]
		jz	short loc_934
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s
		call	_strlen
		add	sp, 4
		cmp	ax, [bp+var_A]
		jbe	short loc_934
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 20h ;	' '
		les	bx, [bp+@@src]
		mov	byte ptr es:[bx], 20h ;	' '

loc_934:
		cmp	dest, 0
		jz	short loc_997
		cmp	word_E29C, 0FFFFh
		jz	short loc_96C
		push	ds
		push	offset a@	; "@"
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset byte_102F4 ; src
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		push	word_E29C	; handle
		call	_close
		pop	cx
		mov	word_E29C, 0FFFFh

loc_96C:
		push	ds
		push	offset dest
		push	di
		call	sub_7D8
		mov	si, ax
		mov	dest, 0
		mov	word_E28E, 0
		mov	src, 0
		or	si, si
		jge	short loc_98E
		jmp	loc_BC8
; ---------------------------------------------------------------------------

loc_98E:
		cmp	si, bdata@
		jle	short loc_997
		jmp	loc_BC8
; ---------------------------------------------------------------------------

loc_997:
		mov	ax, 0FFFFh
		jmp	loc_C79
; ---------------------------------------------------------------------------

loc_99D:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_4]
		les	bx, [bp+@@src]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+@@src]
		cmp	word_F508, 0
		jnz	short loc_9D8
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; s
		call	_strlen
		add	sp, 4
		push	ax
		push	ds
		push	offset dest	; s
		call	_strlen
		add	sp, 4
		pop	dx
		add	dx, ax
		inc	dx
		cmp	dx, [bp+var_A]
		jbe	short loc_A03

loc_9D8:
		push	ds
		push	offset dest
		push	di
		call	sub_7D8
		mov	si, ax
		mov	dest, 0
		mov	word_E28E, 0
		mov	src, 0
		or	si, si
		jge	short loc_9FA
		jmp	loc_BC8
; ---------------------------------------------------------------------------

loc_9FA:
		cmp	si, bdata@
		jle	short loc_A03
		jmp	loc_BC8
; ---------------------------------------------------------------------------

loc_A03:
		cmp	dest, 0
		jz	short loc_A0D
		jmp	loc_A91
; ---------------------------------------------------------------------------

loc_A0D:
		les	bx, [bp+arg_2]
		mov	ax, es:[bx]
		mov	bdata@, ax
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; src
		push	ds
		push	offset dest	; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset dest	; s
		call	_strlen
		add	sp, 4
		mov	maxlen,	ax
		push	ds
		push	offset dest	; s
		call	_strlen
		add	sp, 4
		add	ax, 90h	; 'ê'
		mov	word_E28E, ds
		mov	src, ax
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s
		call	_strlen
		add	sp, 4
		mov	word_E292, ax
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		cmp	word_F4F0, 0
		jnz	short loc_A70
		jmp	loc_BCD
; ---------------------------------------------------------------------------

loc_A70:
		call	sub_448A
		push	dx
		push	ax		; src
		push	ds
		push	offset byte_102F4 ; dest
		call	_strcpy
		add	sp, 8
		push	0		; attribute
		push	ds
		push	offset byte_102F4 ; path
		call	__creat
		add	sp, 6
		mov	word_E29C, ax
		jmp	loc_BCD
; ---------------------------------------------------------------------------

loc_A91:
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s
		call	_strlen
		add	sp, 4
		cmp	ax, maxlen
		jnb	short loc_AA8
		mov	ax, maxlen
		jmp	short loc_AB4
; ---------------------------------------------------------------------------

loc_AA8:
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s
		call	_strlen
		add	sp, 4

loc_AB4:
		push	ax		; maxlen
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s2
		push	ds
		push	offset dest	; s1
		call	_strncmp
		add	sp, 0Ah
		or	ax, ax
		jnz	short loc_B08
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s
		call	_strlen
		add	sp, 4
		cmp	ax, word_E292
		jnb	short loc_AE0
		mov	ax, word_E292
		jmp	short loc_AEC
; ---------------------------------------------------------------------------

loc_AE0:
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s
		call	_strlen
		add	sp, 4

loc_AEC:
		push	ax		; maxlen
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s2
		push	word_E28E
		push	src		; s1
		call	_strncmp
		add	sp, 0Ah
		or	ax, ax
		jnz	short loc_B08
		jmp	loc_BCD
; ---------------------------------------------------------------------------

loc_B08:
		cmp	dest, 0
		jnz	short loc_B12
		jmp	loc_BCD
; ---------------------------------------------------------------------------

loc_B12:
		cmp	word_E29C, 0FFFFh
		jnz	short loc_B65
		push	ds
		push	offset dest
		push	di
		call	sub_7D8
		mov	si, ax
		or	si, si
		jge	short loc_B2A
		jmp	loc_BC8
; ---------------------------------------------------------------------------

loc_B2A:
		cmp	si, bdata@
		jle	short loc_B33
		jmp	loc_BC8
; ---------------------------------------------------------------------------

loc_B33:
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; src
		push	ds
		push	offset dest	; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; src
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		jmp	short loc_BAD
; ---------------------------------------------------------------------------

loc_B65:
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; src
		push	ds
		push	offset dest	; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset a@	; "@"
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset byte_102F4 ; src
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	(offset	aS+3)	; src
		push	ds
		push	offset dest	; dest
		call	_strcat
		add	sp, 8
		push	word_E29C	; handle
		call	_close
		pop	cx
		mov	word_E29C, 0FFFFh

loc_BAD:
		push	ds
		push	offset dest
		push	di
		call	sub_7D8
		mov	si, ax
		mov	dest, 0
		mov	word_E28E, 0
		mov	src, 0

loc_BC8:
		mov	ax, si
		jmp	loc_C79
; ---------------------------------------------------------------------------

loc_BCD:
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; s
		call	_strlen
		add	sp, 4
		mov	si, ax
		cmp	word_E29C, 0FFFFh
		jnz	short loc_C31
		push	word_E28E
		push	src		; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; n
		push	word_E28E
		push	src		; src
		mov	ax, src
		add	ax, si
		push	word_E28E
		push	ax		; dest
		call	_memmove
		add	sp, 0Ah
		push	si		; maxlen
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; src
		push	word_E28E
		push	src		; dest
		call	_strncpy
		add	sp, 0Ah
		mov	dx, word_E28E
		mov	ax, src
		add	ax, si
		mov	word_E28E, dx
		mov	src, ax
		jmp	short loc_C77
; ---------------------------------------------------------------------------

loc_C31:
		push	si
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	word_E29C
		call	j____write
		add	sp, 8
		cmp	ax, si
		jz	short loc_C54
		push	ds
		push	offset byte_102F4
		push	ds
		push	offset aWriteErrorOnFi ; "Write	error on file %s.\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_C54:
		push	1
		push	ds
		push	(offset	aS+3)
		push	word_E29C
		call	j____write
		add	sp, 8
		cmp	ax, 1
		jz	short loc_C77
		push	ds
		push	offset byte_102F4
		push	ds
		push	offset aWriteErrorOnFi ; "Write	error on file %s.\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_C77:
		xor	ax, ax

loc_C79:
		pop	di
		pop	si
		leave
		retn	0Ah
sub_88B		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C7F		proc near

var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch
arg_C		= word ptr  10h
arg_E		= word ptr  12h

		enter	6, 0
		push	si
		mov	dx, [bp+arg_E]
		mov	ax, [bp+arg_C]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		xor	si, si
		les	bx, [bp+arg_4]
		mov	ax, word_F506
		mov	es:[bx], ax
		les	bx, [bp+arg_8]
		mov	word ptr es:[bx], 0
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 0
		jmp	loc_D48
; ---------------------------------------------------------------------------

loc_CAE:
		inc	word ptr [bp+var_4]

loc_CB1:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_CAE
		mov	al, es:[bx]
		cbw
		mov	[bp+var_6], ax
		mov	cx, 4		; switch 4 cases
		mov	bx, offset word_D78

loc_CC7:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_6]
		jz	short loc_CD6
		add	bx, 2
		loop	loc_CC7
		jmp	short loc_D45	; default
; ---------------------------------------------------------------------------

loc_CD6:
		jmp	word ptr cs:[bx+8] ; switch jump

loc_CDA:
		inc	word ptr [bp+var_4] ; jumptable	00000CD6 case 64
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 1
		jmp	short loc_D48
; ---------------------------------------------------------------------------

loc_CE7:

		inc	word ptr [bp+var_4] ; jumptable	00000CD6 cases 33,38
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 1
		jmp	short loc_D48
; ---------------------------------------------------------------------------

loc_CF4:

		inc	word ptr [bp+var_4] ; jumptable	00000CD6 case 45
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		mov	bx, ax
		test	byte ptr [bx+1D69h], 2
		jz	short loc_D3B
		jmp	short loc_D29
; ---------------------------------------------------------------------------

loc_D09:
		les	bx, [bp+arg_8]
		mov	ax, es:[bx]
		imul	ax, 0Ah
		les	bx, [bp+var_4]
		push	ax
		mov	al, es:[bx]
		cbw
		pop	dx
		add	dx, ax
		add	dx, 0FFD0h
		les	bx, [bp+arg_8]
		mov	es:[bx], dx
		inc	word ptr [bp+var_4]

loc_D29:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		mov	bx, ax
		test	byte ptr [bx+1D69h], 2
		jnz	short loc_D09
		jmp	short loc_D48
; ---------------------------------------------------------------------------

loc_D3B:
		les	bx, [bp+arg_8]
		mov	word ptr es:[bx], 7FFFh
		jmp	short loc_D48
; ---------------------------------------------------------------------------

loc_D45:
		mov	si, 1		; default

loc_D48:
		or	si, si
		jnz	short loc_D4F
		jmp	loc_CB1
; ---------------------------------------------------------------------------

loc_D4F:
		cmp	word_F4F6, 0
		jz	short loc_D63
		les	bx, [bp+arg_8]
		mov	word ptr es:[bx], 7FFFh
		jmp	short loc_D63
; ---------------------------------------------------------------------------

loc_D60:
		inc	word ptr [bp+var_4]

loc_D63:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_D60
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		pop	si
		leave
		retn	10h
sub_C7F		endp

; ---------------------------------------------------------------------------
		db  0
word_D78	dw    21h,   26h,   2Dh,   40h
					; value	table for switch statement
		dw offset loc_CE7	; jump table for switch	statement
		dw offset loc_CE7
		dw offset loc_CF4
		dw offset loc_CDA

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_D88(int, char *path, __int32, char *src)
sub_D88		proc near

@@dest		= byte ptr -6Eh
var_1E		= word ptr -1Eh
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= dword	ptr -16h
block		= dword	ptr -12h
var_E		= word ptr -0Eh
var_C		= dword	ptr -0Ch
var_6		= word ptr -6
@@s		= dword	ptr -4
arg_0		= word ptr  4
@@path		= dword	ptr  6
arg_6		= dword	ptr  0Ah
@@src		= dword	ptr  0Eh

		enter	6Eh, 0
		push	si
		push	di
		mov	word ptr [bp+@@s+2], ds
		mov	word ptr [bp+@@s], 475Ah
		mov	dx, word ptr [bp+arg_6+2]
		mov	ax, word ptr [bp+arg_6]
		mov	[bp-8],	dx
		mov	word ptr [bp+var_C+2], ax
		mov	word ptr [bp+var_C], 0
		xor	di, di
		mov	word ptr dword_E296+2, dx
		mov	word ptr dword_E296, ax
		or	ax, word ptr [bp+arg_6+2]
		jnz	short loc_DB8
		jmp	loc_10AD
; ---------------------------------------------------------------------------

loc_DB8:
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; dest
		call	_strcpy
		add	sp, 8

loc_DC9:
		cmp	word_F4FC, 0
		jz	short loc_DD7
		cmp	word_F50C, 0
		jz	short loc_DEA

loc_DD7:
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch]
		push	ss
		lea	ax, [bp+@@dest]
		push	ax
		call	sub_672

loc_DEA:
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+0Ah] ; int
		push	word ptr es:[bx+8] ; int
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; src
		call	sub_6C4D
		mov	[bp+var_E], 0
		push	ds
		push	offset byte_1285A
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		call	sub_C7F
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		mov	ax, word ptr [bp+var_C]
		mov	word_E29A, ax
		push	1		; c
		push	dx
		push	word ptr [bp+@@s]	; s
		call	_strchr
		add	sp, 6
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	2		; c
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strchr
		add	sp, 6
		mov	word ptr [bp+var_16+2],	dx
		mov	word ptr [bp+var_16], ax
		mov	[bp+var_1C], 0
		mov	[bp+var_1E], 0
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jnz	short loc_E5F
		jmp	loc_FFA
; ---------------------------------------------------------------------------

loc_E5F:
		mov	ax, word ptr [bp+var_16]
		or	ax, word ptr [bp+var_16+2]
		jnz	short loc_E6A
		jmp	loc_FFA
; ---------------------------------------------------------------------------

loc_E6A:
		cmp	[bp+var_E], 0
		jnz	short loc_E73
		jmp	loc_FFA
; ---------------------------------------------------------------------------

loc_E73:
		les	bx, [bp+block]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+var_16]
		mov	byte ptr es:[bx], 0
		mov	ax, word ptr [bp+block]
		inc	ax
		push	word ptr [bp+block+2]
		push	ax		; s
		call	sub_894C
		mov	[bp+var_1C], dx
		mov	[bp+var_1E], ax
		mov	ax, word ptr [bp+var_16]
		inc	ax
		push	word ptr [bp+var_16+2]
		push	ax		; s
		call	sub_894C
		mov	word ptr [bp+var_16+2],	dx
		mov	word ptr [bp+var_16], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		mov	dx, [bp+var_1C]
		mov	ax, [bp+var_1E]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	loc_FAA
; ---------------------------------------------------------------------------

loc_EC1:
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	[bp+var_18], dx
		mov	[bp+var_1A], ax

loc_ECD:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 0
		jz	short loc_EE2
		mov	bx, word ptr [bp+@@s]
		inc	word ptr [bp+@@s]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_ECD

loc_EE2:
		les	bx, [bp+@@s]
		mov	byte ptr es:[bx-1], 0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		push	[bp+var_18]
		push	[bp+var_1A]	; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcat
		add	sp, 8
		push	word ptr [bp+var_16+2]
		push	word ptr [bp+var_16] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcat
		add	sp, 8

loc_F1A:
		push	ds
		push	offset byte_1285A ; s2
		push	ss
		lea	ax, [bp+var_C]
		push	ax		; __int32
		push	[bp+var_6]	; int
		call	sub_88B
		mov	si, ax
		cmp	ax, 0FFFFh
		jnz	short loc_F3F
		push	ds
		push	offset byte_1285A
		push	[bp+var_6]
		call	sub_7D8
		mov	si, ax
		mov	di, 1

loc_F3F:
		or	si, si
		jl	short loc_F48
		cmp	si, word ptr [bp+var_C]
		jle	short loc_FAA

loc_F48:
		cmp	word_F50C, 0
		jz	short loc_F76
		cmp	word_F50E, 0
		jz	short loc_F7E
		jmp	short loc_F76
; ---------------------------------------------------------------------------

loc_F58:
		les	bx, [bp+var_C+2]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch]
		call	sub_74A
		les	bx, [bp+var_C+2]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	[bp-8],	dx
		mov	word ptr [bp+var_C+2], ax

loc_F76:
		mov	ax, word ptr [bp+var_C+2]
		or	ax, [bp-8]
		jnz	short loc_F58

loc_F7E:
		or	di, di
		jz	short loc_FA5
		cmp	[bp+arg_0], 0
		jnz	short loc_FA5
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	_unlink
		add	sp, 4
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	si
		push	ds
		push	offset aErrorDDeleting ; "\n** error %d	** deleting %s\n"
		call	sub_8E0F
		add	sp, 0Ah

loc_FA5:
		push	1		; status
		call	sub_8E01
; ---------------------------------------------------------------------------

loc_FAA:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 0
		jz	short loc_FBC
		cmp	[bp+var_E], 0
		jz	short loc_FBC
		jmp	loc_EC1
; ---------------------------------------------------------------------------

loc_FBC:
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jz	short loc_FD0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4

loc_FD0:
		mov	ax, word ptr [bp+var_16]
		or	ax, word ptr [bp+var_16+2]
		jz	short loc_FE4
		push	word ptr [bp+var_16+2]
		push	word ptr [bp+var_16] ; block
		call	_farfree
		add	sp, 4

loc_FE4:
		mov	ax, [bp+var_1E]
		or	ax, [bp+var_1C]
		jz	short loc_1060
		push	[bp+var_1C]
		push	[bp+var_1E]	; block
		call	_farfree
		add	sp, 4
		jmp	short loc_1060
; ---------------------------------------------------------------------------

loc_FFA:
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jz	short loc_1013
		les	bx, [bp+block]
		mov	byte ptr es:[bx], 20h ;	' '
		mov	word ptr [bp+block+2], 0
		mov	word ptr [bp+block], 0

loc_1013:
		mov	ax, word ptr [bp+var_16]
		or	ax, word ptr [bp+var_16+2]
		jz	short loc_102C
		les	bx, [bp+var_16]
		mov	byte ptr es:[bx], 20h ;	' '
		mov	word ptr [bp+var_16+2],	0
		mov	word ptr [bp+var_16], 0

loc_102C:
		mov	ax, ds
		cmp	word ptr [bp+@@s+2], ax
		jnz	short loc_103A
		cmp	word ptr [bp+@@s], 475Ah
		jz	short loc_1058

loc_103A:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; n
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	ds
		push	offset byte_1285A ; dest
		call	_memmove
		add	sp, 0Ah

loc_1058:
		mov	[bp+var_E], 0
		jmp	loc_F1A
; ---------------------------------------------------------------------------

loc_1060:
		les	bx, [bp+arg_6]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr [bp+arg_6+2], dx
		mov	word ptr [bp+arg_6], ax
		or	ax, dx
		jz	short loc_1077
		jmp	loc_DC9
; ---------------------------------------------------------------------------

loc_1077:
		cmp	word_F50C, 0
		jz	short loc_10A5
		cmp	word_F50E, 0
		jz	short loc_10AD
		jmp	short loc_10A5
; ---------------------------------------------------------------------------

loc_1087:
		les	bx, [bp+var_C+2]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch]
		call	sub_74A
		les	bx, [bp+var_C+2]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	[bp-8],	dx
		mov	word ptr [bp+var_C+2], ax

loc_10A5:
		mov	ax, word ptr [bp+var_C+2]
		or	ax, [bp-8]
		jnz	short loc_1087

loc_10AD:
		pop	di
		pop	si
		leave
		retn	0Eh
sub_D88		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10B3	proc near

var_E		= dword	ptr -0Eh
@@s2		= byte ptr -0Ah
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		enter	0Eh, 0
		push	0
		push	0		; __int32
		push	ss
		lea	ax, [bp+@@s2]
		push	ax		; __int32
		push	0
		push	0		; __int32
		push	0
		push	0		; __int32
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		push	ss
		lea	ax, [bp+@@s2]
		push	ax		; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	loc_1196
; ---------------------------------------------------------------------------

loc_10F5:
		les	bx, [bp+var_E]
		les	bx, es:[bx+4]
		mov	ax, es:[bx+18h]
		or	ax, es:[bx+1Ah]
		jnz	short loc_1109
		jmp	loc_118C
; ---------------------------------------------------------------------------

loc_1109:
		les	bx, [bp+arg_0]
		les	bx, es:[bx+0Ch]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s2
		les	bx, [bp+var_E]
		les	bx, es:[bx+4]
		les	bx, es:[bx+18h]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_118C
		push	0
		push	0		; __int32
		push	ss
		lea	ax, [bp+@@s2]
		push	ax		; __int32
		push	0
		push	0		; __int32
		push	0
		push	0		; __int32
		les	bx, [bp+var_E]
		les	bx, es:[bx+4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		push	ss
		lea	ax, [bp+@@s2]
		push	ax		; s2
		push	ds
		push	offset byte_1385A ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_118C
		les	bx, [bp+var_E]
		les	bx, es:[bx+4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		mov	dx, ds
		mov	ax, 575Ah
		leave
		retn	8
; ---------------------------------------------------------------------------

loc_118C:
		les	bx, [bp+var_E]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_1196:
		mov	word ptr [bp+var_E+2], dx
		mov	word ptr [bp+var_E], ax
		mov	ax, word ptr [bp+var_E]
		or	ax, word ptr [bp+var_E+2]
		jz	short loc_11A7
		jmp	loc_10F5
; ---------------------------------------------------------------------------

loc_11A7:
		xor	dx, dx
		xor	ax, ax
		leave
		retn	8
sub_10B3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11AF	proc near

var_5C		= dword	ptr -5Ch
@@dest		= byte ptr -1Ah
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
@@src		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		enter	5Ch, 0
		push	0
		push	0		; __int32
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_5C]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32
		les	bx, [bp+arg_8]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		les	bx, [bp+arg_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_11EF
		push	ds
		push	offset a_	; "."
		push	ss
		lea	ax, [bp+@@dest]
		push	ax
		push	word ptr [bp+arg_4+2]
		push	bx
		jmp	loc_12E3
; ---------------------------------------------------------------------------

loc_11EF:
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_120F
		les	bx, [bp+arg_0]
		les	bx, es:[bx+0Ch]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jnz	short loc_120F
		jmp	loc_12A7
; ---------------------------------------------------------------------------

loc_120F:
		push	ds
		push	offset a_	; "."
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; dest
		call	_strcat
		add	sp, 8
		les	bx, [bp+arg_0]
		les	bx, es:[bx+0Ch]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; dest
		call	_strcat
		add	sp, 8
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 0
		jz	short loc_124F
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		jmp	short loc_125E
; ---------------------------------------------------------------------------

loc_124F:
		les	bx, [bp+arg_0]
		les	bx, es:[bx+0Ch]
		mov	dx, es:[bx+0Eh]
		mov	ax, es:[bx+0Ch]

loc_125E:
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		push	ss
		lea	ax, [bp+@@dest]
		push	ax
		push	[bp+var_A]
		push	[bp+var_C]
		push	0
		call	sub_1689
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		or	ax, word ptr [bp+@@src+2]
		jnz	short loc_1295
		push	ss
		lea	ax, [bp+@@dest]
		push	ax
		push	[bp+var_A]
		push	[bp+var_C]
		push	1
		call	sub_1689
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_1295:
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		jmp	short loc_131E
; ---------------------------------------------------------------------------

loc_12A7:
		les	bx, [bp+arg_8]
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jz	short loc_12C5
		push	word ptr [bp+arg_8+2]
		push	bx
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		call	sub_10B3
		or	ax, dx
		jnz	short loc_131E

loc_12C5:
		les	bx, [bp+arg_8]
		cmp	byte ptr es:[bx+23h], 0
		jnz	short loc_12D6
		cmp	word_F50E, 0
		jz	short loc_12E9

loc_12D6:
		push	ds
		push	offset a_	; "."
		push	ss
		lea	ax, [bp+@@dest]
		push	ax
		push	ds
		push	(offset	aObj+3)

loc_12E3:
		push	ds
		push	(offset	aObj+3)
		jmp	short loc_12FC
; ---------------------------------------------------------------------------

loc_12E9:
		push	ds		; int
		push	offset a_	; "."
		push	ss		; int
		lea	ax, [bp+@@dest]
		push	ax		; int
		push	ss
		lea	ax, [bp+var_5C]
		push	ax		; src
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32

loc_12FC:
		push	ds
		push	offset byte_1385A ; dest
		call	sub_9247
		add	sp, 14h
		les	bx, [bp+arg_0]
		les	bx, es:[bx+0Ch]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcat
		add	sp, 8

loc_131E:
		mov	dx, ds
		mov	ax, 575Ah
		leave
		retn	0Ch
sub_11AF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1327	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  4
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= dword	ptr  0Ch

		enter	4, 0
		les	bx, [bp+arg_0]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_138A
		push	ds
		push	offset a_	; "."
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_138A
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s
		call	_strlen
		add	sp, 4
		push	ax		; maxlen
		les	bx, [bp+arg_8]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s2
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s1
		call	_strnicmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_138A
		xor	dx, dx
		xor	ax, ax
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_138A:
		push	word ptr [bp+arg_8+2]
		push	word ptr [bp+arg_8]
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		call	sub_11AF
		push	dx
		push	ax		; s
		call	sub_894C
		push	dx
		push	ax		; s
		push	word ptr off_E3C0+2
		push	word ptr off_E3C0	; s2
		push	word ptr off_E3C0+2
		push	word ptr off_E3C0	; __int32
		push	0		; int
		call	sub_2BB1
		push	dx
		push	ax
		push	1
		call	sub_263
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	dx, [bp+var_2]
		leave
		retn	0Ch
sub_1327	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_13CF(char *path)
sub_13CF	proc near

@@dest		= byte ptr -0DCh
var_8C		= byte ptr -8Ch
var_8B		= byte ptr -8Bh
var_88		= byte ptr -88h
var_87		= word ptr -87h
var_85		= word ptr -85h
var_83		= byte ptr -83h
@@src		= byte ptr -82h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
@@path		= dword	ptr  4

		enter	0DCh, 0
		push	si
		push	di
		mov	di, 0FFFFh
		push	0		; oflags
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	__open
		add	sp, 6
		mov	si, ax
		or	si, si
		jge	short loc_13EF
		jmp	loc_150C
; ---------------------------------------------------------------------------

loc_13EF:
		mov	word ptr [bp+var_8], 0
		push	si		; handle
		push	ss
		lea	ax, [bp+var_8C]
		push	ax		; dest
		push	ss
		lea	ax, [bp+var_8]
		push	ax		; __int32
		call	sub_15FD
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 80h	; 'Ä'
		jnz	short loc_1410
		jmp	loc_14E5
; ---------------------------------------------------------------------------

loc_1410:
		push	si		; handle
		call	__close
		pop	cx
		jmp	loc_150C
; ---------------------------------------------------------------------------

loc_1418:
		cmp	[bp+var_2], 88h	; 'à'
		jz	short loc_1422
		jmp	loc_14E5
; ---------------------------------------------------------------------------

loc_1422:
		cmp	[bp+var_88], 0E9h ; 'È'
		jz	short loc_142C
		jmp	loc_14E5
; ---------------------------------------------------------------------------

loc_142C:
		cmp	[bp+var_8B], 3
		jnz	short loc_1441
		cmp	di, 0FFFFh
		jz	short loc_143B
		jmp	loc_1507
; ---------------------------------------------------------------------------

loc_143B:
		mov	di, 1
		jmp	loc_14E5
; ---------------------------------------------------------------------------

loc_1441:
		cmp	di, 0FFFFh
		jnz	short loc_1448
		xor	di, di

loc_1448:
		mov	al, [bp+var_83]
		mov	ah, 0
		push	ax		; n
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; src
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; dest
		call	_memmove
		add	sp, 0Ah
		mov	al, [bp+var_83]
		mov	ah, 0
		lea	dx, [bp+@@dest]
		add	ax, dx
		mov	bx, ax
		mov	byte ptr ss:[bx], 0
		cmp	word_F4F2, 0
		jz	short loc_14B7
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; s2
		call	sub_3363
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		or	ax, dx
		jz	short loc_1499
		les	bx, [bp+var_C]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		jmp	short loc_14C0
; ---------------------------------------------------------------------------

loc_1499:
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; path
		call	sub_5695
		mov	[bp+var_4], dx
		mov	word ptr [bp+var_8+2], ax
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; s
		push	dx		; int
		push	word ptr [bp+var_8+2] ;	int
		call	sub_32E9
		jmp	short loc_14C6
; ---------------------------------------------------------------------------

loc_14B7:
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; path
		call	sub_5695

loc_14C0:
		mov	[bp+var_4], dx
		mov	word ptr [bp+var_8+2], ax

loc_14C6:
		mov	dx, [bp+var_4]
		mov	ax, word ptr [bp+var_8+2]
		cmp	dx, [bp+var_85]
		jnz	short loc_14D8
		cmp	ax, [bp+var_87]
		jz	short loc_14E5

loc_14D8:
		push	si		; handle
		call	__close
		pop	cx
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		jmp	short loc_1510
; ---------------------------------------------------------------------------

loc_14E5:
		push	si		; handle
		push	ss
		lea	ax, [bp+var_8C]
		push	ax		; dest
		push	ss
		lea	ax, [bp+var_8]
		push	ax		; __int32
		call	sub_15FD
		mov	[bp+var_2], ax
		cmp	ax, 88h	; 'à'
		jnz	short loc_14FF
		jmp	loc_1418
; ---------------------------------------------------------------------------

loc_14FF:
		cmp	di, 1
		jnz	short loc_1507
		jmp	loc_1418
; ---------------------------------------------------------------------------

loc_1507:
		push	si		; handle
		call	__close
		pop	cx

loc_150C:
		xor	dx, dx
		xor	ax, ax

loc_1510:
		pop	di
		pop	si
		leave
		retn	4
sub_13CF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_1516(__int32, size_t n, void *dest,	int handle)
sub_1516	proc near

var_2		= word ptr -2
arg_0		= dword	ptr  4
n		= word ptr  8
@@dest		= dword	ptr  0Ah
@@handle		= word ptr  0Eh

		enter	2, 0
		push	si
		push	di
		mov	di, [bp+@@handle]
		mov	si, [bp+n]
		cmp	si, 400h
		jle	short loc_155E
		mov	ax, word ptr [bp+@@dest]
		or	ax, word ptr [bp+@@dest+2]
		jnz	short loc_154E
		push	1		; fromwhere
		les	bx, [bp+arg_0]
		mov	ax, si
		sub	ax, es:[bx]
		cwd
		push	dx
		push	ax		; offset
		push	di		; handle
		call	_lseek
		add	sp, 8
		or	dx, dx
		jg	short loc_1553
		jl	short loc_154E
		or	ax, ax
		jnb	short loc_1553

loc_154E:
		xor	ax, ax
		jmp	loc_15F7
; ---------------------------------------------------------------------------

loc_1553:
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 0
		jmp	loc_15F5
; ---------------------------------------------------------------------------

loc_155E:
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 0
		jz	short loc_156C
		cmp	es:[bx], si
		jge	short loc_15CE

loc_156C:
		mov	[bp+var_2], 0
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 0
		jz	short loc_1593
		mov	ax, es:[bx]
		mov	[bp+var_2], ax
		push	ax		; n
		push	word_10242
		push	off_10240	; src
		push	ds
		push	offset byte_1285A ; dest
		call	_memmove
		add	sp, 0Ah

loc_1593:
		les	bx, [bp+arg_0]
		mov	ax, 400h
		sub	ax, es:[bx]
		push	ax		; len
		push	ds
		mov	ax, es:[bx]
		add	ax, 475Ah
		push	ax		; buf
		push	di		; handle
		call	__read
		add	sp, 8
		les	bx, [bp+arg_0]
		mov	es:[bx], ax
		cmp	word ptr es:[bx], 0
		jle	short loc_154E
		mov	word_10242, ds
		mov	off_10240, 475Ah
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		add	ax, [bp+var_2]
		mov	es:[bx], ax

loc_15CE:
		les	bx, [bp+arg_0]
		sub	es:[bx], si
		mov	ax, word ptr [bp+@@dest]
		or	ax, word ptr [bp+@@dest+2]
		jz	short loc_15F1
		push	si		; n
		push	word_10242
		push	off_10240	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_memmove
		add	sp, 0Ah

loc_15F1:
		add	off_10240, si

loc_15F5:
		mov	ax, si

loc_15F7:
		pop	di
		pop	si
		leave
		retn	0Ch
sub_1516	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_15FD(__int32, void *dest, int handle)
sub_15FD	proc near

arg_0		= dword	ptr  4
@@dest		= dword	ptr  8
@@handle		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+@@handle]
		push	di		; handle
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		push	3		; n
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	sub_1516
		cmp	ax, 3
		jnz	short loc_1677
		les	bx, [bp+@@dest]
		mov	si, es:[bx+1]
		cmp	si, 7Dh	; '}'
		jle	short loc_165E
		push	di		; handle
		mov	ax, word ptr [bp+@@dest]
		add	ax, 3
		push	word ptr [bp+@@dest+2]
		push	ax		; dest
		push	7Dh ; '}'       ; n
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	sub_1516
		cmp	ax, 7Dh	; '}'
		jnz	short loc_1677
		push	di		; handle
		push	0
		push	0		; dest
		lea	ax, [si-7Dh]
		push	ax		; n
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	sub_1516
		lea	dx, [si-7Dh]
		cmp	ax, dx
		jz	short loc_167B
		jmp	short loc_1677
; ---------------------------------------------------------------------------

loc_165E:
		push	di		; handle
		mov	ax, word ptr [bp+@@dest]
		add	ax, 3
		push	word ptr [bp+@@dest+2]
		push	ax		; dest
		push	si		; n
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	sub_1516
		cmp	ax, si
		jz	short loc_167B

loc_1677:
		xor	ax, ax
		jmp	short loc_1683
; ---------------------------------------------------------------------------

loc_167B:
		les	bx, [bp+@@dest]
		mov	al, es:[bx]
		mov	ah, 0

loc_1683:
		pop	di
		pop	si
		pop	bp
		retn	0Ah
sub_15FD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1689	proc near

@@src		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= word ptr  0Ch

		enter	8, 0
		push	si
		mov	si, 4Fh	; 'O'
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_169D:
		mov	dx, word ptr [bp+@@src+2]
		mov	ax, word ptr [bp+@@src]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_16AE
; ---------------------------------------------------------------------------

loc_16AB:
		inc	word ptr [bp+var_4]

loc_16AE:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_16BD
		cmp	byte ptr es:[bx], 3Bh ;	';'
		jnz	short loc_16AB

loc_16BD:
		mov	ax, word ptr [bp+var_4]
		xor	dx, dx
		sub	ax, word ptr [bp+@@src]
		sbb	dx, 0
		push	ax		; n
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset byte_12708 ; dest
		call	_memmove
		add	sp, 0Ah
		mov	bx, word ptr [bp+var_4]
		xor	ax, ax
		sub	bx, word ptr [bp+@@src]
		sbb	ax, 0
		mov	byte ptr [bx+4608h], 0
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Bh ;	';'
		jnz	short loc_1701
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		jmp	short loc_170D
; ---------------------------------------------------------------------------

loc_1701:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_170D:
		push	ds
		push	offset byte_12708 ; s
		call	_strlen
		add	sp, 4
		add	ax, 4607h
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], ax
		cmp	word ptr [bp+var_4], 4608h
		jb	short loc_1748
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jz	short loc_1748
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jz	short loc_1748
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jz	short loc_1748
		push	si		; int
		push	ds
		push	offset byte_12708 ; dest
		push	ds
		push	offset asc_E2AD	; "\\"
		call	sub_5DA2

loc_1748:
		push	si		; int
		push	ds
		push	offset byte_12708 ; dest
		push	[bp+arg_8]
		push	[bp+arg_6]	; src
		call	sub_5DA2
		cmp	[bp+arg_0], 0
		jnz	short loc_176D
		push	0		; amode
		push	ds
		push	offset byte_12708 ; path
		call	_access
		add	sp, 6
		cmp	ax, 0FFFFh
		jz	short loc_177E

loc_176D:
		mov	ax, ds
		mov	dx, 4608h
		push	dx
		mov	word ptr [bp+@@src+2], ax
		mov	dx, ax
		pop	ax
		mov	word ptr [bp+@@src], ax
		jmp	short loc_178E
; ---------------------------------------------------------------------------

loc_177E:
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx], 0
		jz	short loc_178A
		jmp	loc_169D
; ---------------------------------------------------------------------------

loc_178A:
		xor	dx, dx
		xor	ax, ax

loc_178E:
		pop	si
		leave
		retn	0Ah
sub_1689	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1793	proc near

var_14		= word ptr -14h
var_12		= word ptr -12h
@@src		= dword	ptr -10h
var_C		= dword	ptr -0Ch
@@s		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  4

		enter	14h, 0
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	ds
		push	offset byte_10292 ; __int32
		push	ds
		push	offset byte_10289 ; __int32
		push	ds
		push	offset byte_10247 ; __int32
		push	ds
		push	offset byte_10244 ; __int32
		push	dx
		push	ax		; src
		call	sub_90B3
		add	sp, 14h
		cmp	byte_10247, 0
		jz	short loc_17C9
		jmp	locret_1937
; ---------------------------------------------------------------------------

loc_17C9:
		cmp	byte_10244, 0
		jz	short loc_17D3
		jmp	locret_1937
; ---------------------------------------------------------------------------

loc_17D3:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+18h]
		or	ax, es:[bx+1Ah]
		jz	short loc_1851
		les	bx, es:[bx+18h]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jz	short loc_1851
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		les	bx, es:[bx+18h]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch]
		push	0
		call	sub_1689
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		or	ax, word ptr [bp+@@s+2]
		jnz	short loc_1835
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		les	bx, es:[bx+18h]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch]
		push	1
		call	sub_1689
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax

loc_1835:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	byte ptr es:[bx+23h], 1
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_1851:
		les	bx, [bp+arg_0]
		les	bx, es:[bx+8]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_1861
		jmp	locret_1937
; ---------------------------------------------------------------------------

loc_1861:
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_1872:
		mov	dx, word ptr [bp+@@src+2]
		mov	ax, word ptr [bp+@@src]
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		jmp	short loc_1883
; ---------------------------------------------------------------------------

loc_1880:
		inc	word ptr [bp+var_C]

loc_1883:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 3Bh ;	';'
		jz	short loc_1892
		cmp	byte ptr es:[bx], 0
		jnz	short loc_1880

loc_1892:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 0
		jz	short loc_18A2
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_C]

loc_18A2:
		push	ds		; int
		push	offset byte_10292 ; int
		push	ds		; int
		push	offset byte_10289 ; int
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset byte_10244 ; __int32
		push	ds
		push	offset byte_10297 ; dest
		call	sub_9247
		add	sp, 14h
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+2], ds
		mov	word ptr es:[bx], 2197h
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jz	short loc_18DE
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		jmp	short loc_18EB
; ---------------------------------------------------------------------------

loc_18DE:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_5695

loc_18EB:
		mov	[bp+var_12], dx
		mov	[bp+var_14], ax
		or	ax, [bp+var_12]
		jz	short loc_190B
		push	ds
		push	offset byte_10297 ; s
		call	sub_894C
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_190B:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_1928
		les	bx, [bp+arg_0]
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_1928:
		mov	dx, word ptr [bp+var_C+2]
		mov	ax, word ptr [bp+var_C]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		jmp	loc_1872
; ---------------------------------------------------------------------------

locret_1937:
		leave
		retn	4
sub_1793	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_193B	proc near

var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		enter	4, 0
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+22h], 0
		jnz	short loc_194C
		jmp	loc_19FC
; ---------------------------------------------------------------------------

loc_194C:
		cmp	byte ptr es:[bx+22h], 3
		jnz	short loc_1956
		jmp	locret_1A4D
; ---------------------------------------------------------------------------

loc_1956:
		push	ds
		push	offset aCircularDepend ; "Circular dependency exists in	makefile"
		call	sub_8D8E
		add	sp, 4
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aS_0	; "  %s"
		call	sub_8E0F
		add	sp, 8
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+22h], 3
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	short loc_1990
; ---------------------------------------------------------------------------

loc_1986:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_1990:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_19AC
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx+22h], 0
		jz	short loc_1986

loc_19AC:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_19B7
		jmp	locret_1A4D
; ---------------------------------------------------------------------------

loc_19B7:
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aS_1	; " -> %s"
		call	sub_8E0F
		add	sp, 8
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx+22h], 3
		jz	short loc_19EE
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	short loc_1990
; ---------------------------------------------------------------------------

loc_19EE:
		push	ds
		push	(offset	aS+3)
		call	sub_8E0F
		add	sp, 4
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_19FC:
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+22h], 1
		push	word ptr [bp+arg_0+2]
		push	bx
		call	sub_1793
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	short loc_1A30
; ---------------------------------------------------------------------------

loc_1A18:
		les	bx, [bp+var_4]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4]
		call	sub_193B
		les	bx, [bp+var_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_1A30:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_1A18
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+22h], 3
		jz	short locret_1A4D
		mov	byte ptr es:[bx+22h], 0

locret_1A4D:
		leave
		retn	4
sub_193B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1A51	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		enter	4, 0
		push	si
		mov	ax, [bp+arg_2]
		or	ax, [bp+arg_4]
		jnz	short loc_1A65
		xor	dx, dx
		xor	ax, ax
		jmp	loc_1AED
; ---------------------------------------------------------------------------

loc_1A65:
		push	[bp+arg_4]
		push	[bp+arg_2]
		call	sub_193B
		cmp	word_F502, 0
		jz	short loc_1A82
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]
		mov	word_102F2, dx
		mov	word_102F0, ax

loc_1A82:
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_263
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	ds
		push	offset asc_E2BB	; " "
		push	ds
		push	offset word_E29A ; __int32
		push	word_F506	; int
		call	sub_88B
		mov	si, ax
		or	si, si
		jl	short loc_1AAF
		cmp	si, word_E29A
		jle	short loc_1AE7

loc_1AAF:
		cmp	si, 0FFFFh
		jz	short loc_1AE7
		les	bx, dword_102E8
		cmp	byte ptr es:[bx+24h], 0
		jnz	short loc_1AE2
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	_unlink
		add	sp, 4
		les	bx, dword_102E8
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	si
		push	ds
		push	offset aErrorDDeleting ; "\n** error %d	** deleting %s\n"
		call	sub_8E0F
		add	sp, 0Ah

loc_1AE2:
		push	1		; status
		call	sub_8E01
; ---------------------------------------------------------------------------

loc_1AE7:
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]

loc_1AED:
		pop	si
		leave
		retn	6
sub_1A51	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1AF2	proc near

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		cmp	word_E29E, 0
		jnz	short loc_1B13
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		call	_strlen
		add	sp, 4
		mov	dx, 19h
		jmp	short loc_1B26
; ---------------------------------------------------------------------------

loc_1B13:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		call	_strlen
		add	sp, 4
		mov	dx, 17h

loc_1B26:
		sub	dx, ax
		mov	si, dx
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jnz	short loc_1B44
		push	ds
		push	offset asc_E2BD	; "  "
		call	sub_8E0F
		add	sp, 4
		sub	si, 2

loc_1B44:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_5DE6
		push	dx
		push	ax		; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		cmp	word_E29E, 0
		jnz	short loc_1B80
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aS_0	; "  %s"
		call	sub_8E0F
		add	sp, 8
		mov	word_E29E, 1
		jmp	short loc_1B94
; ---------------------------------------------------------------------------

loc_1B80:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aS_2	; "    %s"
		call	sub_8E0F
		add	sp, 8

loc_1B94:
		xor	di, di
		jmp	short loc_1BA3
; ---------------------------------------------------------------------------

loc_1B98:
		push	ds
		push	offset asc_E2BB	; " "
		call	sub_8E0F
		add	sp, 4
		inc	di

loc_1BA3:
		cmp	di, si
		jl	short loc_1B98
		cmp	byte_1385A, 0
		jz	short loc_1BB5
		mov	dx, ds
		mov	ax, 575Ah
		jmp	short loc_1BBA
; ---------------------------------------------------------------------------

loc_1BB5:
		mov	dx, ds
		mov	ax, 13AEh

loc_1BBA:
		push	dx
		push	ax
		push	ds
		push	(offset	aS+1)
		call	sub_8E0F
		add	sp, 8
		pop	di
		pop	si
		pop	bp
		retn	4
sub_1AF2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_1BCC(char *path)
sub_1BCC	proc near

@@path		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	0		; oflags
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	__open
		add	sp, 6
		mov	si, ax
		or	si, si
		jge	short loc_1BE8
		xor	ax, ax
		jmp	short loc_1C0E
; ---------------------------------------------------------------------------

loc_1BE8:
		mov	handle,	si
		mov	ax, ds
		mov	dx, 2252h
		mov	word ptr dword_1034A+2,	ax
		mov	word ptr dword_1034A, dx
		mov	word_10348, ax
		mov	word_10346, dx
		mov	word_10350, 0
		mov	_offset,	0
		mov	ax, 1

loc_1C0E:
		pop	si
		pop	bp
		retn	4
sub_1BCC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1C13	proc near
		push	bp
		mov	bp, sp
		push	1		; fromwhere
		push	0
		push	0		; offset
		push	handle		; handle
		call	_lseek
		add	sp, 8
		mov	bx, word_10346
		xor	cx, cx
		sub	bx, word ptr dword_1034A
		sbb	cx, 0
		sub	ax, bx
		sbb	dx, cx
		pop	bp
		retn
sub_1C13	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_1C39(__int32 offset, char *path)
sub_1C39	proc near

@@offset		= dword	ptr  4
@@path		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	0		; oflags
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	__open
		add	sp, 6
		mov	si, ax
		or	si, si
		jge	short loc_1C55
		xor	ax, ax
		jmp	short loc_1C85
; ---------------------------------------------------------------------------

loc_1C55:
		mov	handle,	si
		mov	ax, ds
		mov	dx, 2252h
		mov	word ptr dword_1034A+2,	ax
		mov	word ptr dword_1034A, dx
		mov	word_10348, ax
		mov	word_10346, dx
		push	0		; fromwhere
		push	word ptr [bp+@@offset+2]
		push	word ptr [bp+@@offset] ; offset
		push	si		; handle
		call	_lseek
		add	sp, 8
		mov	word_10350, dx
		mov	_offset,	ax
		mov	ax, 1

loc_1C85:
		pop	si
		pop	bp
		retn	8
sub_1C39	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1C8A	proc near
		push	bp
		mov	bp, sp
		push	handle		; handle
		call	__close
		pop	cx
		pop	bp
		retn
sub_1C8A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1C97	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, [bp+arg_0]
		cmp	si, 0FFFFh
		jz	short loc_1D1C
		dec	word ptr dword_1034A
		cmp	word ptr dword_1034A, 2252h
		jnb	short loc_1D13
		push	0		; fromwhere
		sub	_offset,	1
		mov	ax, _offset
		sbb	word_10350, 0
		mov	dx, word_10350
		push	dx
		push	ax		; offset
		push	handle		; handle
		call	_lseek
		add	sp, 8
		push	400h		; len
		push	ds
		push	offset byte_10352 ; buf
		push	handle		; handle
		call	__read
		add	sp, 8
		mov	di, ax
		or	di, di
		jle	short loc_1CE8
		jmp	short loc_1CFD
; ---------------------------------------------------------------------------

loc_1CE8:
		push	1B2h		; line
		push	ds
		push	offset aMakein_c	; "makein.c"
		push	ds
		push	offset cond	; "bytesRead > 0"
		push	ds
		push	offset msg	; "Assertion failed: %s, file %s, line %d\n"...
		call	___assertfail
; ---------------------------------------------------------------------------
		add	sp, 0Eh

loc_1CFD:
		mov	ax, di
		add	ax, 2252h
		mov	word_10348, ds
		mov	word_10346, ax
		mov	word ptr dword_1034A+2,	ds
		mov	word ptr dword_1034A, 2252h

loc_1D13:
		cmp	si, 0Ah
		jnz	short loc_1D1C
		dec	word_F652

loc_1D1C:
		pop	di
		pop	si
		pop	bp
		retn	2
sub_1C97	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1D22	proc near
		push	bp
		mov	bp, sp
		push	si

loc_1D26:
		mov	ax, word ptr dword_1034A
		cmp	ax, word_10346
		jb	short loc_1D6F
		mov	ax, word_10346
		xor	dx, dx
		sub	ax, 2252h
		sbb	dx, 0
		add	_offset,	ax
		adc	word_10350, dx
		push	400h		; len
		push	ds
		push	offset byte_10352 ; buf
		push	handle		; handle
		call	__read
		add	sp, 8
		mov	si, ax
		or	si, si
		jle	short loc_1D92
		mov	ax, si
		add	ax, 2252h
		mov	word_10348, ds
		mov	word_10346, ax
		mov	word ptr dword_1034A+2,	ds
		mov	word ptr dword_1034A, 2252h

loc_1D6F:
		les	bx, dword_1034A
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_1034A
		cmp	si, 0Dh
		jz	short loc_1D26
		cmp	si, 0Ah
		jnz	short loc_1D8D
		inc	word_F652
		jmp	short loc_1D97
; ---------------------------------------------------------------------------

loc_1D8D:
		cmp	si, 1Ah
		jnz	short loc_1D97

loc_1D92:
		mov	ax, 0FFFFh
		jmp	short loc_1D99
; ---------------------------------------------------------------------------

loc_1D97:
		mov	ax, si

loc_1D99:
		pop	si
		pop	bp
		retn
sub_1D22	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1D9C	proc near
		push	bp
		mov	bp, sp
		push	si

loc_1DA0:
		call	sub_1D22
		mov	si, ax
		cmp	si, 5Ch	; '\'
		jnz	short loc_1E15
		cmp	word_E2C8, 0
		jz	short loc_1DB4
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1DB4:
		call	sub_1D22
		mov	si, ax
		cmp	si, 3Fh	; '?'
		jnz	short loc_1DC1
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1DC1:
		cmp	si, 0Ah
		jz	short loc_1DA0
		cmp	si, 5Ch	; '\'
		jnz	short loc_1DCE
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1DCE:
		cmp	si, 20h	; ' '
		jz	short loc_1DE2
		cmp	si, 9
		jz	short loc_1DE2
		cmp	si, 0Bh
		jz	short loc_1DE2
		cmp	si, 0Ch
		jnz	short loc_1E0B

loc_1DE2:
		call	sub_1D22
		mov	si, ax
		cmp	si, 20h	; ' '
		jz	short loc_1DE2
		cmp	si, 0Bh
		jz	short loc_1DE2
		cmp	si, 0Ch
		jz	short loc_1DE2
		cmp	si, 9
		jz	short loc_1DE2
		cmp	si, 0Ah
		jz	short loc_1DA0
		push	si
		call	sub_1C97
		push	20h ; ' '
		call	sub_1C97
		jmp	short loc_1E0F
; ---------------------------------------------------------------------------

loc_1E0B:
		push	si
		call	sub_1C97

loc_1E0F:
		mov	ax, 5Ch	; '\'
		jmp	loc_1F05
; ---------------------------------------------------------------------------

loc_1E15:
		cmp	si, 20h	; ' '
		jz	short loc_1E29
		cmp	si, 9
		jz	short loc_1E29
		cmp	si, 0Bh
		jz	short loc_1E29
		cmp	si, 0Ch
		jnz	short loc_1E6F

loc_1E29:
		cmp	word_E2C8, 0
		jz	short loc_1E33
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1E33:
		call	sub_1D22
		mov	si, ax
		cmp	si, 20h	; ' '
		jz	short loc_1E33
		cmp	si, 0Bh
		jz	short loc_1E33
		cmp	si, 0Ch
		jz	short loc_1E33
		cmp	si, 9
		jz	short loc_1E33
		cmp	si, 23h	; '#'
		jz	short loc_1E60
		push	ax
		call	sub_1C97
		mov	ax, 20h	; ' '
		jmp	loc_1F05
; ---------------------------------------------------------------------------

loc_1E5B:
		call	sub_1D22
		mov	si, ax

loc_1E60:
		or	si, si
		jnz	short loc_1E67
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1E67:
		cmp	si, 0Ah
		jnz	short loc_1E5B
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1E6F:
		cmp	si, 23h	; '#'
		jnz	short loc_1EA6
		cmp	word_E2C8, 0
		jz	short loc_1E7E
		jmp	loc_1F03
; ---------------------------------------------------------------------------

loc_1E7E:
		cmp	word_E2C8, 0
		jz	short loc_1E88
		jmp	loc_1DA0
; ---------------------------------------------------------------------------

loc_1E88:
		jmp	short loc_1E8F
; ---------------------------------------------------------------------------

loc_1E8A:
		call	sub_1D22
		mov	si, ax

loc_1E8F:
		or	si, si
		jnz	short loc_1E96
		jmp	loc_1DA0
; ---------------------------------------------------------------------------

loc_1E96:
		cmp	si, 0Ah
		jnz	short loc_1E9E
		jmp	loc_1DA0
; ---------------------------------------------------------------------------

loc_1E9E:
		cmp	si, 0FFFFh
		jnz	short loc_1E8A
		jmp	loc_1DA0
; ---------------------------------------------------------------------------

loc_1EA6:
		cmp	si, 22h	; '"'
		jnz	short loc_1EBA
		cmp	word_E2C8, 0
		jnz	short loc_1EFD
		mov	word_E2C8, 1
		jmp	short loc_1F03
; ---------------------------------------------------------------------------

loc_1EBA:
		cmp	si, 5Eh	; '^'
		jnz	short loc_1EE0
		cmp	word_E2C8, 0
		jnz	short loc_1ECB
		call	sub_1D22
		mov	si, ax

loc_1ECB:
		cmp	si, 0Ah
		jnz	short loc_1F03
		push	0Dh
		call	sub_743F

loc_1ED5:
		push	si
		call	sub_743F
		call	sub_1D22
		mov	si, ax
		jmp	short loc_1F03
; ---------------------------------------------------------------------------

loc_1EE0:
		cmp	si, 25h	; '%'
		jnz	short loc_1EF8
		cmp	word_F50E, 0
		jz	short loc_1F03
		call	sub_1D22
		mov	si, ax
		cmp	si, 25h	; '%'
		jnz	short loc_1F03
		jmp	short loc_1ED5
; ---------------------------------------------------------------------------

loc_1EF8:
		cmp	si, 0Ah
		jnz	short loc_1F03

loc_1EFD:
		mov	word_E2C8, 0

loc_1F03:
		mov	ax, si

loc_1F05:
		pop	si
		pop	bp
		retn
sub_1D9C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl main(int argc, const char	**argv,	const char **envp)
_main		proc near

@@path		= dword	ptr -8
@@src		= dword	ptr -4
@@argc		= word ptr  4
@@argv		= dword	ptr  6
@@envp		= dword	ptr  0Ah

		enter	8, 0
		push	si
		push	di
		mov	si, [bp+@@argc]
		les	bx, [bp+@@argv]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		mov	dx, word ptr [bp+@@envp+2]
		mov	ax, word ptr [bp+@@envp]
		mov	word_10754, dx
		mov	env, ax
		call	sub_5D5D
		push	ds
		push	offset a__make__ ; "__MAKE__"
		push	ds
		push	offset a0x0400	; "0x0400"
		call	sub_27B4
		push	ds
		push	offset a__msdos__ ; "__MSDOS__"
		push	ds
		push	offset a1	; "1"
		call	sub_27B4
		cmp	word_F502, 0
		jnz	short loc_1F5C
		push	ds
		push	offset a4_0	; "4.0 "
		push	ds
		push	offset aMakeVersionSCo ; "MAKE Version %s Copyright (c)	1987, 199"...
		call	sub_8E0F
		add	sp, 8

loc_1F5C:
		push	si
		push	word ptr [bp+@@argv+2]
		push	word ptr [bp+@@argv]
		call	sub_860F
		push	word ptr [bp+@@argv+2]
		push	word ptr [bp+@@argv]
		call	sub_8C78
		cmp	word_F4E0, 0
		jz	short loc_1FEE
		call	sub_237C
; ---------------------------------------------------------------------------
		jmp	short loc_1FEE
; ---------------------------------------------------------------------------

loc_1F7B:
		les	bx, [bp+@@argv]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s
		call	_strlen
		add	sp, 4
		dec	ax
		les	bx, [bp+@@argv]
		mov	dx, es:[bx+6]
		add	ax, es:[bx+4]
		mov	bx, ax
		mov	es, dx
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jnz	short loc_1FBB
		les	bx, [bp+@@argv]
		mov	ax, es:[bx+8]
		or	ax, es:[bx+0Ah]
		jz	short loc_1FE9
		les	bx, es:[bx+8]
		cmp	byte ptr es:[bx], 2Dh ;	'-'
		jz	short loc_1FE9
		jmp	short loc_1FE4
; ---------------------------------------------------------------------------

loc_1FBB:
		les	bx, [bp+@@argv]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx+1], 66h	; 'f'
		jnz	short loc_1FE9
		les	bx, [bp+@@argv]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx+2], 0
		jnz	short loc_1FE9
		les	bx, [bp+@@argv]
		mov	ax, es:[bx+8]
		or	ax, es:[bx+0Ah]
		jz	short loc_1FE9

loc_1FE4:
		dec	si
		add	word ptr [bp+@@argv], 4

loc_1FE9:
		dec	si
		add	word ptr [bp+@@argv], 4

loc_1FEE:
		cmp	si, 1
		jle	short loc_2013
		les	bx, [bp+@@argv]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx], 2Dh ;	'-'
		jnz	short loc_2003
		jmp	loc_1F7B
; ---------------------------------------------------------------------------

loc_2003:
		les	bx, [bp+@@argv]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jnz	short loc_2013
		jmp	loc_1F7B
; ---------------------------------------------------------------------------

loc_2013:
		call	sub_29A2
		cmp	word_F504, 0
		jnz	short loc_2026
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		call	sub_21B1

loc_2026:
		push	word ptr off_E332+2
		push	word ptr off_E332	; path
		call	sub_1BCC
		or	ax, ax
		jz	short loc_2038
		jmp	loc_20BB
; ---------------------------------------------------------------------------

loc_2038:
		push	word ptr off_E332+2
		push	word ptr off_E332	; s
		call	_strlen
		add	sp, 4
		add	ax, 5
		push	ax		; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		push	ds
		push	offset a_mak	; ".mak"
		push	word ptr off_E332+2
		push	word ptr off_E332	; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	dx
		push	ax		; dest
		call	_strcat
		add	sp, 8
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	sub_1BCC
		or	ax, ax
		jnz	short loc_20AE
		mov	ax, ds
		cmp	word ptr off_E332+2, ax
		jnz	short loc_2094
		cmp	word ptr off_E332, 227h
		jnz	short loc_2094
		cmp	word_E336, 0
		jnz	short loc_20A0

loc_2094:
		push	ds
		push	offset aUnableToOpenMa ; "Unable to open makefile"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4
		jmp	short loc_20BB
; ---------------------------------------------------------------------------

loc_20A0:
		mov	word ptr off_E332+2, 0
		mov	word ptr off_E332, 0
		jmp	short loc_20BB
; ---------------------------------------------------------------------------

loc_20AE:
		mov	dx, word ptr [bp+@@path+2]
		mov	ax, word ptr [bp+@@path]
		mov	word ptr off_E332+2, dx
		mov	word ptr off_E332, ax

loc_20BB:
		mov	ax, word ptr off_E332
		or	ax, word ptr off_E332+2
		jz	short loc_20CF
		push	word ptr off_E332+2
		push	word ptr off_E332
		call	sub_33BC

loc_20CF:
		cmp	word_F510, 0
		jz	short loc_20F3
		mov	ax, word_E18E
		sub	ax, segx
		xor	dx, dx
		mov	cl, 4
		call	near ptr N_LXLSH@
		mov	bx, seg	seg000
		mov	es, bx
		assume es:seg000
		sub	ax, es:word_9AEE
		sbb	dx, 0
		jmp	short loc_20F6
; ---------------------------------------------------------------------------

loc_20F3:
		call	_farcoreleft

loc_20F6:
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		cmp	word_F502, 0
		jnz	short loc_2113
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	ds
		push	offset aAvailableMemor ; "\nAvailable memory %ld bytes\n\n"
		call	sub_8E0F
		add	sp, 8

loc_2113:
		cmp	word_F658, 0
		jz	short loc_212E
		push	word_F658
		push	ds
		push	offset aDErrorsDuringM ; "*** %d errors	during make ***\n"
		call	sub_8E0F
		add	sp, 6
		mov	ax, 1
		jmp	loc_21AD
; ---------------------------------------------------------------------------

loc_212E:
		cmp	si, 1
		jnz	short loc_217C
		cmp	word_F4FE, 0
		jz	short loc_213D
		call	sub_2470

loc_213D:
		mov	dx, word_10764
		mov	ax, word_10762
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		jmp	short loc_2172
; ---------------------------------------------------------------------------

loc_214C:
		les	bx, [bp+@@path]
		assume es:nothing
		test	byte ptr es:[bx+26h], 1
		jz	short loc_2161
		push	word ptr [bp+@@path+2]
		push	bx
		push	0
		call	sub_1A51
		jmp	short loc_21AB
; ---------------------------------------------------------------------------

loc_2161:
		les	bx, [bp+@@path]
		mov	dx, es:[bx+12h]
		mov	ax, es:[bx+10h]
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax

loc_2172:
		mov	ax, word ptr [bp+@@path]
		or	ax, word ptr [bp+@@path+2]
		jnz	short loc_214C
		jmp	short loc_21AB
; ---------------------------------------------------------------------------

loc_217C:
		mov	di, 1
		jmp	short loc_21A7
; ---------------------------------------------------------------------------

loc_2181:
		mov	ax, di
		inc	di
		shl	ax, 2
		les	bx, [bp+@@argv]
		add	bx, ax
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		push	ds
		push	(offset	a__make__+8) ; s2
		push	ds
		push	(offset	a__make__+8) ; __int32
		push	1		; int
		call	sub_2BB1
		push	dx
		push	ax
		push	0
		call	sub_1A51

loc_21A7:
		cmp	di, si
		jl	short loc_2181

loc_21AB:
		xor	ax, ax

loc_21AD:
		pop	di
		pop	si
		leave
		retn
_main		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_21B1(char *src)
sub_21B1	proc near

var_96		= dword	ptr -96h
@@path		= byte ptr -54h
var_4		= dword	ptr -4
@@src		= dword	ptr  4

		enter	96h, 0
		push	ds
		push	offset path	; "builtins.mak"
		call	sub_1BCC
		or	ax, ax
		jz	short loc_21C6
		push	ds
		push	offset path	; "builtins.mak"
		jmp	short loc_221B
; ---------------------------------------------------------------------------

loc_21C6:
		cmp	byte ptr word_E17C, 3
		jb	short locret_2224
		push	0
		push	0		; __int32
		push	0
		push	0		; __int32
		push	ss
		lea	ax, [bp+var_96]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		call	sub_90B3
		add	sp, 14h
		push	0		; int
		push	0		; int
		push	ds		; int
		push	offset path	; "builtins.mak"
		push	ss
		lea	ax, [bp+var_96]
		push	ax		; src
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+@@path]
		push	ax		; dest
		call	sub_9247
		add	sp, 14h
		push	ss
		lea	ax, [bp+@@path]
		push	ax		; path
		call	sub_1BCC
		or	ax, ax
		jz	short locret_2224
		push	ss
		lea	ax, [bp+@@path]
		push	ax

loc_221B:
		call	sub_33BC
		mov	word_E336, 1

locret_2224:
		leave
		retn	4
sub_21B1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_2228(__int32, int, int, char *s)
sub_2228	proc near

var_2		= word ptr -2
arg_0		= dword	ptr  4
@@src		= dword	ptr  8
@@s		= dword	ptr  0Ch

		enter	2, 0
		les	bx, [bp+@@s]
		inc	word ptr [bp+@@s]
		mov	al, es:[bx]
		cbw
		mov	[bp+var_2], ax
		mov	cx, 5		; switch 5 cases
		mov	bx, offset word_22CC

loc_223F:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_2]
		jz	short loc_224E
		add	bx, 2
		loop	loc_223F
		jmp	short locret_22C8 ; default
; ---------------------------------------------------------------------------

loc_224E:
		jmp	word ptr cs:[bx+0Ah] ; switch jump

loc_2252:
		push	word ptr [bp+@@s+2] ; jumptable 0000224E case 73
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		push	dx
		push	ax		; s
		call	sub_2A04

locret_2260:
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_2264:

		push	word ptr [bp+@@s+2] ; jumptable 0000224E case 100
		push	word ptr [bp+@@s]	; src
		call	sub_93D4
		jmp	short locret_2260
; ---------------------------------------------------------------------------

loc_226F:

		push	word ptr [bp+@@s+2] ; jumptable 0000224E case 68
		push	word ptr [bp+@@s]	; int
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	sub_22E0
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_2288:

		push	word ptr [bp+@@s+2] ; jumptable 0000224E case 85
		push	word ptr [bp+@@s]
		call	sub_28FE
		jmp	short locret_2260
; ---------------------------------------------------------------------------

loc_2293:

		les	bx, [bp+@@s]	; jumptable 0000224E case 102
		cmp	byte ptr es:[bx], 0
		jnz	short loc_22B8
		mov	ax, word ptr [bp+@@src]
		or	ax, word ptr [bp+@@src+2]
		jz	short loc_22B8
		mov	dx, word ptr [bp+@@src+2]
		mov	ax, word ptr [bp+@@src]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 1

loc_22B8:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		mov	word ptr off_E332+2, dx
		mov	word ptr off_E332, ax

locret_22C8:
		leave			; default
		retn	0Ch
sub_2228	endp

; ---------------------------------------------------------------------------
word_22CC	dw    44h,   49h,   55h,   64h
		dw    66h		; value	table for switch statement
		dw offset loc_226F	; jump table for switch	statement
		dw offset loc_2252
		dw offset loc_2288
		dw offset loc_2264
		dw offset loc_2293

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_22E0(__int32, char *src, int, int)
sub_22E0	proc near

var_4		= dword	ptr -4
arg_0		= dword	ptr  4
@@src		= dword	ptr  8
@@name		= dword	ptr  0Ch

		enter	4, 0
		mov	dx, word ptr [bp+@@name+2]
		mov	ax, word ptr [bp+@@name]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_2362
; ---------------------------------------------------------------------------

loc_22F2:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jnz	short loc_235F
		mov	byte ptr es:[bx], 0
		cmp	byte ptr es:[bx+1], 0
		jnz	short loc_2335
		mov	ax, word ptr [bp+@@src]
		or	ax, word ptr [bp+@@src+2]
		jz	short loc_2354
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		push	ds
		push	offset byte_1285A ; s1
		call	sub_27B4
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 1
		jmp	short loc_2354
; ---------------------------------------------------------------------------

loc_2335:
		mov	ax, word ptr [bp+var_4]
		inc	ax
		push	word ptr [bp+var_4+2]
		push	ax		; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		push	ds
		push	offset byte_1285A ; s1
		call	sub_27B4

loc_2354:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 3Dh ;	'='
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_235F:
		inc	word ptr [bp+var_4]

loc_2362:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_22F2
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		push	ds
		push	offset a1	; "1"
		call	sub_27B4
		leave
		retn	0Ch
sub_22E0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_237C	proc near
		push	bp
		mov	bp, sp
		cmp	word_F506, 0
		jz	short loc_238B
		mov	ax, 2Bh	; '+'
		jmp	short loc_238E
; ---------------------------------------------------------------------------

loc_238B:
		mov	ax, 20h	; ' '

loc_238E:
		push	ax
		cmp	word_F504, 0
		jz	short loc_239B
		mov	ax, 2Bh	; '+'
		jmp	short loc_239E
; ---------------------------------------------------------------------------

loc_239B:
		mov	ax, 20h	; ' '

loc_239E:
		push	ax
		cmp	word_F502, 0
		jz	short loc_23AB
		mov	ax, 2Bh	; '+'
		jmp	short loc_23AE
; ---------------------------------------------------------------------------

loc_23AB:
		mov	ax, 20h	; ' '

loc_23AE:
		push	ax
		cmp	word_F4FE, 0
		jz	short loc_23BB
		mov	ax, 2Bh	; '+'
		jmp	short loc_23BE
; ---------------------------------------------------------------------------

loc_23BB:
		mov	ax, 20h	; ' '

loc_23BE:
		push	ax
		cmp	word_F4FC, 0
		jz	short loc_23CB
		mov	ax, 2Bh	; '+'
		jmp	short loc_23CE
; ---------------------------------------------------------------------------

loc_23CB:
		mov	ax, 20h	; ' '

loc_23CE:
		push	ax
		cmp	word_F4FA, 0
		jz	short loc_23DB
		mov	ax, 2Bh	; '+'
		jmp	short loc_23DE
; ---------------------------------------------------------------------------

loc_23DB:
		mov	ax, 20h	; ' '

loc_23DE:
		push	ax
		cmp	word_F4F6, 0
		jz	short loc_23EB
		mov	ax, 2Bh	; '+'
		jmp	short loc_23EE
; ---------------------------------------------------------------------------

loc_23EB:
		mov	ax, 20h	; ' '

loc_23EE:
		push	ax
		cmp	word_F4F4, 0
		jz	short loc_23FB
		mov	ax, 2Bh	; '+'
		jmp	short loc_23FE
; ---------------------------------------------------------------------------

loc_23FB:
		mov	ax, 20h	; ' '

loc_23FE:
		push	ax
		cmp	word_F4F2, 0
		jz	short loc_240B
		mov	ax, 2Bh	; '+'
		jmp	short loc_240E
; ---------------------------------------------------------------------------

loc_240B:
		mov	ax, 20h	; ' '

loc_240E:
		push	ax
		cmp	word_F4EE, 0
		jz	short loc_241B
		mov	ax, 2Bh	; '+'
		jmp	short loc_241E
; ---------------------------------------------------------------------------

loc_241B:
		mov	ax, 20h	; ' '

loc_241E:
		push	ax
		cmp	word_F510, 0
		jz	short loc_242B
		mov	ax, 2Bh	; '+'
		jmp	short loc_242E
; ---------------------------------------------------------------------------

loc_242B:
		mov	ax, 20h	; ' '

loc_242E:
		push	ax
		cmp	word_F50E, 0
		jz	short loc_243B
		mov	ax, 2Bh	; '+'
		jmp	short loc_243E
; ---------------------------------------------------------------------------

loc_243B:
		mov	ax, 20h	; ' '

loc_243E:
		push	ax
		cmp	word_F50C, 0
		jz	short loc_244B
		mov	ax, 2Bh	; '+'
		jmp	short loc_244E
; ---------------------------------------------------------------------------

loc_244B:
		mov	ax, 20h	; ' '

loc_244E:
		push	ax
		cmp	word_F50A, 0
		jz	short loc_245B
		mov	ax, 2Bh	; '+'
		jmp	short loc_245E
; ---------------------------------------------------------------------------

loc_245B:
		mov	ax, 20h	; ' '

loc_245E:
		push	ax
		push	ds
		push	offset aSyntaxMakeOpti ; "Syntax: MAKE [options	...] target[s]\n  "...
		call	sub_8E0F
		add	sp, 20h
		push	0		; status
		call	sub_8E01
sub_237C	endp

; ---------------------------------------------------------------------------
		db  5Dh	; ]
		db 0C3h	; √

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2470	proc near

var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4

		enter	10h, 0
		push	si
		call	sub_3261
		push	ds
		push	offset format	; "Implicit Rules:\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 8
		mov	dx, word_10760
		mov	ax, word_1075E
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	loc_256C
; ---------------------------------------------------------------------------

loc_2496:
		les	bx, [bp+var_4]
		mov	ax, es:[bx+8]
		or	ax, es:[bx+0Ah]
		jnz	short loc_24A6
		jmp	loc_255B
; ---------------------------------------------------------------------------

loc_24A6:
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		jmp	loc_254A
; ---------------------------------------------------------------------------

loc_24B1:
		les	bx, [bp+var_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		les	bx, [bp+var_C]
		les	bx, es:[bx+0Ch]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset a_S_SCommands ; "    .%s.%s:\n	     commands:	  "
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 10h
		les	bx, [bp+var_C]
		mov	ax, es:[bx+10h]
		or	ax, es:[bx+12h]
		jz	short loc_253F
		les	bx, es:[bx+10h]
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8]
		push	ds
		push	offset aS_3	; "%s\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 0Ch
		les	bx, [bp+var_C]
		les	bx, es:[bx+10h]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		jmp	short loc_2531
; ---------------------------------------------------------------------------

loc_250E:
		les	bx, [bp+var_10]
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8]
		push	ds
		push	offset aS_4	; "			%s\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 0Ch
		les	bx, [bp+var_10]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_2531:
		mov	word ptr [bp+var_10+2],	dx
		mov	word ptr [bp+var_10], ax
		mov	ax, word ptr [bp+var_10]
		or	ax, word ptr [bp+var_10+2]
		jnz	short loc_250E

loc_253F:
		les	bx, [bp+var_C]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]

loc_254A:
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		mov	ax, word ptr [bp+var_C]
		or	ax, word ptr [bp+var_C+2]
		jz	short loc_255B
		jmp	loc_24B1
; ---------------------------------------------------------------------------

loc_255B:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_256C:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_2577
		jmp	loc_2496
; ---------------------------------------------------------------------------

loc_2577:
		push	ds
		push	offset aTargets	; "\nTargets:\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 8
		mov	dx, word_10764
		mov	ax, word_10762
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	loc_270C
; ---------------------------------------------------------------------------

loc_2595:
		les	bx, [bp+var_8]
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jnz	short loc_25A5
		jmp	loc_26FB
; ---------------------------------------------------------------------------

loc_25A5:
		cmp	byte ptr es:[bx+25h], 0
		jz	short loc_25AF
		jmp	loc_26FB
; ---------------------------------------------------------------------------

loc_25AF:
		xor	si, si
		cmp	byte ptr es:[bx+24h], 0
		jz	short loc_25BF
		mov	dx, ds
		mov	ax, 1302h
		jmp	short loc_25C4
; ---------------------------------------------------------------------------

loc_25BF:
		mov	dx, ds
		mov	ax, 244h

loc_25C4:
		push	dx
		push	ax
		les	bx, [bp+var_8]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aSFlagsSDepende ; "    %s:\n	   flags:	%s\n	   "...
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 10h
		les	bx, [bp+var_8]
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	short loc_265E
; ---------------------------------------------------------------------------

loc_25EB:
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		les	bx, es:[bx+8]
		cmp	byte ptr es:[bx], 0
		jz	short loc_261D
		push	7Dh ; '}'
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8]
		push	7Bh ; '{'
		push	ds
		push	offset aCSC	; "%c%s%c"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 10h

loc_261D:
		inc	si
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		or	dx, dx
		jz	short loc_2631
		mov	dx, ds
		mov	ax, 254h
		jmp	short loc_2636
; ---------------------------------------------------------------------------

loc_2631:
		mov	dx, ds
		mov	ax, 291h

loc_2636:
		push	dx
		push	ax
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aSS	; "%s%s"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 10h
		les	bx, [bp+var_C]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_265E:
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		mov	ax, word ptr [bp+var_C]
		or	ax, word ptr [bp+var_C+2]
		jz	short loc_266F
		jmp	loc_25EB
; ---------------------------------------------------------------------------

loc_266F:
		les	bx, [bp+var_8]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jz	short loc_2681
		mov	ax, 20h	; ' '
		jmp	short loc_2684
; ---------------------------------------------------------------------------

loc_2681:
		mov	ax, 0Ah

loc_2684:
		push	ax
		push	ds
		push	offset aCommandsC ; "\n	       commands:   %c"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 0Ah
		les	bx, [bp+var_8]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jz	short loc_26FB
		les	bx, es:[bx+0Ch]
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8]
		push	ds
		push	offset aS_3	; "%s\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 0Ch
		les	bx, [bp+var_8]
		les	bx, es:[bx+0Ch]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		jmp	short loc_26ED
; ---------------------------------------------------------------------------

loc_26CA:
		les	bx, [bp+var_10]
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8]
		push	ds
		push	offset aS_4	; "			%s\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 0Ch
		les	bx, [bp+var_10]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_26ED:
		mov	word ptr [bp+var_10+2],	dx
		mov	word ptr [bp+var_10], ax
		mov	ax, word ptr [bp+var_10]
		or	ax, word ptr [bp+var_10+2]
		jnz	short loc_26CA

loc_26FB:
		les	bx, [bp+var_8]
		mov	dx, es:[bx+12h]
		mov	ax, es:[bx+10h]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax

loc_270C:
		mov	ax, word ptr [bp+var_8]
		or	ax, word ptr [bp+var_8+2]
		jz	short loc_2717
		jmp	loc_2595
; ---------------------------------------------------------------------------

loc_2717:
		push	ds
		push	offset asc_E3A8	; "\n\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 8
		pop	si
		leave
		retn
sub_2470	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_2728(char *s)
sub_2728	proc near

@@dest		= dword	ptr -4
@@s		= dword	ptr  4

		enter	4, 0
		push	si
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+@@s+2]
		add	ax, word ptr [bp+@@s]
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		cmp	dx, word ptr [bp+@@s+2]
		jnz	short loc_274F
		cmp	ax, word ptr [bp+@@s]
		jz	short loc_2767

loc_274F:
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx-1], 2Fh	; '/'
		jz	short loc_2767
		cmp	byte ptr es:[bx-1], 5Ch	; '\'
		jz	short loc_2767
		cmp	byte ptr es:[bx-1], 3Ah	; ':'
		jnz	short loc_276B

loc_2767:
		xor	si, si
		jmp	short loc_276E
; ---------------------------------------------------------------------------

loc_276B:
		mov	si, 1

loc_276E:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		add	ax, si
		inc	ax
		push	ax		; size
		call	sub_5296
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		or	si, si
		jz	short loc_27A9
		push	ds
		push	offset asc_E3AC	; "/"
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcat
		add	sp, 8

loc_27A9:
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	si
		leave
		retn	4
sub_2728	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_27B4(char *s1, char	*name)
sub_27B4	proc near

var_4		= dword	ptr -4
@@s		= dword	ptr  4
@@s1		= dword	ptr  8

		enter	4, 0
		push	si
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1]
		call	sub_2AFF
		mov	si, ax
		cmp	word_F4F4, 0
		jz	short loc_27EB
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; name
		call	_getenv
		add	sp, 4
		or	ax, dx
		jz	short loc_27EB
		mov	bx, si
		shl	bx, 2
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		jmp	loc_28F9
; ---------------------------------------------------------------------------

loc_27EB:
		mov	bx, si
		shl	bx, 2
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		jmp	short loc_284C
; ---------------------------------------------------------------------------

loc_27FA:
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ah
		push	word ptr [bp+var_4+2]
		push	ax
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1]
		call	sub_2B79
		or	ax, ax
		jz	short loc_2841
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s2
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s1
		call	_strstr
		add	sp, 8
		or	ax, dx
		jz	short loc_2836
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_6A23

loc_2836:
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1]
		call	sub_28FE
		jmp	short loc_285A
; ---------------------------------------------------------------------------

loc_2841:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]

loc_284C:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_27FA

loc_285A:
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s
		call	_strlen
		add	sp, 4
		push	ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		pop	dx
		add	dx, ax
		add	dx, 0Ch
		push	dx		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; src
		add	ax, 0Ah
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		les	bx, [bp+var_4]
		mov	word ptr es:[bx+8], 0
		mov	word ptr es:[bx+6], 0
		mov	bx, si
		shl	bx, 2
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		mov	bx, word ptr [bp+var_4]
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		mov	byte ptr es:[bx], 0
		mov	bx, si
		shl	bx, 2
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	[bx+2670h], dx
		mov	[bx+266Eh], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		add	ax, 0Ah
		push	dx
		push	ax		; s
		call	_strlen
		add	sp, 4
		add	ax, word ptr [bp+var_4]
		add	ax, 0Bh
		push	word ptr [bp+var_4+2]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]

loc_28F9:
		pop	si
		leave
		retn	8
sub_27B4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_28FE	proc near

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	8, 0
		push	si
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_2AFF
		mov	si, ax
		mov	word ptr [bp+var_8+2], 0
		mov	word ptr [bp+var_8], 0
		mov	bx, si
		shl	bx, 2
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		jmp	short loc_298F
; ---------------------------------------------------------------------------

loc_2927:
		push	[bp+arg_2]
		push	[bp+arg_0]
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ah
		push	word ptr [bp+var_4+2]
		push	ax
		call	sub_2B79
		or	ax, ax
		jz	short loc_2978
		mov	ax, word ptr [bp+var_8]
		or	ax, word ptr [bp+var_8+2]
		jz	short loc_295E
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		les	bx, [bp+var_8]
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		jmp	short loc_299D
; ---------------------------------------------------------------------------

loc_295E:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		mov	bx, si
		shl	bx, 2
		mov	[bx+2670h], dx
		mov	[bx+266Eh], ax
		jmp	short loc_299D
; ---------------------------------------------------------------------------

loc_2978:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]

loc_298F:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_2927

loc_299D:
		pop	si
		leave
		retn	4
sub_28FE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_29A2	proc near

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4

		enter	8, 0
		mov	dx, word_1076C
		mov	ax, word_1076A
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	word_1076C, 0
		mov	word_1076A, 0
		jmp	short loc_29FA
; ---------------------------------------------------------------------------

loc_29C1:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		mov	dx, word_1076C
		mov	ax, word_1076A
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word_1076C, dx
		mov	word_1076A, ax
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_29FA:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_29C1
		leave
		retn
sub_29A2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_2A04(char *s)
sub_2A04	proc near

var_4		= dword	ptr -4
@@s		= dword	ptr  4

		enter	4, 0
		push	0Ah		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_2728
		les	bx, [bp+var_4]
		mov	es:[bx+8], dx
		mov	es:[bx+6], ax
		mov	dx, word_1076C
		mov	ax, word_1076A
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word_1076C, dx
		mov	word_1076A, ax
		leave
		retn	4
sub_2A04	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2A47	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	4, 0
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_2AFF
		shl	ax, 2
		mov	bx, ax
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		jmp	short loc_2A8C
; ---------------------------------------------------------------------------

loc_2A63:
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ah
		push	word ptr [bp+var_4+2]
		push	ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_2B79
		or	ax, ax
		jz	short loc_2A81
		mov	ax, 1
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_2A81:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]

loc_2A8C:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_2A63
		xor	ax, ax
		leave
		retn	4
sub_2A47	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2AA0	proc near

var_4		= dword	ptr -4

		enter	4, 0
		push	ds
		push	offset byte_1385A
		call	sub_2AFF
		shl	ax, 2
		mov	bx, ax
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		jmp	short loc_2AE9
; ---------------------------------------------------------------------------

loc_2ABA:
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ah
		push	word ptr [bp+var_4+2]
		push	ax
		push	ds
		push	offset byte_1385A
		call	sub_2B79
		or	ax, ax
		jz	short loc_2ADE
		les	bx, [bp+var_4]
		test	byte ptr es:[bx], 2
		jz	short loc_2AF7
		xor	dx, dx
		xor	ax, ax
		leave
		retn
; ---------------------------------------------------------------------------

loc_2ADE:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]

loc_2AE9:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_2ABA

loc_2AF7:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn
sub_2AA0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2AFF	proc near

var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	6, 0
		push	si
		push	di
		xor	di, di
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		xor	si, si
		mov	[bp+var_6], 0
		jmp	short loc_2B3C
; ---------------------------------------------------------------------------

loc_2B1C:
		cmp	[bp+var_6], 8
		jle	short loc_2B27
		mov	[bp+var_6], 0

loc_2B27:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		mov	cl, byte ptr [bp+var_6]
		shl	ax, cl
		add	si, ax
		inc	word ptr [bp+var_4]
		inc	[bp+var_6]
		inc	di

loc_2B3C:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_2B4B
		cmp	di, word_E330
		jl	short loc_2B1C

loc_2B4B:
		mov	ax, si
		cwd
		push	ax
		push	dx
		mov	dx, 643Ah
		mov	ax, 71E3h
		pop	cx
		pop	bx
		call	N_LXMUL@
		mov	si, dx
		mov	bx, 3E8h
		mov	ax, si
		cwd
		idiv	bx
		mov	si, dx
		or	si, si
		jge	short loc_2B71
		mov	ax, si
		neg	ax
		mov	si, ax

loc_2B71:
		mov	ax, si
		pop	di
		pop	si
		leave
		retn	4
sub_2AFF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_2B79	proc near

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	short loc_2BA4
; ---------------------------------------------------------------------------

loc_2B80:
		les	bx, [bp+arg_4]
		mov	al, es:[bx]
		les	bx, [bp+arg_0]
		cmp	al, es:[bx]
		jz	short loc_2B94
		xor	ax, ax
		pop	bp
		retn	8
; ---------------------------------------------------------------------------

loc_2B94:
		les	bx, [bp+arg_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_2BAA
		inc	dx
		inc	word ptr [bp+arg_4]
		inc	word ptr [bp+arg_0]

loc_2BA4:
		cmp	dx, word_E330
		jl	short loc_2B80

loc_2BAA:
		mov	ax, 1
		pop	bp
		retn	8
sub_2B79	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_2BB1(int, __int32, char *s2, char *s)
sub_2BB1	proc near

var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= dword	ptr  6
@@s2		= dword	ptr  0Ah
@@s		= dword	ptr  0Eh

		enter	0Ch, 0
		mov	word ptr [bp+var_8+2], 0
		mov	word ptr [bp+var_8], 0
		mov	dx, word_10764
		mov	ax, word_10762
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	loc_2D1E
; ---------------------------------------------------------------------------

loc_2BCF:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jz	short loc_2BEC
		jmp	loc_2D0D
; ---------------------------------------------------------------------------

loc_2BEC:
		les	bx, [bp+@@s2]
		cmp	byte ptr es:[bx], 0
		jz	short loc_2C20
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_2C20
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_2C20
		jmp	loc_2D0D
; ---------------------------------------------------------------------------

loc_2C20:
		les	bx, [bp+arg_2]
		cmp	byte ptr es:[bx], 0
		jz	short loc_2C54
		les	bx, [bp+var_4]
		les	bx, es:[bx+8]
		cmp	byte ptr es:[bx], 0
		jz	short loc_2C54
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2] ; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_2C54
		jmp	loc_2D0D
; ---------------------------------------------------------------------------

loc_2C54:
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_2C72
		les	bx, [bp+var_4]
		mov	dx, word ptr [bp+@@s2+2]
		mov	ax, word ptr [bp+@@s2]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax

loc_2C72:
		les	bx, [bp+var_4]
		les	bx, es:[bx+8]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_2C90
		les	bx, [bp+var_4]
		mov	dx, word ptr [bp+arg_2+2]
		mov	ax, word ptr [bp+arg_2]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax

loc_2C90:
		mov	ax, word_10766
		or	ax, word_10768
		jnz	short loc_2CB6
		test	byte ptr [bp+arg_0], 1
		jz	short loc_2CB6
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+arg_0]
		or	es:[bx+26h], al
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word_10768, dx
		mov	word_10766, ax

loc_2CB6:
		test	byte ptr [bp+arg_0], 2
		jnz	short loc_2CBF
		jmp	loc_2F06
; ---------------------------------------------------------------------------

loc_2CBF:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx+25h], 0
		jnz	short loc_2CFB
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jnz	short loc_2CDD
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jz	short loc_2CF3

loc_2CDD:
		les	bx, [bp+var_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aUseOfAndDepend ; "Use of : and :: dependents for target	'"...
		call	sub_8D8E
		add	sp, 8
		jmp	short loc_2CFB
; ---------------------------------------------------------------------------

loc_2CF3:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx+25h], 2

loc_2CFB:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		and	[bp+arg_0], 0FFFDh
		jmp	short loc_2D29
; ---------------------------------------------------------------------------

loc_2D0D:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+12h]
		mov	ax, es:[bx+10h]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_2D1E:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_2D29
		jmp	loc_2BCF
; ---------------------------------------------------------------------------

loc_2D29:
		push	28h ; '('       ; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	dx, word ptr [bp+@@s2+2]
		mov	ax, word ptr [bp+@@s2]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	dx, word ptr [bp+arg_2+2]
		mov	ax, word ptr [bp+arg_2]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		mov	word ptr es:[bx+0Eh], 0
		mov	word ptr es:[bx+0Ch], 0
		mov	word ptr es:[bx+16h], 0
		mov	word ptr es:[bx+14h], 0
		mov	word ptr es:[bx+12h], 0
		mov	word ptr es:[bx+10h], 0
		mov	byte ptr es:[bx+1Ch], 0
		mov	word ptr es:[bx+20h], 0
		mov	word ptr es:[bx+1Eh], 0
		mov	byte ptr es:[bx+22h], 0
		mov	byte ptr es:[bx+23h], 0
		mov	byte ptr es:[bx+24h], 0
		mov	al, byte ptr [bp+arg_0]
		and	al, 2
		mov	es:[bx+25h], al
		mov	byte ptr es:[bx+26h], 0
		test	byte ptr [bp+arg_0], 1
		jz	short loc_2DBD
		or	byte ptr es:[bx+26h], 1

loc_2DBD:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+@@s+2]
		add	ax, word ptr [bp+@@s]
		dec	ax
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		jmp	short loc_2DFB
; ---------------------------------------------------------------------------

loc_2DD8:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 2Eh ;	'.'
		jz	short loc_2E03
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jnz	short loc_2DF8
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		jmp	short loc_2E03
; ---------------------------------------------------------------------------

loc_2DF8:
		dec	word ptr [bp+var_C]

loc_2DFB:
		mov	ax, word ptr [bp+var_C]
		cmp	ax, word ptr [bp+@@s]
		ja	short loc_2DD8

loc_2E03:
		mov	ax, word ptr [bp+var_C]
		cmp	ax, word ptr [bp+@@s]
		jbe	short loc_2E20
		inc	ax
		push	word ptr [bp+var_C+2]
		push	ax		; s2
		call	sub_306C
		les	bx, [bp+var_4]
		mov	es:[bx+1Ah], dx
		mov	es:[bx+18h], ax
		jmp	short loc_2E2F
; ---------------------------------------------------------------------------

loc_2E20:
		les	bx, [bp+var_4]
		mov	word ptr es:[bx+1Ah], 0
		mov	word ptr es:[bx+18h], 0

loc_2E2F:
		mov	ax, word_10762
		or	ax, word_10764
		jz	short loc_2E4C
		les	bx, dword_1075A
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+12h], dx
		mov	es:[bx+10h], ax
		jmp	short loc_2E59
; ---------------------------------------------------------------------------

loc_2E4C:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word_10764, dx
		mov	word_10762, ax

loc_2E59:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr dword_1075A+2,	dx
		mov	word ptr dword_1075A, ax
		mov	ax, word ptr [bp+var_8]
		or	ax, word ptr [bp+var_8+2]
		jz	short loc_2EBD
		les	bx, [bp+var_8]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		les	bx, [bp+var_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		les	bx, [bp+var_8]
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]
		les	bx, [bp+var_4]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		les	bx, [bp+var_8]
		mov	al, es:[bx+24h]
		les	bx, [bp+var_4]
		mov	es:[bx+24h], al
		mov	al, es:[bx+23h]
		mov	es:[bx+23h], al
		push	word ptr [bp+var_8+2]
		push	word ptr [bp+var_8]
		push	word ptr [bp+var_4+2]
		push	bx
		call	sub_3142

loc_2EBD:
		mov	ax, word_10766
		or	ax, word_10768
		jnz	short loc_2ED9
		test	byte ptr [bp+arg_0], 1
		jz	short loc_2ED9
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word_10768, dx
		mov	word_10766, ax

loc_2ED9:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx+25h], 0
		jz	short loc_2F06
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s2
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8] ; __int32
		push	[bp+arg_0]	; int
		call	sub_2BB1
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_2F06:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn	0Eh
sub_2BB1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_2F10(int, int, char	*s2, __int32, __int32)
sub_2F10	proc near

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
@@s2		= dword	ptr  8
arg_8		= dword	ptr  0Ch
arg_C		= dword	ptr  10h

		enter	8, 0
		mov	word ptr [bp+var_8+2], 0
		mov	word ptr [bp+var_8], 0
		les	bx, [bp+arg_C]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		jmp	short loc_2FA0
; ---------------------------------------------------------------------------

loc_2F2B:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+0Eh]
		mov	ax, es:[bx+0Ch]
		cmp	dx, word ptr [bp+arg_8+2]
		jnz	short loc_2F75
		cmp	ax, word ptr [bp+arg_8]
		jnz	short loc_2F75
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s2
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_2F75
		push	[bp+arg_2]
		push	[bp+arg_0]	; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_2F75
		jmp	loc_3062
; ---------------------------------------------------------------------------

loc_2F75:
		les	bx, [bp+arg_8]
		mov	al, es:[bx+10h]
		les	bx, [bp+var_4]
		les	bx, es:[bx+0Ch]
		cmp	al, es:[bx+10h]
		jbe	short loc_2F95
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax

loc_2F95:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]

loc_2FA0:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_2FB1
		jmp	loc_2F2B
; ---------------------------------------------------------------------------

loc_2FB1:
		push	14h		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	word ptr es:[bx+12h], 0
		mov	word ptr es:[bx+10h], 0
		mov	dx, word ptr [bp+arg_8+2]
		mov	ax, word ptr [bp+arg_8]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		mov	word ptr es:[bx+0Ah], 0
		mov	word ptr es:[bx+8], 0
		mov	dx, word ptr [bp+@@s2+2]
		mov	ax, word ptr [bp+@@s2]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	ax, word ptr [bp+var_8]
		or	ax, word ptr [bp+var_8+2]
		jz	short loc_3031
		les	bx, [bp+var_8]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		les	bx, [bp+var_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		les	bx, [bp+var_8]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		jmp	short loc_3062
; ---------------------------------------------------------------------------

loc_3031:
		les	bx, [bp+arg_C]
		mov	ax, es:[bx+8]
		or	ax, es:[bx+0Ah]
		jz	short loc_3051
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		les	bx, [bp+var_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax

loc_3051:
		les	bx, [bp+arg_C]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax

loc_3062:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn	10h
sub_2F10	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_306C(char *s2)
sub_306C	proc near

var_4		= dword	ptr -4
@@s2		= dword	ptr  4

		enter	4, 0
		mov	dx, word_10760
		mov	ax, word_1075E
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_30AD
; ---------------------------------------------------------------------------

loc_307F:
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_309C
		jmp	loc_3138
; ---------------------------------------------------------------------------

loc_309C:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_30AD:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_307F
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_3138
		push	12h		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	dx, word ptr [bp+@@s2+2]
		mov	ax, word ptr [bp+@@s2]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	word ptr es:[bx+6], 0
		mov	word ptr es:[bx+4], 0
		mov	word ptr es:[bx+0Ah], 0
		mov	word ptr es:[bx+8], 0
		mov	word ptr es:[bx+0Eh], 0
		mov	word ptr es:[bx+0Ch], 0
		mov	byte ptr es:[bx+10h], 0FFh
		mov	ax, word_1075E
		or	ax, word_10760
		jz	short loc_311E
		les	bx, dword_10756
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		jmp	short loc_312B
; ---------------------------------------------------------------------------

loc_311E:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word_10760, dx
		mov	word_1075E, ax

loc_312B:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr dword_10756+2,	dx
		mov	word ptr dword_10756, ax

loc_3138:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn	4
sub_306C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_3142	proc near

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		enter	8, 0
		mov	word ptr [bp+var_8+2], 0
		mov	word ptr [bp+var_8], 0
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	short loc_3188
; ---------------------------------------------------------------------------

loc_315D:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]
		cmp	dx, [bp+arg_2]
		jnz	short loc_3172
		cmp	ax, [bp+arg_0]
		jz	short locret_31EA

loc_3172:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		les	bx, [bp+var_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_3188:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_315D
		push	8		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx], 0
		mov	ax, word ptr [bp+var_8]
		or	ax, word ptr [bp+var_8+2]
		jz	short loc_31D9
		les	bx, [bp+var_8]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		leave
		retn	8
; ---------------------------------------------------------------------------

loc_31D9:
		les	bx, [bp+arg_4]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+16h], dx
		mov	es:[bx+14h], ax

locret_31EA:
		leave
		retn	8
sub_3142	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_31EE	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= dword	ptr  0Ch

		enter	4, 0
		push	10h		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	dx, [bp+arg_6]
		mov	ax, [bp+arg_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx], 0
		mov	ax, word ptr [bp+arg_8]
		or	ax, word ptr [bp+arg_8+2]
		jz	short loc_323F
		les	bx, [bp+arg_8]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+2], dx
		mov	es:[bx], ax

loc_323F:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn	0Ch
sub_31EE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_3249	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_4]
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		pop	bp
		retn	8
sub_3249	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_3261	proc near

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4

		enter	0Ch, 0
		push	si
		push	ds
		push	offset aMacros	; "\nMacros:\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 8
		xor	si, si
		jmp	short loc_32E0
; ---------------------------------------------------------------------------

loc_3278:
		mov	bx, si
		shl	bx, 2
		mov	dx, [bx+2670h]
		mov	ax, [bx+266Eh]
		jmp	short loc_32D1
; ---------------------------------------------------------------------------

loc_3287:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ah
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		push	dx
		push	ax		; s
		call	_strlen
		add	sp, 4
		mov	dx, [bp+var_6]
		add	ax, [bp+var_8]
		inc	ax
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		push	dx
		push	ax
		call	sub_78D1
		push	dx
		push	ax
		push	[bp+var_6]
		push	[bp+var_8]
		push	ds
		push	offset a15sS	; "%15s	= %s\n"
		push	ds
		push	offset stream	; stream
		call	_fprintf
		add	sp, 10h
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]

loc_32D1:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_3287
		inc	si

loc_32E0:
		cmp	si, 3E8h
		jl	short loc_3278
		pop	si
		leave
		retn
sub_3261	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_32E9(int, int, char	*s)
sub_32E9	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
@@s		= dword	ptr  8

		enter	4, 0
		push	si
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]
		call	sub_2AFF
		mov	si, ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		add	ax, 9
		push	ax		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		add	ax, 8
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		les	bx, [bp+var_4]
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	bx, si
		shl	bx, 2
		mov	dx, [bx+3610h]
		mov	ax, [bx+360Eh]
		mov	bx, word ptr [bp+var_4]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	bx, si
		shl	bx, 2
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	[bx+3610h], dx
		mov	[bx+360Eh], ax
		pop	si
		leave
		retn	8
sub_32E9	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_3363(char *s2)
sub_3363	proc near

var_4		= dword	ptr -4
@@s2		= dword	ptr  4

		enter	4, 0
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2]
		call	sub_2AFF
		shl	ax, 2
		mov	bx, ax
		mov	dx, [bx+3610h]
		mov	ax, [bx+360Eh]
		jmp	short loc_33A4
; ---------------------------------------------------------------------------

loc_337F:
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s2
		mov	ax, word ptr [bp+var_4]
		add	ax, 8
		push	word ptr [bp+var_4+2]
		push	ax		; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_33B2
		les	bx, [bp+var_4]
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]

loc_33A4:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_337F

loc_33B2:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn	4
sub_3363	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_33BC	proc near

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	0Ch, 0
		push	si
		push	di
		mov	dx, word_F650
		mov	ax, word_F64E
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	ax, word_F652
		mov	[bp+var_6], ax
		mov	dx, word ptr dword_E3BA+2
		mov	ax, word ptr dword_E3BA
		mov	[bp+var_8], dx
		mov	[bp+var_A], ax
		mov	word ptr dword_E3BA+2, 0
		mov	word ptr dword_E3BA, 0
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word_12706, dx
		mov	s2, ax
		mov	word_F650, dx
		mov	word_F64E, ax
		mov	word_F652, 1

loc_3408:
		xor	di, di

loc_340A:
		call	sub_1D9C
		mov	si, ax
		push	ax
		call	sub_446D
		or	ax, ax
		jz	short loc_341C
		mov	di, 1
		jmp	short loc_340A
; ---------------------------------------------------------------------------

loc_341C:
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		cmp	si, 21h	; '!'
		jnz	short loc_3430
		call	sub_49D0
		jmp	short loc_3408
; ---------------------------------------------------------------------------

loc_3430:
		cmp	si, 0FFFFh
		jnz	short loc_3452
		mov	ax, word ptr dword_E3BA
		or	ax, word ptr dword_E3BA+2
		jz	short loc_3496
		les	bx, dword_E3BA
		push	word ptr es:[bx+6]
		push	ds
		push	offset aUnexpectedEndO ; "Unexpected end of file in conditional	s"...
		call	sub_8D8E
		add	sp, 6
		jmp	short loc_348D
; ---------------------------------------------------------------------------

loc_3452:
		cmp	si, 0Ah
		jz	short loc_3408
		push	si
		push	1
		call	sub_693F
		mov	[bp+var_C], ax
		or	di, di
		jz	short loc_3476
		cmp	[bp+var_C], 0
		jnz	short loc_3476
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"
		call	sub_8D8E
		add	sp, 4
		jmp	short loc_3408
; ---------------------------------------------------------------------------

loc_3476:
		call	sub_3634
		jmp	short loc_3408
; ---------------------------------------------------------------------------

loc_347B:
		les	bx, dword_E3BA
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr dword_E3BA+2, dx
		mov	word ptr dword_E3BA, ax

loc_348D:
		mov	ax, word ptr dword_E3BA
		or	ax, word ptr dword_E3BA+2
		jnz	short loc_347B

loc_3496:
		mov	dx, [bp+var_8]
		mov	ax, [bp+var_A]
		mov	word ptr dword_E3BA+2, dx
		mov	word ptr dword_E3BA, ax
		call	sub_1C8A
		mov	ax, [bp+var_6]
		mov	word_F652, ax
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	word_F650, dx
		mov	word_F64E, ax
		pop	di
		pop	si
		leave
		retn	4
sub_33BC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_34BF(void *src, char)
sub_34BF	proc near

var_4		= word ptr -4
var_2		= word ptr -2
@@src		= dword	ptr  4
arg_4		= byte ptr  8

		enter	4, 0
		mov	dx, word ptr [bp+@@src+2]
		mov	ax, word ptr [bp+@@src]
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		jmp	short loc_34D4
; ---------------------------------------------------------------------------

loc_34D1:
		inc	word ptr [bp+@@src]

loc_34D4:
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_34D1
		jmp	short loc_3514
; ---------------------------------------------------------------------------

loc_34DF:
		mov	ax, word ptr [bp+@@src]
		xor	dx, dx
		sub	ax, 475Ah
		sbb	dx, 0
		cmp	ax, 1000h
		jge	short loc_3507
		push	1		; n
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		mov	ax, word ptr [bp+@@src]
		inc	ax
		push	word ptr [bp+@@src+2]
		push	ax		; dest
		call	_memmove
		add	sp, 0Ah
		jmp	short loc_3511
; ---------------------------------------------------------------------------

loc_3507:
		push	ds
		push	offset aRuleLineTooLon ; "Rule line too	long"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_3511:
		dec	word ptr [bp+@@src]

loc_3514:
		mov	ax, word ptr [bp+@@src]
		cmp	ax, [bp+var_4]
		jnb	short loc_34DF
		les	bx, [bp+@@src]
		mov	al, [bp+arg_4]
		mov	es:[bx+1], al
		leave
		retn	6
sub_34BF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_352A	proc near

var_122		= dword	ptr -122h
var_E0		= byte ptr -0E0h
@@ffblk		= ffblk	ptr -90h
@@src		= byte ptr -64h
var_14		= dword	ptr -14h
var_A		= dword	ptr -0Ah
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh
arg_C		= word ptr  10h

		enter	122h, 0
		push	si
		push	di
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_8]
		push	[bp+arg_6]
		push	ds
		push	offset aSS_0	; "%s%s"
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; buffer
		call	_sprintf
		add	sp, 10h
		push	ss
		lea	ax, [bp+var_A]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_14]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_122]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; src
		call	sub_90B3
		add	sp, 14h
		push	0		; attrib
		push	ss
		lea	ax, [bp+@@ffblk]
		push	ax		; ffblk
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; path
		call	_findfirst
		add	sp, 0Ah
		mov	di, ax
		or	di, di
		jz	short loc_3587
		jmp	loc_3609
; ---------------------------------------------------------------------------

loc_3587:
		push	ss
		lea	ax, [bp+@@ffblk.ff_name]
		push	ax
		push	ss
		lea	ax, [bp+var_122]
		push	ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ds
		push	offset aSSS	; "%s%s%s"
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; buffer
		call	_sprintf
		add	sp, 14h
		jmp	short loc_3603
; ---------------------------------------------------------------------------

loc_35A8:
		push	ss
		lea	ax, [bp+@@ffblk]
		push	ax		; ffblk
		call	_findnext
		add	sp, 4
		mov	di, ax
		push	ss
		lea	ax, [bp+@@ffblk.ff_name]
		push	ax
		push	ss
		lea	ax, [bp+var_122]
		push	ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ds
		push	offset aSSS	; "%s%s%s"
		push	ss
		lea	ax, [bp+var_E0]
		push	ax		; buffer
		call	_sprintf
		add	sp, 14h
		xor	si, si
		jmp	short loc_35ED
; ---------------------------------------------------------------------------

loc_35DA:
		mov	al, [bp+si+var_E0]
		cbw
		push	ax		; char
		push	[bp+arg_C]
		push	[bp+arg_A]	; src
		call	sub_34BF
		inc	si
		inc	[bp+arg_A]

loc_35ED:
		cmp	[bp+si+var_E0],	0
		jnz	short loc_35DA
		push	20h ; ' '       ; char
		mov	ax, [bp+arg_A]
		inc	[bp+arg_A]
		push	[bp+arg_C]
		push	ax		; src
		call	sub_34BF

loc_3603:
		or	di, di
		jz	short loc_35A8
		jmp	short loc_3618
; ---------------------------------------------------------------------------

loc_3609:
		push	ss
		lea	ax, [bp+@@src]
		push	ax
		push	ds
		push	offset aNoMatchFoundFo ; " No match found for wildcard '%s'"
		call	sub_8D8E
		add	sp, 8

loc_3618:
		cmp	[bp+arg_0], 0
		jz	short loc_3629
		push	3Ah ; ':'       ; char
		push	[bp+arg_C]
		push	[bp+arg_A]	; src
		call	sub_34BF

loc_3629:
		mov	dx, ss
		lea	ax, [bp+@@src]
		pop	di
		pop	si
		leave
		retn	0Eh
sub_352A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_3634	proc near

var_1C		= dword	ptr -1Ch
@@s1		= dword	ptr -18h
@@s		= dword	ptr -14h
var_10		= word ptr -10h
@@s2		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4

		enter	1Ch, 0
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 475Ah
		mov	word ptr [bp+@@s2+2], 0
		mov	word ptr [bp+@@s2], 0
		mov	[bp+var_10+2], 0
		mov	[bp+var_10], 0
		cmp	byte_1285A, 20h	; ' '
		jnz	short loc_3664
		push	0
		push	0
		call	sub_498A
		leave
		retn
; ---------------------------------------------------------------------------

loc_3664:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 7Bh ;	'{'
		jnz	short loc_36C5
		inc	ax
		mov	word ptr [bp+@@s2+2], dx
		mov	word ptr [bp+@@s2], ax
		jmp	short loc_3685
; ---------------------------------------------------------------------------

loc_3682:
		inc	word ptr [bp+var_4]

loc_3685:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 7Dh ;	'}'
		jz	short loc_3694
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3682

loc_3694:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_36AF
		cmp	byte ptr es:[bx], 7Dh ;	'}'
		jnz	short loc_36AF
		cmp	byte ptr es:[bx+1], 2Eh	; '.'
		jnz	short loc_36AF
		inc	word ptr [bp+var_4]
		jmp	short loc_36C5
; ---------------------------------------------------------------------------

loc_36AF:
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	word ptr [bp+@@s2+2], 0
		mov	word ptr [bp+@@s2], 0

loc_36C5:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 2Eh ;	'.'
		jz	short loc_36D1
		jmp	loc_393C
; ---------------------------------------------------------------------------

loc_36D1:
		cmp	byte ptr es:[bx+1], 2Eh	; '.'
		jnz	short loc_36DB
		jmp	loc_393C
; ---------------------------------------------------------------------------

loc_36DB:
		cmp	byte ptr es:[bx+1], 2Fh	; '/'
		jnz	short loc_36E5
		jmp	loc_393C
; ---------------------------------------------------------------------------

loc_36E5:
		cmp	byte ptr es:[bx+1], 5Ch	; '\'
		jnz	short loc_36EF
		jmp	loc_393C
; ---------------------------------------------------------------------------

loc_36EF:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		mov	word ptr [bp+@@s1+2], dx
		mov	word ptr [bp+@@s1], ax
		mov	ax, word ptr [bp+@@s2]
		or	ax, word ptr [bp+@@s2+2]
		jz	short loc_3725
		mov	byte ptr es:[bx-1], 0
		les	bx, [bp+@@s2]
		cmp	byte ptr es:[bx], 0
		jz	short loc_3718
		push	word ptr [bp+@@s2+2]
		push	bx
		jmp	short loc_371C
; ---------------------------------------------------------------------------

loc_3718:
		push	ds
		push	offset a__0	; "."

loc_371C:
		call	sub_894C
		mov	word ptr [bp+@@s2+2], dx
		mov	word ptr [bp+@@s2], ax

loc_3725:
		mov	dx, word ptr [bp+@@s1+2]
		mov	ax, word ptr [bp+@@s1]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_3736
; ---------------------------------------------------------------------------

loc_3733:
		inc	word ptr [bp+var_4]

loc_3736:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 7Bh ;	'{'
		jz	short loc_3757
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jz	short loc_3757
		cmp	byte ptr es:[bx], 2Eh ;	'.'
		jz	short loc_3757
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jz	short loc_3757
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3733

loc_3757:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3777
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		push	word ptr [bp+var_4+2]
		push	bx		; __int32
		call	sub_3941
		or	ax, ax
		jz	short loc_3774
		jmp	locret_393F
; ---------------------------------------------------------------------------

loc_3774:
		jmp	loc_3873
; ---------------------------------------------------------------------------

loc_3777:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 7Bh ;	'{'
		jnz	short loc_37E4
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		inc	word ptr [bp+var_4]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	[bp+var_10+2], dx
		mov	[bp+var_10], ax
		jmp	short loc_37A0
; ---------------------------------------------------------------------------

loc_379D:
		inc	word ptr [bp+var_4]

loc_37A0:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 7Dh ;	'}'
		jz	short loc_37AF
		cmp	byte ptr es:[bx], 0
		jnz	short loc_379D

loc_37AF:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_37CE
		cmp	byte ptr es:[bx], 7Dh ;	'}'
		jnz	short loc_37CE
		cmp	byte ptr es:[bx+1], 2Eh	; '.'
		jnz	short loc_37CE
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		jmp	short loc_37E4
; ---------------------------------------------------------------------------

loc_37CE:
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	[bp+var_10+2], 0
		mov	[bp+var_10], 0

loc_37E4:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_4]
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4] ; __int32
		call	sub_3941
		or	ax, ax
		jz	short loc_3804
		jmp	locret_393F
; ---------------------------------------------------------------------------

loc_3804:
		mov	ax, [bp+var_10]
		or	ax, [bp+var_10+2]
		jz	short loc_382B
		les	bx, dword ptr [bp+var_10]
		cmp	byte ptr es:[bx], 0
		jz	short loc_381B
		push	[bp+var_10+2]
		push	bx
		jmp	short loc_381F
; ---------------------------------------------------------------------------

loc_381B:
		push	ds
		push	offset a__0	; "."

loc_381F:
		call	sub_894C
		mov	[bp+var_10+2], dx
		mov	[bp+var_10], ax
		inc	word ptr [bp+var_4]

loc_382B:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_383C
; ---------------------------------------------------------------------------

loc_3839:
		inc	word ptr [bp+var_4]

loc_383C:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jz	short loc_384B
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3839

loc_384B:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_385A
		push	ds
		push	offset aColonExpected ;	"Colon expected"
		jmp	short loc_3877
; ---------------------------------------------------------------------------

loc_385A:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0

loc_3861:
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3861
		cmp	byte ptr es:[bx], 0
		jz	short loc_387F

loc_3873:
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"

loc_3877:
		call	sub_8D8E
		add	sp, 4
		leave
		retn
; ---------------------------------------------------------------------------

loc_387F:
		mov	dx, word ptr [bp+@@s1+2]
		mov	ax, word ptr [bp+@@s1]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_3890
; ---------------------------------------------------------------------------

loc_388D:
		inc	word ptr [bp+var_4]

loc_3890:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_389F
		cmp	byte ptr es:[bx], 0
		jnz	short loc_388D

loc_389F:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_38B7
; ---------------------------------------------------------------------------

loc_38B4:
		inc	word ptr [bp+var_4]

loc_38B7:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_38C6
		cmp	byte ptr es:[bx], 0
		jnz	short loc_38B4

loc_38C6:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		mov	ax, word ptr [bp+@@s2]
		or	ax, word ptr [bp+@@s2+2]
		jnz	short loc_38E2
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		mov	word ptr [bp+@@s2+2], dx
		mov	word ptr [bp+@@s2], ax

loc_38E2:
		mov	ax, [bp+var_10]
		or	ax, [bp+var_10+2]
		jnz	short loc_38F7
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		mov	[bp+var_10+2], dx
		mov	[bp+var_10], ax

loc_38F7:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		push	dx
		push	ax		; s2
		call	sub_306C
		push	dx
		push	ax		; __int32
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s
		call	sub_894C
		push	dx
		push	ax		; s2
		call	sub_306C
		push	dx
		push	ax		; __int32
		push	word ptr [bp+@@s2+2]
		push	word ptr [bp+@@s2] ; s2
		push	[bp+var_10+2]	; int
		push	[bp+var_10]	; int
		call	sub_2F10
		mov	word ptr [bp+var_1C+2],	dx
		mov	word ptr [bp+var_1C], ax
		call	sub_4328
		les	bx, [bp+var_1C]
		mov	es:[bx+12h], dx
		mov	es:[bx+10h], ax
		leave
		retn
; ---------------------------------------------------------------------------

loc_393C:
		call	sub_3D5A

locret_393F:
		leave
		retn
sub_3634	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_3941(__int32, char *s1)
sub_3941	proc near

var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
@@name		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
@@s		= dword	ptr -4
arg_0		= dword	ptr  4
@@s1		= dword	ptr  8

		enter	18h, 0
		push	si
		mov	si, 1
		push	2		; maxlen
		push	ds
		push	offset aNo	; "NO"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_strnicmp
		add	sp, 0Ah
		or	ax, ax
		jnz	short loc_3965
		xor	si, si
		add	word ptr [bp+@@s1], 2

loc_3965:
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+@@s1+2]
		add	ax, word ptr [bp+@@s1]
		dec	ax
		mov	word ptr [bp+var_10+2],	dx
		mov	word ptr [bp+var_10], ax
		les	bx, [bp+var_10]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_399F
		jmp	short loc_398C
; ---------------------------------------------------------------------------

loc_3989:
		dec	word ptr [bp+var_10]

loc_398C:
		les	bx, [bp+var_10]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3989
		inc	word ptr [bp+var_10]
		les	bx, [bp+var_10]
		mov	byte ptr es:[bx], 0

loc_399F:
		push	ds
		push	offset aPath	; "PATH"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jz	short loc_39B6
		jmp	loc_3AE5
; ---------------------------------------------------------------------------

loc_39B6:
		or	si, si
		jnz	short loc_39BD
		jmp	loc_3D53
; ---------------------------------------------------------------------------

loc_39BD:
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_39CE
; ---------------------------------------------------------------------------

loc_39CB:
		inc	word ptr [bp+arg_0]

loc_39CE:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jz	short loc_39DD
		cmp	byte ptr es:[bx], 0
		jnz	short loc_39CB

loc_39DD:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_39F3
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"
		call	sub_8D8E
		add	sp, 4
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_39F3:
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0
		jmp	short $+2

loc_39FC:
		inc	word ptr [bp+arg_0]
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_3A0E
		cmp	byte ptr es:[bx], 0
		jnz	short loc_39FC

loc_3A0E:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3A24
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"
		call	sub_8D8E
		add	sp, 4
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3A24:
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		jmp	short loc_3A35
; ---------------------------------------------------------------------------

loc_3A32:
		inc	word ptr [bp+arg_0]

loc_3A35:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3A44
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3A32

loc_3A44:
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		jmp	short loc_3A5C
; ---------------------------------------------------------------------------

loc_3A59:
		inc	word ptr [bp+arg_0]

loc_3A5C:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3A6B
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3A59

loc_3A6B:
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		push	dx
		push	ax		; s2
		call	sub_306C
		push	dx
		push	ax
		push	[bp+var_6]
		push	[bp+var_8]	; s
		call	sub_894C
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		push	dx
		push	ax
		call	sub_3249
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		add	ax, 7
		push	ax		; size
		call	sub_5296
		mov	word ptr [bp+@@name+2], dx
		mov	word ptr [bp+@@name], ax
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1]
		push	ds
		push	offset a_S_	; ".%s."
		push	dx
		push	ax		; buffer
		call	_sprintf
		add	sp, 0Ch
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; dest
		call	_strcat
		add	sp, 8
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		push	[bp+var_6]
		push	[bp+var_8]	; s1
		call	sub_27B4
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3AE5:
		push	8		; maxlen
		push	ds
		push	offset aPrecious ; "PRECIOUS"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_strnicmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_3AFE
		jmp	loc_3BAB
; ---------------------------------------------------------------------------

loc_3AFE:
		jmp	short loc_3B03
; ---------------------------------------------------------------------------

loc_3B00:
		inc	word ptr [bp+arg_0]

loc_3B03:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_3B12
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3B00

loc_3B12:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_3B1E
		jmp	loc_3B9F
; ---------------------------------------------------------------------------

loc_3B1E:
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"
		call	sub_8D8E
		add	sp, 4
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3B2B:
		inc	word ptr [bp+arg_0]

loc_3B2E:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_3B3D
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3B2B

loc_3B3D:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3B49
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3B49:
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_3B5A
; ---------------------------------------------------------------------------

loc_3B57:
		inc	word ptr [bp+arg_0]

loc_3B5A:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3B69
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3B57

loc_3B69:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_3B79
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+arg_0]

loc_3B79:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		push	dx
		push	ax		; s
		push	ds
		push	offset byte_E3DA ; s2
		push	ds
		push	offset byte_E3DA ; __int32
		push	0		; int
		call	sub_2BB1
		mov	word ptr [bp+var_18+2],	dx
		mov	word ptr [bp+var_18], ax
		les	bx, [bp+var_18]
		mov	byte ptr es:[bx+24h], 1

loc_3B9F:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3B2E
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3BAB:
		push	8		; maxlen
		push	ds
		push	offset aSuffixes ; "SUFFIXES"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_strnicmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_3BC4
		jmp	loc_3CB3
; ---------------------------------------------------------------------------

loc_3BC4:
		jmp	short loc_3BC9
; ---------------------------------------------------------------------------

loc_3BC6:
		inc	word ptr [bp+arg_0]

loc_3BC9:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_3BD8
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3BC6

loc_3BD8:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_3BE4
		jmp	loc_3CA4
; ---------------------------------------------------------------------------

loc_3BE4:
		mov	dx, word_10760
		mov	ax, word_1075E
		mov	word ptr [bp+var_14+2],	dx
		mov	word ptr [bp+var_14], ax
		jmp	short loc_3C09
; ---------------------------------------------------------------------------

loc_3BF3:
		les	bx, [bp+var_14]
		mov	byte ptr es:[bx+10h], 0FFh
		mov	dx, es:[bx+6]
		mov	ax, es:[bx+4]
		mov	word ptr [bp+var_14+2],	dx
		mov	word ptr [bp+var_14], ax

loc_3C09:
		mov	ax, word ptr [bp+var_14]
		or	ax, word ptr [bp+var_14+2]
		jnz	short loc_3BF3
		mov	byte_E3BE, 0
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3C19:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 2Eh ;	'.'
		jnz	short loc_3C25
		inc	word ptr [bp+arg_0]

loc_3C25:
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_3C36
; ---------------------------------------------------------------------------

loc_3C33:
		inc	word ptr [bp+arg_0]

loc_3C36:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3C45
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3C33

loc_3C45:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_3C55
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+arg_0]

loc_3C55:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		push	dx
		push	ax		; s2
		call	sub_306C
		mov	word ptr [bp+var_14+2],	dx
		mov	word ptr [bp+var_14], ax
		les	bx, [bp+var_14]
		cmp	byte ptr es:[bx+10h], 0FFh
		jnz	short loc_3C7E
		mov	al, byte_E3BE
		mov	es:[bx+10h], al
		inc	byte_E3BE

loc_3C7E:
		cmp	byte_E3BE, 0FFh
		jnz	short loc_3C95
		push	ds
		push	offset aTooManySuffixe ; "Too many suffixes in .SUFFIXES list"
		call	sub_8D8E
		add	sp, 4
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3C92:
		inc	word ptr [bp+arg_0]

loc_3C95:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_3CA4
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3C92

loc_3CA4:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_3CB0
		jmp	loc_3C19
; ---------------------------------------------------------------------------

loc_3CB0:
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3CB3:
		push	ds
		push	offset aAutodepend ; "AUTODEPEND"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3CCE
		mov	word_F4EE, si
		jmp	loc_3D4E
; ---------------------------------------------------------------------------

loc_3CCE:
		push	ds
		push	offset aSilent	; "SILENT"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3CE8
		mov	word_F506, si
		jmp	short loc_3D4E
; ---------------------------------------------------------------------------

loc_3CE8:
		push	ds
		push	offset aSwap	; "SWAP"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3D02
		mov	word_F510, si
		jmp	short loc_3D4E
; ---------------------------------------------------------------------------

loc_3D02:
		push	ds
		push	offset aIgnore	; "IGNORE"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3D1C
		mov	word_F4F6, si
		jmp	short loc_3D4E
; ---------------------------------------------------------------------------

loc_3D1C:
		push	ds
		push	offset aKeep	; "KEEP"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3D36
		mov	word_F50C, si
		jmp	short loc_3D4E
; ---------------------------------------------------------------------------

loc_3D36:
		push	ds
		push	offset aCacheautodepen ; "CACHEAUTODEPEND"
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_3D53
		mov	word_F4F2, si

loc_3D4E:
		mov	ax, 1
		jmp	short loc_3D55
; ---------------------------------------------------------------------------

loc_3D53:
		xor	ax, ax

loc_3D55:
		pop	si
		leave
		retn	8
sub_3941	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_3D5A	proc near

@@s1		= dword	ptr -0Ch
@@name		= dword	ptr -8
var_4		= dword	ptr -4

		enter	0Ch, 0
		push	si
		xor	si, si
		mov	ax, word_10766
		or	ax, word_10768
		jnz	short loc_3D6D
		mov	si, 1

loc_3D6D:
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 475Ah
		jmp	short loc_3DBF
; ---------------------------------------------------------------------------

loc_3D77:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jz	short loc_3DC8
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jnz	short loc_3DBC
		cmp	byte ptr es:[bx+1], 3Ah	; ':'
		jnz	short loc_3DAB
		cmp	byte ptr es:[bx+2], 20h	; ' '
		jz	short loc_3D9E
		cmp	byte ptr es:[bx+2], 0
		jnz	short loc_3DAB

loc_3D9E:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx+1], 20h	; ' '
		or	si, 2
		jmp	short loc_3DC8
; ---------------------------------------------------------------------------

loc_3DAB:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx+1], 20h	; ' '
		jz	short loc_3DC8
		cmp	byte ptr es:[bx+1], 0
		jz	short loc_3DC8

loc_3DBC:
		inc	word ptr [bp+var_4]

loc_3DBF:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3D77

loc_3DC8:
		mov	ax, word ptr [bp+var_4]
		xor	dx, dx
		sub	ax, 475Ah
		sbb	dx, 0
		or	ax, dx
		jnz	short loc_3DE7
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"
		call	sub_8D8E
		add	sp, 4
		jmp	loc_3E83
; ---------------------------------------------------------------------------

loc_3DE4:
		inc	word ptr [bp+var_4]

loc_3DE7:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3DE4
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jz	short loc_3DF9
		jmp	loc_3E7B
; ---------------------------------------------------------------------------

loc_3DF9:
		mov	word ptr [bp+@@name+2], ds
		mov	word ptr [bp+@@name], 475Ah
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		mov	word ptr [bp+@@s1+2], dx
		mov	word ptr [bp+@@s1], ax

loc_3E0E:
		dec	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3E0E
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		jmp	short loc_3E29
; ---------------------------------------------------------------------------

loc_3E26:
		inc	word ptr [bp+@@s1]

loc_3E29:
		les	bx, [bp+@@s1]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3E26
		push	word ptr [bp+@@s1+2]
		push	bx		; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+@@s1+2]
		add	ax, word ptr [bp+@@s1]
		dec	ax
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_3E6A
		jmp	short loc_3E57
; ---------------------------------------------------------------------------

loc_3E54:
		dec	word ptr [bp+var_4]

loc_3E57:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3E54
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0

loc_3E6A:
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	sub_27B4
		jmp	short loc_3E83
; ---------------------------------------------------------------------------

loc_3E7B:
		push	ds
		push	offset byte_1285A
		push	si
		call	sub_3F95

loc_3E83:
		pop	si
		leave
		retn
sub_3D5A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_3E86(char *s, int, int)
sub_3E86	proc near

var_120		= dword	ptr -120h
var_D0		= dword	ptr -0D0h
@@s		= byte ptr -8Eh
@@ffblk		= ffblk	ptr -3Eh
var_12		= dword	ptr -12h
var_C		= dword	ptr -0Ch
var_8		= byte ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
@@src		= dword	ptr  4
arg_4		= word ptr  8
arg_6		= word ptr  0Ah

		enter	120h, 0
		push	si
		push	0		; attrib
		push	ss
		lea	ax, [bp+@@ffblk]
		push	ax		; ffblk
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; path
		call	_findfirst
		add	sp, 0Ah
		mov	si, ax
		or	si, si
		jz	short loc_3EF9
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src]
		push	ds
		push	offset aNoMatchFoundFo ; " No match found for wildcard '%s'"
		call	sub_8D8E
		add	sp, 8
		push	ss
		lea	ax, [bp+@@src]
		push	ax
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		call	sub_52C0
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s
		call	sub_894C
		push	dx
		push	ax		; s
		push	[bp+var_2]
		push	[bp+var_4]	; s
		call	sub_894C
		push	dx
		push	ax		; s2
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		push	dx
		push	ax		; __int32
		push	1		; int
		call	sub_2BB1
		push	dx
		push	ax
		call	sub_3142
		jmp	loc_3F90
; ---------------------------------------------------------------------------

loc_3EF9:
		push	ss
		lea	ax, [bp+var_12]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_120]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_D0]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_C]
		push	ax		; __int32
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		call	sub_90B3
		add	sp, 14h
		jmp	short loc_3F8C
; ---------------------------------------------------------------------------

loc_3F1D:
		push	ss
		lea	ax, [bp+@@src]
		push	ax
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		call	sub_52C0
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	ss
		lea	ax, [bp+@@ffblk.ff_name]
		push	ax
		push	ss
		lea	ax, [bp+var_D0]
		push	ax
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		push	ds
		push	offset aSSS	; "%s%s%s"
		push	ss
		lea	ax, [bp+@@s]
		push	ax		; buffer
		call	_sprintf
		add	sp, 14h
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	ss
		lea	ax, [bp+@@s]
		push	ax		; s
		call	sub_894C
		push	dx
		push	ax		; s
		push	[bp+var_2]
		push	[bp+var_4]	; s
		call	sub_894C
		push	dx
		push	ax		; s2
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		push	dx
		push	ax		; __int32
		push	1		; int
		call	sub_2BB1
		push	dx
		push	ax
		call	sub_3142
		push	ss
		lea	ax, [bp+@@ffblk]
		push	ax		; ffblk
		call	_findnext
		add	sp, 4
		mov	si, ax

loc_3F8C:
		or	si, si
		jz	short loc_3F1D

loc_3F90:
		pop	si
		leave
		retn	8
sub_3E86	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_3F95	proc near

var_20		= word ptr -20h
var_1E		= word ptr -1Eh
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= dword	ptr -0Ch
var_8		= word ptr -8
@@s		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		enter	20h, 0
		push	si
		mov	si, [bp+arg_0]
		mov	[bp+var_12], ds
		mov	[bp+var_14], 2DAh
		cmp	sp, word_E33A
		ja	short loc_3FB1
		cmp	sp, 200h
		jnb	short loc_3FBB

loc_3FB1:
		push	ds
		push	offset aNotEnoughMemor ; "Not enough memory"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_3FBB:
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]
		mov	word ptr [bp+var_18+2],	dx
		mov	word ptr [bp+var_18], ax
		jmp	short loc_3FEC
; ---------------------------------------------------------------------------

loc_3FC9:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_3FF5
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jnz	short loc_3FE9
		cmp	byte ptr es:[bx+1], 20h	; ' '
		jz	short loc_3FF5
		cmp	byte ptr es:[bx+1], 0
		jz	short loc_3FF5

loc_3FE9:
		inc	word ptr [bp+var_18]

loc_3FEC:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_3FC9

loc_3FF5:
		mov	ax, word ptr [bp+var_18]
		xor	dx, dx
		sub	ax, [bp+arg_2]
		sbb	dx, 0
		or	ax, dx
		jnz	short loc_401B
		push	ds
		push	offset aCommandSyntaxE ; "Command syntax error"
		call	sub_8D8E
		add	sp, 4
		jmp	loc_4132
; ---------------------------------------------------------------------------

loc_4011:
		les	bx, [bp+var_18]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_18]

loc_401B:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_4011
		mov	word_126FE, 0
		mov	word_12700, 0
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]
		mov	word ptr [bp+var_1C+2],	dx
		mov	word ptr [bp+var_1C], ax
		jmp	short loc_4067
; ---------------------------------------------------------------------------

loc_403E:
		les	bx, [bp+var_1C]
		cmp	byte ptr es:[bx], 2Ah ;	'*'
		jz	short loc_404D
		cmp	byte ptr es:[bx], 3Fh ;	'?'
		jnz	short loc_4064

loc_404D:
		mov	word_126FE, 1
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jnz	short loc_406F
		mov	word_12700, 1
		jmp	short loc_406F
; ---------------------------------------------------------------------------

loc_4064:
		inc	word ptr [bp+var_1C]

loc_4067:
		mov	ax, word ptr [bp+var_1C]
		cmp	ax, word ptr [bp+var_18]
		jbe	short loc_403E

loc_406F:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jnz	short loc_4082
		cmp	word_12700, 0
		jnz	short loc_4082
		jmp	loc_417C
; ---------------------------------------------------------------------------

loc_4082:
		cmp	word_12700, 0
		jz	short loc_4093
		les	bx, [bp+var_18]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_18]

loc_4093:
		cmp	word_126FE, 0
		jz	short loc_40C3
		push	word ptr [bp+var_18+2]
		push	word ptr [bp+var_18]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	ds
		push	offset byte_E3DA
		push	word_12700
		call	sub_352A
		push	dx
		push	ax		; src
		push	ds
		push	offset byte_126AE ; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset byte_126AE
		jmp	short loc_40C9
; ---------------------------------------------------------------------------

loc_40C3:
		push	[bp+arg_4]
		push	[bp+arg_2]	; s

loc_40C9:
		call	sub_894C
		push	dx
		push	ax		; s
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		push	dx
		push	ax		; s2
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		push	dx
		push	ax		; __int32
		push	si		; int
		call	sub_2BB1
		mov	[bp+var_8+2], dx
		mov	[bp+var_8], ax
		les	bx, dword ptr [bp+var_8]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jnz	short loc_4101
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jz	short loc_411D

loc_4101:
		les	bx, dword ptr [bp+var_8]
		mov	al, es:[bx+25h]
		cbw
		test	al, 2
		jnz	short loc_411D
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	ds
		push	offset aRedefinitionOf ; "Redefinition of target '%s'"
		call	sub_8D8E
		add	sp, 8

loc_411D:
		push	word ptr [bp+var_18+2]
		push	word ptr [bp+var_18]
		push	si
		call	sub_3F95
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		or	ax, word ptr [bp+var_C+2]
		jnz	short loc_4139

loc_4132:
		xor	dx, dx
		xor	ax, ax
		jmp	loc_4323
; ---------------------------------------------------------------------------

loc_4139:
		les	bx, [bp+var_C]
		mov	dx, es:[bx+0Eh]
		mov	ax, es:[bx+0Ch]
		les	bx, dword ptr [bp+var_8]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		les	bx, [bp+var_C]
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		les	bx, dword ptr [bp+var_8]
		mov	es:[bx+16h], dx
		mov	es:[bx+14h], ax
		les	bx, [bp+var_C]
		mov	al, es:[bx+25h]
		les	bx, dword ptr [bp+var_8]
		mov	es:[bx+25h], al
		mov	dx, word ptr [bp+var_C+2]
		mov	ax, word ptr [bp+var_C]
		jmp	loc_4323
; ---------------------------------------------------------------------------

loc_417C:
		les	bx, [bp+var_18]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_18]
		push	[bp+arg_4]
		push	[bp+arg_2]	; s
		call	sub_894C
		push	dx
		push	ax		; s
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		push	dx
		push	ax		; s2
		push	ds
		push	offset byte_E3DA ; s
		call	sub_894C
		push	dx
		push	ax		; __int32
		push	si		; int
		call	sub_2BB1
		mov	[bp+var_8+2], dx
		mov	[bp+var_8], ax
		les	bx, dword ptr [bp+var_8]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jnz	short loc_41C4
		mov	ax, es:[bx+14h]
		or	ax, es:[bx+16h]
		jz	short loc_41E9

loc_41C4:
		test	si, 2
		jnz	short loc_41E9
		les	bx, dword ptr [bp+var_8]
		cmp	byte ptr es:[bx+25h], 0
		jz	short loc_41E9
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	ds
		push	offset aUseOfAndDepend ; "Use of : and :: dependents for target	'"...
		call	sub_8D8E
		add	sp, 8
		jmp	short loc_41E9
; ---------------------------------------------------------------------------

loc_41E6:
		inc	word ptr [bp+var_18]

loc_41E9:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_41E6
		cmp	byte ptr es:[bx], 0
		jnz	short loc_41FB
		jmp	loc_42D3
; ---------------------------------------------------------------------------

loc_41FB:
		mov	dx, word ptr [bp+var_18+2]
		mov	ax, word ptr [bp+var_18]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_420C
; ---------------------------------------------------------------------------

loc_4209:
		inc	word ptr [bp+var_18]

loc_420C:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 0
		jz	short loc_4227
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_4209
		jmp	short loc_4227
; ---------------------------------------------------------------------------

loc_421D:
		les	bx, [bp+var_18]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_18]

loc_4227:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_421D
		push	ss
		lea	ax, [bp+@@s]
		push	ax
		push	ss
		lea	ax, [bp+var_14]
		push	ax
		call	sub_52C0
		mov	[bp+var_E], dx
		mov	[bp+var_10], ax
		push	2Ah ; '*'       ; c
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strchr
		add	sp, 6
		or	ax, dx
		jnz	short loc_4267
		push	3Fh ; '?'       ; c
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strchr
		add	sp, 6
		or	ax, dx
		jz	short loc_4278

loc_4267:
		push	[bp+var_8+2]	; int
		push	[bp+var_8]	; int
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_3E86
		jmp	short loc_42C7
; ---------------------------------------------------------------------------

loc_4278:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 24h ;	'$'
		jnz	short loc_4296
		push	[bp+var_8+2]
		push	[bp+var_8]
		push	[bp+var_8+2]
		push	[bp+var_8]
		push	word ptr [bp+@@s+2]
		push	bx
		call	sub_7690
		jmp	short loc_42A5
; ---------------------------------------------------------------------------

loc_4296:
		push	[bp+var_8+2]
		push	[bp+var_8]
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C

loc_42A5:
		push	dx
		push	ax		; s
		push	[bp+var_E]
		push	[bp+var_10]	; s
		call	sub_894C
		push	dx
		push	ax		; s2
		push	[bp+var_12]
		push	[bp+var_14]	; s
		call	sub_894C
		push	dx
		push	ax		; __int32
		push	1		; int
		call	sub_2BB1
		push	dx
		push	ax
		call	sub_3142

loc_42C7:
		les	bx, [bp+var_18]
		cmp	byte ptr es:[bx], 0
		jz	short loc_42D3
		jmp	loc_41FB
; ---------------------------------------------------------------------------

loc_42D3:
		call	sub_4328
		mov	[bp+var_1E], dx
		mov	[bp+var_20], ax
		les	bx, dword ptr [bp+var_8]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jz	short loc_4302
		mov	ax, [bp+var_20]
		or	ax, [bp+var_1E]
		jz	short loc_4302
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aTooManyRulesFo ; "Too many rules for target '%s'"
		call	sub_8D8E
		add	sp, 8

loc_4302:
		les	bx, dword ptr [bp+var_8]
		mov	ax, es:[bx+0Ch]
		or	ax, es:[bx+0Eh]
		jnz	short loc_431D
		mov	dx, [bp+var_1E]
		mov	ax, [bp+var_20]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax

loc_431D:
		mov	dx, [bp+var_8+2]
		mov	ax, [bp+var_8]

loc_4323:
		pop	si
		leave
		retn	6
sub_3F95	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4328	proc near

var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2

		enter	0Eh, 0
		push	si
		mov	[bp+var_2], 0
		mov	[bp+var_4], 0
		mov	[bp+var_A], 0
		mov	[bp+var_C], 0
		mov	word ptr [bp+var_8+2], 0
		mov	word ptr [bp+var_8], 0

loc_434B:
		call	sub_1D9C
		mov	si, ax
		cmp	si, 0Ah
		jz	short loc_434B
		cmp	si, 21h	; '!'
		jnz	short loc_435F
		call	sub_49D0
		jmp	short loc_434B
; ---------------------------------------------------------------------------

loc_435F:
		push	si
		call	sub_446D
		or	ax, ax
		jnz	short loc_436A
		jmp	loc_4460
; ---------------------------------------------------------------------------

loc_436A:
		call	sub_1D9C
		mov	si, ax
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		cmp	si, 0FFFFh
		jnz	short loc_4381
		jmp	loc_4460
; ---------------------------------------------------------------------------

loc_4381:
		cmp	si, 0Ah
		jz	short loc_434B
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		mov	byte_1285A, 0
		mov	[bp+var_A], 0
		mov	[bp+var_C], 0
		jmp	short loc_4419
; ---------------------------------------------------------------------------

loc_43A1:
		push	si
		call	sub_743F
		call	sub_1D9C
		mov	si, ax
		cmp	si, 3Ch	; '<'
		jnz	short loc_43EC
		call	sub_1D9C
		mov	[bp+var_E], ax
		cmp	ax, 3Ch	; '<'
		jnz	short loc_43E7
		cmp	word_F50E, 0
		jz	short loc_43CC
		push	[bp+var_A]
		push	[bp+var_C]
		call	sub_53E4
		jmp	short loc_43DA
; ---------------------------------------------------------------------------

loc_43CC:
		push	3Ch ; '<'
		call	sub_743F
		push	[bp+var_A]
		push	[bp+var_C]
		call	sub_47AC

loc_43DA:
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		call	sub_1D9C
		mov	si, ax
		jmp	short loc_4419
; ---------------------------------------------------------------------------

loc_43E7:
		push	[bp+var_E]
		jmp	short loc_4416
; ---------------------------------------------------------------------------

loc_43EC:
		cmp	si, 26h	; '&'
		jnz	short loc_4419
		call	sub_1D9C
		mov	byte ptr [bp+var_E+1], al
		cmp	al, 26h	; '&'
		jnz	short loc_4411
		push	[bp+var_A]
		push	[bp+var_C]
		call	sub_47AC
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		call	sub_1D9C
		mov	si, ax
		jmp	short loc_4419
; ---------------------------------------------------------------------------

loc_4411:
		mov	al, byte ptr [bp+var_E+1]
		cbw
		push	ax

loc_4416:
		call	sub_1C97

loc_4419:
		cmp	si, 0FFFFh
		jz	short loc_4426
		cmp	si, 0Ah
		jz	short loc_4426
		jmp	loc_43A1
; ---------------------------------------------------------------------------

loc_4426:
		push	word ptr [bp+var_8+2]
		push	word ptr [bp+var_8]
		call	sub_498A
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		les	bx, [bp+var_8]
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jz	short loc_4451
		jmp	loc_434B
; ---------------------------------------------------------------------------

loc_4451:
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		jmp	loc_434B
; ---------------------------------------------------------------------------

loc_4460:
		push	si
		call	sub_1C97
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		pop	si
		leave
		retn
sub_4328	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_446D	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_0]
		cmp	dx, 20h	; ' '
		jz	short loc_447D
		cmp	dx, 9
		jnz	short loc_4484

loc_447D:
		mov	ax, 1
		pop	bp
		retn	2
; ---------------------------------------------------------------------------

loc_4484:
		xor	ax, ax
		pop	bp
		retn	2
sub_446D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_448A	proc near

var_4		= word ptr -4
var_2		= word ptr -2

		enter	4, 0
		mov	ax, word_E3D6
		mov	bx, 3E8h
		cwd
		idiv	bx
		mov	bx, 0Ah
		cwd
		idiv	bx
		add	dl, 30h	; '0'
		mov	byte_E3CC, dl
		mov	ax, word_E3D6
		mov	bx, 64h	; 'd'
		cwd
		idiv	bx
		mov	bx, 0Ah
		cwd
		idiv	bx
		add	dl, 30h	; '0'
		mov	byte_E3CD, dl
		mov	ax, word_E3D6
		cwd
		idiv	bx
		cwd
		idiv	bx
		add	dl, 30h	; '0'
		mov	byte_E3CE, dl
		mov	ax, word_E3D6
		cwd
		idiv	bx
		add	dl, 30h	; '0'
		mov	byte_E3CF, dl
		inc	word_E3D6
		push	ds
		push	offset aMake_0	; "MAKE"
		call	sub_894C
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	dx, [bp+var_2]
		leave
		retn
sub_448A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_44ED	proc near
		push	bp
		mov	bp, sp
		push	si
		call	sub_1D9C
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	short loc_4505
		push	ds
		push	offset aUnexpectedEn_0 ; "Unexpected end of file"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_4505:
		cmp	si, 3Ch	; '<'
		jnz	short loc_4533
		call	sub_1D9C
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	short loc_451E
		push	ds
		push	offset aUnexpectedEn_0 ; "Unexpected end of file"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_451E:
		cmp	si, 3Ch	; '<'
		jnz	short loc_4528
		mov	ax, 1
		jmp	short loc_4539
; ---------------------------------------------------------------------------

loc_4528:
		push	si
		call	sub_1C97
		push	3Ch ; '<'
		call	sub_1C97
		jmp	short loc_4537
; ---------------------------------------------------------------------------

loc_4533:
		push	si
		call	sub_1C97

loc_4537:
		xor	ax, ax

loc_4539:
		pop	si
		pop	bp
		retn
sub_44ED	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_453C	proc near

block		= dword	ptr -24h
var_20		= word ptr -20h
var_1E		= word ptr -1Eh
var_1C		= dword	ptr -1Ch
@@s		= dword	ptr -18h
@@s2		= byte ptr -14h
var_10		= byte ptr -10h
var_E		= byte ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		enter	24h, 0
		push	si
		push	di
		mov	word ptr [bp+var_4+2], 0
		mov	word ptr [bp+var_4], 0
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Ch], 0
		mov	word ptr es:[bx+0Ah], 0
		mov	byte ptr es:[bx], 1
		call	sub_44ED
		or	ax, ax
		jz	short loc_459C
		push	0Eh		; size
		call	sub_5296
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+0Ch], 0
		mov	word ptr es:[bx+0Ah], 0
		mov	word ptr es:[bx+4], 0
		mov	word ptr es:[bx+2], 0
		jmp	loc_46BC
; ---------------------------------------------------------------------------

loc_459C:
		mov	[bp+var_C], 0

loc_45A1:
		call	sub_1D9C
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0FFFFh
		jnz	short loc_45B7
		push	ds
		push	offset aUnexpectedEn_0 ; "Unexpected end of file"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_45B7:
		cmp	[bp+var_6], 21h	; '!'
		jnz	short loc_4621
		push	ds
		push	offset byte_1285A ; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; size
		call	sub_5296
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	ds
		push	offset byte_1285A ; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	[bp+var_1E], dx
		mov	[bp+var_20], ax
		call	sub_49D0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jz	short loc_4612
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4

loc_4612:
		mov	dx, [bp+var_1E]
		mov	ax, [bp+var_20]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		jmp	short loc_463B
; ---------------------------------------------------------------------------

loc_4621:
		push	[bp+var_6]
		call	sub_743F
		cmp	[bp+var_6], 0Ah
		jnz	short loc_4632
		mov	[bp+var_C], 1

loc_4632:
		cmp	[bp+var_C], 0
		jnz	short loc_463B
		jmp	loc_45A1
; ---------------------------------------------------------------------------

loc_463B:
		push	8		; size
		call	sub_5296
		mov	word ptr [bp+var_1C+2],	dx
		mov	word ptr [bp+var_1C], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		les	bx, [bp+var_1C]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx], 0
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		or	ax, es:[bx+0Ch]
		jnz	short loc_4682
		mov	dx, word ptr [bp+var_1C+2]
		mov	ax, word ptr [bp+var_1C]
		mov	es:[bx+0Ch], dx
		mov	es:[bx+0Ah], ax
		jmp	short loc_4692
; ---------------------------------------------------------------------------

loc_4682:
		les	bx, [bp+var_4]
		mov	dx, word ptr [bp+var_1C+2]
		mov	ax, word ptr [bp+var_1C]
		mov	es:[bx+2], dx
		mov	es:[bx], ax

loc_4692:
		mov	dx, word ptr [bp+var_1C+2]
		mov	ax, word ptr [bp+var_1C]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		les	bx, [bp+@@s]
		mov	byte ptr es:[bx], 0
		call	sub_44ED
		or	ax, ax
		jnz	short loc_46BC
		jmp	loc_459C
; ---------------------------------------------------------------------------

loc_46BC:
		xor	si, si
		jmp	short loc_46C5
; ---------------------------------------------------------------------------

loc_46C0:
		mov	[bp+si+@@s2], 0
		inc	si

loc_46C5:
		cmp	si, 8
		jl	short loc_46C0
		xor	si, si
		call	sub_1D9C
		mov	[bp+var_6], ax
		xor	di, di
		jmp	short loc_46F3
; ---------------------------------------------------------------------------

loc_46D6:
		cmp	si, 8
		jge	short loc_46E4
		mov	al, byte ptr [bp+var_6]
		mov	[bp+si+@@s2], al
		inc	si
		jmp	short loc_46ED
; ---------------------------------------------------------------------------

loc_46E4:
		cmp	[bp+var_6], 20h	; ' '
		jz	short loc_46ED
		mov	di, 1

loc_46ED:
		call	sub_1D9C
		mov	[bp+var_6], ax

loc_46F3:
		cmp	[bp+var_6], 0FFFFh
		jz	short loc_46FF
		cmp	[bp+var_6], 0Ah
		jnz	short loc_46D6

loc_46FF:
		push	[bp+var_6]
		call	sub_1C97
		mov	al, [bp+var_E]
		cbw
		mov	[bp+var_A], ax
		mov	[bp+var_E], 0
		push	ss
		lea	ax, [bp+@@s2]
		push	ax		; s2
		push	ds
		push	offset s1	; "NOKEEP"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_472D
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+1], 0
		jmp	short loc_47A0
; ---------------------------------------------------------------------------

loc_472D:
		mov	al, byte ptr [bp+var_A]
		mov	[bp+var_E], al
		mov	al, [bp+var_10]
		cbw
		mov	[bp+var_A], ax
		mov	[bp+var_10], 0
		push	ss
		lea	ax, [bp+@@s2]
		push	ax		; s2
		push	ds
		push	offset aKeep	; "KEEP"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_475B
		les	bx, [bp+arg_0]
		mov	byte ptr es:[bx+1], 1
		jmp	short loc_47A0
; ---------------------------------------------------------------------------

loc_475B:
		mov	[bp+var_8], 1
		xor	si, si
		jmp	short loc_4777
; ---------------------------------------------------------------------------

loc_4764:
		mov	bx, si
		inc	si
		lea	ax, [bp+@@s2]
		add	bx, ax
		cmp	byte ptr ss:[bx], 20h ;	' '
		jz	short loc_4777
		mov	[bp+var_8], 0

loc_4777:
		cmp	[bp+si+@@s2], 0
		jz	short loc_4782
		cmp	si, 8
		jl	short loc_4764

loc_4782:
		cmp	[bp+var_8], 0
		jz	short loc_478C
		or	di, di
		jz	short loc_4796

loc_478C:
		push	ds
		push	offset aOnlyKeepOrNoke ; "Only <<KEEP or <<NOKEEP"
		call	sub_8D8E
		add	sp, 4

loc_4796:
		les	bx, [bp+arg_0]
		mov	al, byte ptr word_F50C
		mov	es:[bx+1], al

loc_47A0:
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		pop	di
		pop	si
		leave
		retn	4
sub_453C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_47AC	proc near

block		= dword	ptr -1Ah
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= dword	ptr -12h
var_E		= byte ptr -0Eh
var_D		= byte ptr -0Dh
@@s		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	1Ah, 0
		mov	word ptr [bp+var_8+2], 0
		mov	word ptr [bp+var_8], 0
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		mov	[bp+var_E], 0
		push	0Eh		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		call	sub_448A
		les	bx, [bp+var_4]
		mov	es:[bx+8], dx
		mov	es:[bx+6], ax
		mov	byte ptr es:[bx], 0
		mov	word ptr es:[bx+0Ch], 0
		mov	word ptr es:[bx+0Ah], 0
		call	sub_1D9C
		mov	[bp+var_D], al
		cmp	al, 0Ah
		jnz	short loc_4810
		push	ds
		push	offset aNoTerminatorSp ; "No terminator	specified for in-line fil"...
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4
		jmp	short loc_4810
; ---------------------------------------------------------------------------

loc_480A:
		call	sub_1D9C
		mov	[bp+var_E], al

loc_4810:
		cmp	[bp+var_E], 0Ah
		jnz	short loc_480A
		jmp	loc_4934
; ---------------------------------------------------------------------------

loc_4819:
		cmp	[bp+var_E], 21h	; '!'
		jz	short loc_4822
		jmp	loc_48AE
; ---------------------------------------------------------------------------

loc_4822:
		mov	al, [bp+var_E]
		cmp	al, [bp+var_D]
		jnz	short loc_482D
		jmp	loc_48AE
; ---------------------------------------------------------------------------

loc_482D:
		push	ds
		push	offset byte_1285A ; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; size
		call	sub_5296
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	ds
		push	offset byte_1285A ; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	[bp+var_14], dx
		mov	[bp+var_16], ax
		call	sub_49D0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jz	short loc_4882
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4

loc_4882:
		mov	dx, [bp+var_14]
		mov	ax, [bp+var_16]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		jmp	loc_4934
; ---------------------------------------------------------------------------

loc_4892:
		mov	al, [bp+var_E]
		cbw
		push	ax
		call	sub_743F
		call	sub_1D9C
		mov	[bp+var_E], al
		cmp	al, 0FFh
		jnz	short loc_48AE
		push	ds
		push	offset aNoTerminatorSp ; "No terminator	specified for in-line fil"...
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_48AE:
		cmp	[bp+var_E], 0Ah
		jnz	short loc_4892
		mov	al, [bp+var_E]
		cbw
		push	ax
		call	sub_743F
		push	8		; size
		call	sub_5296
		mov	word ptr [bp+var_12+2],	dx
		mov	word ptr [bp+var_12], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		les	bx, [bp+var_12]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx], 0
		les	bx, [bp+var_4]
		mov	ax, es:[bx+0Ah]
		or	ax, es:[bx+0Ch]
		jnz	short loc_4903
		mov	dx, word ptr [bp+var_12+2]
		mov	ax, word ptr [bp+var_12]
		mov	es:[bx+0Ch], dx
		mov	es:[bx+0Ah], ax
		jmp	short loc_4913
; ---------------------------------------------------------------------------

loc_4903:
		les	bx, [bp+var_8]
		mov	dx, word ptr [bp+var_12+2]
		mov	ax, word ptr [bp+var_12]
		mov	es:[bx+2], dx
		mov	es:[bx], ax

loc_4913:
		mov	dx, word ptr [bp+var_12+2]
		mov	ax, word ptr [bp+var_12]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0

loc_4934:
		call	sub_1D9C
		mov	[bp+var_E], al
		mov	al, [bp+var_E]
		cmp	al, [bp+var_D]
		jz	short loc_4945
		jmp	loc_4819
; ---------------------------------------------------------------------------

loc_4945:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+8]
		mov	ax, es:[bx+6]
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_4966
; ---------------------------------------------------------------------------

loc_4958:
		les	bx, [bp+@@s]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F
		inc	word ptr [bp+@@s]

loc_4966:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_4958
		les	bx, [bp+var_4]
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn	4
sub_47AC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_498A	proc near

var_8		= word ptr -8
var_6		= word ptr -6
@@s		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	8, 0
		mov	word ptr [bp+@@s+2], ds
		mov	word ptr [bp+@@s], 475Ah
		jmp	short loc_499B
; ---------------------------------------------------------------------------

loc_4998:
		inc	word ptr [bp+@@s]

loc_499B:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_4998
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		push	dx
		push	ax		; s
		call	sub_894C
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	[bp+var_6]
		push	ax
		push	0
		push	0
		call	sub_31EE
		leave
		retn	4
sub_498A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_49D0	proc near
		push	bp
		mov	bp, sp
		push	si
		call	sub_4A48
		mov	si, ax
		mov	bx, word_12702
		cmp	bx, 0Eh
		ja	short loc_4A27
		add	bx, bx
		jmp	cs:off_4A2A[bx]

loc_49E9:
		push	si
		call	sub_5678
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_49EF:

		push	si
		call	sub_4E81
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_49F5:

		push	si
		push	word_12702
		call	sub_510B
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_49FF:

		push	si
		call	sub_5091
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_4A05:

		push	si
		call	sub_516A
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_4A0B:

		push	si
		call	sub_4CA3
; ---------------------------------------------------------------------------
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_4A11:

		push	si
		call	sub_520A
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_4A17:

		push	si
		call	sub_51B2
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_4A1D:

		push	si
		call	sub_4CC0
		jmp	short loc_4A27
; ---------------------------------------------------------------------------

loc_4A23:

		push	si
		call	sub_4CDD

loc_4A27:
		pop	si
		pop	bp
		retn
sub_49D0	endp

; ---------------------------------------------------------------------------
off_4A2A	dw offset loc_49E9
		dw offset loc_49EF
		dw offset loc_4A27
		dw offset loc_49FF
		dw offset loc_49F5
		dw offset loc_49F5
		dw offset loc_4A11
		dw offset loc_49F5
		dw offset loc_4A05
		dw offset loc_4A27
		dw offset loc_4A17
		dw offset loc_4A27
		dw offset loc_4A0B
		dw offset loc_4A1D
		dw offset loc_4A23

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4A48	proc near

var_A		= dword	ptr -0Ah
var_6		= word ptr -6
var_4		= dword	ptr -4

		enter	0Ah, 0
		push	20h ; ' '
		call	sub_565E
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 0Ah
		jnz	short loc_4A63
		mov	word_12702, 0
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4A63:
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		jmp	short loc_4A7F
; ---------------------------------------------------------------------------

loc_4A6D:
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+var_6]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]
		call	sub_1D9C
		mov	[bp+var_6], ax

loc_4A7F:
		mov	bx, [bp+var_6]
		test	byte ptr [bx+1D69h], 0Ch
		jnz	short loc_4A6D
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		cmp	[bp+var_6], 20h	; ' '
		jz	short loc_4A99
		jmp	loc_4B39
; ---------------------------------------------------------------------------

loc_4A99:
		push	ds
		push	offset aElse	; "else"
		push	ds
		push	offset byte_1385A ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jz	short loc_4AAE
		jmp	loc_4B39
; ---------------------------------------------------------------------------

loc_4AAE:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_A+2], dx
		mov	word ptr [bp+var_A], ax
		call	sub_1D22
		les	bx, [bp+var_4]
		mov	es:[bx], al
		cbw
		mov	[bp+var_6], ax
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		cmp	[bp+var_6], 69h	; 'i'
		jz	short loc_4B06
		cmp	[bp+var_6], 49h	; 'I'
		jz	short loc_4B06

loc_4ADD:
		dec	word ptr [bp+var_4]
		jmp	short loc_4AF0
; ---------------------------------------------------------------------------

loc_4AE2:
		les	bx, [bp+var_4]
		dec	word ptr [bp+var_4]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_1C97

loc_4AF0:
		mov	ax, word ptr [bp+var_4]
		cmp	ax, word ptr [bp+var_A]
		jnb	short loc_4AE2
		les	bx, [bp+var_A]
		mov	byte ptr es:[bx], 0
		mov	[bp+var_6], 20h	; ' '
		jmp	short loc_4B39
; ---------------------------------------------------------------------------

loc_4B06:
		call	sub_1D22
		les	bx, [bp+var_4]
		mov	es:[bx], al
		cbw
		mov	[bp+var_6], ax
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		cmp	[bp+var_6], 66h	; 'f'
		jz	short loc_4B29
		cmp	[bp+var_6], 46h	; 'F'
		jnz	short loc_4ADD

loc_4B29:
		call	sub_1D22
		mov	[bp+var_6], ax
		push	ax
		call	sub_1C97
		cmp	[bp+var_6], 20h	; ' '
		jnz	short loc_4ADD

loc_4B39:
		push	[bp+var_6]
		call	sub_565E
		mov	[bp+var_6], ax
		push	ds
		push	offset byte_1385A ; s
		call	_strlwr
		add	sp, 4
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aInclude	; "include"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4B67
		mov	word_12702, 1
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4B67:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aUndef	; "undef"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4B82
		mov	word_12702, 3
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4B82:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aElif	; "elif"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_4BA6
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aElseif	; "elseif"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4BAF

loc_4BA6:
		mov	word_12702, 0Ah
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4BAF:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	(offset	aElif+2) ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4BCA
		mov	word_12702, 7
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4BCA:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aIfdef	; "ifdef"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4BE5
		mov	word_12702, 4
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4BE5:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aIfndef	; "ifndef"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4C00
		mov	word_12702, 5
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4C00:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aEndif	; "endif"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4C1B
		mov	word_12702, 6
		jmp	loc_4C9E
; ---------------------------------------------------------------------------

loc_4C1B:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aElse	; "else"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4C35
		mov	word_12702, 8
		jmp	short loc_4C9E
; ---------------------------------------------------------------------------

loc_4C35:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aError	; "error"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4C4F
		mov	word_12702, 0Ch
		jmp	short loc_4C9E
; ---------------------------------------------------------------------------

loc_4C4F:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aMessage	; "message"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4C69
		mov	word_12702, 0Dh
		jmp	short loc_4C9E
; ---------------------------------------------------------------------------

loc_4C69:
		push	ds
		push	offset byte_1385A ; s2
		push	ds
		push	offset aCmdswitches ; "cmdswitches"
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4C83
		mov	word_12702, 0Eh
		jmp	short loc_4C9E
; ---------------------------------------------------------------------------

loc_4C83:
		mov	word_12702, 0
		push	ds
		push	offset aUnknownPreproc ; "Unknown preprocessor statement"
		call	sub_8D8E
		add	sp, 4
		push	[bp+var_6]
		call	sub_5678
		mov	[bp+var_6], 0FFFFh

loc_4C9E:
		mov	ax, [bp+var_6]
		leave
		retn
sub_4A48	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_4CA3	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		push	0
		call	sub_693F
		push	ds
		push	offset byte_1285A
		push	ds
		push	offset aErrorDirective ; "Error	directive: %s"
		call	sub_8D1A
sub_4CA3	endp

; ---------------------------------------------------------------------------
		add	sp, 8
		pop	bp
		retn	2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4CC0	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		push	0
		call	sub_693F
		push	ds
		push	offset byte_1285A
		push	ds
		push	offset aS_5	; "%s\r\n"
		call	sub_8E0F
		add	sp, 8
		pop	bp
		retn	2
sub_4CC0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4CDD	proc near

key		= word ptr -6
var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	6, 0
		push	si
		xor	si, si
		mov	ax, word_E3D8
		mov	[bp+key], ax
		push	[bp+arg_0]
		call	sub_5E7D
		or	ax, ax
		jz	short loc_4D57
		call	sub_5026
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_4D21
		cmp	byte ptr es:[bx], 2Bh ;	'+'
		jz	short loc_4D21
		cmp	byte ptr es:[bx], 2Dh ;	'-'
		jz	short loc_4D21
		mov	al, es:[bx]
		cbw
		push	ax
		push	ds
		push	offset aUnknownCmdswit ; "Unknown CMDSWITCHES operator '%c'"
		call	sub_8D8E
		add	sp, 6

loc_4D21:
		les	bx, [bp+var_4]
		inc	word ptr [bp+var_4]
		cmp	byte ptr es:[bx], 2Bh ;	'+'
		jnz	short loc_4D4B
		mov	si, 1
		jmp	short loc_4D4B
; ---------------------------------------------------------------------------

loc_4D32:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		mov	byte ptr [bp+key], al
		push	ss
		lea	ax, [bp+key]
		push	ax		; key
		push	si		; int
		call	sub_88F1
		or	ax, ax
		jnz	short loc_4D54
		inc	word ptr [bp+var_4]

loc_4D4B:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_4D32

loc_4D54:
		call	sub_8C1B

loc_4D57:
		pop	si
		leave
		retn	2
sub_4CDD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_4D5C(char *s)
sub_4D5C	proc near

var_8		= dword	ptr -8
var_4		= dword	ptr -4
@@s		= dword	ptr  4

		enter	8, 0
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlwr
		add	sp, 4
		mov	ax, word ptr dword_E3C4
		or	ax, word ptr dword_E3C4+2
		jnz	short loc_4DB5
		push	word ptr off_E332+2
		push	word ptr off_E332	; s
		call	_strlwr
		add	sp, 4
		push	0Ch		; size
		call	sub_5296
		mov	word ptr dword_E3C4+2, dx
		mov	word ptr dword_E3C4, ax
		les	bx, dword_E3C4
		mov	dx, word_12706
		mov	ax, s2
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	word ptr es:[bx+0Ah], 0
		mov	word ptr es:[bx+8], 0

loc_4DB5:
		mov	dx, word ptr dword_E3C4+2
		mov	ax, word ptr dword_E3C4
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_4E2E
; ---------------------------------------------------------------------------

loc_4DCA:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		push	word_12706
		push	s2		; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_4E1D
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s2
		les	bx, [bp+var_4]
		push	word ptr es:[bx+6]
		push	word ptr es:[bx+4] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_4E1D
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]
		push	ds
		push	offset aCycleInInclude ; "Cycle	in include files: '%s'"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_4E1D:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_4E2E:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_4DCA
		push	0Ch		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	dx, word_12706
		mov	ax, s2
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	es:[bx+6], dx
		mov	es:[bx+4], ax
		mov	word ptr es:[bx+0Ah], 0
		mov	word ptr es:[bx+8], 0
		les	bx, [bp+var_8]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		leave
		retn	4
sub_4D5C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4E81	proc near

@@offset		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
@@s		= dword	ptr -8
@@path		= dword	ptr -4
arg_0		= word ptr  4

		enter	14h, 0
		push	si
		push	[bp+arg_0]
		call	sub_5E7D
		or	ax, ax
		jnz	short loc_4E93
		jmp	loc_5021
; ---------------------------------------------------------------------------

loc_4E93:
		call	sub_5026
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		push	dx
		push	ax		; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+@@s+2]
		add	ax, word ptr [bp+@@s]
		dec	ax
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 22h ;	'"'
		jnz	short loc_4EC3
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 22h ;	'"'
		jz	short loc_4ED5

loc_4EC3:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 3Ch ;	'<'
		jnz	short loc_4EE1
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jnz	short loc_4EE1

loc_4ED5:
		inc	word ptr [bp+@@s]
		les	bx, [bp+var_C]
		mov	byte ptr es:[bx], 0
		jmp	short loc_4F05
; ---------------------------------------------------------------------------

loc_4EE1:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 22h ;	'"'
		jz	short loc_4EFF
		cmp	byte ptr es:[bx], 3Ch ;	'<'
		jz	short loc_4EFF
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 22h ;	'"'
		jz	short loc_4EFF
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jnz	short loc_4F05

loc_4EFF:
		push	ds
		push	offset aBadFilenameFor ; "Bad filename format in include statemen"...
		jmp	short loc_4F1A
; ---------------------------------------------------------------------------

loc_4F05:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		cmp	ax, 200h
		jb	short loc_4F23
		push	ds
		push	offset aFilenameTooLon ; "Filename too long"

loc_4F1A:
		call	sub_8D8E
		add	sp, 4
		jmp	loc_5021
; ---------------------------------------------------------------------------

loc_4F23:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset byte_1385A ; s
		call	sub_894C
		push	dx
		push	ax		; s
		call	sub_4D5C
		mov	dx, word_12706
		mov	ax, s2
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		call	sub_1C13
		mov	word ptr [bp+@@offset+2],	dx
		mov	word ptr [bp+@@offset], ax
		call	sub_1C8A
		push	ds
		push	offset byte_1385A ; path
		call	sub_1BCC
		mov	si, ax
		mov	dx, word_1076C
		mov	ax, word_1076A
		mov	word ptr [bp+var_10+2],	dx
		mov	word ptr [bp+var_10], ax
		jmp	short loc_4FBF
; ---------------------------------------------------------------------------

loc_4F70:
		les	bx, [bp+var_10]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset byte_1385A ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcat
		add	sp, 8
		push	ds
		push	offset byte_1285A ; path
		call	sub_1BCC
		mov	si, ax
		or	si, si
		jz	short loc_4FAE
		push	ds
		push	offset byte_1285A ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8

loc_4FAE:
		les	bx, [bp+var_10]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		mov	word ptr [bp+var_10+2],	dx
		mov	word ptr [bp+var_10], ax

loc_4FBF:
		mov	ax, word ptr [bp+var_10]
		or	ax, word ptr [bp+var_10+2]
		jz	short loc_4FCB
		or	si, si
		jz	short loc_4F70

loc_4FCB:
		or	si, si
		jnz	short loc_4FDF
		push	ds
		push	offset byte_1385A
		push	ds
		push	offset aUnableToOpenIn ; "Unable to open include file '%s'"
		call	sub_8D8E
		add	sp, 8
		jmp	short loc_5009
; ---------------------------------------------------------------------------

loc_4FDF:
		push	ds
		push	offset byte_1385A ; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; size
		call	sub_5296
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		push	ds
		push	offset byte_1385A ; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]
		call	sub_33BC

loc_5009:
		mov	dx, word ptr [bp+@@path+2]
		mov	ax, word ptr [bp+@@path]
		mov	word_12706, dx
		mov	s2, ax
		push	dx
		push	ax		; path
		push	word ptr [bp+@@offset+2]
		push	word ptr [bp+@@offset] ; offset
		call	sub_1C39

loc_5021:
		pop	si
		leave
		retn	2
sub_4E81	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5026	proc near

var_4		= dword	ptr -4

		enter	4, 0
		push	ds
		push	offset byte_1285A ; s
		call	_strlen
		add	sp, 4
		add	ax, 4759h
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], ax
		jmp	short loc_5042
; ---------------------------------------------------------------------------

loc_503F:
		dec	word ptr [bp+var_4]

loc_5042:
		cmp	word ptr [bp+var_4], 475Ah
		jbe	short loc_5052
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_503F

loc_5052:
		cmp	word ptr [bp+var_4], 475Ah
		ja	short loc_5062
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_506C

loc_5062:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx+1], 0
		jmp	short loc_5073
; ---------------------------------------------------------------------------

loc_506C:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0

loc_5073:
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 475Ah
		jmp	short loc_5080
; ---------------------------------------------------------------------------

loc_507D:
		inc	word ptr [bp+var_4]

loc_5080:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_507D
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		leave
		retn
sub_5026	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5091	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	al, [si+1D69h]
		mov	ah, 0
		test	al, 0Ch
		jnz	short loc_50B7
		cmp	si, 5Fh	; '_'
		jz	short loc_50B7
		push	ds
		push	offset aBadUndefStatem ; "Bad undef statement syntax"
		call	sub_8D8E
		add	sp, 4
		push	si
		call	sub_5678
		jmp	short loc_50C6
; ---------------------------------------------------------------------------

loc_50B7:
		push	si
		call	sub_5240
		push	ax
		call	sub_5678
		push	ds
		push	offset byte_1385A
		call	sub_28FE

loc_50C6:
		pop	si
		pop	bp
		retn	2
sub_5091	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_50CB	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	4, 0
		push	8		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	dx, word ptr dword_E3BA+2
		mov	ax, word ptr dword_E3BA
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	ax, [bp+arg_0]
		mov	es:[bx+4], ax
		mov	ax, word_F652
		dec	ax
		mov	es:[bx+6], ax
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr dword_E3BA+2, dx
		mov	word ptr dword_E3BA, ax
		leave
		retn	2
sub_50CB	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_510B	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, [bp+arg_2]
		mov	ax, [bp+arg_0]
		cmp	ax, 4
		jz	short loc_512B
		cmp	ax, 5
		jz	short loc_5131
		cmp	ax, 7
		jnz	short loc_5137
		push	si
		call	sub_5E7D
		jmp	short loc_5135
; ---------------------------------------------------------------------------

loc_512B:
		push	si
		call	sub_604E
		jmp	short loc_5135
; ---------------------------------------------------------------------------

loc_5131:
		push	si
		call	sub_60A9

loc_5135:
		mov	di, ax

loc_5137:
		or	di, di
		jz	short loc_5146
		push	ds
		push	offset byte_1285A
		call	sub_7963
		or	ax, ax
		jnz	short loc_515F

loc_5146:
		push	2
		push	0
		call	sub_558D
		cmp	word_12702, 8
		jnz	short loc_5158
		push	2
		jmp	short loc_5161
; ---------------------------------------------------------------------------

loc_5158:
		cmp	word_12702, 0Ah
		jnz	short loc_5164

loc_515F:
		push	1

loc_5161:
		call	sub_50CB

loc_5164:
		pop	di
		pop	si
		pop	bp
		retn	4
sub_510B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_516A	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		call	sub_5678
		mov	ax, word ptr dword_E3BA
		or	ax, word ptr dword_E3BA+2
		jz	short loc_51A4
		les	bx, dword_E3BA
		cmp	word ptr es:[bx+4], 1
		jnz	short loc_51A4
		push	0
		push	0
		call	sub_558D
		les	bx, dword_E3BA
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr dword_E3BA+2, dx
		mov	word ptr dword_E3BA, ax
		pop	bp
		retn	2
; ---------------------------------------------------------------------------

loc_51A4:
		push	ds
		push	offset aMisplacedElseS ; "Misplaced else statement"
		call	sub_8D8E
		add	sp, 4
		pop	bp
		retn	2
sub_516A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_51B2	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		call	sub_5678
		mov	ax, word ptr dword_E3BA
		or	ax, word ptr dword_E3BA+2
		jz	short loc_51FC
		les	bx, dword_E3BA
		cmp	word ptr es:[bx+4], 1
		jnz	short loc_51FC
		jmp	short loc_51D8
; ---------------------------------------------------------------------------

loc_51D1:
		push	2
		push	1
		call	sub_558D

loc_51D8:
		cmp	word_12702, 0Ah
		jz	short loc_51D1
		cmp	word_12702, 8
		jz	short loc_51D1
		les	bx, dword_E3BA
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr dword_E3BA+2, dx
		mov	word ptr dword_E3BA, ax
		pop	bp
		retn	2
; ---------------------------------------------------------------------------

loc_51FC:
		push	ds
		push	offset aMisplacedElifS ; "Misplaced elif statement"
		call	sub_8D8E
		add	sp, 4
		pop	bp
		retn	2
sub_51B2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_520A	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	[bp+arg_0]
		call	sub_5678
		mov	ax, word ptr dword_E3BA
		or	ax, word ptr dword_E3BA+2
		jz	short loc_5232
		les	bx, dword_E3BA
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr dword_E3BA+2, dx
		mov	word ptr dword_E3BA, ax
		pop	bp
		retn	2
; ---------------------------------------------------------------------------

loc_5232:
		push	ds
		push	offset aMisplacedEndif ; "Misplaced endif statement"
		call	sub_8D8E
		add	sp, 4
		pop	bp
		retn	2
sub_520A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5240	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	4, 0
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		jmp	short loc_526B
; ---------------------------------------------------------------------------

loc_524E:
		mov	ax, word_E330
		add	ax, 575Ah
		cmp	ax, word ptr [bp+var_4]
		jbe	short loc_5265
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+arg_0]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]

loc_5265:
		call	sub_1D9C
		mov	[bp+arg_0], ax

loc_526B:
		mov	bx, [bp+arg_0]
		test	byte ptr [bx+1D69h], 0Ch
		jnz	short loc_524E
		test	byte ptr [bx+1D69h], 2
		jnz	short loc_524E
		cmp	[bp+arg_0], 5Fh	; '_'
		jz	short loc_524E
		cmp	[bp+arg_0], 24h	; '$'
		jz	short loc_524E
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		mov	ax, [bp+arg_0]
		leave
		retn	2
sub_5240	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_5296(size_t	size)
sub_5296	proc near

var_4		= word ptr -4
var_2		= word ptr -2
@@size		= word ptr  4

		enter	4, 0
		push	[bp+@@size]	; size
		call	_malloc
		pop	cx
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		or	ax, [bp+var_2]
		jnz	short loc_52B6
		push	ds
		push	offset aNotEnoughMemor ; "Not enough memory"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_52B6:
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		leave
		retn	2
sub_5296	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_52C0	proc near

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		enter	0Ch, 0
		mov	[bp+var_A], ds
		mov	[bp+var_C], 2DAh
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_52EE
		mov	dx, ds
		mov	ax, 2DAh
		leave
		retn	8
; ---------------------------------------------------------------------------

loc_52EE:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 7Bh ;	'{'
		jnz	short loc_534C
		cmp	byte ptr es:[bx+1], 7Dh	; '}'
		jz	short loc_534C
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	short loc_5343
; ---------------------------------------------------------------------------

loc_530D:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 7Dh ;	'}'
		jnz	short loc_5340
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+var_8]
		les	bx, [bp+arg_4]
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		jmp	short loc_534C
; ---------------------------------------------------------------------------

loc_5340:
		inc	word ptr [bp+var_8]

loc_5343:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_530D

loc_534C:
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		call	_strlen
		add	sp, 4
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+2]
		add	ax, es:[bx]
		dec	ax
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jnz	short loc_53DA
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		dec	ax
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	short loc_53CB
; ---------------------------------------------------------------------------

loc_5385:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 3Ch ;	'<'
		jnz	short loc_53C8
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx-1], 3Ah	; ':'
		jz	short loc_53A6
		cmp	byte ptr es:[bx-1], 5Ch	; '\'
		jz	short loc_53A6
		cmp	byte ptr es:[bx-1], 2Fh	; '/'
		jnz	short loc_53AF

loc_53A6:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		jmp	short loc_53B6
; ---------------------------------------------------------------------------

loc_53AF:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 5Ch ;	'\'

loc_53B6:
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		inc	ax
		leave
		retn	8
; ---------------------------------------------------------------------------

loc_53C8:
		dec	word ptr [bp+var_8]

loc_53CB:
		mov	ax, word ptr [bp+var_8]
		inc	ax
		les	bx, [bp+arg_4]
		mov	dx, es:[bx]
		inc	dx
		cmp	ax, dx
		jnb	short loc_5385

loc_53DA:
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		leave
		retn	8
sub_52C0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_53E4	proc near

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	8, 0

loc_53E8:
		push	0Eh		; size
		call	sub_5296
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	word ptr es:[bx+4], 0
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx+0Ch], 0
		mov	word ptr es:[bx+0Ah], 0
		mov	word ptr es:[bx+8], 0
		mov	word ptr es:[bx+6], 0
		mov	byte ptr es:[bx], 1
		call	sub_54B3
		les	bx, [bp+var_4]
		mov	es:[bx+8], dx
		mov	es:[bx+6], ax
		cmp	word_F50E, 0
		jz	short loc_543C
		les	bx, es:[bx+6]
		mov	byte ptr es:[bx+0Ch], 0

loc_543C:
		mov	ax, [bp+arg_0]
		or	ax, [bp+arg_2]
		jnz	short loc_5452
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	[bp+arg_2], dx
		mov	[bp+arg_0], ax
		jmp	short loc_5463
; ---------------------------------------------------------------------------

loc_5452:
		les	bx, [bp+var_8]
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax

loc_5463:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		call	sub_553E
		or	ax, ax
		jz	short loc_5479
		jmp	loc_53E8
; ---------------------------------------------------------------------------

loc_5479:
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_54A1
; ---------------------------------------------------------------------------

loc_5487:
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		call	sub_453C
		les	bx, [bp+var_4]
		mov	dx, es:[bx+4]
		mov	ax, es:[bx+2]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax

loc_54A1:
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_5487
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		leave
		retn	4
sub_53E4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_54B3	proc near

var_4		= word ptr -4
var_2		= word ptr -2

		enter	4, 0
		push	si
		mov	[bp+var_2], 0
		mov	[bp+var_4], 0
		call	sub_1D9C
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	short loc_54D6
		push	ds
		push	offset aUnexpectedEn_0 ; "Unexpected end of file"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_54D6:
		cmp	si, 20h	; ' '
		jz	short loc_54E5
		cmp	si, 0Ah
		jz	short loc_54E5
		cmp	si, 3Ch	; '<'
		jnz	short loc_54F4

loc_54E5:
		call	sub_550A
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	si
		call	sub_1C97
		jmp	short loc_5501
; ---------------------------------------------------------------------------

loc_54F4:
		push	si
		call	sub_1C97
		call	sub_74EE
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax

loc_5501:
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		pop	si
		leave
		retn
sub_54B3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_550A	proc near

var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2

		enter	8, 0
		call	sub_448A
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	short loc_552D
; ---------------------------------------------------------------------------

loc_551F:
		les	bx, [bp+var_8]
		inc	word ptr [bp+var_8]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F

loc_552D:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_551F
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		leave
		retn
sub_550A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_553E	proc near
		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	di, di

loc_5545:
		call	sub_1D9C
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	short loc_555B
		push	ds
		push	offset aUnexpectedEn_0 ; "Unexpected end of file"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4
		jmp	short loc_5545
; ---------------------------------------------------------------------------

loc_555B:
		cmp	si, 0Ah
		jnz	short loc_5564
		xor	ax, ax
		jmp	short loc_5589
; ---------------------------------------------------------------------------

loc_5564:
		cmp	si, 3Ch	; '<'
		jnz	short loc_5577
		or	di, di
		jnz	short loc_5572
		mov	di, 1
		jmp	short loc_5545
; ---------------------------------------------------------------------------

loc_5572:
		mov	ax, 1
		jmp	short loc_5589
; ---------------------------------------------------------------------------

loc_5577:
		cmp	di, 1
		jnz	short loc_5583
		xor	di, di
		push	3Ch ; '<'
		call	sub_743F

loc_5583:
		push	si
		call	sub_743F
		jmp	short loc_5545
; ---------------------------------------------------------------------------

loc_5589:
		pop	di
		pop	si
		pop	bp
		retn
sub_553E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_558D	proc near

var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	2, 0
		push	si
		push	di
		mov	ax, word_F652
		dec	ax
		mov	[bp+var_2], ax
		xor	si, si

loc_559C:
		call	sub_1D9C
		mov	di, ax
		cmp	di, 0FFFFh
		jnz	short loc_55B6
		push	[bp+var_2]
		push	ds
		push	offset aUnexpectedEndO ; "Unexpected end of file in conditional	s"...
		call	sub_8D8E
		add	sp, 6
		jmp	loc_5658
; ---------------------------------------------------------------------------

loc_55B6:
		cmp	di, 21h	; '!'
		jz	short loc_55BE
		jmp	loc_564D
; ---------------------------------------------------------------------------

loc_55BE:
		call	sub_4A48
		mov	di, ax
		cmp	word_12702, 7
		jz	short loc_55D8
		cmp	word_12702, 4
		jz	short loc_55D8
		cmp	word_12702, 5
		jnz	short loc_55DB

loc_55D8:
		inc	si
		jmp	short loc_564D
; ---------------------------------------------------------------------------

loc_55DB:
		cmp	word_12702, 6
		jnz	short loc_55E5
		dec	si
		jmp	short loc_564D
; ---------------------------------------------------------------------------

loc_55E5:
		cmp	word_12702, 8
		jnz	short loc_5615
		or	si, si
		jnz	short loc_5615
		cmp	[bp+arg_2], 1
		jnz	short loc_55F9
		dec	si
		jmp	short loc_564D
; ---------------------------------------------------------------------------

loc_55F9:
		cmp	[bp+arg_2], 2
		jnz	short loc_560F
		cmp	[bp+arg_0], 0
		jnz	short loc_5608
		dec	si
		jmp	short loc_564D
; ---------------------------------------------------------------------------

loc_5608:
		mov	[bp+arg_2], 0
		jmp	short loc_564D
; ---------------------------------------------------------------------------

loc_560F:
		push	ds
		push	offset aMisplacedElseS ; "Misplaced else statement"
		jmp	short loc_562A
; ---------------------------------------------------------------------------

loc_5615:
		cmp	word_12702, 0Ah
		jnz	short loc_564D
		or	si, si
		jnz	short loc_564D
		cmp	[bp+arg_2], 2
		jz	short loc_5632
		push	ds
		push	offset aMisplacedElifS ; "Misplaced elif statement"

loc_562A:
		call	sub_8D8E
		add	sp, 4
		jmp	short loc_564D
; ---------------------------------------------------------------------------

loc_5632:
		cmp	[bp+arg_0], 0
		jnz	short loc_564D
		push	di
		call	sub_5E7D
		or	ax, ax
		jz	short loc_5651
		push	ds
		push	offset byte_1285A
		call	sub_7963
		or	ax, ax
		jz	short loc_5651
		jmp	short loc_5658
; ---------------------------------------------------------------------------

loc_564D:
		push	di
		call	sub_6DBF

loc_5651:
		or	si, si
		jl	short loc_5658
		jmp	loc_559C
; ---------------------------------------------------------------------------

loc_5658:
		pop	di
		pop	si
		leave
		retn	4
sub_558D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_565E	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		jmp	short loc_566C
; ---------------------------------------------------------------------------

loc_5667:
		call	sub_1D9C
		mov	si, ax

loc_566C:
		cmp	si, 20h	; ' '
		jz	short loc_5667
		mov	ax, si
		pop	si
		pop	bp
		retn	2
sub_565E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5678	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		jmp	short loc_5686
; ---------------------------------------------------------------------------

loc_5681:
		call	sub_1D9C
		mov	si, ax

loc_5686:
		cmp	si, 0FFFFh
		jz	short loc_5690
		cmp	si, 0Ah
		jnz	short loc_5681

loc_5690:
		pop	si
		pop	bp
		retn	2
sub_5678	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_5695(char *path)
sub_5695	proc near

@@ffblk		= ffblk	ptr -2Ch
@@path		= dword	ptr  4

		enter	2Ch, 0
		lea	ax, [bp+@@ffblk]
		push	ss
		push	ax
		push	ds
		push	offset byte_E494
		mov	cx, 2Bh	; '+'
		call	N_SCOPY@
		push	0		; attrib
		push	ss
		lea	ax, [bp+@@ffblk]
		push	ax		; ffblk
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	_findfirst
		add	sp, 0Ah
		or	ax, ax
		jge	short loc_56C7
		xor	dx, dx
		xor	ax, ax
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_56C7:
		mov	dx, [bp+@@ffblk.ff_fdate]
		xor	ax, ax
		add	ax, [bp+@@ffblk.ff_ftime]
		adc	dx, 0
		leave
		retn	4
sub_5695	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_56D6	proc near

timep		= time ptr -0Ch
datep		= date ptr -8
var_4		= word ptr -4
var_2		= word ptr -2

		enter	0Ch, 0
		push	ss
		lea	ax, [bp+datep]
		push	ax		; datep
		call	_getdate
		add	sp, 4
		push	ss
		lea	ax, [bp+timep]
		push	ax		; timep
		call	_gettime
		add	sp, 4
		mov	al, [bp+timep.ti_sec]
		mov	ah, 0
		sar	ax, 1
		and	ax, 1Fh
		and	byte ptr [bp+var_4], 0E0h
		or	byte ptr [bp+var_4], al
		mov	al, [bp+timep.ti_min]
		mov	ah, 0
		and	ax, 3Fh
		and	[bp+var_4], 0F81Fh
		shl	ax, 5
		or	[bp+var_4], ax
		mov	al, [bp+timep.ti_hour]
		mov	ah, 0
		and	ax, 1Fh
		and	[bp+var_4], 7FFh
		shl	ax, 0Bh
		or	[bp+var_4], ax
		mov	al, [bp+datep.da_day]
		cbw
		and	ax, 1Fh
		and	byte ptr [bp+var_2], 0E0h
		or	byte ptr [bp+var_2], al
		mov	al, [bp+datep.da_mon]
		cbw
		and	ax, 0Fh
		and	[bp+var_2], 0FE1Fh
		shl	ax, 5
		or	[bp+var_2], ax
		mov	ax, [bp+datep.da_year]
		add	ax, 0F844h
		and	ax, 7Fh
		and	[bp+var_2], 1FFh
		shl	ax, 9
		or	[bp+var_2], ax
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		leave
		retn
sub_56D6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5763	proc near

@@src		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	8, 0
		push	[bp+arg_2]
		push	[bp+arg_0]	; src
		push	ds
		push	offset byte_12708 ; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset byte_12708 ; pathname
		call	sub_5C2E
		or	ax, ax
		jz	short loc_5785
		jmp	loc_587D
; ---------------------------------------------------------------------------

loc_5785:
		push	ds
		push	offset _name	; "PATH"
		call	_getenv
		add	sp, 4
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		or	ax, word ptr [bp+@@src+2]
		jnz	short loc_579D
		jmp	loc_5875
; ---------------------------------------------------------------------------

loc_579D:
		mov	dx, word ptr [bp+@@src+2]
		mov	ax, word ptr [bp+@@src]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_57AE
; ---------------------------------------------------------------------------

loc_57AB:
		inc	word ptr [bp+var_4]

loc_57AE:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_57BD
		cmp	byte ptr es:[bx], 3Bh ;	';'
		jnz	short loc_57AB

loc_57BD:
		mov	ax, word ptr [bp+var_4]
		xor	dx, dx
		sub	ax, word ptr [bp+@@src]
		sbb	dx, 0
		push	ax		; n
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset byte_12708 ; dest
		call	_memmove
		add	sp, 0Ah
		mov	bx, word ptr [bp+var_4]
		xor	ax, ax
		sub	bx, word ptr [bp+@@src]
		sbb	ax, 0
		mov	byte ptr [bx+4608h], 0
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Bh ;	';'
		jnz	short loc_5801
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		inc	ax
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		jmp	short loc_580D
; ---------------------------------------------------------------------------

loc_5801:
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_580D:
		push	ds
		push	offset byte_12708 ; s
		call	_strlen
		add	sp, 4
		add	ax, 4607h
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], ax
		cmp	word ptr [bp+var_4], 4608h
		jbe	short loc_5849
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jz	short loc_5849
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jz	short loc_5849
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jz	short loc_5849
		push	40h ; '@'       ; int
		push	ds
		push	offset byte_12708 ; dest
		push	ds
		push	offset asc_E4C4	; "\\"
		call	sub_5DA2

loc_5849:
		push	4Fh ; 'O'       ; int
		push	ds
		push	offset byte_12708 ; dest
		push	[bp+arg_2]
		push	[bp+arg_0]	; src
		call	sub_5DA2
		push	ds
		push	offset byte_12708 ; pathname
		call	sub_5C2E
		or	ax, ax
		jnz	short loc_587D
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx], 0
		jz	short loc_586F
		jmp	loc_579D
; ---------------------------------------------------------------------------

loc_586F:
		mov	word_12758, 1

loc_5875:
		xor	dx, dx
		xor	ax, ax
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_587D:
		mov	dx, ds
		mov	ax, 4608h
		leave
		retn	4
sub_5763	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_5886(char *s, int, int)
sub_5886	proc near

@@argv		= dword	ptr -28h
var_24		= word ptr -24h
var_22		= word ptr -22h
var_20		= word ptr -20h
var_1E		= word ptr -1Eh
access		= word ptr -1Ch
var_19		= byte ptr -19h
var_18		= dword	ptr -18h
var_14		= word ptr -14h
var_12		= word ptr -12h
@@src		= dword	ptr -10h
block		= dword	ptr -0Ch
var_8		= dword	ptr -8
@@path		= dword	ptr -4
@@s		= dword	ptr  4
arg_4		= word ptr  8
arg_6		= word ptr  0Ah

		enter	28h, 0
		push	si
		push	di
		mov	word ptr [bp+@@src+2], 0
		mov	word ptr [bp+@@src], 0
		mov	[bp+var_12], 0FFFFh
		mov	[bp+var_14], 0FFFFh
		mov	word_12758, 0
		push	[bp+arg_6]
		push	[bp+arg_4]
		call	sub_5763
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		cmp	word_12758, 0
		jz	short loc_5920

loc_58BC:
		push	ds
		push	offset aComspec	; "COMSPEC"
		call	_getenv
		add	sp, 4
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		call	__getswitchar
		mov	byte_1275A, al
		mov	byte_1275B, 63h	; 'c'
		mov	byte_1275C, 20h	; ' '
		mov	byte_1275D, 0
		mov	ax, word_E294
		inc	ax
		push	ax		; int
		push	ds
		push	offset byte_1275A ; dest
		push	[bp+arg_6]
		push	[bp+arg_4]	; src
		call	sub_5DA2
		mov	ax, word_E294
		inc	ax
		push	ax		; int
		push	ds
		push	offset byte_1275A ; dest
		push	ds
		push	offset asc_E4CE	; " "
		call	sub_5DA2
		mov	ax, word_E294
		inc	ax
		push	ax		; int
		push	ds
		push	offset byte_1275A ; dest
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		call	sub_5DA2
		mov	word ptr [bp+@@s+2], ds
		mov	word ptr [bp+@@s], 465Ah
		jmp	loc_5B10
; ---------------------------------------------------------------------------

loc_5920:
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		push	dx
		push	ax		; s
		call	sub_894C
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		jmp	loc_5AE8
; ---------------------------------------------------------------------------

loc_593A:
		xor	di, di
		call	_flushall
		jmp	short loc_5956
; ---------------------------------------------------------------------------

loc_5941:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 22h ;	'"'
		jnz	short loc_5953
		mov	ax, di
		neg	ax
		sbb	ax, ax
		inc	ax
		mov	di, ax

loc_5953:
		inc	word ptr [bp+var_8]

loc_5956:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 3Ch ;	'<'
		jz	short loc_5965
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jnz	short loc_5969

loc_5965:
		or	di, di
		jz	short loc_5972

loc_5969:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_5941

loc_5972:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 3Ch ;	'<'
		jz	short loc_597E
		jmp	loc_5A14
; ---------------------------------------------------------------------------

loc_597E:
		mov	byte ptr es:[bx], 0
		jmp	short $+2

loc_5984:
		inc	word ptr [bp+var_8]
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_5984
		cmp	byte ptr es:[bx], 9
		jz	short loc_5984
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		mov	word ptr [bp+var_18+2],	dx
		mov	word ptr [bp+var_18], ax
		jmp	short $+2

loc_59A4:
		inc	word ptr [bp+var_8]
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jz	short loc_59C2
		cmp	byte ptr es:[bx], 0Ah
		jz	short loc_59C2
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_59C2
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jnz	short loc_59A4

loc_59C2:
		les	bx, [bp+var_8]
		mov	al, es:[bx]
		mov	[bp+var_19], al
		cmp	byte ptr es:[bx], 0
		jz	short loc_59E0
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		inc	ax
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		jmp	short loc_59EA
; ---------------------------------------------------------------------------

loc_59E0:
		mov	word ptr [bp+@@src+2], 0
		mov	word ptr [bp+@@src], 0

loc_59EA:
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+var_18+2]
		push	word ptr [bp+var_18] ; path
		push	0		; int
		push	1		; access
		call	sub_9322
		mov	[bp+var_12], ax
		or	ax, ax
		jge	short loc_5A08
		jmp	loc_5ABE
; ---------------------------------------------------------------------------

loc_5A08:
		les	bx, [bp+var_8]
		mov	al, [bp+var_19]
		mov	es:[bx], al
		jmp	loc_5AE8
; ---------------------------------------------------------------------------

loc_5A14:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jz	short loc_5A20
		jmp	loc_5AE8
; ---------------------------------------------------------------------------

loc_5A20:
		mov	byte ptr es:[bx], 0
		cmp	byte ptr es:[bx+1], 3Eh	; '>'
		jnz	short loc_5A35
		mov	[bp+access], 902h
		inc	word ptr [bp+var_8]
		jmp	short loc_5A3A
; ---------------------------------------------------------------------------

loc_5A35:
		mov	[bp+access], 302h

loc_5A3A:
		jmp	short $+2

loc_5A3C:
		inc	word ptr [bp+var_8]
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_5A3C
		cmp	byte ptr es:[bx], 9
		jz	short loc_5A3C
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		mov	word ptr [bp+var_18+2],	dx
		mov	word ptr [bp+var_18], ax
		jmp	short $+2

loc_5A5C:
		inc	word ptr [bp+var_8]
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jz	short loc_5A7A
		cmp	byte ptr es:[bx], 0Ah
		jz	short loc_5A7A
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_5A7A
		cmp	byte ptr es:[bx], 3Eh ;	'>'
		jnz	short loc_5A5C

loc_5A7A:
		les	bx, [bp+var_8]
		mov	al, es:[bx]
		mov	[bp+var_19], al
		cmp	byte ptr es:[bx], 0
		jz	short loc_5A98
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		inc	ax
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		jmp	short loc_5AA2
; ---------------------------------------------------------------------------

loc_5A98:
		mov	word ptr [bp+@@src+2], 0
		mov	word ptr [bp+@@src], 0

loc_5AA2:
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+var_18+2]
		push	word ptr [bp+var_18] ; path
		push	1		; int
		push	[bp+access]	; access
		call	sub_9322
		mov	[bp+var_14], ax
		or	ax, ax
		jge	short loc_5ADF

loc_5ABE:
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4
		jmp	loc_58BC
; ---------------------------------------------------------------------------

loc_5ADF:
		les	bx, [bp+var_8]
		mov	al, [bp+var_19]
		mov	es:[bx], al

loc_5AE8:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jz	short loc_5AFC
		mov	ax, word ptr [bp+@@path]
		or	ax, word ptr [bp+@@path+2]
		jz	short loc_5AFC
		jmp	loc_593A
; ---------------------------------------------------------------------------

loc_5AFC:
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jz	short loc_5B10
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4

loc_5B10:
		mov	ax, word ptr [bp+@@path]
		or	ax, word ptr [bp+@@path+2]
		jnz	short loc_5B28
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	ds
		push	offset aUnableToExecut ; "Unable to execute command: %s"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_5B28:
		mov	ax, word ptr [bp+@@src]
		or	ax, word ptr [bp+@@src+2]
		jz	short loc_5B52
		push	ds
		push	offset asc_E4CE	; " "
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; dest
		call	_strcat
		add	sp, 8
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; dest
		call	_strcat
		add	sp, 8

loc_5B52:
		mov	dx, word ptr [bp+@@path+2]
		mov	ax, word ptr [bp+@@path]
		mov	word ptr [bp+@@argv+2], dx
		mov	word ptr [bp+@@argv], ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	[bp+var_22], dx
		mov	[bp+var_24], ax
		mov	[bp+var_1E], 0
		mov	[bp+var_20], 0
		cmp	word_F510, 0
		jz	short loc_5B88
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	dx
		push	ax
		call	sub_944D
		jmp	short loc_5BC2
; ---------------------------------------------------------------------------

loc_5B88:
		mov	dx, word_10754
		mov	ax, env
		mov	word ptr [bp+var_18+2],	dx
		mov	word ptr [bp+var_18], ax
		jmp	short loc_5B9B
; ---------------------------------------------------------------------------

loc_5B97:
		add	word ptr [bp+var_18], 4

loc_5B9B:
		les	bx, [bp+var_18]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jnz	short loc_5B97
		push	word_10754
		push	env		; env
		push	ss
		lea	ax, [bp+@@argv]
		push	ax		; argv
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		push	0		; mode
		call	_spawnve
		add	sp, 0Eh

loc_5BC2:
		mov	si, ax
		push	[bp+var_14]	; int
		push	1		; handle
		call	sub_92FC
		push	[bp+var_12]	; int
		push	0		; handle
		call	sub_92FC
		cmp	si, 0FFFFh
		jnz	short loc_5BE9
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	ds
		push	offset aUnableToExecut ; "Unable to execute command: %s"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_5BE9:
		mov	ax, si
		and	ax, 0FF00h
		cmp	ax, 100h
		jz	short loc_5C03
		mov	ax, si
		and	ax, 0FF00h
		cmp	ax, 200h
		jz	short loc_5C03
		cmp	si, 0FFh
		jnz	short loc_5C0B

loc_5C03:
		call	sub_78D
		push	1		; status
		call	sub_8E01
; ---------------------------------------------------------------------------

loc_5C0B:
		mov	ax, si
		pop	di
		pop	si
		leave
		retn	8
sub_5886	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		les	bx, [bp+8]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	word ptr [bp+6]
		push	word ptr [bp+4]
		call	_stricmp
		add	sp, 8
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_5C2E(char *pathname)
sub_5C2E	proc near

@@dest		= dword	ptr -4
pathname	= dword	ptr  4

		enter	4, 0
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+pathname+2]
		add	ax, word ptr [bp+pathname]
		dec	ax
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		jmp	short loc_5C5F
; ---------------------------------------------------------------------------

loc_5C4D:
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jz	short loc_5C74
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jz	short loc_5C74
		dec	word ptr [bp+@@dest]

loc_5C5F:
		mov	ax, word ptr [bp+@@dest]
		inc	ax
		mov	dx, word ptr [bp+pathname]
		inc	dx
		cmp	ax, dx
		jb	short loc_5C74
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx], 2Eh ;	'.'
		jnz	short loc_5C4D

loc_5C74:
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx], 2Eh ;	'.'
		jnz	short loc_5CB9
		push	ds
		push	offset aBat	; "bat"
		mov	ax, word ptr [bp+@@dest]
		inc	ax
		push	word ptr [bp+@@dest+2]
		push	ax		; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_5C99
		mov	word_12758, 1

loc_5C99:
		push	0
		push	0		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod_0
		add	sp, 8
		cmp	ax, 0FFFFh
		jz	short loc_5CB3
		mov	ax, 1
		jmp	short locret_5CB5
; ---------------------------------------------------------------------------

loc_5CB3:
		xor	ax, ax

locret_5CB5:
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_5CB9:
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+pathname+2]
		add	ax, word ptr [bp+pathname]
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		push	ds
		push	offset a_com	; ".com"
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	0
		push	0		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod_0
		add	sp, 8
		cmp	ax, 0FFFFh
		jnz	short loc_5D49
		push	ds
		push	offset a_exe	; ".exe"
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcpy
		add	sp, 8
		push	0
		push	0		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod_0
		add	sp, 8
		cmp	ax, 0FFFFh
		jnz	short loc_5D49
		push	ds
		push	offset a_bat	; ".bat"
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcpy
		add	sp, 8
		push	0
		push	0		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod_0
		add	sp, 8
		cmp	ax, 0FFFFh
		jz	short loc_5D50
		mov	word_12758, 1
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0

loc_5D49:
		mov	ax, 1
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_5D50:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		xor	ax, ax
		leave
		retn	4
sub_5C2E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5D5D	proc near

var_6		= dword	ptr -6

		enter	6, 0
		mov	word ptr [bp+var_6], 0
		mov	dx, word_10754
		mov	ax, env
		mov	[bp-2],	dx
		mov	word ptr [bp+var_6+2], ax
		jmp	short loc_5D94
; ---------------------------------------------------------------------------

loc_5D75:
		mov	word ptr [bp+var_6], 0
		les	bx, [bp+var_6+2]
		push	word ptr es:[bx+2] ; int
		push	word ptr es:[bx] ; int
		push	ds
		push	(offset	_name+4)	; src
		push	ss
		lea	ax, [bp+var_6]
		push	ax		; __int32
		call	sub_22E0
		add	word ptr [bp+var_6+2], 4

loc_5D94:
		les	bx, [bp+var_6+2]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jnz	short loc_5D75
		leave
		retn
sub_5D5D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_5DA2(char *src, char *dest,	int)
sub_5DA2	proc near

@@src		= dword	ptr  4
@@dest		= dword	ptr  8
arg_8		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; s
		call	_strlen
		add	sp, 4
		push	ax
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s
		call	_strlen
		add	sp, 4
		pop	dx
		add	dx, ax
		cmp	dx, [bp+arg_8]
		jb	short loc_5DD0
		push	ds
		push	offset aCommandArgumen ; "Command arguments too	long"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_5DD0:
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcat
		add	sp, 8
		pop	bp
		retn	0Ah
sub_5DA2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_5DE6(char *path)
sub_5DE6	proc near

@@ffblk		= ffblk	ptr -3Eh
timeptr		= tm ptr -12h
@@path		= dword	ptr  4

		enter	3Eh, 0
		push	0		; attrib
		push	ss
		lea	ax, [bp+@@ffblk]
		push	ax		; ffblk
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	_findfirst
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_5E0A
		mov	dx, ds
		mov	ax, 3C3h
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_5E0A:
		mov	ax, [bp+@@ffblk.ff_fdate]
		and	ax, 1Fh
		mov	[bp+timeptr.tm_mday], ax
		mov	ax, [bp+@@ffblk.ff_fdate]
		shr	ax, 5
		and	ax, 0Fh
		dec	ax
		mov	[bp+timeptr.tm_mon], ax
		mov	ax, [bp+@@ffblk.ff_fdate]
		shr	ax, 9
		add	ax, 50h	; 'P'
		mov	[bp+timeptr.tm_year], ax
		mov	ax, [bp+@@ffblk.ff_ftime]
		and	ax, 1Fh
		mov	[bp+timeptr.tm_sec], ax
		mov	ax, [bp+@@ffblk.ff_ftime]
		shr	ax, 5
		and	ax, 3Fh
		mov	[bp+timeptr.tm_min], ax
		mov	ax, [bp+@@ffblk.ff_ftime]
		shr	ax, 0Bh
		mov	[bp+timeptr.tm_hour], ax
		mov	[bp+timeptr.tm_yday], 0
		mov	[bp+timeptr.tm_isdst], 0FFFFh
		push	ss
		lea	ax, [bp+timeptr]
		push	ax		; timeptr
		call	_mktime
		add	sp, 4
		cmp	dx, 0FFFFh
		jnz	short loc_5E6E
		cmp	ax, 0FFFFh
		jnz	short loc_5E6E
		mov	[bp+timeptr.tm_wday], 7

loc_5E6E:
		push	ss
		lea	ax, [bp+timeptr]
		push	ax		; tblock
		call	_asctime
		add	sp, 4
		leave
		retn	4
sub_5DE6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_5E7D	proc near

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	0Ah, 0
		push	si
		xor	si, si
		mov	word_13A5C, ds
		mov	word_13A5A, 744h
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0
		jmp	loc_6037
; ---------------------------------------------------------------------------

loc_5EA3:
		cmp	[bp+arg_0], 24h	; '$'
		jz	short loc_5EAC
		jmp	loc_5F6F
; ---------------------------------------------------------------------------

loc_5EAC:
		call	sub_1D9C
		mov	[bp+arg_0], ax
		cmp	[bp+arg_0], 28h	; '('
		jz	short loc_5ECE
		cmp	[bp+arg_0], 7Bh	; '{'
		jz	short loc_5ECE
		mov	bx, [bp+arg_0]
		test	byte ptr [bx+1D69h], 0Ch
		jz	short loc_5F2A
		cmp	[bp+arg_0], 64h	; 'd'
		jz	short loc_5F2A

loc_5ECE:
		push	[bp+arg_0]
		push	1D9Ch
		push	ss
		lea	ax, [bp+var_4+2]
		push	ax
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		call	sub_6DDC
		mov	[bp+arg_0], ax
		cmp	[bp+arg_0], 0FFFFh
		jnz	short loc_5EF2
		jmp	loc_6046
; ---------------------------------------------------------------------------

loc_5EF2:
		mov	ax, word_13A5E
		or	ax, word_13A60
		jz	short loc_5F14
		push	1
		push	0
		push	word ptr [bp+var_4+2]
		push	word ptr [bp+var_4]
		push	[bp+var_6]
		push	[bp+var_8]
		push	[bp+var_A]
		call	sub_666B
		jmp	loc_6031
; ---------------------------------------------------------------------------

loc_5F14:
		or	si, si
		jz	short loc_5F1B
		jmp	loc_6031
; ---------------------------------------------------------------------------

loc_5F1B:
		cmp	word_F50E, 0
		jz	short loc_5F25
		jmp	loc_6031
; ---------------------------------------------------------------------------

loc_5F25:
		push	30h ; '0'
		jmp	loc_602E
; ---------------------------------------------------------------------------

loc_5F2A:
		cmp	[bp+arg_0], 24h	; '$'
		jnz	short loc_5F35
		push	24h ; '$'
		jmp	loc_602E
; ---------------------------------------------------------------------------

loc_5F35:
		cmp	[bp+arg_0], 64h	; 'd'
		jnz	short loc_5F6B
		call	sub_1D9C
		mov	[bp+arg_0], ax
		cmp	[bp+arg_0], 28h	; '('
		jz	short loc_5F5A
		cmp	[bp+arg_0], 7Bh	; '{'
		jz	short loc_5F5A
		push	24h ; '$'
		call	sub_743F
		push	64h ; 'd'

loc_5F54:
		call	sub_743F
		jmp	loc_6037
; ---------------------------------------------------------------------------

loc_5F5A:
		push	1D9Ch
		call	sub_73B5
		cmp	ax, 0FFFFh
		jz	short loc_5F68
		jmp	loc_6031
; ---------------------------------------------------------------------------

loc_5F68:
		jmp	loc_6046
; ---------------------------------------------------------------------------

loc_5F6B:
		push	24h ; '$'
		jmp	short loc_5F54
; ---------------------------------------------------------------------------

loc_5F6F:
		cmp	[bp+arg_0], 64h	; 'd'
		jz	short loc_5F7E
		cmp	[bp+arg_0], 44h	; 'D'
		jz	short loc_5F7E
		jmp	loc_601A
; ---------------------------------------------------------------------------

loc_5F7E:
		or	si, si
		jz	short loc_5F85
		jmp	loc_601A
; ---------------------------------------------------------------------------

loc_5F85:
		mov	byte_1385A, 0
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		jmp	short loc_5FA6
; ---------------------------------------------------------------------------

loc_5F94:
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+arg_0]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]
		call	sub_1D9C
		mov	[bp+arg_0], ax

loc_5FA6:
		mov	bx, [bp+arg_0]
		test	byte ptr [bx+1D69h], 0Ch
		jnz	short loc_5F94
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	[bp+arg_0]
		call	sub_1C97
		push	ds
		push	offset aDefined	; "defined"
		push	ds
		push	offset byte_1385A ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_5FF7
		push	[bp+arg_0]
		call	sub_565E
		mov	[bp+arg_0], ax
		cmp	[bp+arg_0], 28h	; '('
		jnz	short loc_5FEB
		push	1D9Ch
		call	sub_73B5
		cmp	ax, 0FFFFh
		jnz	short loc_6031
		jmp	short loc_6046
; ---------------------------------------------------------------------------

loc_5FEB:
		push	ds
		push	offset aExpressionSynt ; "Expression syntax error in !if statemen"...
		call	sub_8D8E
		add	sp, 4
		jmp	short loc_6031
; ---------------------------------------------------------------------------

loc_5FF7:
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		jmp	short loc_600F
; ---------------------------------------------------------------------------

loc_6001:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F
		inc	word ptr [bp+var_4]

loc_600F:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_6001
		jmp	short loc_6031
; ---------------------------------------------------------------------------

loc_601A:
		cmp	[bp+arg_0], 22h	; '"'
		jnz	short loc_602B
		or	si, si
		jnz	short loc_6029
		mov	si, 1
		jmp	short loc_602B
; ---------------------------------------------------------------------------

loc_6029:
		xor	si, si

loc_602B:
		push	[bp+arg_0]

loc_602E:
		call	sub_743F

loc_6031:
		call	sub_1D9C
		mov	[bp+arg_0], ax

loc_6037:
		cmp	[bp+arg_0], 0FFFFh
		jz	short loc_6046
		cmp	[bp+arg_0], 0Ah
		jz	short loc_6046
		jmp	loc_5EA3
; ---------------------------------------------------------------------------

loc_6046:
		mov	ax, 1
		pop	si
		leave
		retn	2
sub_5E7D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_604E	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	word_13A5C, ds
		mov	word_13A5A, 919h
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0
		jmp	short loc_6097
; ---------------------------------------------------------------------------

loc_6073:
		mov	al, [si+1D69h]
		mov	ah, 0
		test	al, 1
		jnz	short loc_608E
		push	si
		call	sub_1C97
		push	1D9Ch
		call	sub_73B5
		cmp	ax, 0FFFFh
		jz	short loc_6097
		jmp	short loc_60A1
; ---------------------------------------------------------------------------

loc_608E:
		push	si
		call	sub_743F
		call	sub_1D9C
		mov	si, ax

loc_6097:
		cmp	si, 0FFFFh
		jz	short loc_60A1
		cmp	si, 0Ah
		jnz	short loc_6073

loc_60A1:
		mov	ax, 1
		pop	si
		pop	bp
		retn	2
sub_604E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_60A9	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	word_13A5C, ds
		mov	word_13A5A, 932h
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0
		push	21h ; '!'
		call	sub_743F
		jmp	short loc_60F7
; ---------------------------------------------------------------------------

loc_60D3:
		mov	al, [si+1D69h]
		mov	ah, 0
		test	al, 1
		jnz	short loc_60EE
		push	si
		call	sub_1C97
		push	1D9Ch
		call	sub_73B5
		cmp	ax, 0FFFFh
		jz	short loc_60F7
		jmp	short loc_6101
; ---------------------------------------------------------------------------

loc_60EE:
		push	si
		call	sub_743F
		call	sub_1D9C
		mov	si, ax

loc_60F7:
		cmp	si, 0FFFFh
		jz	short loc_6101
		cmp	si, 0Ah
		jnz	short loc_60D3

loc_6101:
		mov	ax, 1
		pop	si
		pop	bp
		retn	2
sub_60A9	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_6109	proc near

var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		enter	0Ch, 0
		push	si
		push	di
		mov	si, [bp+arg_4]
		mov	di, [bp+arg_2]
		les	bx, dword_102E8
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		cmp	[bp+arg_0], 0
		jz	short loc_618D
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jnz	short loc_617B
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jz	short loc_614B
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		jmp	short loc_6159
; ---------------------------------------------------------------------------

loc_614B:
		les	bx, dword_102E8
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; path
		call	sub_5695

loc_6159:
		les	bx, dword_102E8
		mov	es:[bx+20h], dx
		mov	es:[bx+1Eh], ax
		mov	ax, es:[bx+1Eh]
		or	ax, es:[bx+20h]
		jnz	short loc_617B
		mov	word ptr es:[bx+20h], 0
		mov	word ptr es:[bx+1Eh], 1

loc_617B:
		les	bx, dword_102E8
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax

loc_618D:
		or	di, di
		jnz	short loc_619D
		cmp	word_102EE, 0
		jnz	short loc_619D
		push	1
		call	sub_743F

loc_619D:
		les	bx, dword_102E8
		mov	dx, es:[bx+16h]
		mov	ax, es:[bx+14h]
		jmp	loc_6297
; ---------------------------------------------------------------------------

loc_61AC:
		cmp	word_F50A, 0
		jnz	short loc_61DA
		cmp	[bp+arg_0], 0
		jz	short loc_61DA
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		mov	dx, es:[bx+20h]
		mov	ax, es:[bx+1Eh]
		cmp	dx, [bp+var_6]
		jnb	short loc_61D0
		jmp	loc_628D
; ---------------------------------------------------------------------------

loc_61D0:
		ja	short loc_61DA
		cmp	ax, [bp+var_8]
		ja	short loc_61DA
		jmp	loc_628D
; ---------------------------------------------------------------------------

loc_61DA:
		push	ds
		push	offset byte_14106 ; __int32
		push	ds
		push	offset byte_140F4 ; __int32
		push	ds
		push	offset byte_14070 ; __int32
		push	ds
		push	offset byte_1406A ; __int32
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		mov	byte_1385A, 0
		test	si, 1
		jz	short loc_6217
		push	ds
		push	offset byte_1406A ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcat
		add	sp, 8

loc_6217:
		test	si, 2
		jz	short loc_622B
		push	ds
		push	offset byte_14070 ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcat
		add	sp, 8

loc_622B:
		test	si, 4
		jz	short loc_623F
		push	ds
		push	offset byte_140F4 ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcat
		add	sp, 8

loc_623F:
		test	si, 8
		jz	short loc_6253
		push	ds
		push	offset byte_14106 ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcat
		add	sp, 8

loc_6253:
		cmp	word_F50E, 0
		jz	short loc_627B
		push	ds
		push	offset byte_1385A ; s
		call	_strlen
		add	sp, 4
		dec	ax
		add	ax, 575Ah
		mov	word ptr [bp+var_C+2], ds
		mov	word ptr [bp+var_C], ax
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jnz	short loc_627B
		mov	byte ptr es:[bx], 0

loc_627B:
		push	ds
		push	offset asc_E4EC	; " "
		push	ds
		push	offset byte_1385A ; dest
		call	_strcat
		add	sp, 8
		push	di
		call	sub_72E3

loc_628D:
		les	bx, [bp+var_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]

loc_6297:
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	ax, word ptr [bp+var_4]
		or	ax, word ptr [bp+var_4+2]
		jz	short loc_62A8
		jmp	loc_61AC
; ---------------------------------------------------------------------------

loc_62A8:
		or	di, di
		jnz	short loc_62B8
		cmp	word_102EE, 0
		jnz	short loc_62B8
		push	2
		call	sub_743F

loc_62B8:
		pop	di
		pop	si
		leave
		retn	6
sub_6109	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_62BE	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	4, 0
		push	si
		mov	si, [bp+arg_0]
		cmp	si, 3Ah	; ':'
		jnz	short loc_631E
		push	0		; int
		push	0		; int
		push	0		; int
		push	0		; int
		push	word_14116
		push	off_14114	; src
		push	word_14112
		push	word_14110	; __int32
		push	ds
		push	offset byte_1385A ; dest
		call	sub_9247
		add	sp, 14h
		cmp	word_F50E, 0
		jnz	short loc_62F7
		jmp	loc_6404
; ---------------------------------------------------------------------------

loc_62F7:
		push	ds
		push	offset byte_1385A ; s
		call	_strlen
		add	sp, 4
		dec	ax
		add	ax, 575Ah
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jz	short loc_6317
		jmp	loc_6404
; ---------------------------------------------------------------------------

loc_6317:
		mov	byte ptr es:[bx], 0
		jmp	loc_6404
; ---------------------------------------------------------------------------

loc_631E:
		cmp	si, 2Eh	; '.'
		jnz	short loc_633D
		push	word_1411E
		push	word_1411C
		push	word_1411A
		push	word_14118
		push	0
		push	0
		push	0
		push	0
		jmp	short loc_63B9
; ---------------------------------------------------------------------------

loc_633D:
		cmp	si, 40h	; '@'
		jz	short loc_6367
		cmp	si, 26h	; '&'
		jnz	short loc_6351
		push	word_1411A
		push	word_14118
		jmp	short loc_6372
; ---------------------------------------------------------------------------

loc_6351:
		cmp	si, 3Ch	; '<'
		jz	short loc_635B
		cmp	si, 3Fh	; '?'
		jnz	short loc_638F

loc_635B:
		cmp	word_102EC, 1
		jz	short loc_63DD
		cmp	si, 3Ch	; '<'
		jnz	short loc_637F

loc_6367:
		les	bx, dword_102E8
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src

loc_6372:
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		jmp	loc_6404
; ---------------------------------------------------------------------------

loc_637F:
		cmp	si, 3Fh	; '?'
		jnz	short loc_63FF
		push	0Fh
		push	0
		push	1
		call	sub_6109
		jmp	short loc_6409
; ---------------------------------------------------------------------------

loc_638F:
		cmp	si, 2Ah	; '*'
		jnz	short loc_63FF
		call	sub_74B7
		mov	si, ax
		cmp	si, 2Ah	; '*'
		jz	short loc_63CB
		push	ax
		call	sub_74D3
		cmp	word_F50E, 0
		jz	short loc_63C5
		push	0		; int
		push	0		; int
		push	ds		; int
		push	offset byte_140FD ; int
		push	ds
		push	offset byte_140B2 ; src
		push	ds
		push	offset byte_1406D ; __int32

loc_63B9:
		push	ds
		push	offset byte_1385A ; dest
		call	sub_9247
		add	sp, 14h
		jmp	short loc_6404
; ---------------------------------------------------------------------------

loc_63C5:
		push	0
		push	0
		jmp	short loc_63E5
; ---------------------------------------------------------------------------

loc_63CB:
		cmp	word_102EC, 1
		jz	short loc_63DD
		push	0Fh
		push	0
		push	0
		call	sub_6109
		jmp	short loc_6409
; ---------------------------------------------------------------------------

loc_63DD:
		push	word_1411E
		push	word_1411C

loc_63E5:
		push	word_1411A
		push	word_14118
		push	word_14116
		push	off_14114
		push	word_14112
		push	word_14110
		jmp	short loc_63B9
; ---------------------------------------------------------------------------

loc_63FF:
		mov	ax, 1
		jmp	short loc_640B
; ---------------------------------------------------------------------------

loc_6404:
		push	0
		call	sub_72E3

loc_6409:
		xor	ax, ax

loc_640B:
		pop	si
		leave
		retn	2
sub_62BE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_6410	proc near

var_2		= word ptr -2
arg_0		= byte ptr  4

		enter	2, 0
		mov	al, [bp+arg_0]
		cbw
		mov	[bp+var_2], ax
		mov	cx, 4		; switch 4 cases
		mov	bx, offset word_6457

loc_6421:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_2]
		jz	short loc_6430
		add	bx, 2
		loop	loc_6421
		jmp	short loc_6450	; default
; ---------------------------------------------------------------------------

loc_6430:
		jmp	word ptr cs:[bx+8] ; switch jump

loc_6434:
		mov	ax, 4		; jumptable 00006430 case 66
		leave
		retn	2
; ---------------------------------------------------------------------------

loc_643B:

		mov	ax, 3		; jumptable 00006430 case 68
		leave
		retn	2
; ---------------------------------------------------------------------------

loc_6442:

		mov	ax, 0Ch		; jumptable 00006430 case 70
		leave
		retn	2
; ---------------------------------------------------------------------------

loc_6449:

		mov	ax, 7		; jumptable 00006430 case 82
		leave
		retn	2
; ---------------------------------------------------------------------------

loc_6450:
		mov	ax, 0Fh		; default
		leave
		retn	2
sub_6410	endp

; ---------------------------------------------------------------------------
word_6457	dw    42h,   44h,   46h,   52h
					; value	table for switch statement
		dw offset loc_6434	; jump table for switch	statement
		dw offset loc_643B
		dw offset loc_6442
		dw offset loc_6449

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_6467	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		cmp	[bp+arg_2], 0
		jnz	short loc_647B
		cmp	word_102EC, 0
		jnz	short loc_64C1

loc_647B:
		test	si, 8
		jz	short loc_6488
		mov	dx, ds
		mov	ax, 600Bh
		jmp	short loc_648C
; ---------------------------------------------------------------------------

loc_6488:
		xor	dx, dx
		xor	ax, ax

loc_648C:
		push	dx
		push	ax
		test	si, 4
		jz	short loc_649B
		mov	dx, ds
		mov	ax, 5FFDh
		jmp	short loc_649F
; ---------------------------------------------------------------------------

loc_649B:
		xor	dx, dx
		xor	ax, ax

loc_649F:
		push	dx
		push	ax
		test	si, 2
		jz	short loc_64AE
		mov	dx, ds
		mov	ax, 5FB2h
		jmp	short loc_64B2
; ---------------------------------------------------------------------------

loc_64AE:
		xor	dx, dx
		xor	ax, ax

loc_64B2:
		push	dx
		push	ax
		test	si, 1
		jz	short loc_650F
		mov	dx, ds
		mov	ax, 5F6Dh
		jmp	short loc_6513
; ---------------------------------------------------------------------------

loc_64C1:
		test	si, 8
		jz	short loc_64D0
		mov	dx, word_1411E
		mov	ax, word_1411C
		jmp	short loc_64D4
; ---------------------------------------------------------------------------

loc_64D0:
		xor	dx, dx
		xor	ax, ax

loc_64D4:
		push	dx		; int
		push	ax		; int
		test	si, 4
		jz	short loc_64E5
		mov	dx, word_1411A
		mov	ax, word_14118
		jmp	short loc_64E9
; ---------------------------------------------------------------------------

loc_64E5:
		xor	dx, dx
		xor	ax, ax

loc_64E9:
		push	dx		; int
		push	ax		; int
		test	si, 2
		jz	short loc_64FA
		mov	dx, word_14116
		mov	ax, off_14114
		jmp	short loc_64FE
; ---------------------------------------------------------------------------

loc_64FA:
		xor	dx, dx
		xor	ax, ax

loc_64FE:
		push	dx
		push	ax		; src
		test	si, 1
		jz	short loc_650F
		mov	dx, word_14112
		mov	ax, word_14110
		jmp	short loc_6513
; ---------------------------------------------------------------------------

loc_650F:
		xor	dx, dx
		xor	ax, ax

loc_6513:
		push	dx
		push	ax		; __int32
		push	ds
		push	offset byte_1385A ; dest
		call	sub_9247
		add	sp, 14h
		pop	si
		pop	bp
		retn	4
sub_6467	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_6524	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	4, 0
		push	si
		push	di
		mov	si, 0Fh
		xor	di, di
		push	2		; maxlen
		push	ds
		push	offset asc_E4EE	; "**"
		push	ds
		push	offset byte_1385A ; s1
		call	_strncmp
		add	sp, 0Ah
		or	ax, ax
		jnz	short loc_659B
		cmp	word_102EC, 0
		jnz	short loc_655D
		mov	al, byte_1385C
		push	ax
		call	sub_6410
		push	ax
		push	[bp+arg_0]
		push	0
		call	sub_6109
		jmp	loc_6663
; ---------------------------------------------------------------------------

loc_655D:
		push	0
		mov	al, byte_1385C
		push	ax
		call	sub_6410
		push	ax
		call	sub_6467
		cmp	word_F50E, 0
		jnz	short loc_6574
		jmp	loc_665D
; ---------------------------------------------------------------------------

loc_6574:
		push	ds
		push	offset byte_1385A ; s
		call	_strlen
		add	sp, 4
		dec	ax
		add	ax, 575Ah
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jz	short loc_6594
		jmp	loc_665D
; ---------------------------------------------------------------------------

loc_6594:
		mov	byte ptr es:[bx], 0
		jmp	loc_665D
; ---------------------------------------------------------------------------

loc_659B:
		cmp	byte_1385C, 0
		jz	short loc_65AC
		cmp	byte_1385B, 0
		jz	short loc_65AC
		jmp	loc_6658
; ---------------------------------------------------------------------------

loc_65AC:
		cmp	byte_1385A, 40h	; '@'
		jnz	short loc_65B8
		mov	di, 1
		jmp	short loc_6619
; ---------------------------------------------------------------------------

loc_65B8:
		cmp	byte_1385A, 3Ah	; ':'
		jnz	short loc_65C4
		and	si, 0FFF3h
		jmp	short loc_6619
; ---------------------------------------------------------------------------

loc_65C4:
		cmp	byte_1385A, 2Ah	; '*'
		jnz	short loc_65D4
		and	si, 0FFF7h
		mov	di, word_F50E
		jmp	short loc_6619
; ---------------------------------------------------------------------------

loc_65D4:
		cmp	byte_1385A, 3Ch	; '<'
		jnz	short loc_65DF
		xor	di, di
		jmp	short loc_6619
; ---------------------------------------------------------------------------

loc_65DF:
		cmp	byte_1385A, 2Eh	; '.'
		jnz	short loc_65EB
		and	si, 0FFFCh
		jmp	short loc_6619
; ---------------------------------------------------------------------------

loc_65EB:
		cmp	byte_1385A, 26h	; '&'
		jnz	short loc_65F7
		and	si, 0FFF4h
		jmp	short loc_6619
; ---------------------------------------------------------------------------

loc_65F7:
		cmp	byte_1385A, 3Fh	; '?'
		jnz	short loc_6658
		cmp	word_102EC, 1
		jnz	short loc_6607
		xor	di, di

loc_6607:
		mov	al, byte_1385B
		push	ax
		call	sub_6410
		push	ax
		push	[bp+arg_0]
		push	1
		call	sub_6109
		jmp	short loc_6663
; ---------------------------------------------------------------------------

loc_6619:
		cmp	byte_1385B, 0
		jz	short loc_6629
		mov	al, byte_1385B
		push	ax
		call	sub_6410
		and	si, ax

loc_6629:
		push	di
		push	si
		call	sub_6467
		cmp	word_F50E, 0
		jz	short loc_665D
		push	ds
		push	offset byte_1385A ; s
		call	_strlen
		add	sp, 4
		dec	ax
		add	ax, 575Ah
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 5Ch ;	'\'
		jnz	short loc_665D
		mov	byte ptr es:[bx], 0
		jmp	short loc_665D
; ---------------------------------------------------------------------------

loc_6658:
		mov	ax, 1
		jmp	short loc_6665
; ---------------------------------------------------------------------------

loc_665D:
		push	[bp+arg_0]
		call	sub_72E3

loc_6663:
		xor	ax, ax

loc_6665:
		pop	di
		pop	si
		leave
		retn	2
sub_6524	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_666B	proc near

block		= dword	ptr -26h
@@s		= dword	ptr -22h
var_1E		= word ptr -1Eh
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= dword	ptr -16h
var_12		= dword	ptr -12h
var_E		= word ptr -0Eh
@@dest		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh
arg_C		= word ptr  10h

		enter	26h, 0
		push	si
		push	di
		mov	di, [bp+arg_8]
		mov	word ptr [bp+@@dest+2], 0
		mov	word ptr [bp+@@dest], 0
		mov	[bp+var_E], 0
		mov	dx, word ptr [bp+arg_4+2]
		mov	ax, word ptr [bp+arg_4]
		mov	word ptr [bp+var_12+2],	dx
		mov	word ptr [bp+var_12], ax
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+var_16+2],	dx
		mov	word ptr [bp+var_16], ax
		mov	ax, word_13A5E
		or	ax, word_13A60
		jnz	short loc_66A7
		jmp	loc_6939
; ---------------------------------------------------------------------------

loc_66A7:
		mov	dx, word_13A60
		mov	ax, word_13A5E
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		mov	dx, word ptr off_14066+2
		mov	ax, word ptr off_14066
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ah
		push	word ptr [bp+var_4+2]
		push	ax		; s
		call	_strlen
		add	sp, 4
		mov	dx, word ptr [bp+var_4+2]
		add	ax, word ptr [bp+var_4]
		add	ax, 0Bh
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		les	bx, [bp+var_4]
		or	byte ptr es:[bx], 2
		jmp	loc_68D8
; ---------------------------------------------------------------------------

loc_66EB:
		cmp	si, 24h	; '$'
		jz	short loc_66F3
		jmp	loc_6858
; ---------------------------------------------------------------------------

loc_66F3:
		call	sub_74B7
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_6714
		cmp	si, 7Bh	; '{'
		jz	short loc_6714
		test	byte ptr [si+1D69h], 0Ch
		jnz	short loc_670C
		jmp	loc_6801
; ---------------------------------------------------------------------------

loc_670C:
		cmp	si, 64h	; 'd'
		jnz	short loc_6714
		jmp	loc_6801
; ---------------------------------------------------------------------------

loc_6714:
		or	di, di
		jz	short loc_6725
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax

loc_6725:
		push	si
		push	74B7h
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		push	ss
		lea	ax, [bp+var_1A]
		push	ax
		push	ss
		lea	ax, [bp+var_1E]
		push	ax
		call	sub_6DDC
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	short loc_6745
		jmp	loc_68E5
; ---------------------------------------------------------------------------

loc_6745:
		push	[bp+arg_C]
		push	[bp+arg_A]
		push	[bp+var_E]
		push	[bp+var_18]
		push	[bp+var_1A]
		push	[bp+var_1C]
		push	[bp+var_1E]
		call	sub_666B
		or	di, di
		jnz	short loc_6764
		jmp	loc_68D8
; ---------------------------------------------------------------------------

loc_6764:
		mov	word ptr [bp+block+2], 0
		mov	word ptr [bp+block], 0
		mov	ax, word ptr [bp+@@dest]
		or	ax, word ptr [bp+@@dest+2]
		jz	short loc_6782
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax

loc_6782:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		push	ax
		push	word ptr off_14066+2
		push	word ptr off_14066 ; s
		call	_strlen
		add	sp, 4
		pop	dx
		add	dx, ax
		inc	dx
		push	dx		; size
		call	sub_5296
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	word ptr off_14066+2
		push	word ptr off_14066 ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcat
		add	sp, 8
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jnz	short loc_67F2
		jmp	loc_68D8
; ---------------------------------------------------------------------------

loc_67F2:
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4
		jmp	loc_68D8
; ---------------------------------------------------------------------------

loc_6801:
		cmp	si, 24h	; '$'
		jnz	short loc_680B
		push	24h ; '$'
		jmp	loc_68D5
; ---------------------------------------------------------------------------

loc_680B:
		cmp	[bp+arg_C], 0
		jz	short loc_6843
		cmp	si, 64h	; 'd'
		jnz	short loc_6843
		call	sub_74B7
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_6832
		cmp	si, 7Bh	; '{'
		jz	short loc_6832
		push	24h ; '$'
		call	sub_743F
		push	64h ; 'd'

loc_682C:
		call	sub_743F
		jmp	loc_68DD
; ---------------------------------------------------------------------------

loc_6832:
		push	74B7h
		call	sub_73B5
		cmp	ax, 0FFFFh
		jz	short loc_6840
		jmp	loc_68D8
; ---------------------------------------------------------------------------

loc_6840:
		jmp	loc_68E5
; ---------------------------------------------------------------------------

loc_6843:
		cmp	[bp+arg_A], 0
		jz	short loc_6854
		push	si
		call	sub_62BE
		or	ax, ax
		jnz	short loc_6854
		jmp	loc_68D8
; ---------------------------------------------------------------------------

loc_6854:
		push	24h ; '$'
		jmp	short loc_682C
; ---------------------------------------------------------------------------

loc_6858:
		or	di, di
		jz	short loc_68D4
		les	bx, [bp+var_12]
		inc	word ptr [bp+var_12]
		mov	al, es:[bx]
		cbw
		cmp	ax, si
		jz	short loc_6876
		mov	dx, word ptr [bp+arg_4+2]
		mov	ax, word ptr [bp+arg_4]
		mov	word ptr [bp+var_12+2],	dx
		mov	word ptr [bp+var_12], ax

loc_6876:
		les	bx, [bp+var_12]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_68D4
		les	bx, [bp+arg_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_68D4
		jmp	short loc_6890
; ---------------------------------------------------------------------------

loc_688A:
		call	sub_7484
		dec	word ptr [bp+var_12]

loc_6890:
		mov	dx, word ptr [bp+arg_4+2]
		mov	ax, word ptr [bp+arg_4]
		inc	ax
		cmp	dx, word ptr [bp+var_12+2]
		jnz	short loc_688A
		cmp	ax, word ptr [bp+var_12]
		jnz	short loc_688A
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+var_16+2],	dx
		mov	word ptr [bp+var_16], ax
		jmp	short loc_68BD
; ---------------------------------------------------------------------------

loc_68AF:
		les	bx, [bp+var_16]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F
		inc	word ptr [bp+var_16]

loc_68BD:
		les	bx, [bp+var_16]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_68AF
		mov	dx, word ptr [bp+arg_4+2]
		mov	ax, word ptr [bp+arg_4]
		mov	word ptr [bp+var_12+2],	dx
		mov	word ptr [bp+var_12], ax
		jmp	short loc_68D8
; ---------------------------------------------------------------------------

loc_68D4:
		push	si

loc_68D5:
		call	sub_743F

loc_68D8:
		call	sub_74B7
		mov	si, ax

loc_68DD:
		cmp	si, 0FFFFh
		jz	short loc_68E5
		jmp	loc_66EB
; ---------------------------------------------------------------------------

loc_68E5:
		les	bx, [bp+var_4]
		and	byte ptr es:[bx], 0FDh
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		or	di, di
		jz	short loc_6925
		mov	ax, word ptr [bp+arg_4]
		or	ax, word ptr [bp+arg_4+2]
		jz	short loc_6911
		push	word ptr [bp+arg_4+2]
		push	word ptr [bp+arg_4] ; block
		call	_farfree
		add	sp, 4

loc_6911:
		mov	ax, [bp+arg_0]
		or	ax, [bp+arg_2]
		jz	short loc_6925
		push	[bp+arg_2]
		push	[bp+arg_0]	; block
		call	_farfree
		add	sp, 4

loc_6925:
		mov	ax, word ptr [bp+@@dest]
		or	ax, word ptr [bp+@@dest+2]
		jz	short loc_6939
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; block
		call	_farfree
		add	sp, 4

loc_6939:
		pop	di
		pop	si
		leave
		retn	0Eh
sub_666B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_693F	proc near

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	0Ch, 0
		push	si
		push	di
		mov	si, [bp+arg_2]
		xor	di, di
		mov	word_13A5C, ds
		mov	word_13A5A, 76Bh
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		mov	byte_1285A, 0
		jmp	loc_6A0E
; ---------------------------------------------------------------------------

loc_6966:
		cmp	[bp+arg_0], 0
		jz	short loc_697B
		cmp	si, 3Dh	; '='
		jnz	short loc_697B
		cmp	byte_1285A, 2Eh	; '.'
		jz	short loc_697B
		mov	di, 1

loc_697B:
		cmp	si, 24h	; '$'
		jz	short loc_6983
		jmp	loc_6A05
; ---------------------------------------------------------------------------

loc_6983:
		or	di, di
		jnz	short loc_6A05
		call	sub_1D9C
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_69A2
		cmp	si, 7Bh	; '{'
		jz	short loc_69A2
		test	byte ptr [si+1D69h], 0Ch
		jz	short loc_69F8
		cmp	si, 64h	; 'd'
		jz	short loc_69F8

loc_69A2:
		mov	[bp+var_4], si
		call	sub_1D9C
		mov	si, ax
		cmp	si, 40h	; '@'
		jnz	short loc_69BC
		push	24h ; '$'
		call	sub_743F
		push	[bp+var_4]

loc_69B7:
		call	sub_743F
		jmp	short loc_6A0E
; ---------------------------------------------------------------------------

loc_69BC:
		push	si
		call	sub_1C97
		mov	si, [bp+var_4]
		push	si
		push	1D9Ch
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		call	sub_6DDC
		mov	si, ax
		cmp	si, 0FFFFh
		jz	short loc_6A1B
		push	0
		push	0
		push	[bp+var_2]
		push	[bp+var_6]
		push	[bp+var_8]
		push	[bp+var_A]
		push	[bp+var_C]
		call	sub_666B
		jmp	short loc_6A09
; ---------------------------------------------------------------------------

loc_69F8:
		cmp	si, 24h	; '$'
		jnz	short loc_6A01
		push	24h ; '$'
		jmp	short loc_6A06
; ---------------------------------------------------------------------------

loc_6A01:
		push	24h ; '$'
		jmp	short loc_69B7
; ---------------------------------------------------------------------------

loc_6A05:
		push	si

loc_6A06:
		call	sub_743F

loc_6A09:
		call	sub_1D9C
		mov	si, ax

loc_6A0E:
		cmp	si, 0FFFFh
		jz	short loc_6A1B
		cmp	si, 0Ah
		jz	short loc_6A1B
		jmp	loc_6966
; ---------------------------------------------------------------------------

loc_6A1B:
		mov	ax, di
		pop	di
		pop	si
		leave
		retn	4
sub_693F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_6A23(char *s, char *s1)
sub_6A23	proc near

var_20		= dword	ptr -20h
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
block		= dword	ptr -18h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
@@s		= dword	ptr  4
@@s1		= dword	ptr  8

		enter	20h, 0
		push	si
		push	di
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		mov	dx, word ptr off_14066+2
		mov	ax, word ptr off_14066
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; size
		call	_malloc
		pop	cx
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		jmp	loc_6C14
; ---------------------------------------------------------------------------

loc_6A86:
		cmp	si, 24h	; '$'
		jz	short loc_6A8E
		jmp	loc_6C10
; ---------------------------------------------------------------------------

loc_6A8E:
		call	sub_74B7
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_6AAF
		cmp	si, 7Bh	; '{'
		jz	short loc_6AAF
		test	byte ptr [si+1D69h], 0Ch
		jnz	short loc_6AA7
		jmp	loc_6C09
; ---------------------------------------------------------------------------

loc_6AA7:
		cmp	si, 64h	; 'd'
		jnz	short loc_6AAF
		jmp	loc_6C09
; ---------------------------------------------------------------------------

loc_6AAF:
		cmp	si, 28h	; '('
		jnz	short loc_6AB9
		mov	ax, 29h	; ')'
		jmp	short loc_6ABC
; ---------------------------------------------------------------------------

loc_6AB9:
		mov	ax, 7Dh	; '}'

loc_6ABC:
		mov	di, ax
		mov	[bp+var_14], si
		mov	dx, word ptr off_14066+2
		mov	ax, word ptr off_14066
		mov	[bp+var_10], dx
		mov	[bp+var_12], ax
		push	si
		push	74B7h
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		push	ss
		lea	ax, [bp+block]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		call	sub_6DDC
		mov	si, ax
		cmp	si, 0FFFFh
		jnz	short loc_6AEE
		jmp	loc_6C21
; ---------------------------------------------------------------------------

loc_6AEE:
		mov	ax, word_13A5E
		or	ax, word_13A60
		jnz	short loc_6AFA
		jmp	loc_6BEF
; ---------------------------------------------------------------------------

loc_6AFA:
		mov	ax, word_13A5E
		add	ax, 0Ah
		push	word_13A60
		push	ax		; s2
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_6B18
		jmp	loc_6BEF
; ---------------------------------------------------------------------------

loc_6B18:
		mov	ax, word_13A5E
		add	ax, 0Ah
		push	word_13A60
		push	ax		; s
		call	_strlen
		add	sp, 4
		mov	dx, word_13A60
		add	ax, word_13A5E
		add	ax, 0Bh
		mov	word ptr [bp+var_20+2],	dx
		mov	word ptr [bp+var_20], ax
		cmp	[bp+var_E], 0
		jnz	short loc_6B43
		jmp	loc_6BE4
; ---------------------------------------------------------------------------

loc_6B43:
		jmp	short loc_6B53
; ---------------------------------------------------------------------------

loc_6B45:
		les	bx, [bp+var_20]
		inc	word ptr [bp+var_20]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F

loc_6B53:
		les	bx, [bp+var_20]
		cmp	byte ptr es:[bx], 0
		jz	short loc_6B64
		mov	al, es:[bx]
		cbw
		cmp	ax, di
		jnz	short loc_6B45

loc_6B64:
		push	3Ah ; ':'
		call	sub_743F
		mov	dx, word ptr [bp+block+2]
		mov	ax, word ptr [bp+block]
		mov	word ptr [bp+var_20+2],	dx
		mov	word ptr [bp+var_20], ax
		jmp	short loc_6B85
; ---------------------------------------------------------------------------

loc_6B77:
		les	bx, [bp+var_20]
		inc	word ptr [bp+var_20]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F

loc_6B85:
		les	bx, [bp+var_20]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_6B77
		push	3Dh ; '='
		call	sub_743F
		mov	dx, [bp+var_1A]
		mov	ax, [bp+var_1C]
		mov	word ptr [bp+var_20+2],	dx
		mov	word ptr [bp+var_20], ax
		jmp	short loc_6BAF
; ---------------------------------------------------------------------------

loc_6BA1:
		les	bx, [bp+var_20]
		inc	word ptr [bp+var_20]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F

loc_6BAF:
		les	bx, [bp+var_20]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_6BA1
		push	di
		call	sub_743F
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4
		push	[bp+var_1A]
		push	[bp+var_1C]	; block
		call	_farfree
		add	sp, 4
		jmp	short loc_6C14
; ---------------------------------------------------------------------------

loc_6BD6:
		les	bx, [bp+var_20]
		inc	word ptr [bp+var_20]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F

loc_6BE4:
		les	bx, [bp+var_20]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_6BD6
		jmp	short loc_6C14
; ---------------------------------------------------------------------------

loc_6BEF:
		push	24h ; '$'
		call	sub_743F
		push	[bp+var_14]
		call	sub_743F
		mov	dx, [bp+var_10]
		mov	ax, [bp+var_12]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		jmp	short loc_6C14
; ---------------------------------------------------------------------------

loc_6C09:
		push	24h ; '$'
		call	sub_743F
		jmp	short loc_6C19
; ---------------------------------------------------------------------------

loc_6C10:
		push	si
		call	sub_743F

loc_6C14:
		call	sub_74B7
		mov	si, ax

loc_6C19:
		cmp	si, 0FFFFh
		jz	short loc_6C21
		jmp	loc_6A86
; ---------------------------------------------------------------------------

loc_6C21:
		push	[bp+var_2]
		push	[bp+var_4]	; block
		call	_farfree
		add	sp, 4
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		pop	di
		pop	si
		leave
		retn	8
sub_6A23	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_6C4D(char *src, int, int)
sub_6C4D	proc near

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
@@src		= dword	ptr  4
arg_4		= word ptr  8
arg_6		= word ptr  0Ah

		enter	0Ah, 0
		push	si
		cmp	word_102EC, 1
		jnz	short loc_6C60
		mov	dx, ds
		mov	ax, 5F6Ah
		jmp	short loc_6C65
; ---------------------------------------------------------------------------

loc_6C60:
		mov	dx, ds
		mov	ax, 5F6Dh

loc_6C65:
		mov	word_14112, dx
		mov	word_14110, ax
		cmp	word_102EC, 1
		jnz	short loc_6C7A
		mov	dx, ds
		mov	ax, 5F70h
		jmp	short loc_6C7F
; ---------------------------------------------------------------------------

loc_6C7A:
		mov	dx, ds
		mov	ax, 5FB2h

loc_6C7F:
		mov	word_14116, dx
		mov	off_14114, ax
		cmp	word_102EC, 1
		jnz	short loc_6C94
		mov	dx, ds
		mov	ax, 5FF4h
		jmp	short loc_6C99
; ---------------------------------------------------------------------------

loc_6C94:
		mov	dx, ds
		mov	ax, 5FFDh

loc_6C99:
		mov	word_1411A, dx
		mov	word_14118, ax
		cmp	word_102EC, 1
		jnz	short loc_6CAE
		mov	dx, ds
		mov	ax, 6006h
		jmp	short loc_6CB3
; ---------------------------------------------------------------------------

loc_6CAE:
		mov	dx, ds
		mov	ax, 600Bh

loc_6CB3:
		mov	word_1411E, dx
		mov	word_1411C, ax
		mov	dx, [bp+arg_6]
		mov	ax, [bp+arg_4]
		mov	word_14122, dx
		mov	word_14120, ax
		mov	word_13A5C, ds
		mov	word_13A5A, 75Ah
		push	ds
		push	offset byte_14106 ; __int32
		push	ds
		push	offset byte_140F4 ; __int32
		push	ds
		push	offset byte_14070 ; __int32
		push	ds
		push	offset byte_1406A ; __int32
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		call	sub_90B3
		add	sp, 14h
		push	ds
		push	offset byte_1410B ; __int32
		push	ds
		push	offset byte_140FD ; __int32
		push	ds
		push	offset byte_140B2 ; __int32
		push	ds
		push	offset byte_1406D ; __int32
		les	bx, dword_102E8
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		mov	dx, [bp+arg_6]
		mov	ax, [bp+arg_4]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		mov	byte_1285A, 0
		jmp	loc_6DAD
; ---------------------------------------------------------------------------

loc_6D2D:
		cmp	si, 24h	; '$'
		jnz	short loc_6DA9
		call	sub_74B7
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_6D4D
		cmp	si, 7Bh	; '{'
		jz	short loc_6D4D
		test	byte ptr [si+1D69h], 0Ch
		jz	short loc_6D91
		cmp	si, 64h	; 'd'
		jz	short loc_6D91

loc_6D4D:
		push	si
		push	74B7h
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		call	sub_6DDC
		mov	si, ax
		cmp	si, 0FFFFh
		jz	short loc_6DBA
		push	0
		push	1
		push	[bp+var_2]
		push	[bp+var_4]
		push	[bp+var_6]
		push	[bp+var_8]
		push	[bp+var_A]
		call	sub_666B
		mov	ax, word_13A5E
		or	ax, word_13A60
		jnz	short loc_6DAD
		push	[bp+var_2]
		call	sub_6524
		jmp	short loc_6DAD
; ---------------------------------------------------------------------------

loc_6D91:
		cmp	si, 24h	; '$'
		jnz	short loc_6D9A
		push	24h ; '$'
		jmp	short loc_6DAA
; ---------------------------------------------------------------------------

loc_6D9A:
		push	si
		call	sub_62BE
		or	ax, ax
		jz	short loc_6DAD
		push	24h ; '$'
		call	sub_743F
		jmp	short loc_6DB2
; ---------------------------------------------------------------------------

loc_6DA9:
		push	si

loc_6DAA:
		call	sub_743F

loc_6DAD:
		call	sub_74B7
		mov	si, ax

loc_6DB2:
		cmp	si, 0FFFFh
		jz	short loc_6DBA
		jmp	loc_6D2D
; ---------------------------------------------------------------------------

loc_6DBA:
		pop	si
		leave
		retn	8
sub_6C4D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_6DBF	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		jmp	short loc_6DCD
; ---------------------------------------------------------------------------

loc_6DC8:
		call	sub_1D9C
		mov	si, ax

loc_6DCD:
		cmp	si, 0FFFFh
		jz	short loc_6DD7
		cmp	si, 0Ah
		jnz	short loc_6DC8

loc_6DD7:
		pop	si
		pop	bp
		retn	2
sub_6DBF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_6DDC	proc near

var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= dword	ptr -12h
var_E		= word ptr -0Eh
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch
arg_C		= word ptr  10h
arg_E		= word ptr  12h

		enter	16h, 0
		push	si
		push	di
		mov	si, [bp+arg_C]
		mov	ax, [bp+arg_E]
		mov	[bp+var_E], ax
		cmp	[bp+var_E], 28h	; '('
		jnz	short loc_6DF6
		mov	ax, 29h	; ')'
		jmp	short loc_6DF9
; ---------------------------------------------------------------------------

loc_6DF6:
		mov	ax, 7Dh	; '}'

loc_6DF9:
		mov	di, ax
		les	bx, [bp+arg_8]
		mov	word ptr es:[bx], 0
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx], 0
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+2], 0
		mov	word ptr es:[bx], 0
		cmp	[bp+var_E], 28h	; '('
		jz	short loc_6E3F
		cmp	[bp+var_E], 7Bh	; '{'
		jz	short loc_6E3F
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		jmp	loc_711A
; ---------------------------------------------------------------------------

loc_6E3F:
		call	si
		mov	[bp+var_E], ax
		cmp	[bp+var_E], 20h	; ' '
		jz	short loc_6E3F

loc_6E4A:
		cmp	[bp+var_E], 0FFFFh
		jz	short loc_6E56
		cmp	[bp+var_E], 0Ah
		jnz	short loc_6E74

loc_6E56:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	0
		call	sub_72E3
		push	word_14122
		push	word_14120
		push	ds
		push	offset aSMissingInMacr ; "%s - ')' missing in macro invocation"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_6E74:
		cmp	[bp+var_E], di
		jz	short loc_6E92
		cmp	[bp+var_E], 3Ah	; ':'
		jz	short loc_6E92
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]
		call	si
		mov	[bp+var_E], ax
		jmp	short loc_6E4A
; ---------------------------------------------------------------------------

loc_6E92:
		cmp	[bp+var_E], 3Ah	; ':'
		jz	short loc_6E9B
		jmp	loc_7107
; ---------------------------------------------------------------------------

loc_6E9B:
		mov	[bp+var_14], 0
		mov	word ptr [bp+var_12+2],	ds
		mov	word ptr [bp+var_12], 575Ah
		jmp	short loc_6EAD
; ---------------------------------------------------------------------------

loc_6EAA:
		inc	word ptr [bp+var_12]

loc_6EAD:
		les	bx, [bp+var_12]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_6EBC
		cmp	byte ptr es:[bx], 9
		jnz	short loc_6ECC

loc_6EBC:
		mov	dx, word ptr [bp+var_12+2]
		mov	ax, word ptr [bp+var_12]
		cmp	dx, word ptr [bp+var_4+2]
		jnz	short loc_6EAA
		cmp	ax, word ptr [bp+var_4]
		jnz	short loc_6EAA

loc_6ECC:
		call	si
		mov	[bp+var_E], ax
		mov	dx, word ptr [bp+var_12+2]
		mov	ax, word ptr [bp+var_12]
		cmp	dx, word ptr [bp+var_4+2]
		jnz	short loc_6F36
		cmp	ax, word ptr [bp+var_4]
		jnz	short loc_6F36
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 3Ah ;	':'
		inc	word ptr [bp+var_4]

loc_6EEB:
		cmp	[bp+var_E], 0FFFFh
		jz	short loc_6EF7
		cmp	[bp+var_E], 0Ah
		jnz	short loc_6F06

loc_6EF7:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	0
		call	sub_72E3
		jmp	loc_705C
; ---------------------------------------------------------------------------

loc_6F06:
		cmp	[bp+var_E], di
		jz	short loc_6F24
		cmp	[bp+var_E], 3Ah	; ':'
		jz	short loc_6F24
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]
		call	si
		mov	[bp+var_E], ax
		jmp	short loc_6EEB
; ---------------------------------------------------------------------------

loc_6F24:
		cmp	[bp+var_E], 3Ah	; ':'
		jz	short loc_6F31
		mov	[bp+var_14], 1
		jmp	short loc_6F36
; ---------------------------------------------------------------------------

loc_6F31:
		call	si
		mov	[bp+var_E], ax

loc_6F36:
		cmp	[bp+var_14], 0
		jz	short loc_6F3F
		jmp	loc_7107
; ---------------------------------------------------------------------------

loc_6F3F:
		cmp	[bp+var_E], 0FFFFh
		jz	short loc_6F4B
		cmp	[bp+var_E], 0Ah
		jnz	short loc_6F5A

loc_6F4B:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	0
		call	sub_72E3
		jmp	loc_705C
; ---------------------------------------------------------------------------

loc_6F5A:
		les	bx, [bp+arg_8]
		mov	word ptr es:[bx], 1
		push	201h		; size
		call	sub_5296
		les	bx, [bp+arg_4]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		push	201h		; size
		call	sub_5296
		les	bx, [bp+arg_0]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		cmp	[bp+var_E], di
		jz	short loc_6F8D
		cmp	[bp+var_E], 3Dh	; '='
		jnz	short loc_6F97

loc_6F8D:
		push	ds
		push	offset aBadMacroOutput ; "Bad macro output translator"
		call	sub_8D8E
		add	sp, 4

loc_6F97:
		les	bx, [bp+arg_4]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		jmp	short loc_700F
; ---------------------------------------------------------------------------

loc_6FB9:
		cmp	[bp+var_E], 0FFFFh
		jnz	short loc_6FCE
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	0
		call	sub_72E3
		jmp	loc_705C
; ---------------------------------------------------------------------------

loc_6FCE:
		les	bx, [bp+arg_4]
		mov	ax, word ptr [bp+var_8]
		xor	dx, dx
		sub	ax, es:[bx]
		sbb	dx, 0
		cmp	ax, 200h
		jge	short loc_6FEF
		les	bx, [bp+var_8]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_8]
		jmp	short loc_700A
; ---------------------------------------------------------------------------

loc_6FEF:
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aMacroSubstitut ; "Macro	substitute text	%s is too long"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_700A:
		call	si
		mov	[bp+var_E], ax

loc_700F:
		cmp	[bp+var_E], di
		jz	short loc_701A
		cmp	[bp+var_E], 3Dh	; '='
		jnz	short loc_6FB9

loc_701A:
		cmp	[bp+var_E], di
		jnz	short loc_7040
		les	bx, [bp+var_8]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_8]
		call	si
		mov	[bp+var_E], ax
		cmp	[bp+var_E], 3Dh	; '='
		jz	short loc_7040
		push	ds
		push	offset aBadMacroOutput ; "Bad macro output translator"
		call	sub_8D8E
		add	sp, 4

loc_7040:
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		jmp	loc_70F3
; ---------------------------------------------------------------------------

loc_704A:
		cmp	[bp+var_E], 0FFFFh
		jnz	short loc_7062

loc_7050:
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	0
		call	sub_72E3

loc_705C:
		mov	ax, 0FFFFh
		jmp	loc_719E
; ---------------------------------------------------------------------------

loc_7062:
		cmp	[bp+var_E], 24h	; '$'
		jnz	short loc_70B7
		les	bx, [bp+var_C]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_C]
		call	si
		mov	[bp+var_E], ax
		cmp	[bp+var_E], 28h	; '('
		jz	short loc_7085
		cmp	[bp+var_E], 7Bh	; '{'
		jnz	short loc_70B7

loc_7085:
		cmp	[bp+var_E], 28h	; '('
		jnz	short loc_7090
		mov	ax, 29h	; ')'
		jmp	short loc_7093
; ---------------------------------------------------------------------------

loc_7090:
		mov	ax, 7Dh	; '}'

loc_7093:
		mov	[bp+var_16], ax
		jmp	short loc_70AF
; ---------------------------------------------------------------------------

loc_7098:
		cmp	[bp+var_E], 0FFFFh
		jz	short loc_7050
		les	bx, [bp+var_C]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_C]
		call	si
		mov	[bp+var_E], ax

loc_70AF:
		mov	ax, [bp+var_E]
		cmp	ax, [bp+var_16]
		jnz	short loc_7098

loc_70B7:
		les	bx, [bp+arg_0]
		mov	ax, word ptr [bp+var_C]
		xor	dx, dx
		sub	ax, es:[bx]
		sbb	dx, 0
		cmp	ax, 200h
		jge	short loc_70D8
		les	bx, [bp+var_C]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+var_C]
		jmp	short loc_70F3
; ---------------------------------------------------------------------------

loc_70D8:
		les	bx, [bp+var_C]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	ds
		push	offset aMacroReplaceTe ; "Macro	replace	text %s	is too long"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_70F3:
		call	si
		mov	[bp+var_E], ax
		cmp	[bp+var_E], di
		jz	short loc_7100
		jmp	loc_704A
; ---------------------------------------------------------------------------

loc_7100:
		les	bx, [bp+var_C]
		mov	byte ptr es:[bx], 0

loc_7107:
		dec	word ptr [bp+var_4]
		cmp	word ptr [bp+var_4], 575Ah
		jb	short loc_711A
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_7107

loc_711A:
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_4]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jz	short loc_7142
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 24h ;	'$'
		jnz	short loc_7142
		push	word ptr [bp+arg_4+2]
		push	word ptr [bp+arg_4]
		call	sub_71A4

loc_7142:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jz	short loc_7160
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 24h ;	'$'
		jnz	short loc_7160
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0]
		call	sub_71A4

loc_7160:
		call	sub_2AA0
		mov	word_13A60, dx
		mov	word_13A5E, ax
		les	bx, [bp+arg_8]
		cmp	word ptr es:[bx], 0
		jz	short loc_719B
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	ds
		push	offset byte_13C66 ; dest
		call	_strcpy
		add	sp, 8
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	ds
		push	offset byte_13E66 ; dest
		call	_strcpy
		add	sp, 8

loc_719B:
		mov	ax, [bp+var_E]

loc_719E:
		pop	di
		pop	si
		leave
		retn	10h
sub_6DDC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_71A4	proc near

var_1E		= word ptr -1Eh
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
block		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		enter	1Eh, 0
		push	si
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		inc	ax
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr [bp+var_4]
		cmp	si, 28h	; '('
		jz	short loc_71E2
		cmp	si, 7Bh	; '{'
		jz	short loc_71E2
		test	byte ptr [si+1D69h], 0Ch
		jnz	short loc_71DA
		jmp	loc_72DE
; ---------------------------------------------------------------------------

loc_71DA:
		cmp	si, 64h	; 'd'
		jnz	short loc_71E2
		jmp	loc_72DE
; ---------------------------------------------------------------------------

loc_71E2:
		push	ds
		push	offset byte_1385A ; s
		call	sub_894C
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		push	ds
		push	offset byte_1285A ; s
		call	sub_894C
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		mov	dx, word ptr off_14066+2
		mov	ax, word ptr off_14066
		mov	[bp+var_E], dx
		mov	[bp+var_10], ax
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	[bp+var_12], dx
		mov	[bp+var_14], ax
		mov	[bp+var_1E], 0
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		mov	byte_1285A, 0
		push	si
		push	74B7h
		push	ss
		lea	ax, [bp+var_1E]
		push	ax
		push	ss
		lea	ax, [bp+var_18]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		call	sub_6DDC
		mov	ax, word_13A5E
		or	ax, word_13A60
		jz	short loc_7282
		push	0
		push	0
		push	[bp+var_1E]
		push	[bp+var_16]
		push	[bp+var_18]
		push	[bp+var_1A]
		push	[bp+var_1C]
		call	sub_666B
		push	ds
		push	offset byte_1285A ; src
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; dest
		call	_strcpy
		add	sp, 8
		jmp	short loc_728C
; ---------------------------------------------------------------------------

loc_7282:
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		mov	byte ptr es:[bx], 0

loc_728C:
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	ds
		push	offset byte_1385A ; dest
		call	_strcpy
		add	sp, 8
		push	[bp+var_A]
		push	[bp+var_C]	; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		mov	dx, [bp+var_E]
		mov	ax, [bp+var_10]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		mov	dx, [bp+var_12]
		mov	ax, [bp+var_14]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4
		push	[bp+var_A]
		push	[bp+var_C]	; block
		call	_farfree
		add	sp, 4

loc_72DE:
		pop	si
		leave
		retn	4
sub_71A4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_72E3	proc near

var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	10h, 0
		cmp	[bp+arg_0], 0
		jnz	short loc_72F0
		jmp	loc_7390
; ---------------------------------------------------------------------------

loc_72F0:
		mov	word ptr [bp+var_8+2], ds
		mov	word ptr [bp+var_8], 5B66h
		push	ds
		push	offset byte_13C66 ; s
		call	_strlen
		add	sp, 4
		add	ax, 5B66h
		mov	[bp+var_E], ds
		mov	[bp+var_10], ax
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		jmp	short loc_7383
; ---------------------------------------------------------------------------

loc_7315:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F
		les	bx, [bp+var_8]
		inc	word ptr [bp+var_8]
		mov	al, es:[bx]
		les	bx, [bp+var_4]
		cmp	al, es:[bx]
		jz	short loc_7339
		mov	word ptr [bp+var_8+2], ds
		mov	word ptr [bp+var_8], 5B66h

loc_7339:
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		cmp	dx, [bp+var_E]
		jnz	short loc_7380
		cmp	ax, [bp+var_10]
		jnz	short loc_7380
		jmp	short loc_7351
; ---------------------------------------------------------------------------

loc_734B:
		call	sub_7484
		dec	word ptr [bp+var_8]

loc_7351:
		mov	ax, ds
		cmp	word ptr [bp+var_8+2], ax
		jnz	short loc_734B
		cmp	word ptr [bp+var_8], 5B66h
		jnz	short loc_734B
		mov	word ptr [bp+var_C+2], ds
		mov	word ptr [bp+var_C], 5D66h
		jmp	short loc_7377
; ---------------------------------------------------------------------------

loc_7369:
		les	bx, [bp+var_C]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F
		inc	word ptr [bp+var_C]

loc_7377:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_7369

loc_7380:
		inc	word ptr [bp+var_4]

loc_7383:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_7315
		leave
		retn	2
; ---------------------------------------------------------------------------

loc_7390:
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah
		jmp	short loc_73A8
; ---------------------------------------------------------------------------

loc_739A:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F
		inc	word ptr [bp+var_4]

loc_73A8:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_739A
		leave
		retn	2
sub_72E3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_73B5	proc near

var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	6, 0
		push	si
		mov	si, [bp+arg_0]
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 575Ah

loc_73C5:
		call	si
		mov	[bp+var_6], ax
		cmp	[bp+var_6], 20h	; ' '
		jz	short loc_73C5

loc_73D0:
		cmp	[bp+var_6], 0FFFFh
		jnz	short loc_73E7
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	0
		call	sub_72E3
		mov	ax, 0FFFFh
		jmp	short loc_743A
; ---------------------------------------------------------------------------

loc_73E7:
		cmp	[bp+var_6], 29h	; ')'
		jz	short loc_7406
		cmp	[bp+var_6], 0Ah
		jz	short loc_7406
		les	bx, [bp+var_4]
		mov	al, byte ptr [bp+var_6]
		mov	es:[bx], al
		inc	word ptr [bp+var_4]
		call	si
		mov	[bp+var_6], ax
		jmp	short loc_73D0
; ---------------------------------------------------------------------------

loc_7406:
		dec	word ptr [bp+var_4]
		cmp	word ptr [bp+var_4], 575Ah
		jb	short loc_7419
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_7406

loc_7419:
		inc	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	byte ptr es:[bx], 0
		push	ds
		push	offset byte_1385A
		call	sub_2A47
		or	ax, ax
		jz	short loc_7432
		push	31h ; '1'
		jmp	short loc_7434
; ---------------------------------------------------------------------------

loc_7432:
		push	30h ; '0'

loc_7434:
		call	sub_743F
		mov	ax, 29h	; ')'

loc_743A:
		pop	si
		leave
		retn	2
sub_73B5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_743F	proc near

arg_0		= byte ptr  4

		push	bp
		mov	bp, sp
		cmp	word ptr dword_13A62, 575Ah
		jnb	short loc_745A
		les	bx, dword_13A62
		mov	al, [bp+arg_0]
		mov	es:[bx], al
		inc	word ptr dword_13A62
		jmp	short loc_7478
; ---------------------------------------------------------------------------

loc_745A:
		mov	ax, ds
		cmp	word ptr dword_13A62+2,	ax
		jnz	short loc_7478
		cmp	word ptr dword_13A62, 575Ah
		jnz	short loc_7478
		push	word_13A5C
		push	word_13A5A
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_7478:
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0
		pop	bp
		retn	2
sub_743F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_7484	proc near

var_1		= byte ptr -1

		enter	2, 0
		cmp	word ptr dword_13A62, 475Ah
		jbe	short loc_74A5
		dec	word ptr dword_13A62
		les	bx, dword_13A62
		mov	al, es:[bx]
		mov	[bp+var_1], al
		mov	byte ptr es:[bx], 0
		cbw
		leave
		retn
; ---------------------------------------------------------------------------

loc_74A5:
		push	word_13A5C
		push	word_13A5A
		call	sub_8D8E
		add	sp, 4
		xor	ax, ax
		leave
		retn
sub_7484	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_74B7	proc near
		push	bp
		mov	bp, sp
		les	bx, off_14066
		mov	dl, es:[bx]
		or	dl, dl
		jz	short loc_74CE
		inc	word ptr off_14066
		mov	al, dl
		cbw
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_74CE:
		mov	ax, 0FFFFh
		pop	bp
		retn
sub_74B7	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_74D3	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		les	bx, off_14066
		cmp	byte ptr es:[bx], 0
		jnz	short loc_74E6
		cmp	[bp+arg_0], 0FFFFh
		jz	short loc_74EA

loc_74E6:
		dec	word ptr off_14066

loc_74EA:
		pop	bp
		retn	2
sub_74D3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_74EE	proc near

var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
@@s		= dword	ptr -0Eh
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
block		= dword	ptr -4

		enter	18h, 0
		push	si
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		mov	word_13A5C, ds
		mov	word_13A5A, 76Bh
		jmp	short loc_7575
; ---------------------------------------------------------------------------

loc_750C:
		cmp	si, 24h	; '$'
		jnz	short loc_7571
		call	sub_1D9C
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_752C
		cmp	si, 7Bh	; '{'
		jz	short loc_752C
		test	byte ptr [si+1D69h], 0Ch
		jz	short loc_7561
		cmp	si, 64h	; 'd'
		jz	short loc_7561

loc_752C:
		push	si
		push	1D9Ch
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_14]
		push	ax
		push	ss
		lea	ax, [bp+var_18]
		push	ax
		call	sub_6DDC
		mov	si, ax
		cmp	si, 0FFFFh
		jz	short loc_7591
		push	0
		push	0
		push	[bp+var_10]
		push	[bp+var_12]
		push	[bp+var_14]
		push	[bp+var_16]
		push	[bp+var_18]
		call	sub_666B
		jmp	short loc_7575
; ---------------------------------------------------------------------------

loc_7561:
		cmp	si, 24h	; '$'
		jnz	short loc_756A
		push	24h ; '$'
		jmp	short loc_7572
; ---------------------------------------------------------------------------

loc_756A:
		push	24h ; '$'
		call	sub_743F
		jmp	short loc_757A
; ---------------------------------------------------------------------------

loc_7571:
		push	si

loc_7572:
		call	sub_743F

loc_7575:
		call	sub_1D9C
		mov	si, ax

loc_757A:
		cmp	si, 3Ch	; '<'
		jz	short loc_7591
		cmp	si, 20h	; ' '
		jz	short loc_7591
		cmp	si, 0FFFFh
		jz	short loc_7591
		cmp	si, 0Ah
		jz	short loc_7591
		jmp	loc_750C
; ---------------------------------------------------------------------------

loc_7591:
		push	si
		call	sub_1C97
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_75B3
		cmp	byte ptr es:[bx], 9
		jz	short loc_75B3
		cmp	byte ptr es:[bx], 0Ah
		jz	short loc_75B3
		cmp	byte ptr es:[bx], 0
		jz	short loc_75B3
		jmp	loc_7635
; ---------------------------------------------------------------------------

loc_75B3:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		or	ax, word ptr [bp+block+2]
		jnz	short loc_75DA
		push	ds
		push	offset aNotEnoughMemor ; "Not enough memory"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_75DA:
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr [bp+block+2]
		mov	ax, word ptr [bp+block]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		call	sub_550A
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		jmp	short loc_761E
; ---------------------------------------------------------------------------

loc_7610:
		les	bx, [bp+var_8]
		inc	word ptr [bp+var_8]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_743F

loc_761E:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_7610
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		add	sp, 4
		jmp	short loc_7687
; ---------------------------------------------------------------------------

loc_7635:
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	short loc_7646
; ---------------------------------------------------------------------------

loc_7643:
		inc	word ptr [bp+var_8]

loc_7646:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_7661
		cmp	byte ptr es:[bx], 9
		jz	short loc_7661
		cmp	byte ptr es:[bx], 0Ah
		jz	short loc_7661
		cmp	byte ptr es:[bx], 0
		jnz	short loc_7643

loc_7661:
		les	bx, [bp+var_8]
		mov	al, es:[bx]
		cbw
		mov	[bp+var_A], ax
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		les	bx, [bp+var_8]
		mov	al, byte ptr [bp+var_A]
		mov	es:[bx], al

loc_7687:
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		pop	si
		leave
		retn
sub_74EE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_7690	proc near

var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
@@s		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8

		enter	14h, 0
		push	si
		push	di
		xor	di, di
		mov	dx, word ptr off_14066+2
		mov	ax, word ptr off_14066
		mov	[bp+var_E], dx
		mov	[bp+var_10], ax
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		push	1000h		; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+@@s+2], dx
		mov	word ptr [bp+@@s], ax
		or	ax, word ptr [bp+@@s+2]
		jnz	short loc_76CE
		push	ds
		push	offset aNotEnoughMemor ; "Not enough memory"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_76CE:
		push	ds
		push	offset byte_1410B ; __int32
		push	ds
		push	offset byte_140FD ; __int32
		push	ds
		push	offset byte_140B2 ; __int32
		push	ds
		push	offset byte_1406D ; __int32
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		mov	dx, word ptr dword_13A62+2
		mov	ax, word ptr dword_13A62
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		jmp	loc_7860
; ---------------------------------------------------------------------------

loc_770B:
		cmp	[bp+var_2], 24h	; '$'
		jz	short loc_7714
		jmp	loc_7852
; ---------------------------------------------------------------------------

loc_7714:
		call	sub_74B7
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 28h	; '('
		jz	short loc_7729
		cmp	[bp+var_2], 7Bh	; '{'
		jz	short loc_7729
		jmp	loc_780B
; ---------------------------------------------------------------------------

loc_7729:
		mov	ax, [bp+var_2]
		mov	[bp+var_14], ax
		call	sub_74B7
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 40h	; '@'
		jz	short loc_773E
		jmp	loc_77F3
; ---------------------------------------------------------------------------

loc_773E:
		call	sub_74B7
		mov	[bp+var_2], ax
		mov	[bp+var_12], ax
		mov	cx, 4		; switch 4 cases
		mov	bx, offset word_78C1

loc_774D:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_12]
		jz	short loc_775C
		add	bx, 2
		loop	loc_774D
		jmp	short loc_7774	; default
; ---------------------------------------------------------------------------

loc_775C:
		jmp	word ptr cs:[bx+8] ; switch jump

loc_7760:
		or	di, 3		; jumptable 0000775C case 68
		jmp	short loc_779D
; ---------------------------------------------------------------------------

loc_7765:

		or	di, 0Ch		; jumptable 0000775C case 70
		jmp	short loc_779D
; ---------------------------------------------------------------------------

loc_776A:

		or	di, 4		; jumptable 0000775C case 66
		jmp	short loc_779D
; ---------------------------------------------------------------------------

loc_776F:

		or	di, 7		; jumptable 0000775C case 82
		jmp	short loc_779D
; ---------------------------------------------------------------------------

loc_7774:
		les	bx, dword_13A62	; default
		mov	byte ptr es:[bx], 24h ;	'$'
		inc	word ptr dword_13A62
		les	bx, dword_13A62
		mov	al, byte ptr [bp+var_14]
		mov	es:[bx], al
		inc	word ptr dword_13A62
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 40h ;	'@'

loc_7796:
		inc	word ptr dword_13A62
		jmp	loc_7866
; ---------------------------------------------------------------------------

loc_779D:
		push	1
		push	di
		call	sub_6467
		push	ds
		push	offset byte_1385A ; s
		call	_strlen
		add	sp, 4
		mov	[bp+var_4], ax
		cmp	[bp+var_2], 44h	; 'D'
		jnz	short loc_77D2
		cmp	word_F50E, 0
		jz	short loc_77D2
		dec	[bp+var_4]
		mov	bx, [bp+var_4]
		cmp	byte ptr [bx+575Ah], 5Ch ; '\'
		jnz	short loc_77D2
		mov	bx, [bp+var_4]
		mov	byte ptr [bx+575Ah], 0

loc_77D2:
		xor	si, si
		jmp	short loc_77E6
; ---------------------------------------------------------------------------

loc_77D6:
		mov	al, [si+575Ah]
		les	bx, dword_13A62
		mov	es:[bx], al
		inc	word ptr dword_13A62
		inc	si

loc_77E6:
		cmp	si, [bp+var_4]
		jl	short loc_77D6
		call	sub_74B7
		mov	[bp+var_2], ax
		jmp	short loc_7860
; ---------------------------------------------------------------------------

loc_77F3:
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 24h ;	'$'
		inc	word ptr dword_13A62
		les	bx, dword_13A62
		mov	al, byte ptr [bp+var_14]
		mov	es:[bx], al
		jmp	short loc_7796
; ---------------------------------------------------------------------------

loc_780B:
		cmp	[bp+var_2], 40h	; '@'
		jnz	short loc_7846
		les	bx, [bp+arg_4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		call	_strlen
		add	sp, 4
		mov	[bp+var_4], ax
		xor	si, si
		jmp	short loc_783F
; ---------------------------------------------------------------------------

loc_7828:
		les	bx, [bp+arg_4]
		les	bx, es:[bx]
		add	bx, si
		mov	al, es:[bx]
		les	bx, dword_13A62
		mov	es:[bx], al
		inc	word ptr dword_13A62
		inc	si

loc_783F:
		cmp	si, [bp+var_4]
		jl	short loc_7828
		jmp	short loc_7860
; ---------------------------------------------------------------------------

loc_7846:
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 24h ;	'$'
		inc	word ptr dword_13A62

loc_7852:
		les	bx, dword_13A62
		mov	al, byte ptr [bp+var_2]
		mov	es:[bx], al
		inc	word ptr dword_13A62

loc_7860:
		call	sub_74B7
		mov	[bp+var_2], ax

loc_7866:
		cmp	[bp+var_2], 0FFFFh
		jz	short loc_786F
		jmp	loc_770B
; ---------------------------------------------------------------------------

loc_786F:
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	sub_894C
		mov	[bp+arg_2], dx
		mov	[bp+arg_0], ax
		mov	ax, word ptr [bp+@@s]
		or	ax, word ptr [bp+@@s+2]
		jz	short loc_789A
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; block
		call	_farfree
		add	sp, 4

loc_789A:
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		mov	word ptr dword_13A62+2,	dx
		mov	word ptr dword_13A62, ax
		mov	dx, [bp+var_E]
		mov	ax, [bp+var_10]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		pop	di
		pop	si
		leave
		retn	8
sub_7690	endp

; ---------------------------------------------------------------------------
		db 0
word_78C1	dw    42h,   44h,   46h,   52h
					; value	table for switch statement
		dw offset loc_776A	; jump table for switch	statement
		dw offset loc_7760
		dw offset loc_7765
		dw offset loc_776F

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_78D1	proc near

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	0Ah, 0
		push	si
		mov	word ptr dword_13A62+2,	ds
		mov	word ptr dword_13A62, 475Ah
		les	bx, dword_13A62
		mov	byte ptr es:[bx], 0
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr off_14066+2, dx
		mov	word ptr off_14066, ax
		jmp	short loc_794F
; ---------------------------------------------------------------------------

loc_78F7:
		cmp	si, 24h	; '$'
		jnz	short loc_794B
		call	sub_74B7
		mov	si, ax
		cmp	si, 28h	; '('
		jz	short loc_790B
		cmp	si, 7Bh	; '{'
		jnz	short loc_7944

loc_790B:
		push	si
		push	74B7h
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		call	sub_6DDC
		mov	si, ax
		mov	ax, word_13A5E
		or	ax, word_13A60
		jz	short loc_794F
		push	1
		push	0
		push	[bp+var_2]
		push	[bp+var_4]
		push	[bp+var_6]
		push	[bp+var_8]
		push	[bp+var_A]
		call	sub_666B
		jmp	short loc_794F
; ---------------------------------------------------------------------------

loc_7944:
		push	24h ; '$'
		call	sub_743F
		jmp	short loc_7954
; ---------------------------------------------------------------------------

loc_794B:
		push	si
		call	sub_743F

loc_794F:
		call	sub_74B7
		mov	si, ax

loc_7954:
		cmp	si, 0FFFFh
		jnz	short loc_78F7
		mov	dx, ds
		mov	ax, 475Ah
		pop	si
		leave
		retn	4
sub_78D1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_7963	proc near

var_C		= byte ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	0Ch, 0
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr dword_14124+2,	dx
		mov	word ptr dword_14124, ax
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		push	0
		call	sub_7C4E
		cmp	word_1413E, 0
		jle	short loc_798F
		push	ds
		push	offset aExpressionSynt ; "Expression syntax error in !if statemen"...
		call	sub_8D8E
		add	sp, 4

loc_798F:
		cmp	word_1413E, 0
		jg	short loc_799D
		cmp	word_14130, 0
		jz	short loc_79A3

loc_799D:
		xor	ax, ax
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_79A3:
		mov	ax, [bp+var_A]
		or	ax, [bp+var_8]
		jz	short loc_79B0
		mov	ax, 1
		jmp	short locret_79B2
; ---------------------------------------------------------------------------

loc_79B0:
		xor	ax, ax

locret_79B2:
		leave
		retn	4
sub_7963	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_79B6	proc near

var_E		= byte ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	0Eh, 0
		mov	ax, word_1413E
		mov	[bp+var_2], ax
		mov	cx, 5		; switch 5 cases
		mov	bx, offset word_7A87

loc_79C6:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_2]
		jz	short loc_79D6
		add	bx, 2
		loop	loc_79C6
		jmp	loc_7A5C	; default
; ---------------------------------------------------------------------------

loc_79D6:
		jmp	word ptr cs:[bx+0Ah] ; switch jump

loc_79DA:
		call	sub_813C	; jumptable 000079D6 case 2
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		call	sub_79B6
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		neg	dx
		neg	ax
		sbb	dx, 0
		jmp	short loc_7A0F
; ---------------------------------------------------------------------------

loc_79F4:

		call	sub_813C	; jumptable 000079D6 case 22
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		call	sub_79B6
		mov	ax, [bp+var_C]
		or	ax, [bp+var_A]
		jnz	short loc_7A0C
		mov	ax, 1
		jmp	short loc_7A0E
; ---------------------------------------------------------------------------

loc_7A0C:
		xor	ax, ax

loc_7A0E:
		cwd

loc_7A0F:
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		jmp	short loc_7A6C
; ---------------------------------------------------------------------------

loc_7A17:

		call	sub_813C	; jumptable 000079D6 case 23
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		call	sub_79B6
		mov	dx, [bp+var_A]
		mov	ax, [bp+var_C]
		not	ax
		not	dx
		jmp	short loc_7A0F
; ---------------------------------------------------------------------------

loc_7A2E:

		push	ss		; jumptable 000079D6 case 24
		lea	ax, [bp+var_E]
		push	ax
		push	0
		call	sub_7C4E
		cmp	word_14130, 0
		jnz	short loc_7A6C
		cmp	word_1413E, 19h
		jz	short loc_7A57
		jmp	short loc_7A5C	; default
; ---------------------------------------------------------------------------

loc_7A48:

		lea	ax, [bp+var_E]	; jumptable 000079D6 case 21
		push	ss
		push	ax
		push	ds
		push	offset word_14132
		mov	cx, 0Ch
		call	N_SCOPY@

loc_7A57:
		call	sub_813C
		jmp	short loc_7A6C
; ---------------------------------------------------------------------------

loc_7A5C:
		push	ds		; default
		push	offset aExpressionSynt ; "Expression syntax error in !if statemen"...
		call	sub_8D8E
		add	sp, 4
		mov	word_14130, 1

loc_7A6C:
		push	[bp+arg_2]
		push	[bp+arg_0]
		lea	ax, [bp+var_E]
		push	ss
		push	ax
		mov	cx, 0Ch
		call	N_SCOPY@
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		leave
		retn	4
sub_79B6	endp

; ---------------------------------------------------------------------------
word_7A87	dw	2,   15h,   16h,   17h
		dw    18h		; value	table for switch statement
		dw offset loc_79DA	; jump table for switch	statement
		dw offset loc_7A48
		dw offset loc_79F4
		dw offset loc_7A17
		dw offset loc_7A2E

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_7A9B	proc near

var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  4
arg_2		= dword	ptr  6
arg_6		= dword	ptr  0Ah

		enter	2, 0
		les	bx, [bp+arg_6]
		les	ax, es:[bx+6]
		push	es
		mov	es, word ptr [bp+arg_6+2]
		add	ax, es:[bx+0Ah]
		mov	bx, ax
		pop	es
		mov	al, es:[bx]
		mov	[bp+var_1], al
		les	bx, [bp+arg_2]
		les	ax, es:[bx+6]
		push	es
		mov	es, word ptr [bp+arg_2+2]
		add	ax, es:[bx+0Ah]
		mov	bx, ax
		pop	es
		mov	al, es:[bx]
		mov	[bp+var_2], al
		les	bx, [bp+arg_6]
		les	ax, es:[bx+6]
		push	es
		mov	es, word ptr [bp+arg_6+2]
		add	ax, es:[bx+0Ah]
		mov	bx, ax
		pop	es
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_2]
		les	ax, es:[bx+6]
		push	es
		mov	es, word ptr [bp+arg_2+2]
		add	ax, es:[bx+0Ah]
		mov	bx, ax
		pop	es
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_2]
		cmp	word ptr es:[bx], 1
		jz	short loc_7B0E
		push	ds
		push	offset aIntAndStringTy ; "Int and string types compared"
		call	sub_8D8E
		add	sp, 4

loc_7B0E:
		mov	bx, [bp+arg_0]
		sub	bx, 0Dh
		cmp	bx, 5
		jbe	short loc_7B1C
		jmp	loc_7C0D
; ---------------------------------------------------------------------------

loc_7B1C:
		add	bx, bx
		jmp	cs:off_7C42[bx]

loc_7B23:
		les	bx, [bp+arg_2]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s2
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_7B46
		jmp	loc_7BFA
; ---------------------------------------------------------------------------

loc_7B46:
		jmp	loc_7BF5
; ---------------------------------------------------------------------------

loc_7B49:

		les	bx, [bp+arg_2]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s2
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_7B6C
		jmp	loc_7BFA
; ---------------------------------------------------------------------------

loc_7B6C:
		jmp	loc_7BF5
; ---------------------------------------------------------------------------

loc_7B6F:

		les	bx, [bp+arg_2]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s2
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jge	short loc_7BFA
		jmp	short loc_7BF5
; ---------------------------------------------------------------------------

loc_7B91:

		les	bx, [bp+arg_2]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s2
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jle	short loc_7BFA
		jmp	short loc_7BF5
; ---------------------------------------------------------------------------

loc_7BB3:

		les	bx, [bp+arg_2]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s2
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jle	short loc_7BFA
		jmp	short loc_7BF5
; ---------------------------------------------------------------------------

loc_7BD5:

		les	bx, [bp+arg_2]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s2
		les	bx, [bp+arg_6]
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+6] ; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jle	short loc_7BFA

loc_7BF5:
		mov	ax, 1
		jmp	short loc_7BFC
; ---------------------------------------------------------------------------

loc_7BFA:
		xor	ax, ax

loc_7BFC:
		cwd
		les	bx, [bp+arg_6]
		mov	es:[bx+4], dx
		mov	es:[bx+2], ax
		mov	word ptr es:[bx], 0

loc_7C0D:
		les	bx, [bp+arg_6]
		les	ax, es:[bx+6]
		push	es
		mov	es, word ptr [bp+arg_6+2]
		add	ax, es:[bx+0Ah]
		mov	dl, [bp+var_1]
		mov	bx, ax
		pop	es
		mov	es:[bx], dl
		les	bx, [bp+arg_2]
		les	ax, es:[bx+6]
		push	es
		mov	es, word ptr [bp+arg_2+2]
		add	ax, es:[bx+0Ah]
		mov	dl, [bp+var_2]
		mov	bx, ax
		pop	es
		mov	es:[bx], dl
		leave
		retn	0Ah
sub_7A9B	endp

; ---------------------------------------------------------------------------
		db  0
off_7C42	dw offset loc_7B23
		dw offset loc_7B49
		dw offset loc_7B6F
		dw offset loc_7B91
		dw offset loc_7BD5
		dw offset loc_7BB3

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_7C4E	proc near

var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		enter	1Ch, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	[bp+var_10], 0
		call	sub_813C
		cmp	word_14130, 0
		jz	short loc_7C73
		mov	[bp+var_C], 0
		mov	[bp+var_E], 0
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7C73:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		call	sub_79B6
		cmp	word_14130, 0
		jz	short loc_7C8F
		mov	[bp+var_C], 0
		mov	[bp+var_E], 0
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7C8F:
		mov	al, [si+0BF1h]
		cbw
		mov	[bp+var_2], ax

loc_7C97:
		cmp	word_1413E, 14h
		jle	short loc_7CA1
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7CA1:
		cmp	word_1413E, 0
		jg	short loc_7CAB
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7CAB:
		mov	bx, word_1413E
		mov	al, [bx+0BDCh]
		cbw
		mov	di, ax
		mov	ax, word_1413E
		mov	[bp+var_4], ax
		or	di, di
		jnz	short loc_7CC3
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7CC3:
		cmp	si, di
		jle	short loc_7CCA
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7CCA:
		cmp	si, di
		jnz	short loc_7CD7
		cmp	[bp+var_2], 1
		jnz	short loc_7CD7
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7CD7:
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	di
		call	sub_7C4E
		cmp	word_14130, 0
		jz	short loc_7CF4
		mov	[bp+var_C], 0
		mov	[bp+var_E], 0
		jmp	loc_80F7
; ---------------------------------------------------------------------------

loc_7CF4:
		mov	bx, [bp+var_4]
		dec	bx
		cmp	bx, 13h
		ja	short loc_7C97
		add	bx, bx
		jmp	cs:off_8114[bx]

loc_7D04:
		cmp	[bp+var_10], 0
		jnz	short loc_7D10
		cmp	[bp+var_1C], 0
		jz	short loc_7D1A

loc_7D10:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7D1A:
		mov	dx, [bp+var_18]
		mov	ax, [bp+var_1A]
		add	[bp+var_E], ax
		adc	[bp+var_C], dx
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7D29:

		cmp	[bp+var_10], 0
		jnz	short loc_7D35
		cmp	[bp+var_1C], 0
		jz	short loc_7D3F

loc_7D35:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7D3F:
		mov	dx, [bp+var_18]
		mov	ax, [bp+var_1A]
		sub	[bp+var_E], ax
		sbb	[bp+var_C], dx
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7D4E:

		cmp	[bp+var_10], 0
		jnz	short loc_7D5A
		cmp	[bp+var_1C], 0
		jz	short loc_7D64

loc_7D5A:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7D64:
		mov	cx, [bp+var_18]
		mov	bx, [bp+var_1A]
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		call	N_LXMUL@
		jmp	loc_80EE
; ---------------------------------------------------------------------------

loc_7D76:

		cmp	[bp+var_10], 0
		jnz	short loc_7D82
		cmp	[bp+var_1C], 0
		jz	short loc_7D8C

loc_7D82:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7D8C:
		mov	dx, [bp+var_18]
		mov	ax, [bp+var_1A]
		and	[bp+var_E], ax
		and	[bp+var_C], dx
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7D9B:

		cmp	[bp+var_10], 0
		jnz	short loc_7DA7
		cmp	[bp+var_1C], 0
		jz	short loc_7DB1

loc_7DA7:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7DB1:
		mov	dx, [bp+var_18]
		mov	ax, [bp+var_1A]
		or	[bp+var_E], ax
		or	[bp+var_C], dx
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7DC0:

		cmp	[bp+var_10], 0
		jnz	short loc_7DCC
		cmp	[bp+var_1C], 0
		jz	short loc_7DD6

loc_7DCC:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7DD6:
		mov	dx, [bp+var_18]
		mov	ax, [bp+var_1A]
		xor	[bp+var_E], ax
		xor	[bp+var_C], dx
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7DE5:

		cmp	[bp+var_10], 0
		jnz	short loc_7E0A
		cmp	[bp+var_1C], 0
		jnz	short loc_7E0A
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		cmp	dx, [bp+var_18]
		jz	short loc_7DFF
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7DFF:
		cmp	ax, [bp+var_1A]
		jz	short loc_7E07
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7E07:
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7E0A:
		cmp	[bp+var_10], 1
		jz	short loc_7E13
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7E13:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	0Dh
		jmp	loc_7F63
; ---------------------------------------------------------------------------

loc_7E22:

		cmp	[bp+var_10], 0
		jnz	short loc_7E47
		cmp	[bp+var_1C], 0
		jnz	short loc_7E47
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		cmp	dx, [bp+var_18]
		jz	short loc_7E3C
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7E3C:
		cmp	ax, [bp+var_1A]
		jnz	short loc_7E44
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7E44:
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7E47:
		cmp	[bp+var_10], 1
		jz	short loc_7E50
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7E50:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	0Eh
		jmp	loc_7F63
; ---------------------------------------------------------------------------

loc_7E5F:

		cmp	[bp+var_10], 0
		jnz	short loc_7E89
		cmp	[bp+var_1C], 0
		jnz	short loc_7E89
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		cmp	dx, [bp+var_18]
		jge	short loc_7E79
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7E79:
		jle	short loc_7E7E
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7E7E:
		cmp	ax, [bp+var_1A]
		ja	short loc_7E86
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7E86:
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7E89:
		cmp	[bp+var_10], 1
		jz	short loc_7E92
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7E92:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	10h
		jmp	loc_7F63
; ---------------------------------------------------------------------------

loc_7EA1:

		cmp	[bp+var_10], 0
		jnz	short loc_7ECB
		cmp	[bp+var_1C], 0
		jnz	short loc_7ECB
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		cmp	dx, [bp+var_18]
		jle	short loc_7EBB
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7EBB:
		jge	short loc_7EC0
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7EC0:
		cmp	ax, [bp+var_1A]
		jb	short loc_7EC8
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7EC8:
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7ECB:
		cmp	[bp+var_10], 1
		jz	short loc_7ED4
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7ED4:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	0Fh
		jmp	loc_7F63
; ---------------------------------------------------------------------------

loc_7EE3:

		cmp	[bp+var_10], 0
		jnz	short loc_7F0D
		cmp	[bp+var_1C], 0
		jnz	short loc_7F0D
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		cmp	dx, [bp+var_18]
		jge	short loc_7EFD
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7EFD:
		jz	short loc_7F02
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7F02:
		cmp	ax, [bp+var_1A]
		jnb	short loc_7F0A
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7F0A:
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7F0D:
		cmp	[bp+var_10], 1
		jz	short loc_7F16
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7F16:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	12h
		jmp	short loc_7F63
; ---------------------------------------------------------------------------

loc_7F24:

		cmp	[bp+var_10], 0
		jnz	short loc_7F4E
		cmp	[bp+var_1C], 0
		jnz	short loc_7F4E
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		cmp	dx, [bp+var_18]
		jle	short loc_7F3E
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7F3E:
		jz	short loc_7F43
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7F43:
		cmp	ax, [bp+var_1A]
		jbe	short loc_7F4B
		jmp	loc_8006
; ---------------------------------------------------------------------------

loc_7F4B:
		jmp	loc_8001
; ---------------------------------------------------------------------------

loc_7F4E:
		cmp	[bp+var_10], 1
		jz	short loc_7F57
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7F57:
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		push	ss
		lea	ax, [bp+var_1C]
		push	ax
		push	11h

loc_7F63:
		call	sub_7A9B
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_7F69:

		cmp	[bp+var_10], 0
		jnz	short loc_7F75
		cmp	[bp+var_1C], 0
		jz	short loc_7F7F

loc_7F75:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7F7F:
		mov	cl, byte ptr [bp+var_1A]
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		call	near ptr N_LXLSH@
		jmp	loc_80EE
; ---------------------------------------------------------------------------

loc_7F8E:

		cmp	[bp+var_10], 0
		jnz	short loc_7F9A
		cmp	[bp+var_1C], 0
		jz	short loc_7FA4

loc_7F9A:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7FA4:
		mov	cl, byte ptr [bp+var_1A]
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		call	near ptr N_LXRSH@
		jmp	loc_80EE
; ---------------------------------------------------------------------------

loc_7FB3:

		cmp	[bp+var_10], 0
		jnz	short loc_7FBF
		cmp	[bp+var_1C], 0
		jz	short loc_7FC9

loc_7FBF:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7FC9:
		mov	ax, [bp+var_E]
		or	ax, [bp+var_C]
		jz	short loc_8006
		mov	ax, [bp+var_1A]
		or	ax, [bp+var_18]
		jz	short loc_8006
		jmp	short loc_8001
; ---------------------------------------------------------------------------

loc_7FDB:

		cmp	[bp+var_10], 0
		jnz	short loc_7FE7
		cmp	[bp+var_1C], 0
		jz	short loc_7FF1

loc_7FE7:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_7FF1:
		mov	ax, [bp+var_E]
		or	ax, [bp+var_C]
		jnz	short loc_8001
		mov	ax, [bp+var_1A]
		or	ax, [bp+var_18]
		jz	short loc_8006

loc_8001:
		mov	ax, 1
		jmp	short loc_8008
; ---------------------------------------------------------------------------

loc_8006:
		xor	ax, ax

loc_8008:
		cwd
		jmp	loc_80EE
; ---------------------------------------------------------------------------

loc_800C:

		cmp	[bp+var_10], 0
		jnz	short loc_8018
		cmp	[bp+var_1C], 0
		jz	short loc_8022

loc_8018:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_8022:
		mov	dx, [bp+var_C]
		mov	ax, [bp+var_E]
		mov	word_1412A, dx
		mov	word_14128, ax
		mov	dx, [bp+var_18]
		mov	ax, [bp+var_1A]
		mov	word_1412E, dx
		mov	word_1412C, ax
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_803F:

		cmp	[bp+var_10], 0
		jnz	short loc_804B
		cmp	[bp+var_1C], 0
		jz	short loc_8055

loc_804B:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_8055:
		mov	ax, [bp+var_E]
		or	ax, [bp+var_C]
		jz	short loc_806D
		mov	dx, word_1412A
		mov	ax, word_14128
		mov	[bp+var_C], dx
		mov	[bp+var_E], ax
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_806D:
		mov	dx, word_1412E
		mov	ax, word_1412C
		mov	[bp+var_C], dx
		mov	[bp+var_E], ax
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_807D:

		cmp	[bp+var_10], 0
		jnz	short loc_8089
		cmp	[bp+var_1C], 0
		jz	short loc_8093

loc_8089:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_8093:
		mov	ax, [bp+var_1A]
		or	ax, [bp+var_18]
		jnz	short loc_809D
		jmp	short loc_80CC
; ---------------------------------------------------------------------------

loc_809D:
		push	[bp+var_18]
		push	[bp+var_1A]
		push	[bp+var_C]
		push	[bp+var_E]
		call	near ptr N_LDIV@
		jmp	short loc_80EE
; ---------------------------------------------------------------------------

loc_80AE:

		cmp	[bp+var_10], 0
		jnz	short loc_80BA
		cmp	[bp+var_1C], 0
		jz	short loc_80C4

loc_80BA:
		push	ds
		push	offset aStringTypeNotA ; "String type not allowed with this opera"...
		call	sub_8D8E
		add	sp, 4

loc_80C4:
		mov	ax, [bp+var_1A]
		or	ax, [bp+var_18]
		jnz	short loc_80DF

loc_80CC:
		push	ds
		push	offset aDivisionByZero ; "Division by zero"
		call	sub_8D8E
		add	sp, 4
		mov	word_14130, 1
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_80DF:
		push	[bp+var_18]
		push	[bp+var_1A]
		push	[bp+var_C]
		push	[bp+var_E]
		call	near ptr N_LMOD@

loc_80EE:
		mov	[bp+var_C], dx
		mov	[bp+var_E], ax
		jmp	loc_7C97
; ---------------------------------------------------------------------------

loc_80F7:
		push	[bp+arg_4]
		push	[bp+arg_2]
		lea	ax, [bp+var_10]
		push	ss
		push	ax
		mov	cx, 0Ch
		call	N_SCOPY@
		mov	dx, [bp+arg_4]
		mov	ax, [bp+arg_2]
		pop	di
		pop	si
		leave
		retn	6
sub_7C4E	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
off_8114	dw offset loc_7D04
		dw offset loc_7D29
		dw offset loc_7D4E
		dw offset loc_807D
		dw offset loc_80AE
		dw offset loc_7D76
		dw offset loc_7D9B
		dw offset loc_7DC0
		dw offset loc_7F69
		dw offset loc_7F8E
		dw offset loc_803F
		dw offset loc_800C
		dw offset loc_7DE5
		dw offset loc_7E22
		dw offset loc_7EA1
		dw offset loc_7E5F
		dw offset loc_7F24
		dw offset loc_7EE3
		dw offset loc_7FB3
		dw offset loc_7FDB

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_813C	proc near
		push	bp
		mov	bp, sp
		push	si
		push	di

loc_8141:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		or	si, si
		jnz	short loc_815C
		mov	word_1413E, 0
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_815C:
		mov	bx, si
		add	bx, bx
		mov	di, [bx+0ADCh]
		mov	bx, di
		sub	bx, 0FFECh
		cmp	bx, 0Dh
		ja	short loc_8175
		add	bx, bx
		jmp	cs:off_82B0[bx]

loc_8175:

		mov	word_1413E, di
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_817C:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		cmp	si, 3Dh	; '='
		jnz	short loc_8198
		mov	word_1413E, 0Dh
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_8198:

		push	32h ; '2'
		jmp	short loc_81E1
; ---------------------------------------------------------------------------

loc_819C:

		push	si
		push	ds
		push	offset aIllegalCharact ; "Illegal character in constant	expressio"...
		call	sub_8D8E
		add	sp, 6
		mov	word_14130, 1
		mov	word_1413E, 0FFFFh
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_81B6:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		cmp	si, 3Dh	; '='
		jnz	short loc_81D2
		mov	word_1413E, 0Eh
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_81D2:
		dec	word ptr dword_14124
		mov	word_1413E, 16h
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_81DF:

		push	0

loc_81E1:
		call	sub_82CC

loc_81E4:
		mov	word_1413E, ax
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_81EA:

		call	sub_8385
		jmp	short loc_81E4
; ---------------------------------------------------------------------------

loc_81EF:

		call	sub_84C6
		jmp	short loc_81E4
; ---------------------------------------------------------------------------

loc_81F4:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		cmp	si, 3Ch	; '<'
		jnz	short loc_8210
		mov	word_1413E, 9
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_8210:
		cmp	si, 3Dh	; '='
		jnz	short loc_821E
		mov	word_1413E, 11h
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_821E:
		dec	word ptr dword_14124
		mov	word_1413E, 0Fh
		jmp	loc_82AB
; ---------------------------------------------------------------------------

loc_822B:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		cmp	si, 26h	; '&'
		jnz	short loc_8246
		mov	word_1413E, 13h
		jmp	short loc_82AB
; ---------------------------------------------------------------------------

loc_8246:
		dec	word ptr dword_14124
		mov	word_1413E, 6
		jmp	short loc_82AB
; ---------------------------------------------------------------------------

loc_8252:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		cmp	si, 7Ch	; '|'
		jnz	short loc_826D
		mov	word_1413E, 14h
		jmp	short loc_82AB
; ---------------------------------------------------------------------------

loc_826D:
		dec	word ptr dword_14124
		mov	word_1413E, 7
		jmp	short loc_82AB
; ---------------------------------------------------------------------------

loc_8279:

		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	si, ax
		inc	word ptr dword_14124
		cmp	si, 3Eh	; '>'
		jnz	short loc_8294
		mov	word_1413E, 0Ah
		jmp	short loc_82AB
; ---------------------------------------------------------------------------

loc_8294:
		cmp	si, 3Dh	; '='
		jnz	short loc_82A1
		mov	word_1413E, 12h
		jmp	short loc_82AB
; ---------------------------------------------------------------------------

loc_82A1:
		dec	word ptr dword_14124
		mov	word_1413E, 10h

loc_82AB:
		pop	di
		pop	si
		pop	bp
		retn
sub_813C	endp

; ---------------------------------------------------------------------------
		db  0
off_82B0	dw offset loc_81B6
		dw offset loc_8279
		dw offset loc_817C
		dw offset loc_81F4
		dw offset loc_8175
		dw offset loc_8175
		dw offset loc_81EF
		dw offset loc_81DF
		dw offset loc_822B
		dw offset loc_81EA
		dw offset loc_8252
		dw offset loc_8141
		dw offset loc_819C
		dw offset loc_8198

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_82CC	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4

		enter	4, 0
		push	si
		mov	si, 1
		mov	dx, word ptr dword_14124+2
		mov	ax, word ptr dword_14124
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		cmp	[bp+arg_0], 32h	; '2'
		jnz	short loc_831E
		jmp	short loc_82ED
; ---------------------------------------------------------------------------

loc_82E9:
		inc	word ptr [bp+var_4]
		inc	si

loc_82ED:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_8305
		mov	al, es:[bx]
		cbw
		add	ax, ax
		mov	bx, ax
		cmp	word ptr [bx+0ADCh], 0FFF9h
		jnz	short loc_82E9

loc_8305:
		les	bx, [bp+var_4]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_8318
		push	ds
		push	offset aNoClosingQuote ; "No closing quote"
		call	sub_8D8E
		add	sp, 4

loc_8318:
		inc	word ptr [bp+var_4]
		inc	si
		jmp	short loc_834B
; ---------------------------------------------------------------------------

loc_831E:
		mov	si, 1
		jmp	short loc_8327
; ---------------------------------------------------------------------------

loc_8323:
		inc	word ptr [bp+var_4]
		inc	si

loc_8327:
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		add	ax, ax
		mov	bx, ax
		cmp	word ptr [bx+0ADCh], 0FFF3h
		jz	short loc_8323
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cbw
		add	ax, ax
		mov	bx, ax
		cmp	word ptr [bx+0ADCh], 0FFF5h
		jz	short loc_8323

loc_834B:
		mov	dx, word ptr dword_14124+2
		mov	ax, word ptr dword_14124
		dec	ax
		mov	word_1413A, dx
		mov	word_14138, ax
		mov	word_1413C, si
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		mov	word ptr dword_14124+2,	dx
		mov	word ptr dword_14124, ax
		mov	word_14132, 1
		mov	word_14136, 0
		mov	word_14134, 0
		mov	ax, 15h
		pop	si
		leave
		retn	2
sub_82CC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8385	proc near

var_6		= dword	ptr -6
var_2		= word ptr -2

		enter	6, 0
		push	si
		dec	word ptr dword_14124
		les	bx, dword_14124
		cmp	byte ptr es:[bx], 30h ;	'0'
		jnz	short loc_83BA
		inc	word ptr dword_14124
		les	bx, dword_14124
		cmp	byte ptr es:[bx], 78h ;	'x'
		jz	short loc_83AC
		cmp	byte ptr es:[bx], 58h ;	'X'
		jnz	short loc_83B5

loc_83AC:
		inc	word ptr dword_14124
		mov	si, 10h
		jmp	short loc_83BD
; ---------------------------------------------------------------------------

loc_83B5:
		mov	si, 8
		jmp	short loc_83BD
; ---------------------------------------------------------------------------

loc_83BA:
		mov	si, 0Ah

loc_83BD:
		mov	dx, word ptr dword_14124+2
		mov	ax, word ptr dword_14124
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		jmp	short loc_8426
; ---------------------------------------------------------------------------

loc_83CC:
		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_BC18
		pop	cx
		mov	[bp+var_2], ax
		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		add	ax, ax
		mov	bx, ax
		cmp	word ptr [bx+0ADCh], 0FFF5h
		jz	short loc_8422
		cmp	si, 10h
		jnz	short loc_840C
		cmp	[bp+var_2], 61h	; 'a'
		jl	short loc_840C
		cmp	[bp+var_2], 66h	; 'f'
		jg	short loc_840C
		les	bx, dword_14124
		mov	al, byte ptr [bp+var_2]
		mov	es:[bx], al
		jmp	short loc_8422
; ---------------------------------------------------------------------------

loc_840C:
		cmp	[bp+var_2], 6Ch	; 'l'
		jnz	short loc_8430
		les	bx, dword_14124
		mov	al, byte ptr [bp+var_2]
		mov	es:[bx], al
		inc	word ptr dword_14124
		jmp	short loc_8430
; ---------------------------------------------------------------------------

loc_8422:
		inc	word ptr dword_14124

loc_8426:
		les	bx, dword_14124
		cmp	byte ptr es:[bx], 0
		jnz	short loc_83CC

loc_8430:
		mov	word_14136, 0
		mov	word_14134, 0
		jmp	short loc_84B1
; ---------------------------------------------------------------------------

loc_843E:
		les	bx, [bp+var_6]
		cmp	byte ptr es:[bx], 6Ch ;	'l'
		jz	short loc_84BA
		cmp	si, 8
		jnz	short loc_8467
		les	bx, [bp+var_6]
		cmp	byte ptr es:[bx], 37h ;	'7'
		jle	short loc_8467
		push	ds
		push	offset aIllegalOctalDi ; "Illegal octal	digit"
		call	sub_8D8E
		add	sp, 4
		mov	word_14130, 1
		jmp	short loc_84BA
; ---------------------------------------------------------------------------

loc_8467:
		les	bx, [bp+var_6]
		cmp	byte ptr es:[bx], 61h ;	'a'
		jl	short loc_8477
		mov	al, es:[bx]
		add	al, 0A9h ; '©'
		jmp	short loc_847F
; ---------------------------------------------------------------------------

loc_8477:
		les	bx, [bp+var_6]
		mov	al, es:[bx]
		add	al, 0D0h ; '–'

loc_847F:
		les	bx, [bp+var_6]
		mov	es:[bx], al
		mov	ax, si
		cwd
		push	ax
		push	dx
		mov	dx, word_14136
		mov	ax, word_14134
		pop	cx
		pop	bx
		call	N_LXMUL@
		les	bx, [bp+var_6]
		push	ax
		mov	al, es:[bx]
		cbw
		push	dx
		cwd
		pop	bx
		pop	cx
		add	cx, ax
		adc	bx, dx
		mov	word_14136, bx
		mov	word_14134, cx
		inc	word ptr [bp+var_6]

loc_84B1:
		mov	ax, word ptr [bp+var_6]
		cmp	ax, word ptr dword_14124
		jb	short loc_843E

loc_84BA:
		mov	word_14132, 0
		mov	ax, 15h
		pop	si
		leave
		retn
sub_8385	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_84C6	proc near

var_4		= word ptr -4
var_2		= word ptr -2

		enter	4, 0
		push	si
		mov	[bp+var_4], 0
		xor	si, si
		jmp	short loc_84E0
; ---------------------------------------------------------------------------

loc_84D4:
		cmp	si, 2
		jge	short loc_84DF
		mov	al, byte ptr [bp+var_2]
		mov	byte ptr [bp+si+var_4],	al

loc_84DF:
		inc	si

loc_84E0:
		push	27h ; '''
		call	sub_8513
		mov	[bp+var_2], ax
		cmp	ax, 0FFFFh
		jnz	short loc_84D4
		cmp	si, 2
		jl	short loc_84FC
		push	ds
		push	offset aCharacterConst ; "Character constant too long"
		call	sub_8D8E
		add	sp, 4

loc_84FC:
		mov	ax, [bp+var_4]
		cwd
		mov	word_14136, dx
		mov	word_14134, ax
		mov	word_14132, 0
		mov	ax, 15h
		pop	si
		leave
		retn
sub_84C6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8513	proc near

var_2		= word ptr -2
arg_0		= word ptr  4

		enter	2, 0
		push	si
		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	dx, ax
		inc	word ptr dword_14124
		cmp	dx, 0FFFFh
		jnz	short loc_852D
		jmp	short loc_854F
; ---------------------------------------------------------------------------

loc_852D:
		cmp	dx, [bp+arg_0]
		jnz	short loc_8534
		jmp	short loc_854F
; ---------------------------------------------------------------------------

loc_8534:
		cmp	dx, 5Ch	; '\'
		jz	short loc_853C
		jmp	loc_85F4
; ---------------------------------------------------------------------------

loc_853C:
		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	dx, ax
		inc	word ptr dword_14124
		cmp	dx, 0FFFFh
		jnz	short loc_8555

loc_854F:
		mov	ax, 0FFFFh
		jmp	loc_85F6
; ---------------------------------------------------------------------------

loc_8555:
		mov	[bp+var_2], dx
		mov	cx, 5		; switch 5 cases
		mov	bx, offset byte_85FB

loc_855E:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_2]
		jz	short loc_856D
		add	bx, 2
		loop	loc_855E
		jmp	short loc_858B	; default
; ---------------------------------------------------------------------------

loc_856D:
		jmp	word ptr cs:[bx+0Ah] ; switch jump
; ---------------------------------------------------------------------------
		mov	ax, 9
		jmp	loc_85F6
; ---------------------------------------------------------------------------
		mov	ax, 0Ah
		jmp	short loc_85F6
; ---------------------------------------------------------------------------
		mov	ax, 8
		jmp	short loc_85F6
; ---------------------------------------------------------------------------
		mov	ax, 0Dh
		jmp	short loc_85F6
; ---------------------------------------------------------------------------
		mov	ax, 0Ch
		jmp	short loc_85F6
; ---------------------------------------------------------------------------

loc_858B:
		cmp	dx, 30h	; '0'   ; default
		jl	short loc_85F4
		cmp	dx, 37h	; '7'
		jg	short loc_85F4
		mov	ax, dx
		add	ax, 0FFD0h
		mov	si, ax
		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	dx, ax
		inc	word ptr dword_14124
		cmp	dx, 30h	; '0'
		jl	short loc_85B4
		cmp	dx, 37h	; '7'
		jle	short loc_85BA

loc_85B4:
		dec	word ptr dword_14124
		jmp	short loc_85F0
; ---------------------------------------------------------------------------

loc_85BA:
		mov	ax, si
		shl	ax, 3
		add	ax, dx
		add	ax, 0FFD0h
		mov	si, ax
		les	bx, dword_14124
		mov	al, es:[bx]
		cbw
		mov	dx, ax
		inc	word ptr dword_14124
		cmp	dx, 30h	; '0'
		jl	short loc_85DE
		cmp	dx, 37h	; '7'
		jle	short loc_85E4

loc_85DE:
		dec	word ptr dword_14124
		jmp	short loc_85F0
; ---------------------------------------------------------------------------

loc_85E4:
		mov	ax, si
		shl	ax, 3
		add	ax, dx
		add	ax, 0FFD0h
		mov	si, ax

loc_85F0:
		mov	ax, si
		jmp	short loc_85F6
; ---------------------------------------------------------------------------

loc_85F4:
		mov	ax, dx

loc_85F6:
		pop	si
		leave
		retn	2
sub_8513	endp

; ---------------------------------------------------------------------------
byte_85FB	db 62h,	0, 66h,	0, 6Eh,	0, 72h,	0, 74h,	0, 7Ch,	85h, 86h

		db 85h,	77h, 85h, 81h, 85h, 71h, 85h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_860F	proc near

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= dword	ptr -2
arg_0		= dword	ptr  4
arg_4		= word ptr  8

		enter	8, 0
		push	si
		mov	si, [bp+arg_4]
		dec	si
		add	word ptr [bp+arg_0], 4
		mov	[bp+var_4], si
		mov	dx, word ptr [bp+arg_0+2]
		mov	ax, word ptr [bp+arg_0]
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		jmp	short loc_8673
; ---------------------------------------------------------------------------

loc_862D:
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 2Dh ;	'-'
		jz	short loc_8645
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jnz	short loc_866E

loc_8645:
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx+1], 65h	; 'e'
		jnz	short loc_866E
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		inc	ax
		push	word ptr es:[bx+2]
		push	ax		; s
		push	word ptr es:[bx+6] ; int
		push	word ptr es:[bx+4] ; int
		push	ss
		lea	ax, [bp+var_2]
		push	ax		; __int32
		call	sub_8842

loc_866E:
		add	word ptr [bp+arg_0], 4
		dec	si

loc_8673:
		or	si, si
		jg	short loc_862D
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		mov	si, [bp+var_4]
		jmp	short loc_86F7
; ---------------------------------------------------------------------------

loc_8688:
		mov	word ptr [bp+var_2], 0
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 2Dh ;	'-'
		jz	short loc_86A5
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jnz	short loc_86DB

loc_86A5:
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		cmp	byte ptr es:[bx+1], 0
		jz	short loc_86F2
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		inc	ax
		push	word ptr es:[bx+2]
		push	ax		; s
		push	word ptr es:[bx+6] ; int
		push	word ptr es:[bx+4] ; int
		push	ss
		lea	ax, [bp+var_2]
		push	ax		; __int32
		call	sub_8842
		cmp	word ptr [bp+var_2], 0
		jz	short loc_86F2
		add	word ptr [bp+arg_0], 4
		dec	si
		jmp	short loc_86F2
; ---------------------------------------------------------------------------

loc_86DB:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		call	sub_8767
		les	bx, [bp+arg_0]
		les	bx, es:[bx]
		mov	byte ptr es:[bx], 2Dh ;	'-'

loc_86F2:
		add	word ptr [bp+arg_0], 4
		dec	si

loc_86F7:
		or	si, si
		jle	short loc_870F
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		call	sub_8731
		or	ax, ax
		jnz	short loc_870F
		jmp	loc_8688
; ---------------------------------------------------------------------------

loc_870F:
		cmp	word_F50E, 0
		jz	short loc_871C
		mov	word_F50C, 1

loc_871C:
		mov	word_F500, 1
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		pop	si
		leave
		retn	6
sub_860F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8731	proc near

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 2Dh ;	'-'
		jz	short loc_8751
		cmp	byte ptr es:[bx], 2Fh ;	'/'
		jnz	short loc_8757
		jmp	short loc_8751
; ---------------------------------------------------------------------------

loc_8745:
		les	bx, [bp+arg_0]
		inc	word ptr [bp+arg_0]
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jnz	short loc_8757

loc_8751:
		xor	ax, ax
		pop	bp
		retn	4
; ---------------------------------------------------------------------------

loc_8757:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_8745
		mov	ax, 1
		pop	bp
		retn	4
sub_8731	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8767	proc near

@@src		= dword	ptr -0Ch
var_8		= dword	ptr -8
@@name		= dword	ptr -4
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	0Ch, 0
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+@@name+2], dx
		mov	word ptr [bp+@@name], ax
		jmp	short loc_877C
; ---------------------------------------------------------------------------

loc_8779:
		inc	word ptr [bp+@@name]

loc_877C:
		les	bx, [bp+@@name]
		cmp	byte ptr es:[bx], 20h ;	' '
		jnz	short loc_878B
		cmp	byte ptr es:[bx], 0
		jnz	short loc_8779

loc_878B:
		les	bx, [bp+@@name]
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jnz	short loc_87A2
		push	ds
		push	offset aNoMacroBefore ;	"No macro before ="
		call	sub_8D8E
		add	sp, 4
		leave
		retn	4
; ---------------------------------------------------------------------------

loc_87A2:
		mov	dx, word ptr [bp+@@name+2]
		mov	ax, word ptr [bp+@@name]
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		jmp	short loc_87B3
; ---------------------------------------------------------------------------

loc_87B0:
		inc	word ptr [bp+var_8]

loc_87B3:
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 3Dh ;	'='
		jnz	short loc_87B0
		mov	dx, word ptr [bp+var_8+2]
		mov	ax, word ptr [bp+var_8]
		inc	ax
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_87C9:
		dec	word ptr [bp+var_8]
		les	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_87C9
		inc	word ptr [bp+var_8]
		les	bx, [bp+var_8]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_87F4
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name]
		push	ds
		push	offset unk_F5E2
		jmp	short loc_880E
; ---------------------------------------------------------------------------

loc_87F4:
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ds
		push	offset byte_1285A ; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		push	ds
		push	offset byte_1285A ; s1

loc_880E:
		call	sub_27B4
		leave
		retn	4
sub_8767	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		les	bx, [bp+4]
		mov	al, es:[bx]
		les	bx, [bp+8]
		cmp	al, es:[bx]
		jge	short loc_882B
		mov	ax, 0FFFFh
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_882B:
		les	bx, [bp+4]
		mov	al, es:[bx]
		les	bx, [bp+8]
		cmp	al, es:[bx]
		jle	short loc_883E
		mov	ax, 1
		pop	bp
		retn
; ---------------------------------------------------------------------------

loc_883E:
		xor	ax, ax
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_8842(__int32, int, int, void *s)
sub_8842	proc near

var_4		= dword	ptr -4
arg_0		= dword	ptr  4
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
@@s		= dword	ptr  0Ch

		enter	4, 0
		push	8815h		; fcmp
		push	8		; width
		push	1Ah		; nelem
		push	ds
		push	offset unk_F512	; base
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; key
		call	_bsearch
		add	sp, 0Eh
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_888E
		mov	ax, word ptr [bp+@@s]
		dec	ax
		push	word ptr [bp+@@s+2]
		push	ax
		push	ds
		push	offset aIncorrectComma ; "Incorrect command line argument: %s"
		call	sub_8E0F
		add	sp, 8
		push	ds
		push	offset unk_F5E4
		call	sub_8E0F
		add	sp, 4
		mov	word_F4E0, 1
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_888E:
		les	bx, [bp+var_4]
		mov	ax, es:[bx+2]
		or	ax, ax
		jz	short loc_88A7
		cmp	ax, 1
		jz	short loc_88C6
		cmp	ax, 3
		jz	short loc_88E5
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_88A7:
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx+1], 2Dh	; '-'
		jz	short loc_88B6
		mov	ax, 1
		jmp	short loc_88B8
; ---------------------------------------------------------------------------

loc_88B6:
		xor	ax, ax

loc_88B8:
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		mov	es:[bx], ax
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_88C6:
		mov	word_14140, 1
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		push	[bp+arg_6]	; int
		push	[bp+arg_4]	; int
		push	word ptr [bp+arg_0+2]
		push	word ptr [bp+arg_0] ; __int32
		call	sub_2228
		leave
		retn	0Ch
; ---------------------------------------------------------------------------

loc_88E5:
		call	sub_8B04
sub_8842	endp

; ---------------------------------------------------------------------------
		push	0
		call	sub_8E01
; ---------------------------------------------------------------------------
		db 0C9h	; …
		db 0C2h	; ¬
		db  0Ch
		db    0

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_88F1(int, void *key)
sub_88F1	proc near

var_4		= dword	ptr -4
arg_0		= word ptr  4
key		= dword	ptr  6

		enter	4, 0
		push	8815h		; fcmp
		push	8		; width
		push	1Ah		; nelem
		push	ds
		push	offset unk_F512	; base
		push	word ptr [bp+key+2]
		push	word ptr [bp+key] ; key
		call	_bsearch
		add	sp, 0Eh
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		or	ax, word ptr [bp+var_4+2]
		jnz	short loc_892E

loc_8917:
		push	word ptr [bp+key+2]
		push	word ptr [bp+key]
		push	ds
		push	offset aIllegalInvalid ; "Illegal/invalid option in CMDSWITCHES	d"...
		call	sub_8D8E
		add	sp, 8
		mov	ax, 1
		leave
		retn	6
; ---------------------------------------------------------------------------

loc_892E:
		les	bx, [bp+var_4]
		mov	ax, es:[bx+2]
		or	ax, ax
		jnz	short loc_8917
		les	bx, [bp+var_4]
		les	bx, es:[bx+4]
		mov	ax, [bp+arg_0]
		mov	es:[bx], ax
		xor	ax, ax
		leave
		retn	6
sub_88F1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_894C(char *s)
sub_894C	proc near

var_4		= word ptr -4
var_2		= word ptr -2
@@s		= dword	ptr  4

		enter	4, 0
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		add	sp, 4
		inc	ax
		push	ax		; size
		call	sub_5296
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	dx
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		leave
		retn	4
sub_894C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_897F(char *s1, int handle)
sub_897F	proc near

@@maxlen		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
@@s1		= dword	ptr  4
@@handle		= word ptr  8

		enter	0Ah, 0
		push	si
		push	di
		mov	di, [bp+@@handle]
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s
		call	_strlen
		add	sp, 4
		inc	ax
		mov	[bp+@@maxlen], ax

loc_8998:
		xor	si, si
		push	1000h		; n
		push	0		; c
		push	ds
		push	offset byte_1285A ; s
		call	_memset
		add	sp, 8
		push	1000h
		push	ds
		push	offset byte_1285A
		push	di
		call	j____read
		add	sp, 8
		cwd
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		or	dx, dx
		jnz	short loc_89CD
		cmp	ax, 1
		jnz	short loc_89CD
		mov	ax, 0FFFFh
		jmp	loc_8AA4
; ---------------------------------------------------------------------------

loc_89CD:
		cmp	[bp+var_2], 0
		ja	short loc_89DD
		jb	short loc_89DB
		cmp	[bp+var_4], 0FFFFh
		jnb	short loc_89DD

loc_89DB:
		jmp	short loc_89F2
; ---------------------------------------------------------------------------

loc_89DD:
		push	225h		; line
		push	ds
		push	offset aConfig_c ; "config.c"
		push	ds
		push	offset aBytesreadUint_ ; "bytesread < UINT_MAX"
		push	ds
		push	offset aAssertionFai_0 ; "Assertion failed: %s,	file %s, line %d\n"...
		call	___assertfail
; ---------------------------------------------------------------------------
		add	sp, 0Eh

loc_89F2:
		mov	ax, [bp+var_4]
		sub	ax, si
		push	ax		; n
		les	bx, [bp+@@s1]
		mov	al, es:[bx]
		cbw
		push	ax		; c
		push	ds
		mov	ax, si
		add	ax, 475Ah
		push	ax		; s
		call	_memchr
		add	sp, 8
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		or	ax, [bp+var_6]
		jz	short loc_8A96
		mov	ax, [bp+var_8]
		xor	dx, dx
		sub	ax, 475Ah
		sbb	dx, 0
		mov	si, ax
		mov	dx, [bp+var_4]
		sub	dx, [bp+@@maxlen]
		cmp	ax, dx
		jbe	short loc_8A42
		push	1		; fromwhere
		mov	ax, [bp+@@maxlen]
		inc	ax
		cwd
		push	dx
		push	ax		; offset
		push	di		; handle
		call	_lseek
		add	sp, 8
		jmp	loc_8998
; ---------------------------------------------------------------------------

loc_8A42:
		push	[bp+@@maxlen]	; maxlen
		push	ds
		mov	ax, si
		add	ax, 475Ah
		push	ax		; s2
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_strncmp
		add	sp, 0Ah
		or	ax, ax
		jnz	short loc_8A95
		push	0		; fromwhere
		push	1		; fromwhere
		push	0
		push	0		; offset
		push	di		; handle
		call	_lseek
		add	sp, 8
		sub	ax, [bp+var_4]
		sbb	dx, 0
		add	ax, si
		adc	dx, 0
		push	ax
		mov	ax, [bp+@@maxlen]
		push	dx
		cwd
		pop	bx
		pop	cx
		add	cx, ax
		adc	bx, dx
		add	cx, 1
		adc	bx, 0
		push	bx
		push	cx		; offset
		push	di		; handle
		call	_lseek
		add	sp, 8
		xor	ax, ax
		jmp	short loc_8AA4
; ---------------------------------------------------------------------------

loc_8A95:
		inc	si

loc_8A96:
		mov	ax, [bp+var_8]
		or	ax, [bp+var_6]
		jz	short loc_8AA1
		jmp	loc_89F2
; ---------------------------------------------------------------------------

loc_8AA1:
		jmp	loc_8998
; ---------------------------------------------------------------------------

loc_8AA4:
		pop	di
		pop	si
		leave
		retn	6
sub_897F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8AAA	proc near
		push	bp
		mov	bp, sp
		mov	ah, 1
		int	21h		; DOS -	KEYBOARD INPUT
					; Return: AL = character read
		mov	ah, 0
		pop	bp
		retn
sub_8AAA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_8AB5(int, void *dest)
sub_8AB5	proc near

arg_0		= word ptr  4
@@dest		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+@@dest]
		mov	al, byte ptr [bp+arg_0]
		mov	es:[bx], al
		mov	ax, ds
		mov	es, ax
		assume es:dseg
		lds	dx, [bp+@@dest]
		mov	ah, 0Ah
		int	21h		; DOS -	BUFFERED KEYBOARD INPUT
					; DS:DX	-> buffer
		mov	ax, es
		mov	ds, ax
		mov	es, word ptr [bp+@@dest+2]
		assume es:nothing
		mov	al, es:[bx+1]
		cbw
		mov	[bp+arg_0], ax
		push	ax		; n
		mov	ax, word ptr [bp+@@dest]
		add	ax, 2
		push	word ptr [bp+@@dest+2]
		push	ax		; src
		push	word ptr [bp+@@dest+2]
		push	bx		; dest
		call	_memmove
		add	sp, 0Ah
		les	bx, [bp+@@dest]
		add	bx, [bp+arg_0]
		mov	byte ptr es:[bx], 0
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	bp
		retn	6
sub_8AB5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_8B04	proc near

var_5		= byte ptr -5
@@path		= dword	ptr -4

		enter	6, 0
		push	si
		cmp	word_14140, 0
		jz	short loc_8B1A
		push	ds
		push	offset aCannotWriteASt ; "Cannot write a string	option.\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4

loc_8B1A:
		cmp	byte ptr word_E17C, 3
		jnb	short loc_8B3E
		push	ds
		push	offset aMake_exe ; "MAKE.EXE"
		call	sub_5763
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		or	ax, dx
		jnz	short loc_8B4F
		push	ds
		push	offset aCannotFindMake ; "Cannot find MAKE.EXE\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 4
		jmp	short loc_8B4F
; ---------------------------------------------------------------------------

loc_8B3E:
		les	bx, dword_FFCC
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax

loc_8B4F:
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	ds
		push	offset aWriteOptionsTo ; "\nWrite options to %s? ( Y/N ) [N]:"
		call	sub_8E0F
		add	sp, 8
		call	sub_8AAA
		mov	[bp+var_5], al
		cmp	al, 59h	; 'Y'
		jz	short loc_8BA5
		cmp	[bp+var_5], 79h	; 'y'
		jz	short loc_8BA5
		push	ds
		push	offset aEnterFullPathO ; "\nEnter full path of MAKE.EXE	to modify:"...
		call	sub_8E0F
		add	sp, 4
		push	53h ; 'S'       ; size
		call	sub_5296
		mov	word ptr [bp+@@path+2], dx
		mov	word ptr [bp+@@path], ax
		push	dx
		push	ax		; dest
		push	50h ; 'P'       ; int
		call	sub_8AB5
		push	ds
		push	offset unk_F5E5
		call	sub_8E0F
		add	sp, 4
		les	bx, [bp+@@path]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_8BAF
		push	2		; status
		call	sub_8E01
; ---------------------------------------------------------------------------
		db 0EBh	; Î
		db  0Ah
; ---------------------------------------------------------------------------

loc_8BA5:
		push	ds
		push	offset unk_F5E5
		call	sub_8E0F
		add	sp, 4

loc_8BAF:
		push	8004h		; access
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	_open
		add	sp, 6
		mov	si, ax
		cmp	ax, 0FFFFh
		jnz	short loc_8BD5
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	ds
		push	offset aUnableToOpenFi ; "Unable to open file %s.\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_8BD5:
		push	si		; handle
		push	ds
		push	offset a@_0	; "!@#$%^&*()"
		call	sub_897F
		or	ax, ax
		jz	short loc_8BF1
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	ds
		push	offset aSNotAMake_ ; "%s not a MAKE.\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_8BF1:
		push	24h ; '$'
		push	ds
		push	offset word_F4EE
		push	si
		call	j____write
		add	sp, 8
		cmp	ax, 24h	; '$'
		jz	short loc_8C13
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	ds
		push	offset aWriteErrorOnFi ; "Write	error on file %s.\n"
		call	sub_8D1A
; ---------------------------------------------------------------------------
		add	sp, 8

loc_8C13:
		push	0		; status
		call	sub_8E01
sub_8B04	endp

; ---------------------------------------------------------------------------
		db  5Eh	; ^
		db 0C9h	; …
		db 0C3h	; √

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8C1B	proc near

@@s1		= byte ptr -4Eh

		enter	4Eh, 0
		push	si
		push	di
		xor	di, di
		xor	si, si
		jmp	short loc_8C5A
; ---------------------------------------------------------------------------

loc_8C27:
		mov	bx, di
		shl	bx, 3
		cmp	word ptr [bx+1414h], 0
		jnz	short loc_8C59
		mov	bx, di
		shl	bx, 3
		les	bx, [bx+1416h]
		cmp	word ptr es:[bx], 0
		jz	short loc_8C59
		mov	bx, di
		shl	bx, 3
		mov	al, [bx+1412h]
		mov	[bp+si+@@s1], al
		inc	si
		mov	[bp+si+@@s1], 20h	; ' '
		inc	si
		mov	[bp+si+@@s1], 2Dh	; '-'
		inc	si

loc_8C59:
		inc	di

loc_8C5A:
		cmp	di, 1Ah
		jl	short loc_8C27
		or	si, si
		jz	short loc_8C64
		dec	si

loc_8C64:
		mov	[bp+si+@@s1], 0
		push	ds
		push	offset aMakeflags ; "MAKEFLAGS"
		push	ss
		lea	ax, [bp+@@s1]
		push	ax		; s1
		call	sub_27B4
		pop	di
		pop	si
		leave
		retn
sub_8C1B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8C78	proc near

@@dest		= byte ptr -0A6h
@@src		= dword	ptr -56h
var_14		= dword	ptr -14h
@@s1		= dword	ptr -0Eh
var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		enter	0A6h, 0
		push	ss
		lea	ax, [bp+var_14]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+@@s1]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		call	sub_90B3
		add	sp, 14h
		push	ds
		push	offset aMake	; "MAKE"
		push	ss
		lea	ax, [bp+@@s1]
		push	ax		; s1
		call	sub_27B4
		push	0		; int
		push	0		; int
		push	0		; int
		push	0		; int
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; src
		push	ss
		lea	ax, [bp+var_4]
		push	ax		; __int32
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; dest
		call	sub_9247
		add	sp, 14h
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; s
		call	_strlen
		add	sp, 4
		dec	ax
		lea	dx, [bp+@@dest]
		add	ax, dx
		mov	bx, ax
		cmp	byte ptr ss:[bx], 5Ch ;	'\'
		jnz	short loc_8CFE
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; s
		call	_strlen
		add	sp, 4
		dec	ax
		lea	dx, [bp+@@dest]
		add	ax, dx
		mov	bx, ax
		mov	byte ptr ss:[bx], 0

loc_8CFE:
		push	ds
		push	offset aMakedir	; "MAKEDIR"
		push	ss
		lea	ax, [bp+@@dest]
		push	ax		; s
		call	_strupr
		add	sp, 4
		push	dx
		push	ax		; s1
		call	sub_27B4
		call	sub_8C1B
		leave
		retn	4
sub_8C78	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_8D1A	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= byte ptr  8

		enter	4, 0
		lea	ax, [bp+arg_4]
		mov	[bp+var_2], ss
		mov	[bp+var_4], ax
		push	ds
		push	offset aFatal	; "Fatal"
		call	sub_8E0F
		add	sp, 4
		mov	ax, word_F64E
		or	ax, word_F650
		jz	short loc_8D4C
		push	word_F650
		push	word_F64E
		push	ds
		push	offset aS_6
		call	sub_8E0F
		add	sp, 8

loc_8D4C:
		cmp	word_F652, 0
		jz	short loc_8D61
		push	word_F652
		push	ds
		push	offset aD
		call	sub_8E0F
		add	sp, 6

loc_8D61:
		push	ds
		push	offset asc_F662
		call	sub_8E0F
		add	sp, 4
		push	[bp+var_2]
		push	[bp+var_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_8E2E
		add	sp, 8
		push	ds
		push	offset asc_F665
		call	sub_8E0F
		add	sp, 4
		push	1		; status
		call	sub_8E01
sub_8D1A	endp

; ---------------------------------------------------------------------------
		db 0C9h	; …
		db 0C3h	; √

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8D8E	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= byte ptr  8

		enter	4, 0
		lea	ax, [bp+arg_4]
		mov	[bp+var_2], ss
		mov	[bp+var_4], ax
		inc	word_F658
		push	ds
		push	offset aError_0	; "Error"
		call	sub_8E0F
		add	sp, 4
		mov	ax, word_F64E
		or	ax, word_F650
		jz	short loc_8DC4
		push	word_F650
		push	word_F64E
		push	ds
		push	offset aS_6
		call	sub_8E0F
		add	sp, 8

loc_8DC4:
		cmp	word_F652, 0
		jz	short loc_8DD9
		push	word_F652
		push	ds
		push	offset aD
		call	sub_8E0F
		add	sp, 6

loc_8DD9:
		push	ds
		push	offset asc_F662
		call	sub_8E0F
		add	sp, 4
		push	[bp+var_2]
		push	[bp+var_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_8E2E
		add	sp, 8
		push	ds
		push	offset asc_F665
		call	sub_8E0F
		add	sp, 4
		leave
		retn
sub_8D8E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; int __stdcall	sub_8E01(int status)
sub_8E01	proc near

status		= word ptr  4

		push	bp
		mov	bp, sp
		push	[bp+status]	; status
		call	_exit
sub_8E01	endp

; ---------------------------------------------------------------------------
		pop	cx
		pop	bp
		retn	2

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8E0F	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= byte ptr  8

		enter	4, 0
		lea	ax, [bp+arg_4]
		mov	[bp+var_2], ss
		mov	[bp+var_4], ax
		push	[bp+var_2]
		push	ax
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_8E2E
		add	sp, 8
		leave
		retn
sub_8E0F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_8E2E	proc near

var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		enter	1Ch, 0
		push	si
		jmp	loc_9056
; ---------------------------------------------------------------------------

loc_8E36:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 25h ;	'%'
		jz	short loc_8E5A
		cmp	byte ptr es:[bx], 0Ah
		jnz	short loc_8E4F
		push	0Dh		; dosdx
		push	2		; dosfun
		call	_bdos
		add	sp, 4

loc_8E4F:
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		cbw
		push	ax
		jmp	loc_900E
; ---------------------------------------------------------------------------

loc_8E5A:
		xor	si, si
		inc	word ptr [bp+arg_0]
		lea	ax, [bp+var_10]
		mov	word ptr [bp+var_C+2], ss
		mov	word ptr [bp+var_C], ax
		dec	word ptr [bp+var_C]
		les	bx, [bp+var_C]
		mov	byte ptr es:[bx], 0
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 6Ch ;	'l'
		jnz	short loc_8E81
		inc	word ptr [bp+arg_0]
		mov	si, 1

loc_8E81:
		les	bx, [bp+arg_0]
		mov	al, es:[bx]
		cbw
		mov	[bp+var_10], ax
		mov	cx, 4		; switch 4 cases
		mov	bx, offset byte_9066

loc_8E91:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_10]
		jz	short loc_8EA1
		add	bx, 2
		loop	loc_8E91
		jmp	loc_9062	; default
; ---------------------------------------------------------------------------

loc_8EA1:
		jmp	word ptr cs:[bx+8] ; switch jump
; ---------------------------------------------------------------------------
		or	si, si
		jz	short loc_8EBA
		add	word ptr [bp+arg_4], 4
		les	bx, [bp+arg_4]
		mov	dx, es:[bx-2]
		mov	ax, es:[bx-4]
		jmp	short loc_8EC6
; ---------------------------------------------------------------------------

loc_8EBA:
		add	word ptr [bp+arg_4], 2
		les	bx, [bp+arg_4]
		mov	ax, es:[bx-2]
		cwd

loc_8EC6:
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		cmp	[bp+var_6], 8000h
		jnz	short loc_8EE8
		cmp	[bp+var_8], 0
		jnz	short loc_8EE8
		mov	word ptr [bp+var_C+2], ds
		mov	word ptr [bp+var_C], 1568h

loc_8EE1:
		mov	[bp+var_E], 2Dh	; '-'
		jmp	short loc_8F51
; ---------------------------------------------------------------------------

loc_8EE8:
		cmp	[bp+var_6], 0
		jg	short loc_8F0A
		jl	short loc_8EF6
		cmp	[bp+var_8], 0
		jnb	short loc_8F0A

loc_8EF6:
		mov	[bp+var_E], 1
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		neg	dx
		neg	ax
		sbb	dx, 0
		jmp	short loc_8F36
; ---------------------------------------------------------------------------

loc_8F0A:
		mov	[bp+var_E], 0
		jmp	short loc_8F3C
; ---------------------------------------------------------------------------

loc_8F11:
		dec	word ptr [bp+var_C]
		push	0
		push	0Ah
		push	[bp+var_6]
		push	[bp+var_8]
		call	near ptr N_LMOD@
		add	al, 30h	; '0'
		les	bx, [bp+var_C]
		mov	es:[bx], al
		push	0		; dosal
		push	0Ah
		push	[bp+var_6]
		push	[bp+var_8]
		call	near ptr N_LDIV@

loc_8F36:
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax

loc_8F3C:
		mov	ax, [bp+var_8]
		or	ax, [bp+var_6]
		jnz	short loc_8F11
		cmp	[bp+var_E], 0
		jz	short loc_8F4C
		jmp	short loc_8EE1
; ---------------------------------------------------------------------------

loc_8F4C:
		mov	[bp+var_E], 0

loc_8F51:
		cmp	[bp+var_E], 0
		jz	short loc_8F6F
		push	[bp+var_E]
		jmp	short loc_8F67
; ---------------------------------------------------------------------------

loc_8F5C:
		les	bx, [bp+var_C]
		inc	word ptr [bp+var_C]
		mov	al, es:[bx]
		cbw
		push	ax		; dosdx

loc_8F67:
		push	2		; dosfun
		call	_bdos
		add	sp, 4

loc_8F6F:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_8F5C
		jmp	loc_9053
; ---------------------------------------------------------------------------
		or	si, si
		jz	short loc_8F90
		add	word ptr [bp+arg_4], 4
		les	bx, [bp+arg_4]
		mov	dx, es:[bx-2]
		mov	ax, es:[bx-4]
		jmp	short loc_8FD2
; ---------------------------------------------------------------------------

loc_8F90:
		add	word ptr [bp+arg_4], 2
		les	bx, [bp+arg_4]
		mov	ax, es:[bx-2]
		mov	[bp+var_2], 0
		jmp	short loc_8FD5
; ---------------------------------------------------------------------------

loc_8FA2:
		dec	word ptr [bp+var_C]
		mov	ax, [bp+var_4]
		and	ax, 0Fh
		mov	[bp+var_E], ax
		cmp	[bp+var_E], 9
		jle	short loc_8FBA
		add	[bp+var_E], 57h	; 'W'
		jmp	short loc_8FBE
; ---------------------------------------------------------------------------

loc_8FBA:
		add	[bp+var_E], 30h	; '0'

loc_8FBE:
		les	bx, [bp+var_C]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		mov	cl, 4
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		call	near ptr N_LXURSH@

loc_8FD2:
		mov	[bp+var_2], dx

loc_8FD5:
		mov	[bp+var_4], ax
		mov	ax, [bp+var_4]
		or	ax, [bp+var_2]
		jnz	short loc_8FA2
		jmp	short loc_8FF5
; ---------------------------------------------------------------------------

loc_8FE2:
		les	bx, [bp+var_C]
		inc	word ptr [bp+var_C]
		mov	al, es:[bx]
		cbw
		push	ax		; dosdx
		push	2		; dosfun
		call	_bdos
		add	sp, 4

loc_8FF5:
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_8FE2
		jmp	short loc_9053
; ---------------------------------------------------------------------------
		mov	es, word ptr [bp+arg_4+2]
		add	word ptr [bp+arg_4], 2
		mov	bx, word ptr [bp+arg_4]
		push	word ptr es:[bx-2] ; dosdx

loc_900E:
		push	2		; dosfun
		call	_bdos
		add	sp, 4
		jmp	short loc_9053
; ---------------------------------------------------------------------------
		add	word ptr [bp+arg_4], 4
		les	bx, [bp+arg_4]
		mov	dx, es:[bx-2]
		mov	ax, es:[bx-4]
		mov	word ptr [bp+var_C+2], dx
		mov	word ptr [bp+var_C], ax
		jmp	short loc_9042
; ---------------------------------------------------------------------------

loc_902F:
		les	bx, [bp+var_C]
		inc	word ptr [bp+var_C]
		mov	al, es:[bx]
		cbw
		push	ax		; dosdx
		push	2		; dosfun
		call	_bdos
		add	sp, 4

loc_9042:
		mov	ax, word ptr [bp+var_C]
		or	ax, word ptr [bp+var_C+2]
		jz	short loc_9053
		les	bx, [bp+var_C]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_902F

loc_9053:
		inc	word ptr [bp+arg_0]

loc_9056:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx], 0
		jz	short loc_9062	; default
		jmp	loc_8E36
; ---------------------------------------------------------------------------

loc_9062:
		pop	si		; default
		leave
		retn
sub_8E2E	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
		db  0
byte_9066	db 63h,	0, 64h,	0, 73h,	0, 78h,	2 dup(0), 90h, 0A5h, 8Eh

		db 18h,	90h, 7Bh, 8Fh

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_9076(int, char *src, char *dest)
sub_9076	proc near

arg_0		= word ptr  4
@@src		= dword	ptr  6
@@dest		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	ax, word ptr [bp+@@dest]
		or	ax, word ptr [bp+@@dest+2]
		jz	short loc_90A7
		mov	ax, si
		dec	ax
		push	ax		; maxlen
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strncpy
		add	sp, 0Ah
		mov	ax, si
		dec	ax
		les	bx, [bp+@@dest]
		add	bx, ax
		mov	byte ptr es:[bx], 0

loc_90A7:
		les	bx, [bp+@@src]
		mov	byte ptr es:[bx], 0
		pop	si
		pop	bp
		retn	0Ah
sub_9076	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl sub_90B3(char *src, __int32, __int32, __int32, __int32)
sub_90B3	proc near

var_58		= byte ptr -58h
var_6		= word ptr -6
@@dest		= dword	ptr -4
@@src		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch
arg_C		= dword	ptr  10h
arg_10		= dword	ptr  14h

		enter	58h, 0
		push	si
		push	di
		xor	si, si
		lea	ax, [bp+var_58]
		mov	word ptr [bp+@@dest+2], ss
		mov	word ptr [bp+@@dest], ax
		mov	ax, word ptr [bp+arg_4]
		or	ax, word ptr [bp+arg_4+2]
		jz	short loc_90D3
		les	bx, [bp+arg_4]
		mov	byte ptr es:[bx], 0

loc_90D3:
		mov	ax, word ptr [bp+arg_8]
		or	ax, word ptr [bp+arg_8+2]
		jz	short loc_90E2
		les	bx, [bp+arg_8]
		mov	byte ptr es:[bx], 0

loc_90E2:
		mov	ax, word ptr [bp+arg_C]
		or	ax, word ptr [bp+arg_C+2]
		jz	short loc_90F1
		les	bx, [bp+arg_C]
		mov	byte ptr es:[bx], 0

loc_90F1:
		mov	ax, word ptr [bp+arg_10]
		or	ax, word ptr [bp+arg_10+2]
		jz	short loc_9105
		les	bx, [bp+arg_10]
		mov	byte ptr es:[bx], 0
		jmp	short loc_9105
; ---------------------------------------------------------------------------

loc_9102:
		inc	word ptr [bp+@@src]

loc_9105:
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx], 20h ;	' '
		jz	short loc_9102
		push	word ptr [bp+@@src+2]
		push	bx		; s
		call	_strlen
		add	sp, 4
		mov	di, ax
		cmp	ax, 50h	; 'P'
		jle	short loc_9122
		mov	di, 50h	; 'P'

loc_9122:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+@@dest]
		push	di		; maxlen
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strncpy
		add	sp, 0Ah
		add	word ptr [bp+@@dest], di
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		xor	di, di

loc_914B:
		dec	word ptr [bp+@@dest] ; default
		les	bx, [bp+@@dest]
		mov	al, es:[bx]
		cbw
		mov	[bp+var_6], ax
		mov	cx, 7		; switch 7 cases
		mov	bx, offset byte_922B

loc_915E:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_6]
		jz	short loc_916D
		add	bx, 2
		loop	loc_915E
		jmp	short loc_914B	; default
; ---------------------------------------------------------------------------

loc_916D:
		jmp	word ptr cs:[bx+0Eh] ; switch jump
sub_90B3	endp

; ---------------------------------------------------------------------------
		or	di, di
		jnz	short loc_914B	; default
		test	si, 2
		jnz	short loc_914B	; default
		or	si, 2
		push	word ptr [bp+16h]
		push	word ptr [bp+14h]
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		push	5
		call	sub_9076
		jmp	short loc_914B	; default
; ---------------------------------------------------------------------------
		or	di, di
		jz	short loc_91BA
		inc	word ptr [bp-4]
		les	bx, [bp-4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_91A4
		or	si, 8

loc_91A4:
		push	word ptr [bp+0Eh]
		push	word ptr [bp+0Ch]
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		push	42h ; 'B'
		call	sub_9076
		dec	word ptr [bp-4]
		jmp	short loc_9203
; ---------------------------------------------------------------------------

loc_91BA:
		or	di, di
		jnz	short loc_914B	; default
		inc	di
		inc	word ptr [bp-4]
		les	bx, [bp-4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_91CE
		or	si, 4

loc_91CE:
		push	word ptr [bp+12h]
		push	word ptr [bp+10h]
		push	word ptr [bp-2]
		push	word ptr [bp-4]
		push	9
		call	sub_9076
		dec	word ptr [bp-4]
		les	bx, [bp-4]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jz	short loc_9203
		cmp	byte ptr es:[bx], 0
		jz	short loc_91F4
		jmp	loc_914B	; default
; ---------------------------------------------------------------------------

loc_91F4:
		jmp	short loc_9203
; ---------------------------------------------------------------------------
		or	di, di
		jz	short loc_91FD
		jmp	loc_914B	; default
; ---------------------------------------------------------------------------

loc_91FD:
		or	si, 1
		jmp	loc_914B	; default
; ---------------------------------------------------------------------------

loc_9203:
		les	bx, [bp-4]
		cmp	byte ptr es:[bx], 3Ah ;	':'
		jnz	short loc_9225
		cmp	byte ptr [bp-57h], 0
		jz	short loc_9215
		or	si, 10h

loc_9215:
		push	word ptr [bp+0Ah]
		push	word ptr [bp+8]
		push	ss
		lea	ax, [bp-57h]
		push	ax
		push	3
		call	sub_9076

loc_9225:
		mov	ax, si
		pop	di
		pop	si
		leave
		retn
; ---------------------------------------------------------------------------
byte_922B	db 2 dup(0), 2Ah, 0, 2Eh, 0, 2Fh, 0, 3Ah, 0, 3Fh, 0, 5Ch

		db 0, 2	dup(91h), 0F6h,	91h, 71h, 91h, 0BAh, 3 dup(91h)
		db 0F6h, 91h, 0BAh, 91h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl sub_9247(char *dest, __int32, char *src, int, int, int, int)
sub_9247	proc near

@@dest		= dword	ptr  4
arg_4		= dword	ptr  8
@@src		= dword	ptr  0Ch
arg_C		= word ptr  10h
arg_E		= word ptr  12h
arg_10		= word ptr  14h
arg_12		= word ptr  16h

		push	bp
		mov	bp, sp
		mov	ax, word ptr [bp+arg_4]
		or	ax, word ptr [bp+arg_4+2]
		jz	short loc_9274
		les	bx, [bp+arg_4]
		cmp	byte ptr es:[bx], 0
		jz	short loc_9274
		mov	al, es:[bx]
		les	bx, [bp+@@dest]
		mov	es:[bx], al
		inc	word ptr [bp+arg_4]
		inc	word ptr [bp+@@dest]
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 3Ah ;	':'
		inc	word ptr [bp+@@dest]

loc_9274:
		mov	ax, word ptr [bp+@@src]
		or	ax, word ptr [bp+@@src+2]
		jz	short loc_92B3
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx], 0
		jz	short loc_92B3
		push	word ptr [bp+@@src+2]
		push	bx		; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx-1], 5Ch	; '\'
		jz	short loc_92B3
		cmp	byte ptr es:[bx-1], 2Fh	; '/'
		jz	short loc_92B3
		mov	byte ptr es:[bx], 5Ch ;	'\'
		inc	word ptr [bp+@@dest]

loc_92B3:
		mov	ax, [bp+arg_C]
		or	ax, [bp+arg_E]
		jz	short loc_92D3
		push	[bp+arg_E]
		push	[bp+arg_C]	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax

loc_92D3:
		mov	ax, [bp+arg_10]
		or	ax, [bp+arg_12]
		jz	short loc_92F3
		push	[bp+arg_12]
		push	[bp+arg_10]	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax

loc_92F3:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		pop	bp
		retn
sub_9247	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_92FC(int handle, int)
sub_92FC	proc near

@@handle		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+@@handle]
		cmp	[bp+arg_2], 0
		jl	short loc_931D
		push	si		; handle
		call	__close
		pop	cx
		lea	ax, [si+18h]
		mov	es, segx
		mov	bx, ax
		mov	al, byte ptr [bp+arg_2]
		mov	es:[bx], al

loc_931D:
		pop	si
		pop	bp
		retn	4
sub_92FC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_9322(int access, int, char *path)
sub_9322	proc near

var_4		= word ptr -4
@@handle		= word ptr -2
access		= word ptr  4
arg_2		= word ptr  6
@@path		= dword	ptr  8

		enter	4, 0
		push	si
		push	di
		mov	si, [bp+access]
		mov	di, 0FFFFh
		test	si, 1
		jz	short loc_9339
		mov	ax, 100h
		jmp	short loc_933C
; ---------------------------------------------------------------------------

loc_9339:
		mov	ax, 80h	; 'Ä'

loc_933C:
		mov	[bp+var_4], ax
		mov	ax, word ptr [bp+@@path]
		or	ax, word ptr [bp+@@path+2]
		jnz	short loc_934A
		jmp	loc_93CC
; ---------------------------------------------------------------------------

loc_934A:
		les	bx, [bp+@@path]
		cmp	byte ptr es:[bx], 0
		jz	short loc_93CC
		mov	es, segx
		mov	ax, [bp+arg_2]
		add	ax, 18h
		mov	bx, ax
		mov	al, es:[bx]
		mov	ah, 0
		mov	di, ax
		mov	byte ptr es:[bx], 0FFh
		push	[bp+var_4]
		push	si		; access
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	_open
		add	sp, 8
		mov	[bp+@@handle], ax
		cmp	[bp+@@handle], 0FFFFh
		jnz	short loc_93A4
		cmp	si, 1
		jnz	short loc_938E
		push	ds
		push	offset aFileNotFound ; "File not found"
		jmp	short loc_9392
; ---------------------------------------------------------------------------

loc_938E:
		push	ds
		push	offset aFileCreationEr ; "File creation	error"

loc_9392:
		call	_puts
		add	sp, 4
		push	di		; int
		push	[bp+arg_2]	; handle
		call	sub_92FC
		mov	di, 0FFFEh
		jmp	short loc_93CC
; ---------------------------------------------------------------------------

loc_93A4:
		test	si, 200h
		jz	short loc_93B7
		push	0
		push	0		; size
		push	[bp+@@handle]	; handle
		call	_chsize
		add	sp, 6

loc_93B7:
		test	si, 800h
		jz	short loc_93CC
		push	2		; fromwhere
		push	0
		push	0		; offset
		push	[bp+@@handle]	; handle
		call	_lseek
		add	sp, 8

loc_93CC:
		mov	ax, di
		pop	di
		pop	si
		leave
		retn	8
sub_9322	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	sub_93D4(char *src)
sub_93D4	proc near

@@dest		= dword	ptr -4
@@src		= dword	ptr  4

		enter	4, 0
		mov	word ptr [bp+@@dest+2], ds
		mov	word ptr [bp+@@dest], 6044h
		push	3Ah ; ':'       ; c
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; s
		call	_strchr
		add	sp, 6
		or	ax, dx
		jnz	short loc_940A
		call	_getdisk
		add	al, 41h	; 'A'
		les	bx, [bp+@@dest]
		mov	es:[bx], al
		inc	word ptr [bp+@@dest]
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 3Ah ;	':'
		inc	word ptr [bp+@@dest]

loc_940A:
		push	50h ; 'P'       ; maxlen
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strncpy
		add	sp, 0Ah
		push	ds
		push	offset byte_14144 ; s
		call	_strlen
		add	sp, 4
		mov	word_14142, ax
		leave
		retn	4
sub_93D4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_942F	proc near
		push	bp
		mov	bp, sp
		mov	ah, 4Dh
		int	21h		; DOS -	2+ - GET EXIT CODE OF SUBPROGRAM (WAIT)
		pop	bp
		retn
sub_942F	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		mov	ah, 48h	; 'H'
		mov	bx, 0FFFFh
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		mov	ax, bx
		xor	dx, dx
		mov	cl, 4
		call	near ptr N_LXLSH@
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_944D	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		cmp	word_14142, 0
		jz	short loc_946E
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	ds
		push	offset byte_14144
		push	word_14142
		jmp	short loc_9480
; ---------------------------------------------------------------------------

loc_946E:
		push	[bp+arg_6]
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		push	0
		push	0
		push	0

loc_9480:
		call	sub_97C6
		mov	si, ax
		or	si, si
		jz	short loc_948D
		mov	ax, si
		jmp	short loc_9490
; ---------------------------------------------------------------------------

loc_948D:
		call	sub_942F

loc_9490:
		pop	si
		pop	bp
		retn	8
sub_944D	endp

; ---------------------------------------------------------------------------
		db  0

; =============== S U B	R O U T	I N E =======================================


sub_9496	proc far
		mov	ax, cs
		cli
		mov	ss, ax
		assume ss:seg000
		mov	sp, 2A6h
		sti
		mov	ah, 4Ah	; 'J'
		mov	bx, word_E1E9
		mov	es, word_E23F
		assume es:seg000
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		mov	ax, cs
		mov	es, ax
		push	ds
		mov	word_E239, ss
		mov	word_E23B, sp
		mov	dx, 191h
		mov	bx, 0D9h ; 'Ÿ'
		mov	ax, 4B00h
		int	21h		; DOS -	2+ - LOAD OR EXECUTE (EXEC)
					; DS:DX	-> ASCIZ filename
					; ES:BX	-> parameter block
					; AL = subfunc:	load & execute program
		jb	short loc_94C7
		xor	ax, ax

loc_94C7:
		cli
		mov	ss, word ptr cs:loc_139
		assume ss:nothing
		mov	sp, word ptr cs:loc_139+2
		sti
		pop	ds
		mov	si, ax
		mov	ah, 4Ah	; 'J'
		mov	es, word_E23F
		mov	bx, word_E1E7
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		mov	dx, 141h
		mov	ax, 4301h
		xor	cx, cx
		int	21h		; DOS -	2+ - SET FILE ATTRIBUTES
					; DS:DX	-> ASCIZ file name
					; CX = file attribute bits
		mov	ax, 3D02h
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 2 - read & write
		mov	ax, 3F00h
		push	ax
		push	word_E1D7
		push	cs
		mov	ax, 313h
		push	ax
		push	word_E1ED
		push	word_E1EB
		call	sub_951C
		cli
		mov	ss, word ptr path+7
		assume ss:nothing
		mov	sp, word ptr path+9
		sti
		push	word_E23D
		mov	ax, 9A73h
		push	ax
		retf
sub_9496	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_951C	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	ds
		push	bx
		push	cx
		push	dx
		mov	bx, [bp+arg_8]
		mov	ds, [bp+arg_6]
		assume es:seg000, ss:seg000
		mov	dx, [bp+arg_4]
		mov	cx, 8000h

loc_952F:
		cmp	[bp+arg_2], 0
		jnz	short loc_9543
		cmp	[bp+arg_0], 0
		jz	short loc_955E
		cmp	[bp+arg_0], cx
		jnb	short loc_9543
		mov	cx, [bp+arg_0]

loc_9543:
		mov	ax, [bp+arg_A]
		int	21h		; DOS -
		jb	short loc_9562
		cmp	ax, cx
		jb	short loc_9562
		sub	[bp+arg_0], ax
		sbb	[bp+arg_2], 0
		mov	ax, ds
		add	ax, 800h
		mov	ds, ax
		assume ds:nothing
		jmp	short loc_952F
; ---------------------------------------------------------------------------

loc_955E:
		xor	ax, ax
		jmp	short loc_9565
; ---------------------------------------------------------------------------

loc_9562:
		mov	ax, 1

loc_9565:
		pop	dx
		pop	cx
		pop	bx
		pop	ds
		assume ds:dseg
		pop	bp
		retn	0Ch
sub_951C	endp

; ---------------------------------------------------------------------------
word_956D	dw 0
word_956F	dw 0
word_9571	dw 0
word_9573	dw 0
word_9575	dw 0
word_9577	dw 0
word_9579	dw 0
word_957B	dw 0
word_957D	dw 0
word_957F	dw 0
word_9581	dw 0
word_9583	dw 0
		db 4Eh dup(0)
word_95D3	dw 0
word_95D5	dw 0
		db 121h	dup(0)
word_96F8	dw 0
word_96FA	dw 0
		db 40h dup(0)
word_973C	dw 0
word_973E	dw 0
		db 50h dup(0), 5Ch, 53h, 57h, 41h, 50h,	3 dup(30h), 2Eh
		db 3 dup(24h), 0
word_979D	dw 0
word_979F	dw 0
word_97A1	dw 0
word_97A3	dw 0
dword_97A5	dd 0

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_97A9	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	cx
		mov	cx, 4
		mov	ax, [bp+arg_2]
		xor	dx, dx

loc_97B5:
		shl	ax, 1
		rcl	dx, 1
		loop	loc_97B5
		add	ax, [bp+arg_0]
		adc	dx, 0
		pop	cx
		pop	bp
		retn	4
sub_97A9	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_97C6	proc near

arg_0		= word ptr  4
arg_2		= dword	ptr  6
arg_6		= dword	ptr  0Ah
arg_A		= dword	ptr  0Eh

		push	bp
		mov	bp, sp
		push	ds
		push	es
		push	di
		push	si
		cld
		push	ds
		mov	ah, 1Ah
		mov	ds, segx
		mov	dx, 80h	; 'Ä'
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		lds	si, [bp+arg_2]
		cmp	si, 0
		jz	short loc_97F4
		mov	cx, [bp+arg_0]
		mov	di, cs
		mov	es, di
		mov	di, 9790h
		sub	di, cx
		mov	dx, di
		rep movsb
		jmp	short loc_97F7
; ---------------------------------------------------------------------------

loc_97F4:
		mov	dx, 9791h

loc_97F7:
		mov	bx, 9791h
		mov	si, cs
		mov	ds, si
		assume ds:seg000
		mov	cx, 1Fh

loc_9801:
		mov	ah, 4Eh
		int	21h		; DOS -	2+ - FIND FIRST	ASCIZ (FINDFIRST)
					; CX = search attributes
					; DS:DX	-> ASCIZ filespec
					; (drive, path,	and wildcards allowed)
		jb	short loc_981B
		cmp	byte ptr [bx+6], 39h ; '9'
		jz	short loc_9812
		inc	byte ptr [bx+6]
		jmp	short loc_9801
; ---------------------------------------------------------------------------

loc_9812:
		mov	byte ptr [bx+6], 30h ; '0'
		inc	byte ptr [bx+5]
		jmp	short loc_9801
; ---------------------------------------------------------------------------

loc_981B:
		mov	es, si
		mov	ax, word ptr [bp+arg_2]
		cmp	ax, 0
		jnz	short loc_984F
		mov	ah, 19h
		mov	di, 95D7h
		int	21h		; DOS -	GET DEFAULT DISK NUMBER
		add	al, 41h	; 'A'
		stosb
		mov	al, 3Ah	; ':'
		stosb
		mov	al, 5Ch	; '\'
		stosb
		mov	ah, 47h	; 'G'
		xor	dl, dl
		mov	si, di
		int	21h		; DOS -	2+ - GET CURRENT DIRECTORY
					; DL = drive (0=default, 1=A, etc.)
					; DS:SI	points to 64-byte buffer area
		mov	cx, 50h	; 'P'
		xor	al, al
		repne scasb
		dec	di
		cmp	byte ptr [si], 0
		jz	short loc_985C
		mov	al, 5Ch	; '\'
		stosb
		jmp	short loc_985C
; ---------------------------------------------------------------------------

loc_984F:
		mov	di, 95D7h
		mov	cx, [bp+arg_0]
		mov	si, 9790h
		sub	si, cx
		rep movsb

loc_985C:
		mov	si, 9791h
		mov	cx, 0Ch
		rep movsb
		mov	dx, 95D7h
		mov	ah, 3Ch	; '<'
		xor	cx, cx
		int	21h		; DOS -	2+ - CREATE A FILE WITH	HANDLE (CREAT)
					; CX = attributes for file
					; DS:DX	-> ASCIZ filename (may include drive and path)
		pop	ds
		assume ds:dseg
		jnb	short loc_987A
		mov	cs:word_956D, 0FFFFh
		jmp	loc_9ABF
; ---------------------------------------------------------------------------

loc_987A:
		mov	cs:word_956D, ax
		mov	cs:word_97A3, ss
		mov	cs:word_97A1, sp
		mov	ax, segx
		mov	cs:word_95D5, ax
		add	ax, 6
		mov	cs:word_973C, ax
		mov	cs:word_95D3, cs
		mov	cs:word_96F8, ss
		mov	cs:word_96FA, sp
		mov	ah, 52h
		int	21h		; DOS -	2+ internal - GET LIST OF LISTS
					; Return: ES:BX	-> DOS list of lists
		mov	es, word ptr es:[bx-2]
		assume es:nothing
		jmp	short loc_98B9
; ---------------------------------------------------------------------------

loc_98AF:
		mov	ax, es
		add	ax, es:3
		inc	ax
		mov	es, ax

loc_98B9:
		mov	ax, es:1
		cmp	ax, segx
		jz	short loc_98D1
		cmp	byte ptr es:0, 5Ah ; 'Z'
		jnz	short loc_98AF
		mov	ax, 7
		jmp	loc_9ABF
; ---------------------------------------------------------------------------

loc_98D1:
		mov	ax, es
		inc	ax
		cmp	ax, segx
		jnz	short loc_98AF
		mov	ax, es:3
		mov	cs:word_957D, ax
		mov	ax, 6
		mov	bx, 2B5h
		mov	cl, 4
		shr	bx, cl
		add	ax, bx
		mov	cs:word_957F, ax
		push	ss
		mov	ax, sp
		push	ax
		call	sub_97A9
		mov	cx, dx
		mov	bx, ax
		push	word_E18A
		push	word_E188
		call	sub_97A9
		sub	ax, bx
		sbb	dx, cx
		mov	cs:word_979F, dx
		mov	cs:word_979D, ax
		push	ds
		lds	si, [bp+arg_A]
		mov	ax, cs
		mov	es, ax
		assume es:seg000
		mov	di, 9627h

loc_9920:
		cmp	byte ptr [si], 0
		jz	short loc_9928
		movsb
		jmp	short loc_9920
; ---------------------------------------------------------------------------

loc_9928:
		movsb
		lds	si, [bp+arg_6]
		mov	di, 9678h
		mov	cx, di
		mov	bx, cx
		mov	al, 20h	; ' '
		stosb

loc_9936:
		cmp	byte ptr [si], 0
		jz	short loc_993E
		movsb
		jmp	short loc_9936
; ---------------------------------------------------------------------------

loc_993E:
		mov	al, 0Dh
		stosb
		xchg	di, cx
		sub	cx, di
		dec	cx
		mov	es:[bx-1], cl
		mov	cx, 25h	; '%'
		mov	bx, cs
		mov	es, bx
		mov	di, 9585h
		xor	ax, ax
		rep stosw
		mov	ds, bx
		assume ds:seg000
		mov	si, 9677h
		inc	si
		mov	di, 9585h
		mov	ax, 2901h
		int	21h		; DOS -	PARSE FILENAME
					; DS:SI	-> string to parse
					; ES:DI	-> buffer to fill with unopened	FCB
					; AL = bit mask	to control parsing
		mov	es, bx
		mov	di, 95AAh
		mov	ax, 2901h
		int	21h		; DOS -	PARSE FILENAME
					; DS:SI	-> string to parse
					; ES:DI	-> buffer to fill with unopened	FCB
					; AL = bit mask	to control parsing
		pop	ds
		assume ds:dseg
		mov	cs:word_973E, ds
		mov	es, segx
		assume es:nothing
		mov	ax, es:2Ch
		mov	cs:word_956F, ax
		mov	ax, cs:word_973C
		mov	cs:word_9573, ax
		mov	cs:word_9571, 1E1h
		mov	cs:word_9577, ax
		mov	cs:word_9575, 0EFh ; 'Ô'
		mov	cs:word_957B, ax
		mov	cs:word_9579, 114h
		push	cs:word_973C
		mov	di, 313h
		push	di
		call	sub_97A9
		mov	cx, dx
		mov	bx, ax
		push	ss
		xor	ax, ax
		push	ax
		call	sub_97A9
		sub	ax, bx
		sbb	dx, cx
		mov	cs:word_9583, dx
		mov	cs:word_9581, ax
		mov	bx, 4000h
		push	bx
		push	cs:word_956D
		push	cs:word_973C
		push	di
		push	dx
		push	ax
		call	sub_951C
		cmp	ax, 0
		jz	short loc_99E7
		jmp	loc_9ABF
; ---------------------------------------------------------------------------

loc_99E7:
		mov	bx, 4000h
		push	bx
		push	cs:word_956D
		push	cs:word_973C
		xor	ax, ax
		push	ax
		push	ax
		push	di
		call	sub_951C
		cmp	ax, 0
		jz	short loc_9A05
		jmp	loc_9ABF
; ---------------------------------------------------------------------------

loc_9A05:
		mov	bx, 4000h
		push	bx
		push	cs:word_956D
		push	cs:word_97A3
		push	cs:word_97A1
		push	cs:word_979F
		push	cs:word_979D
		call	sub_951C
		cmp	ax, 0
		jz	short loc_9A2D
		jmp	loc_9ABF
; ---------------------------------------------------------------------------

loc_9A2D:
		mov	ah, 3Eh	; '>'
		mov	bx, cs:word_956D
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		jnb	short loc_9A3B
		jmp	loc_9ABF
; ---------------------------------------------------------------------------

loc_9A3B:
		mov	ax, cs
		mov	ds, ax
		assume ds:seg000
		mov	dx, 95D7h
		mov	ax, 4301h
		mov	cx, 1
		int	21h		; DOS -	2+ - SET FILE ATTRIBUTES
					; DS:DX	-> ASCIZ file name
					; CX = file attribute bits
		mov	ax, cs
		mov	ds, ax
		mov	si, 9496h
		mov	es, cs:word_973C
		xor	di, di
		mov	cx, 313h
		rep movsb
		mov	word ptr cs:dword_97A5,	0
		mov	ax, cs:word_973C
		mov	ds, ax
		assume ds:dseg
		mov	word ptr cs:dword_97A5+2, ax
		jmp	cs:dword_97A5
; ---------------------------------------------------------------------------
		mov	ax, 3F00h
		push	ax
		push	cs:word_956D
		push	cs:word_973C
		xor	ax, ax
		push	ax
		push	ax
		mov	ax, 313h
		push	ax
		call	sub_951C
		mov	ax, 3F00h
		push	ax
		push	cs:word_956D
		push	cs:word_97A3
		push	cs:word_97A1
		push	cs:word_979F
		push	cs:word_979D
		call	sub_951C
		cli
		mov	ss, cs:word_97A3
		assume ss:nothing
		mov	sp, cs:word_97A1
		sti
		mov	ax, si
		mov	ds, cs:word_973E

loc_9ABF:
		mov	word_E17E, ax
		mov	ah, 3Eh	; '>'
		mov	bx, cs:word_956D
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		push	ds
		mov	ax, cs
		mov	ds, ax
		assume ds:seg000
		mov	dx, 95D7h
		mov	ah, 41h
		int	21h		; DOS -	2+ - DELETE A FILE (UNLINK)
					; DS:DX	-> ASCIZ pathname of file to delete (no	wildcards allowed)
		pop	ds
		assume ds:dseg
		cmp	word_E17E, 0
		jz	short loc_9AE4
		mov	ax, 0FFFFh
		jmp	short loc_9AE6
; ---------------------------------------------------------------------------

loc_9AE4:
		xor	ax, ax

loc_9AE6:
		pop	si
		pop	di
		pop	es
		pop	ds
		pop	bp
		retn	0Eh
sub_97C6	endp

; ---------------------------------------------------------------------------
word_9AEE	dw 306h

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; __RefDestructorCount(void)
@__RefDestructorCount$qv proc near
		push	si
		push	di
		mov	dx, ds
		mov	ax, 1574h
		pop	di
		pop	si
		retn
@__RefDestructorCount$qv endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; __RefExceptionList(void)
@__RefExceptionList$qv proc near
		push	si
		push	di
		mov	dx, ds
		mov	ax, 1578h
		pop	di
		pop	si
		retn
@__RefExceptionList$qv endp

; ---------------------------------------------------------------------------

___InitExceptBlocks:
		push	si
		push	di
		pop	di
		pop	si
		retn
; ---------------------------------------------------------------------------

___ExitExceptBlocks:
		push	si
		push	di
		pop	di
		pop	si
		retn	2
; ---------------------------------------------------------------------------

___InitExceptBlock:
		push	si
		push	di
		pop	di
		pop	si
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__ExceptInit	proc near
		push	si
		push	di
		pop	di
		pop	si
		retn
__ExceptInit	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; __GetPolymorphicDTC(void *, unsigned int)
@__GetPolymorphicDTC$qnvui proc	near
		push	si
		push	di
		xor	ax, ax
		pop	di
		pop	si
		retn
@__GetPolymorphicDTC$qnvui endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; __GetPolymorphicDTCfar(void *, unsigned int)
@__GetPolymorphicDTCfar$qnvui proc near
		push	si
		push	di
		xor	ax, ax
		pop	di
		pop	si
		retn
@__GetPolymorphicDTCfar$qnvui endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	stpcpy(char *dest, const char *src)
_stpcpy		proc near

var_2		= word ptr -2
@@dest		= dword	ptr  4
@@s		= dword	ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		pop	cx
		pop	cx
		mov	[bp+var_2], ax
		inc	ax
		push	ax		; n
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_memcpy
		add	sp, 0Ah
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		add	ax, [bp+var_2]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_stpcpy		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	stpcpy_0(char *dest, const char	*src)
_stpcpy_0	proc near

var_2		= word ptr -2
@@dest		= dword	ptr  4
@@s		= dword	ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		pop	cx
		pop	cx
		mov	[bp+var_2], ax
		inc	ax
		push	ax		; n
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_memcpy
		add	sp, 0Ah
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		add	ax, [bp+var_2]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_stpcpy_0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strrchr(const char *s, int c)
_strrchr	proc near

var_4		= dword	ptr -4
@@s		= dword	ptr  4
c		= byte ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		pop	cx
		pop	cx
		inc	ax
		mov	cx, ax
		mov	dx, word ptr [bp+@@s+2]
		mov	ax, word ptr [bp+@@s]
		add	ax, cx
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		jmp	short loc_9BD7
; ---------------------------------------------------------------------------

loc_9BC0:
		dec	word ptr [bp+var_4]
		les	bx, [bp+var_4]
		mov	al, es:[bx]
		cmp	al, [bp+c]
		jnz	short loc_9BD6
		mov	dx, word ptr [bp+var_4+2]
		mov	ax, word ptr [bp+var_4]
		jmp	short loc_9BDF
; ---------------------------------------------------------------------------

loc_9BD6:
		dec	cx

loc_9BD7:
		or	cx, cx
		jnz	short loc_9BC0
		xor	dx, dx
		xor	ax, ax

loc_9BDF:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_strrchr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	memchr(const void *s, int c, size_t n)
_memchr		proc near

@@s		= dword	ptr  4
c		= byte ptr  8
n		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	di, [bp+@@s]
		mov	cx, [bp+n]
		jcxz	short loc_9BFA
		mov	al, [bp+c]
		cld
		repne scasb
		jz	short loc_9C01

loc_9BFA:
		xor	di, di
		mov	es, di
		assume es:seg000
		mov	di, 1

loc_9C01:
		dec	di
		mov	ax, di
		mov	dx, es
		pop	di
		pop	si
		pop	bp
		retn
_memchr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	memcpy(void *dest, const void *src, size_t n)
_memcpy		proc near

@@dest		= dword	ptr  4
@@src		= dword	ptr  8
n		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, ds
		les	di, [bp+@@dest]
		assume es:nothing
		lds	si, [bp+@@src]
		mov	cx, [bp+n]
		shr	cx, 1
		cld
		rep movsw
		jnb	short loc_9C22
		movsb

loc_9C22:
		mov	ds, dx
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	di
		pop	si
		pop	bp
		retn
_memcpy		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl setmem(void *dest, unsigned int length, char value)
_setmem		proc near

@@dest		= dword	ptr  4
@@length		= word ptr  8
value		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	di, [bp+@@dest]
		mov	cx, [bp+@@length]
		mov	al, [bp+value]
		mov	ah, al
		cld
		test	di, 1
		jz	short loc_9C49
		jcxz	short loc_9C50
		stosb
		dec	cx

loc_9C49:
		shr	cx, 1
		rep stosw
		jnb	short loc_9C50
		stosb

loc_9C50:
		pop	di
		pop	si
		pop	bp
		retn
_setmem		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	memset(void *s,	int c, size_t n)
_memset		proc near

@@dest		= dword	ptr  4
c		= byte ptr  8
@@length		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	al, [bp+c]
		push	ax		; value
		push	[bp+@@length]	; length
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_setmem
		add	sp, 8
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	di
		pop	si
		pop	bp
		retn
_memset		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl movmem(const void *src, void *dest, unsigned int	length)
_movmem		proc near

@@src		= dword	ptr  4
@@dest		= dword	ptr  8
@@length		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	cx, word ptr [bp+@@dest+2]
		mov	bx, word ptr [bp+@@dest]
		mov	dx, word ptr [bp+@@src+2]
		mov	ax, word ptr [bp+@@src]
		call	N_PCMP@
		jnb	short loc_9C93
		std
		mov	ax, 1
		jmp	short loc_9C96
; ---------------------------------------------------------------------------

loc_9C93:
		cld
		xor	ax, ax

loc_9C96:
		lds	si, [bp+@@src]
		les	di, [bp+@@dest]
		mov	cx, [bp+@@length]
		or	ax, ax
		jz	short loc_9CA9
		add	si, cx
		dec	si
		add	di, cx
		dec	di

loc_9CA9:
		test	di, 1
		jz	short loc_9CB3
		jcxz	short loc_9CC2
		movsb
		dec	cx

loc_9CB3:
		sub	si, ax
		sub	di, ax
		shr	cx, 1
		rep movsw
		jnb	short loc_9CC2
		add	si, ax
		add	di, ax
		movsb

loc_9CC2:
		cld
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn
_movmem		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	memmove(void *dest, const void *src, size_t n)
_memmove	proc near

@@dest		= dword	ptr  4
@@src		= dword	ptr  8
@@length		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+@@length]	; length
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		call	_movmem
		add	sp, 0Ah
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	di
		pop	si
		pop	bp
		retn
_memmove	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strcat(char *dest, const char *src)
_strcat		proc near

@@dest		= dword	ptr  4
@@src		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		push	ds
		les	di, [bp+@@dest]
		mov	dx, di
		xor	al, al
		mov	cx, 0FFFFh
		repne scasb
		push	es
		lea	si, [di-1]
		les	di, [bp+@@src]
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		sub	di, cx
		push	es
		pop	ds
		pop	es
		xchg	si, di
		test	si, 1
		jz	short loc_9D1C
		movsb
		dec	cx

loc_9D1C:
		shr	cx, 1
		rep movsw
		jnb	short loc_9D23
		movsb

loc_9D23:
		xchg	ax, dx
		mov	dx, es
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn
_strcat		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strchr(const char *s, int c)
_strchr		proc near

@@s		= dword	ptr  4
c		= byte ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		push	ds
		lds	si, [bp+@@s]
		mov	bl, [bp+c]
		test	si, 1
		jz	short loc_9D47
		lodsb
		cmp	al, bl
		jz	short loc_9D5F
		and	al, al
		jz	short loc_9D58

loc_9D47:
		lodsw
		cmp	al, bl
		jz	short loc_9D60
		and	al, al
		jz	short loc_9D58
		cmp	ah, bl
		jz	short loc_9D5F
		and	ah, ah
		jnz	short loc_9D47

loc_9D58:
		pop	ds
		xor	dx, dx
		xor	ax, ax
		jmp	short loc_9D66
; ---------------------------------------------------------------------------

loc_9D5F:
		inc	si

loc_9D60:
		lea	ax, [si-2]
		mov	dx, ds
		pop	ds

loc_9D66:
		pop	di
		pop	si
		pop	bp
		retn
_strchr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl strcmp(const char	*s1, const char	*s2)
_strcmp		proc near

@@s1		= dword	ptr  4
@@s2		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, ds
		cld
		xor	ax, ax
		mov	bx, ax
		les	di, [bp+@@s2]
		mov	si, di
		xor	al, al
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		mov	di, si
		lds	si, [bp+@@s1]
		repe cmpsb
		mov	al, [si-1]
		mov	bl, es:[di-1]
		sub	ax, bx
		mov	ds, dx
		pop	di
		pop	si
		pop	bp
		retn
_strcmp		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strcpy(char *dest, const char *src)
_strcpy		proc near

@@dest		= dword	ptr  4
@@src		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		les	di, [bp+@@src]
		mov	si, di
		xor	al, al
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		push	ds
		mov	ax, es
		mov	ds, ax
		les	di, [bp+@@dest]
		rep movsb
		pop	ds
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	di
		pop	si
		pop	bp
		retn
_strcpy		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl stricmp(const char *s1, const char *s2)
_stricmp	proc near

@@s1		= dword	ptr  4
@@s2		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, ds
		cld
		lds	si, [bp+@@s1]
		les	di, [bp+@@s2]
		xor	ax, ax
		mov	bx, ax
		mov	cx, 617Ah

loc_9DD8:
		lodsb
		mov	bl, es:[di]
		or	al, al
		jz	short loc_9DFC
		scasb
		jz	short loc_9DD8
		cmp	al, ch
		jb	short loc_9DED
		cmp	al, cl
		ja	short loc_9DED
		sub	al, 20h	; ' '

loc_9DED:
		cmp	bl, ch
		jb	short loc_9DF8
		cmp	bl, cl
		ja	short loc_9DF8
		sub	bl, 20h	; ' '

loc_9DF8:
		cmp	al, bl
		jz	short loc_9DD8

loc_9DFC:
		sub	ax, bx
		mov	ds, dx
		pop	di
		pop	si
		pop	bp
		retn
_stricmp	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; size_t __cdecl strlen(const char *s)
_strlen		proc near

@@s		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	di, [bp+@@s]
		xor	ax, ax
		cmp	ax, word ptr [bp+@@s+2]
		jnz	short loc_9E17
		cmp	ax, di
		jz	short loc_9E21

loc_9E17:
		cld
		mov	cx, 0FFFFh
		repne scasb
		xchg	ax, cx
		not	ax
		dec	ax

loc_9E21:
		pop	di
		pop	si
		pop	bp
		retn
_strlen		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl strncmp(const char *s1, const char *s2, size_t maxlen)
_strncmp	proc near

@@s1		= dword	ptr  4
@@s2		= dword	ptr  8
@@maxlen		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, ds
		cld
		les	di, [bp+@@s2]
		mov	si, di
		mov	ax, [bp+@@maxlen]
		mov	cx, ax
		jcxz	short loc_9E57
		mov	bx, ax
		xor	al, al
		repne scasb
		sub	bx, cx
		mov	cx, bx
		mov	di, si
		lds	si, [bp+@@s1]
		repe cmpsb
		mov	al, [si-1]
		mov	bl, es:[di-1]
		xor	ah, ah
		mov	bh, ah
		sub	ax, bx

loc_9E57:
		mov	ds, dx
		pop	di
		pop	si
		pop	bp
		retn
_strncmp	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strncpy(char *dest, const char *src, size_t maxlen)
_strncpy	proc near

@@dest		= dword	ptr  4
@@src		= dword	ptr  8
@@maxlen		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		les	di, [bp+@@src]
		mov	si, di
		xor	al, al
		mov	bx, [bp+@@maxlen]
		mov	cx, bx
		repne scasb
		sub	bx, cx
		push	ds
		mov	di, es
		mov	ds, di
		les	di, [bp+@@dest]
		xchg	cx, bx
		rep movsb
		mov	cx, bx
		rep stosb
		pop	ds
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		pop	di
		pop	si
		pop	bp
		retn
_strncpy	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl strnicmp(const char *s1, const char *s2, size_t maxlen)
_strnicmp	proc near

@@s1		= dword	ptr  4
@@s2		= dword	ptr  8
@@maxlen		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		cld
		lds	si, [bp+@@s1]
		les	di, [bp+@@s2]
		mov	cx, [bp+@@maxlen]
		xor	ax, ax
		mov	bx, ax
		mov	dx, 617Ah

loc_9EA5:
		jcxz	short loc_9ECB
		lodsb
		mov	bl, es:[di]
		or	al, al
		jz	short loc_9ECB
		scasb
		loope	loc_9EA5
		cmp	al, dh
		jb	short loc_9EBC
		cmp	al, dl
		ja	short loc_9EBC
		sub	al, 20h	; ' '

loc_9EBC:
		cmp	bl, dh
		jb	short loc_9EC7
		cmp	bl, dl
		ja	short loc_9EC7
		sub	bl, 20h	; ' '

loc_9EC7:
		cmp	al, bl
		jz	short loc_9EA5

loc_9ECB:
		sub	ax, bx
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn
_strnicmp	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strstr(const char *s1, const char *s2)
_strstr		proc near

@@s1		= dword	ptr  4
@@s2		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+@@s2]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_9EE8
		mov	dx, word ptr [bp+@@s1+2]
		mov	ax, word ptr [bp+@@s1]
		jmp	short loc_9F3A
; ---------------------------------------------------------------------------

loc_9EE8:
		push	ds
		cld
		les	di, [bp+@@s1]
		push	es
		mov	bx, di
		xor	ax, ax
		mov	cx, 0FFFFh
		repne scasb
		not	cx
		xchg	cx, dx
		les	di, [bp+@@s2]
		push	es
		mov	bp, di
		xor	ax, ax
		mov	cx, 0FFFFh
		repne scasb
		inc	cx
		not	cx
		pop	ds
		pop	es

loc_9F0D:
		mov	si, bp
		lodsb
		xchg	di, bx
		xchg	cx, dx
		repne scasb
		mov	bx, di
		jnz	short loc_9F1E
		cmp	cx, dx
		jnb	short loc_9F27

loc_9F1E:
		xor	bx, bx
		mov	es, bx
		assume es:seg000
		mov	bx, 1
		jmp	short loc_9F34
; ---------------------------------------------------------------------------

loc_9F27:
		xchg	cx, dx
		jcxz	short loc_9F34
		mov	ax, cx
		dec	cx
		repe cmpsb
		mov	cx, ax
		jnz	short loc_9F0D

loc_9F34:
		pop	ds
		mov	ax, bx
		dec	ax
		mov	dx, es

loc_9F3A:
		pop	di
		pop	si
		pop	bp
		retn
_strstr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl _dos_getdrive(unsigned int *drive)
__dos_getdrive	proc near

drive		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 19h
		int	21h		; DOS -	GET DEFAULT DISK NUMBER
		mov	ah, 0
		inc	ax
		les	bx, [bp+drive]
		assume es:nothing
		mov	es:[bx], ax
		pop	di
		pop	si
		pop	bp
		retn
__dos_getdrive	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl _dos_setdrive(unsigned int drive, unsigned int *ndrives)
__dos_setdrive	proc near

drive		= byte ptr  4
ndrives		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dl, [bp+drive]
		dec	dl
		mov	ah, 0Eh
		int	21h		; DOS -	SELECT DISK
					; DL = new default drive number	(0 = A,	1 = B, etc.)
					; Return: AL = number of logical drives
		mov	ah, 0
		les	bx, [bp+ndrives]
		mov	es:[bx], ax
		pop	di
		pop	si
		pop	bp
		retn
__dos_setdrive	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int getdisk(void)
_getdisk	proc near

drive		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		push	ss
		lea	ax, [bp+drive]
		push	ax		; drive
		call	__dos_getdrive
		pop	cx
		pop	cx
		mov	ax, [bp+drive]
		dec	ax
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_getdisk	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl setdisk(int drive)
_setdisk	proc near

ndrives		= word ptr -2
drive		= word ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		push	ss
		lea	ax, [bp+ndrives]
		push	ax		; ndrives
		mov	ax, [bp+drive]
		inc	ax
		push	ax		; drive
		call	__dos_setdrive
		add	sp, 6
		mov	ax, [bp+ndrives]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_setdisk	endp

; ---------------------------------------------------------------------------

__setupio:
		push	si
		push	di
		mov	cx, 5
		jmp	short loc_9FD6
; ---------------------------------------------------------------------------

loc_9FB2:
		mov	bx, cx
		add	bx, bx
		mov	word ptr [bx+1966h], 0
		mov	ax, 14h
		imul	cx
		mov	dx, ax
		mov	bx, ax
		mov	byte ptr [bx+1580h], 0FFh
		mov	ax, dx
		add	ax, 157Ch
		mov	bx, dx
		mov	[bx+158Eh], ax
		inc	cx

loc_9FD6:
		cmp	cx, __nfile
		jb	short loc_9FB2
		mov	al, stru_F67C.fd
		cbw
		push	ax
		call	_isatty
		pop	cx
		or	ax, ax
		jnz	short loc_9FEF
		and	stru_F67C.flags, 0FDFFh

loc_9FEF:
		mov	ax, 200h
		push	ax
		test	byte ptr stru_F67C.flags+1, 2
		jz	short loc_9FFF
		mov	ax, 1
		jmp	short loc_A001
; ---------------------------------------------------------------------------

loc_9FFF:
		xor	ax, ax

loc_A001:
		push	ax
		xor	ax, ax
		push	ax
		push	ax
		push	ds
		mov	ax, 157Ch
		push	ax
		call	_setvbuf
		add	sp, 0Ch
		mov	al, stream.fd
		cbw
		push	ax
		call	_isatty
		pop	cx
		or	ax, ax
		jnz	short loc_A024
		and	stream.flags, 0FDFFh

loc_A024:
		mov	ax, 200h
		push	ax
		test	byte ptr stream.flags+1, 2
		jz	short loc_A034
		mov	ax, 2
		jmp	short loc_A036
; ---------------------------------------------------------------------------

loc_A034:
		xor	ax, ax

loc_A036:
		push	ax
		xor	ax, ax
		push	ax
		push	ax
		push	ds
		mov	ax, 1590h
		push	ax
		call	_setvbuf
		add	sp, 0Ch
		pop	di
		pop	si
		retn
; ---------------------------------------------------------------------------

__freeio:
		push	si
		push	di
		test	byte ptr stru_F67C.flags, 4
		jz	short loc_A075
		push	ds
		mov	ax, 157Ch
		push	ax
		call	_fflush
		pop	cx
		pop	cx
		push	word ptr stru_F67C.buffer+2
		push	word ptr stru_F67C.buffer
		call	_farfree
		pop	cx
		pop	cx
		mov	stru_F67C.level, 0
		mov	stru_F67C.bsize, 0

loc_A075:
		test	byte ptr stream.flags, 4
		jz	short loc_A09F
		push	ds
		mov	ax, 1590h
		push	ax
		call	_fflush
		pop	cx
		pop	cx
		push	word ptr stream.buffer+2
		push	word ptr stream.buffer
		call	_farfree
		pop	cx
		pop	cx
		mov	stream.level, 0
		mov	stream.bsize, 0

loc_A09F:
		test	byte ptr stru_F6CC.flags, 4
		jz	short loc_A0C9
		push	ds
		mov	ax, 15CCh
		push	ax
		call	_fflush
		pop	cx
		pop	cx
		push	word ptr stru_F6CC.buffer+2
		push	word ptr stru_F6CC.buffer
		call	_farfree
		pop	cx
		pop	cx
		mov	stru_F6CC.level, 0
		mov	stru_F6CC.bsize, 0

loc_A0C9:
		test	byte ptr stru_F6A4.flags, 4
		jz	short loc_A0F3
		push	ds
		mov	ax, 15A4h
		push	ax
		call	_fflush
		pop	cx
		pop	cx
		push	word ptr stru_F6A4.buffer+2
		push	word ptr stru_F6A4.buffer
		call	_farfree
		pop	cx
		pop	cx
		mov	stru_F6A4.level, 0
		mov	stru_F6A4.bsize, 0

loc_A0F3:
		pop	di
		pop	si
		retn
; ---------------------------------------------------------------------------

__xclose:
		push	si
		push	di
		mov	dx, 2
		jmp	short loc_A107
; ---------------------------------------------------------------------------

loc_A0FD:
		mov	bx, dx
		add	bx, bx
		cmp	word ptr [bx+1966h], 0
		inc	dx

loc_A107:
		cmp	dx, __nfile
		jb	short loc_A0FD
		pop	di
		pop	si
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__IOERROR	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, [bp+arg_0]
		or	dx, dx
		jl	short loc_A133
		cmp	dx, 58h	; 'X'
		jle	short loc_A124

loc_A121:
		mov	dx, 57h	; 'W'

loc_A124:
		mov	word_FACE, dx
		mov	bx, dx
		mov	al, [bx+19D0h]
		cbw
		mov	dx, ax
		jmp	short loc_A141
; ---------------------------------------------------------------------------

loc_A133:
		neg	dx
		cmp	dx, word_FC52
		jg	short loc_A121
		mov	word_FACE, 0FFFFh

loc_A141:
		mov	word_E17E, dx
		mov	ax, 0FFFFh
		pop	di
		pop	si
		pop	bp
		retn	2
__IOERROR	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__DOSERROR	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+arg_0]
		call	__IOERROR
		mov	ax, [bp+arg_0]
		pop	di
		pop	si
		pop	bp
		retn	2
__DOSERROR	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl isatty(int handle)
_isatty		proc near

@@handle		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, 4400h
		mov	bx, [bp+@@handle]
		int	21h		; DOS -	2+ - IOCTL - GET DEVICE	INFORMATION
					; BX = file or device handle
		xchg	ax, dx
		and	ax, 80h
		pop	di
		pop	si
		pop	bp
		retn
_isatty		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; __int32 __cdecl lseek(int handle, __int32 offset, int	fromwhere)
_lseek		proc near

@@handle		= word ptr  4
@@offset		= word ptr  6
arg_4		= word ptr  8
fromwhere	= byte ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	bx, [bp+@@handle]
		add	bx, bx
		and	word ptr [bx+1966h], 0FDFFh
		mov	ah, 42h	; 'B'
		mov	al, [bp+fromwhere]
		mov	bx, [bp+@@handle]
		mov	cx, [bp+arg_4]
		mov	dx, [bp+@@offset]
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method:
					; 0-from beginnig,1-from current,2-from	end
		jb	short loc_A19B
		jmp	short loc_A1A0
; ---------------------------------------------------------------------------

loc_A19B:
		push	ax
		call	__IOERROR
		cwd

loc_A1A0:
		pop	di
		pop	si
		pop	bp
		retn
_lseek		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _rtl_read(int handle, void *buf, unsigned	int len)
__rtl_read	proc near

@@handle		= word ptr  4
buf		= dword	ptr  6
len		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	bx, [bp+@@handle]
		add	bx, bx
		test	byte ptr [bx+1966h], 2
		jz	short loc_A1BB
		mov	ax, 5
		push	ax
		jmp	short loc_A1CF
; ---------------------------------------------------------------------------

loc_A1BB:
		push	ds
		mov	ah, 3Fh	; '?'
		mov	bx, [bp+@@handle]
		mov	cx, [bp+len]
		lds	dx, [bp+buf]
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		pop	ds
		jb	short loc_A1CE
		jmp	short loc_A1D2
; ---------------------------------------------------------------------------

loc_A1CE:
		push	ax

loc_A1CF:
		call	__IOERROR

loc_A1D2:
		pop	di
		pop	si
		pop	bp
		retn
__rtl_read	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _read(int	handle,	void *buf, unsigned int	len)
__read		proc near

@@handle		= word ptr  4
buf		= dword	ptr  6
len		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	[bp+@@handle]	; handle
		call	__rtl_read
		add	sp, 8
		pop	di
		pop	si
		pop	bp
		retn
__read		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl unlink(const char	*path)
_unlink		proc near

@@path		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	ah, 41h	; 'A'
		lds	dx, [bp+@@path]
		int	21h		; DOS -	2+ - DELETE A FILE (UNLINK)
					; DS:DX	-> ASCIZ pathname of file to delete (no	wildcards allowed)
		pop	ds
		jb	short loc_A205
		xor	ax, ax
		jmp	short loc_A209
; ---------------------------------------------------------------------------

loc_A205:
		push	ax
		call	__IOERROR

loc_A209:
		pop	di
		pop	si
		pop	bp
		retn
_unlink		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_A20D	proc near
		mov	al, dh
		call	sub_A214
		mov	al, dl
sub_A20D	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_A214	proc near
		aam	10h
		xchg	ah, al
		call	sub_A21D
		xchg	ah, al
sub_A214	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_A21D	proc near
		add	al, 90h	; 'ê'
		daa
		adc	al, 40h	; '@'
		daa
		stosb
		retn
sub_A21D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__VPRINTER	proc near

var_96		= byte ptr -96h
var_46		= byte ptr -46h
var_45		= byte ptr -45h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_B		= byte ptr -0Bh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= dword	ptr  6

; FUNCTION CHUNK AT A289 SIZE 0000042F BYTES

		push	bp
		mov	bp, sp
		sub	sp, 96h
		push	si
		push	di
		mov	[bp+var_12], 0
		mov	[bp+var_14], 50h ; 'P'
		mov	[bp+var_16], 0
		jmp	short loc_A289
__VPRINTER	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_A23F	proc near
		push	di
		mov	cx, 0FFFFh
		xor	al, al
		repne scasb
		not	cx
		dec	cx
		pop	di
		retn
sub_A23F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_A24C	proc near
		mov	ss:[di], al
		inc	di
		dec	byte ptr [bp-14h]
		jnz	short locret_A288
sub_A24C	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_A255	proc near
		push	bx
		push	cx
		push	dx
		push	es
		lea	ax, [bp-96h]
		sub	di, ax
		push	ss
		lea	ax, [bp-96h]
		push	ax
		push	di
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		call	word ptr [bp+0Eh]
		or	ax, ax
		jnz	short loc_A278
		mov	word ptr [bp-16h], 1

loc_A278:
		mov	word ptr [bp-14h], 50h ; 'P'
		add	[bp-12h], di
		lea	di, [bp-96h]
		pop	es
		pop	dx
		pop	cx
		pop	bx

locret_A288:
		retn
sub_A255	endp ; sp-analysis failed

; ---------------------------------------------------------------------------
; START	OF FUNCTION CHUNK FOR __VPRINTER

loc_A289:
		push	es
		cld
		lea	di, [bp+var_96]
		mov	[bp+var_4], di

loc_A292:
		mov	di, [bp+var_4]

loc_A295:
		les	si, [bp+arg_2]

loc_A298:
		lods	byte ptr es:[si]
		or	al, al
		jz	short loc_A2B0
		cmp	al, 25h	; '%'
		jz	short loc_A2B3

loc_A2A2:
		mov	ss:[di], al
		inc	di
		dec	byte ptr [bp+var_14]
		jg	short loc_A298
		call	sub_A255
		jmp	short loc_A298
; ---------------------------------------------------------------------------

loc_A2B0:
		jmp	loc_A698
; ---------------------------------------------------------------------------

loc_A2B3:
		mov	[bp+var_10], si
		lods	byte ptr es:[si]
		cmp	al, 25h	; '%'
		jz	short loc_A2A2
		mov	[bp+var_4], di
		xor	cx, cx
		mov	[bp+var_E], cx
		mov	[bp+var_2], 20h	; ' '
		mov	[bp+var_B], cl
		mov	[bp+var_8], 0FFFFh
		mov	[bp+var_A], 0FFFFh
		jmp	short loc_A2DA
; ---------------------------------------------------------------------------

loc_A2D8:
		lods	byte ptr es:[si]

loc_A2DA:
		xor	ah, ah
		mov	dx, ax
		mov	bx, ax
		sub	bl, 20h	; ' '
		cmp	bl, 60h	; '`'
		jnb	short loc_A2FB
		mov	bl, [bx+1A31h]
		cmp	bx, 17h
		jbe	short loc_A2F4
		jmp	loc_A684
; ---------------------------------------------------------------------------

loc_A2F4:
		add	bx, bx
		jmp	cs:off_A6B8[bx]
; ---------------------------------------------------------------------------

loc_A2FB:
		jmp	loc_A684
; ---------------------------------------------------------------------------

loc_A2FE:

		cmp	ch, 0
		ja	short loc_A2FB
		or	[bp+var_2], 1
		jmp	short loc_A2D8
; ---------------------------------------------------------------------------

loc_A309:

		cmp	ch, 0
		ja	short loc_A2FB
		or	[bp+var_2], 2
		jmp	short loc_A2D8
; ---------------------------------------------------------------------------

loc_A314:

		cmp	ch, 0
		ja	short loc_A2FB
		cmp	[bp+var_B], 2Bh	; '+'
		jz	short loc_A322
		mov	[bp+var_B], dl

loc_A322:
		jmp	short loc_A2D8
; ---------------------------------------------------------------------------

loc_A324:

		and	[bp+var_2], 0FFDFh
		jmp	short loc_A32E
; ---------------------------------------------------------------------------

loc_A32A:

		or	[bp+var_2], 20h

loc_A32E:
		mov	ch, 5
		jmp	short loc_A2D8
; ---------------------------------------------------------------------------

loc_A332:

		cmp	ch, 0
		ja	short loc_A384
		test	[bp+var_2], 2
		jnz	short loc_A367
		or	[bp+var_2], 8
		mov	ch, 1
		jmp	short loc_A2D8
; ---------------------------------------------------------------------------

loc_A346:
		jmp	loc_A684
; ---------------------------------------------------------------------------

loc_A349:

		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		add	[bp+arg_0], 2
		cmp	ch, 2
		jnb	short loc_A36A
		or	ax, ax
		jns	short loc_A362
		neg	ax
		or	[bp+var_2], 2

loc_A362:
		mov	[bp+var_8], ax
		mov	ch, 3

loc_A367:
		jmp	loc_A2D8
; ---------------------------------------------------------------------------

loc_A36A:
		cmp	ch, 4
		jnz	short loc_A346
		mov	[bp+var_A], ax
		inc	ch
		jmp	loc_A2D8
; ---------------------------------------------------------------------------

loc_A377:

		cmp	ch, 4
		jnb	short loc_A346
		mov	ch, 4
		inc	[bp+var_A]
		jmp	loc_A2D8
; ---------------------------------------------------------------------------

loc_A384:

		xchg	ax, dx
		sub	al, 30h	; '0'
		cbw
		cmp	ch, 2
		ja	short loc_A3A6
		mov	ch, 2
		xchg	ax, [bp+var_8]
		or	ax, ax
		jl	short loc_A367
		shl	ax, 1
		mov	dx, ax
		shl	ax, 1
		shl	ax, 1
		add	ax, dx
		add	[bp+var_8], ax
		jmp	loc_A2D8
; ---------------------------------------------------------------------------

loc_A3A6:
		cmp	ch, 4
		jnz	short loc_A346
		xchg	ax, [bp+var_A]
		or	ax, ax
		jz	short loc_A367
		shl	ax, 1
		mov	dx, ax
		shl	ax, 1
		shl	ax, 1
		add	ax, dx
		add	[bp+var_A], ax
		jmp	loc_A2D8
; ---------------------------------------------------------------------------

loc_A3C2:

		or	[bp+var_2], 10h
		jmp	loc_A32E
; ---------------------------------------------------------------------------

loc_A3C9:

		or	[bp+var_2], 100h

loc_A3CE:

		and	[bp+var_2], 0FFEFh
		jmp	loc_A32E
; ---------------------------------------------------------------------------

loc_A3D5:

		mov	bh, 8
		jmp	short loc_A3E3
; ---------------------------------------------------------------------------

loc_A3D9:

		mov	bh, 0Ah
		jmp	short loc_A3E3
; ---------------------------------------------------------------------------

loc_A3DD:

		mov	bh, 10h
		mov	bl, 0E9h ; 'È'
		add	bl, dl

loc_A3E3:
		mov	[bp+var_B], 0
		mov	[bp+var_5], dl
		xor	dx, dx
		mov	[bp+var_6], dl
		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		jmp	short loc_A407
; ---------------------------------------------------------------------------

loc_A3F7:

		mov	bh, 0Ah
		mov	[bp+var_6], 1
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		cwd

loc_A407:
		inc	di
		inc	di
		mov	word ptr [bp+arg_2], si
		test	[bp+var_2], 10h
		jz	short loc_A418
		mov	dx, ss:[di]
		inc	di
		inc	di

loc_A418:
		mov	[bp+arg_0], di
		lea	di, [bp+var_45]
		or	ax, ax
		jnz	short loc_A434
		or	dx, dx
		jnz	short loc_A434
		cmp	[bp+var_A], 0
		jnz	short loc_A438
		mov	byte ptr ss:[di], 0
		mov	ax, di
		jmp	short loc_A448
; ---------------------------------------------------------------------------

loc_A434:
		or	[bp+var_2], 4

loc_A438:
		push	dx
		push	ax
		push	ss
		push	di
		mov	al, bh
		cbw
		push	ax
		mov	al, [bp+var_6]
		push	ax
		push	bx
		call	__LONGTOA

loc_A448:
		push	ss
		pop	es
		mov	dx, [bp+var_A]
		or	dx, dx
		jge	short loc_A454
		jmp	loc_A548
; ---------------------------------------------------------------------------

loc_A454:
		jmp	loc_A556
; ---------------------------------------------------------------------------

loc_A457:

		mov	[bp+var_5], dl
		mov	word ptr [bp+arg_2], si
		lea	di, [bp+var_46]
		mov	bx, [bp+arg_0]
		push	word ptr ss:[bx]
		inc	bx
		inc	bx
		mov	[bp+arg_0], bx
		test	[bp+var_2], 20h
		jz	short loc_A482
		mov	dx, ss:[bx]
		inc	bx
		inc	bx
		mov	[bp+arg_0], bx
		push	ss
		pop	es
		call	sub_A20D
		mov	al, 3Ah	; ':'
		stosb

loc_A482:
		push	ss
		pop	es
		pop	dx
		call	sub_A20D
		mov	byte ptr ss:[di], 0
		mov	[bp+var_6], 0
		and	[bp+var_2], 0FFFBh
		lea	cx, [bp+var_46]
		sub	di, cx
		xchg	cx, di
		mov	dx, [bp+var_A]
		cmp	dx, cx
		jg	short loc_A4A4
		mov	dx, cx

loc_A4A4:
		jmp	loc_A548
; ---------------------------------------------------------------------------

loc_A4A7:

		mov	word ptr [bp+arg_2], si
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		mov	ax, ss:[di]
		add	[bp+arg_0], 2
		push	ss
		pop	es
		lea	di, [bp+var_45]
		xor	ah, ah
		mov	ss:[di], ax
		mov	cx, 1
		jmp	loc_A58B
; ---------------------------------------------------------------------------

loc_A4C7:

		mov	word ptr [bp+arg_2], si
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		test	[bp+var_2], 20h
		jnz	short loc_A4E4
		mov	di, ss:[di]
		add	[bp+arg_0], 2
		push	ds
		pop	es
		assume es:dseg
		or	di, di
		jmp	short loc_A4EF
; ---------------------------------------------------------------------------

loc_A4E4:
		les	di, ss:[di]
		assume es:nothing
		add	[bp+arg_0], 4
		mov	ax, es
		or	ax, di

loc_A4EF:
		jnz	short loc_A4F6
		push	ds
		pop	es
		assume es:dseg
		mov	di, 1A2Ah

loc_A4F6:
		call	sub_A23F
		cmp	cx, [bp+var_A]
		jbe	short loc_A501
		mov	cx, [bp+var_A]

loc_A501:
		jmp	loc_A58B
; ---------------------------------------------------------------------------

loc_A504:

		mov	word ptr [bp+arg_2], si
		mov	[bp+var_5], dl
		mov	di, [bp+arg_0]
		mov	cx, [bp+var_A]
		or	cx, cx
		jge	short loc_A517
		mov	cx, 6

loc_A517:
		push	ss
		push	di
		push	cx
		push	ss
		lea	bx, [bp+var_45]
		push	bx
		push	dx
		mov	ax, 1
		and	ax, [bp+var_2]
		push	ax
		mov	ax, [bp+var_2]
		test	ax, 100h
		jz	short loc_A538
		mov	ax, 8
		add	[bp+arg_0], 0Ah
		jmp	short loc_A53F
; ---------------------------------------------------------------------------

loc_A538:
		add	[bp+arg_0], 8
		mov	ax, 6

loc_A53F:
		push	ax
		call	sub_BF39
		push	ss
		pop	es
		assume es:nothing
		lea	di, [bp+var_45]

loc_A548:
		test	[bp+var_2], 8
		jz	short loc_A567
		mov	dx, [bp+var_8]
		or	dx, dx
		jle	short loc_A567

loc_A556:
		call	sub_A23F
		cmp	byte ptr es:[di], 2Dh ;	'-'
		jnz	short loc_A560
		dec	cx

loc_A560:
		sub	dx, cx
		jle	short loc_A567
		mov	[bp+var_E], dx

loc_A567:
		cmp	byte ptr es:[di], 2Dh ;	'-'
		jz	short loc_A578
		mov	al, [bp+var_B]
		or	al, al
		jz	short loc_A588
		dec	di
		mov	es:[di], al

loc_A578:
		cmp	[bp+var_E], 0
		jle	short loc_A588
		mov	cx, [bp+var_A]
		or	cx, cx
		jge	short loc_A588
		dec	[bp+var_E]

loc_A588:
		call	sub_A23F

loc_A58B:
		mov	si, di
		mov	di, [bp+var_4]
		mov	bx, [bp+var_8]
		mov	ax, 5
		and	ax, [bp+var_2]
		cmp	ax, 5
		jnz	short loc_A5B1
		mov	ah, [bp+var_5]
		cmp	ah, 6Fh	; 'o'
		jnz	short loc_A5B3
		cmp	[bp+var_E], 0
		jg	short loc_A5B1
		mov	[bp+var_E], 1

loc_A5B1:
		jmp	short loc_A5CE
; ---------------------------------------------------------------------------

loc_A5B3:
		cmp	ah, 78h	; 'x'
		jz	short loc_A5BD
		cmp	ah, 58h	; 'X'
		jnz	short loc_A5CE

loc_A5BD:
		or	[bp+var_2], 40h
		dec	bx
		dec	bx
		sub	[bp+var_E], 2
		jge	short loc_A5CE
		mov	[bp+var_E], 0

loc_A5CE:
		add	cx, [bp+var_E]
		test	[bp+var_2], 2
		jnz	short loc_A5E4
		jmp	short loc_A5E0
; ---------------------------------------------------------------------------

loc_A5DA:
		mov	al, 20h	; ' '
		call	sub_A24C
		dec	bx

loc_A5E0:
		cmp	bx, cx
		jg	short loc_A5DA

loc_A5E4:
		test	[bp+var_2], 40h
		jz	short loc_A5F6
		mov	al, 30h	; '0'
		call	sub_A24C
		mov	al, [bp+var_5]
		call	sub_A24C

loc_A5F6:
		mov	dx, [bp+var_E]
		or	dx, dx
		jle	short loc_A624
		sub	cx, dx
		sub	bx, dx
		mov	al, es:[si]
		cmp	al, 2Dh	; '-'
		jz	short loc_A610
		cmp	al, 20h	; ' '
		jz	short loc_A610
		cmp	al, 2Bh	; '+'
		jnz	short loc_A617

loc_A610:
		lods	byte ptr es:[si]
		call	sub_A24C
		dec	cx
		dec	bx

loc_A617:
		xchg	cx, dx
		jcxz	short loc_A622

loc_A61B:
		mov	al, 30h	; '0'
		call	sub_A24C
		loop	loc_A61B

loc_A622:
		xchg	cx, dx

loc_A624:
		jcxz	short loc_A638
		sub	bx, cx

loc_A628:
		lods	byte ptr es:[si]
		mov	ss:[di], al
		inc	di
		dec	byte ptr [bp+var_14]
		jg	short loc_A636
		call	sub_A255

loc_A636:
		loop	loc_A628

loc_A638:
		or	bx, bx
		jle	short loc_A645
		mov	cx, bx

loc_A63E:
		mov	al, 20h	; ' '
		call	sub_A24C
		loop	loc_A63E

loc_A645:
		jmp	loc_A295
; ---------------------------------------------------------------------------

loc_A648:

		mov	word ptr [bp+arg_2], si
		mov	di, [bp+arg_0]
		test	[bp+var_2], 20h
		jnz	short loc_A660
		mov	di, ss:[di]
		add	[bp+arg_0], 2
		push	ds
		pop	es
		assume es:dseg
		jmp	short loc_A667
; ---------------------------------------------------------------------------

loc_A660:
		les	di, ss:[di]
		assume es:nothing
		add	[bp+arg_0], 4

loc_A667:
		mov	ax, 50h	; 'P'
		sub	al, byte ptr [bp+var_14]
		add	ax, [bp+var_12]
		mov	es:[di], ax
		test	[bp+var_2], 10h
		jz	short loc_A681
		inc	di
		inc	di
		mov	word ptr es:[di], 0

loc_A681:
		jmp	loc_A292
; ---------------------------------------------------------------------------

loc_A684:
		mov	si, [bp+var_10]
		mov	es, word ptr [bp+arg_2+2]
		mov	di, [bp+var_4]
		mov	al, 25h	; '%'

loc_A68F:
		call	sub_A24C
		lods	byte ptr es:[si]
		or	al, al
		jnz	short loc_A68F

loc_A698:
		cmp	byte ptr [bp+var_14], 50h ; 'P'
		jge	short loc_A6A1
		call	sub_A255

loc_A6A1:
		pop	es
		cmp	[bp+var_16], 0
		jz	short loc_A6AD
		mov	ax, 0FFFFh
		jmp	short loc_A6B0
; ---------------------------------------------------------------------------

loc_A6AD:
		mov	ax, [bp+var_12]

loc_A6B0:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ch
; END OF FUNCTION CHUNK	FOR __VPRINTER
; ---------------------------------------------------------------------------
off_A6B8	dw offset loc_A314
		dw offset loc_A2FE
		dw offset loc_A349
		dw offset loc_A309
		dw offset loc_A377
		dw offset loc_A384
		dw offset loc_A3C2
		dw offset loc_A3C9
		dw offset loc_A3CE
		dw offset loc_A332
		dw offset loc_A3F7
		dw offset loc_A3D5
		dw offset loc_A3D9
		dw offset loc_A3DD
		dw offset loc_A457
		dw offset loc_A504
		dw offset loc_A4A7
		dw offset loc_A4C7
		dw offset loc_A648
		dw offset loc_A684
		dw offset loc_A684
		dw offset loc_A684
		dw offset loc_A324
		dw offset loc_A32A

; =============== S U B	R O U T	I N E =======================================

; Attributes: thunk

j____read	proc near
		jmp	___read
j____read	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: thunk

j____write	proc near
		jmp	___write
j____write	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl access(const char	*path, int amode)
_access		proc near

pathname	= dword	ptr  4
amode		= byte ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+amode] ; char
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__access
		add	sp, 6
		pop	di
		pop	si
		pop	bp
		retn
_access		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl close(int	handle)
_close		proc near

@@handle		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, [bp+@@handle]
		cmp	dx, __nfile
		jb	short loc_A71D
		mov	ax, 6
		push	ax
		call	__IOERROR
		jmp	short loc_A72C
; ---------------------------------------------------------------------------

loc_A71D:
		mov	bx, dx
		add	bx, bx
		mov	word ptr [bx+1966h], 0
		push	dx		; handle
		call	__rtl_close
		pop	cx

loc_A72C:
		pop	di
		pop	si
		pop	bp
		retn
_close		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fflush(FILE *stream)
_fflush		proc near

len		= word ptr -2
@@stream		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	ax, word ptr [bp+@@stream]
		or	ax, word ptr [bp+@@stream+2]
		jnz	short loc_A746
		call	__flushout
		jmp	loc_A7FA
; ---------------------------------------------------------------------------

loc_A746:
		les	bx, [bp+@@stream]
		mov	ax, es:[bx+12h]
		cmp	ax, word ptr [bp+@@stream]
		jz	short loc_A755
		db	0E9h, 0A0h, 00h ; Hack
; ---------------------------------------------------------------------------

loc_A755:
		les	bx, [bp+@@stream]
		cmp	word ptr es:[bx], 0
		jl	short loc_A7AC
		test	byte ptr es:[bx+2], 8
		jnz	short loc_A77D
		mov	dx, es:[bx+0Eh]
		mov	ax, word ptr [bp+@@stream]
		add	ax, 5
		cmp	dx, word ptr [bp+@@stream+2]
		jz	short loc_A777
		jmp	loc_A7FA
; ---------------------------------------------------------------------------

loc_A777:
		cmp	es:[bx+0Ch], ax
		jnz	short loc_A7FA

loc_A77D:
		les	bx, [bp+@@stream]
		mov	word ptr es:[bx], 0
		mov	dx, es:[bx+0Eh]
		mov	ax, word ptr [bp+@@stream]
		add	ax, 5
		cmp	dx, word ptr [bp+@@stream+2]
		jnz	short loc_A7FA
		cmp	es:[bx+0Ch], ax
		jnz	short loc_A7FA
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		jmp	short loc_A7FA
; ---------------------------------------------------------------------------

loc_A7AC:
		les	bx, [bp+@@stream]
		mov	ax, es:[bx+6]
		add	ax, es:[bx]
		inc	ax
		mov	[bp+len], ax
		sub	es:[bx], ax
		push	[bp+len]	; len
		mov	bx, word ptr [bp+@@stream]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		push	dx
		push	ax		; buf
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	___write
		add	sp, 8
		cmp	ax, [bp+len]
		jz	short loc_A7FA
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+3], 2
		jnz	short loc_A7FA
		or	word ptr es:[bx+2], 10h

loc_A7F5:
		mov	ax, 0FFFFh
		jmp	short loc_A7FC
; ---------------------------------------------------------------------------

loc_A7FA:
		xor	ax, ax

loc_A7FC:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_fflush		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int flushall(void)
_flushall	proc near

var_8		= word ptr -8
var_6		= word ptr -6
@@stream		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	si
		push	di
		mov	[bp+var_8], 0
		mov	ax, __nfile
		mov	[bp+var_6], ax
		mov	word ptr [bp+@@stream+2],	ds
		mov	word ptr [bp+@@stream], 157Ch
		jmp	short loc_A83F
; ---------------------------------------------------------------------------

loc_A81F:
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 3
		jz	short loc_A83B
		cmp	word ptr es:[bx], 0
		jz	short loc_A83B
		push	word ptr [bp+@@stream+2]
		push	bx		; stream
		call	_fflush
		pop	cx
		pop	cx
		inc	[bp+var_8]

loc_A83B:
		add	word ptr [bp+@@stream], 14h

loc_A83F:
		mov	ax, [bp+var_6]
		dec	[bp+var_6]
		or	ax, ax
		jnz	short loc_A81F
		mov	ax, [bp+var_8]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_flushall	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__flushout	proc near

len		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 0Ah
		push	si
		push	di
		mov	[bp+var_8], 0
		mov	ax, __nfile
		mov	[bp+var_6], ax
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], 157Ch
		jmp	short loc_A8C5
; ---------------------------------------------------------------------------

loc_A86F:
		les	bx, [bp+var_4]
		cmp	word ptr es:[bx], 0
		jge	short loc_A8C1
		mov	ax, es:[bx+6]
		add	ax, es:[bx]
		inc	ax
		mov	[bp+len], ax
		sub	es:[bx], ax
		push	[bp+len]	; len
		mov	bx, word ptr [bp+var_4]
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		push	dx
		push	ax		; buf
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	___write
		add	sp, 8
		cmp	ax, [bp+len]
		jz	short loc_A8BE
		les	bx, [bp+var_4]
		test	byte ptr es:[bx+3], 2
		jnz	short loc_A8BE
		or	word ptr es:[bx+2], 10h

loc_A8BE:
		inc	[bp+var_8]

loc_A8C1:
		add	word ptr [bp+var_4], 14h

loc_A8C5:
		mov	ax, [bp+var_6]
		dec	[bp+var_6]
		or	ax, ax
		jnz	short loc_A86F
		mov	ax, [bp+var_8]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__flushout	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int fprintf(FILE *stream, const char *format,	...)
_fprintf	proc near

@@stream		= word ptr  4
arg_2		= word ptr  6
@@format		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, 0AFDEh
		push	ax
		push	[bp+arg_2]
		push	[bp+@@stream]
		push	[bp+arg_6]
		push	[bp+@@format]
		lea	ax, [bp+arg_8]
		push	ax
		call	__VPRINTER
		pop	di
		pop	si
		pop	bp
		retn
_fprintf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fputs(const char *s, FILE	*stream)
_fputs		proc near

len		= word ptr -2
buf		= dword	ptr  4
@@stream		= dword	ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	ax, word ptr [bp+buf]
		or	ax, word ptr [bp+buf+2]
		jz	short loc_A91A
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; s
		call	_strlen
		pop	cx
		pop	cx
		mov	[bp+len], ax
		or	ax, ax
		jnz	short loc_A91E

loc_A91A:
		xor	ax, ax
		jmp	short loc_A945
; ---------------------------------------------------------------------------

loc_A91E:
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	[bp+len]	; len
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		call	__FPUTN
		or	ax, ax
		jz	short loc_A942
		les	bx, [bp+buf]
		add	bx, [bp+len]
		mov	al, es:[bx-1]
		mov	ah, 0
		jmp	short loc_A945
; ---------------------------------------------------------------------------

loc_A942:
		mov	ax, 0FFFFh

loc_A945:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_fputs		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_A94B	proc near

var_6		= dword	ptr -6
var_2		= word ptr -2
arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 6
		push	si
		push	di
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 0
		jge	short loc_A968
		mov	cx, es:[bx+6]
		add	cx, es:[bx]
		inc	cx
		mov	ax, cx
		jmp	short loc_A975
; ---------------------------------------------------------------------------

loc_A968:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		cwd
		xor	ax, dx
		sub	ax, dx
		mov	cx, ax

loc_A975:
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		test	byte ptr es:[bx+2], 40h
		jnz	short loc_A9C9
		les	bx, [bp+arg_0]
		mov	dx, es:[bx+0Eh]
		mov	ax, es:[bx+0Ch]
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		cmp	word ptr es:[bx], 0
		jge	short loc_A9C2
		jmp	short loc_A9AA
; ---------------------------------------------------------------------------

loc_A99B:
		dec	word ptr [bp+var_6]
		les	bx, [bp+var_6]
		cmp	byte ptr es:[bx], 0Ah
		jnz	short loc_A9AA
		inc	[bp+var_2]

loc_A9AA:
		mov	ax, cx
		dec	cx
		or	ax, ax
		jnz	short loc_A99B
		jmp	short loc_A9C9
; ---------------------------------------------------------------------------

loc_A9B3:
		les	bx, [bp+var_6]
		inc	word ptr [bp+var_6]
		cmp	byte ptr es:[bx], 0Ah
		jnz	short loc_A9C2
		inc	[bp+var_2]

loc_A9C2:
		mov	ax, cx
		dec	cx
		or	ax, ax
		jnz	short loc_A9B3

loc_A9C9:
		mov	ax, [bp+var_2]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	4
sub_A94B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fseek(FILE *stream, __int32 offset, int whence)
_fseek		proc near

@@stream		= dword	ptr  4
@@offset		= dword	ptr  8
fromwhere	= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		call	_fflush
		pop	cx
		pop	cx
		or	ax, ax
		jz	short loc_A9ED
		mov	ax, 0FFFFh
		jmp	short loc_AA51
; ---------------------------------------------------------------------------

loc_A9ED:
		cmp	[bp+fromwhere],	1
		jnz	short loc_AA0A
		les	bx, [bp+@@stream]
		cmp	word ptr es:[bx], 0
		jle	short loc_AA0A
		push	word ptr [bp+@@stream+2]
		push	bx
		call	sub_A94B
		cwd
		sub	word ptr [bp+@@offset], ax
		sbb	word ptr [bp+@@offset+2],	dx

loc_AA0A:
		les	bx, [bp+@@stream]
		and	word ptr es:[bx+2], 0FE5Fh
		mov	bx, word ptr [bp+@@stream]
		mov	word ptr es:[bx], 0
		mov	dx, es:[bx+0Ah]
		mov	ax, es:[bx+8]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		push	[bp+fromwhere]	; fromwhere
		push	word ptr [bp+@@offset+2]
		push	word ptr [bp+@@offset] ; offset
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8
		cmp	dx, 0FFFFh
		jnz	short loc_AA4F
		cmp	ax, 0FFFFh
		jnz	short loc_AA4F
		mov	ax, 0FFFFh
		jmp	short loc_AA51
; ---------------------------------------------------------------------------

loc_AA4F:
		xor	ax, ax

loc_AA51:
		pop	di
		pop	si
		pop	bp
		retn
_fseek		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; __int32 __cdecl ftell(FILE *stream)
_ftell		proc near

var_8		= word ptr -8
var_6		= word ptr -6
@@offset		= dword	ptr -4
@@stream		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	si
		push	di
		mov	ax, 1
		push	ax		; fromwhere
		xor	ax, ax
		push	ax
		push	ax		; offset
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8
		mov	word ptr [bp+@@offset+2],	dx
		mov	word ptr [bp+@@offset], ax
		cmp	dx, 0FFFFh
		jnz	short loc_AA87
		cmp	ax, 0FFFFh
		jnz	short loc_AA87
		jmp	loc_AB24
; ---------------------------------------------------------------------------

loc_AA87:
		les	bx, [bp+@@stream]
		cmp	word ptr es:[bx], 0
		jl	short loc_AA93
		jmp	loc_AB14
; ---------------------------------------------------------------------------

loc_AA93:
		mov	al, es:[bx+4]
		cbw
		add	ax, ax
		mov	bx, ax
		test	byte ptr [bx+1967h], 8
		jz	short loc_AB02
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		push	ax
		push	ax		; offset
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		cmp	dx, 0FFFFh
		jnz	short loc_AACC
		cmp	ax, 0FFFFh
		jnz	short loc_AACC
		jmp	short loc_AB2A
; ---------------------------------------------------------------------------

loc_AACC:
		xor	ax, ax
		push	ax		; fromwhere
		push	word ptr [bp+@@offset+2]
		push	word ptr [bp+@@offset] ; offset
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8
		cmp	dx, 0FFFFh
		jnz	short loc_AAF6
		cmp	ax, 0FFFFh
		jnz	short loc_AAF6
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		jmp	short loc_AB2A
; ---------------------------------------------------------------------------

loc_AAF6:
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		mov	word ptr [bp+@@offset+2],	dx
		mov	word ptr [bp+@@offset], ax

loc_AB02:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream]
		call	sub_A94B
		cwd
		add	word ptr [bp+@@offset], ax
		adc	word ptr [bp+@@offset+2],	dx
		jmp	short loc_AB24
; ---------------------------------------------------------------------------

loc_AB14:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream]
		call	sub_A94B
		cwd
		sub	word ptr [bp+@@offset], ax
		sbb	word ptr [bp+@@offset+2],	dx

loc_AB24:
		mov	dx, word ptr [bp+@@offset+2]
		mov	ax, word ptr [bp+@@offset]

loc_AB2A:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_ftell		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_AB30	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, [bp+arg_0]
		cmp	ax, 5Ch	; '\'
		jz	short loc_AB42
		cmp	ax, 2Fh	; '/'
		jnz	short loc_AB47

loc_AB42:
		mov	ax, 1
		jmp	short loc_AB49
; ---------------------------------------------------------------------------

loc_AB47:
		xor	ax, ax

loc_AB49:
		pop	di
		pop	si
		pop	bp
		retn	2
sub_AB30	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	_fullpath(char *buf, const char	*path, size_t maxlen)
__fullpath	proc near

drive		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
@@src		= dword	ptr -0Ch
@@dest		= dword	ptr -8
block		= dword	ptr -4
buf		= word ptr  4
arg_2		= word ptr  6
@@path		= word ptr  8
arg_6		= word ptr  0Ah
@@maxlen		= word ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 12h
		push	si
		push	di
		mov	ax, 0A1h ; '°'
		push	ax		; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		or	ax, dx
		jnz	short loc_AB6C
		jmp	loc_AD43
; ---------------------------------------------------------------------------

loc_AB6C:
		mov	dx, [bp+arg_6]
		mov	ax, [bp+@@path]
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		les	bx, [bp+@@src]
		mov	al, es:[bx]
		cbw
		mov	bx, ax
		test	(__ctype+1)[bx], 0Ch
		jz	short loc_ABAA
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx+1], 3Ah	; ':'
		jnz	short loc_ABAA
		mov	al, es:[bx]
		cbw
		mov	[bp+var_10], ax
		push	ax
		call	sub_BC48
		pop	cx
		add	ax, 0FFC0h
		mov	[bp+drive], ax
		add	word ptr [bp+@@src], 2
		jmp	short loc_ABBE
; ---------------------------------------------------------------------------

loc_ABAA:
		push	ss
		lea	ax, [bp+drive]
		push	ax		; drive
		call	__dos_getdrive
		pop	cx
		pop	cx
		mov	ax, [bp+drive]
		add	ax, 41h	; 'A'
		dec	ax
		mov	[bp+var_10], ax

loc_ABBE:
		les	bx, [bp+@@src]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_AB30
		or	ax, ax
		jnz	short loc_AC22
		mov	ax, 0A1h ; '°'
		push	ax		; len
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; buf
		push	[bp+drive]	; drive
		call	__getdcwd
		add	sp, 8
		or	ax, dx
		jnz	short loc_ABF2
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx
		jmp	loc_AD43
; ---------------------------------------------------------------------------

loc_ABF2:
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; s
		call	_strlen
		pop	cx
		pop	cx
		mov	dx, word ptr [bp+block+2]
		add	ax, word ptr [bp+block]
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	al, es:[bx-1]
		cbw
		push	ax
		call	sub_AB30
		or	ax, ax
		jnz	short loc_AC44
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 5Ch ;	'\'
		jmp	short loc_AC41
; ---------------------------------------------------------------------------

loc_AC22:
		mov	dx, word ptr [bp+block+2]
		mov	ax, word ptr [bp+block]
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	al, byte ptr [bp+var_10]
		mov	es:[bx], al
		inc	word ptr [bp+@@dest]
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 3Ah ;	':'

loc_AC41:
		inc	word ptr [bp+@@dest]

loc_AC44:
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr [bp+block+2]
		mov	ax, word ptr [bp+block]
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax

loc_AC68:
		les	bx, [bp+@@src]
		inc	word ptr [bp+@@src]
		mov	al, es:[bx]
		cbw
		mov	[bp+var_E], ax
		or	ax, ax
		jz	short loc_AC84
		push	ax
		call	sub_AB30
		or	ax, ax
		jnz	short loc_AC84
		jmp	loc_AD49
; ---------------------------------------------------------------------------

loc_AC84:
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx-1], 2Eh	; '.'
		jnz	short loc_ACA1
		mov	al, es:[bx-2]
		cbw
		push	ax
		call	sub_AB30
		or	ax, ax
		jz	short loc_ACA1
		sub	word ptr [bp+@@dest], 2
		jmp	short loc_ACEC
; ---------------------------------------------------------------------------

loc_ACA1:
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx-1], 2Eh	; '.'
		jnz	short loc_ACEC
		cmp	byte ptr es:[bx-2], 2Eh	; '.'
		jnz	short loc_ACEC
		mov	al, es:[bx-3]
		cbw
		push	ax
		call	sub_AB30
		or	ax, ax
		jz	short loc_ACEC
		sub	word ptr [bp+@@dest], 3
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx-1], 3Ah	; ':'
		jnz	short loc_ACDA
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx
		jmp	short loc_AD43
; ---------------------------------------------------------------------------

loc_ACDA:
		dec	word ptr [bp+@@dest]
		les	bx, [bp+@@dest]
		mov	al, es:[bx]
		cbw
		push	ax
		call	sub_AB30
		or	ax, ax
		jz	short loc_ACDA

loc_ACEC:
		cmp	[bp+var_E], 0
		jnz	short loc_AD49
		les	bx, [bp+@@dest]
		mov	al, es:[bx-1]
		cbw
		push	ax
		call	sub_AB30
		or	ax, ax
		jz	short loc_AD05
		dec	word ptr [bp+@@dest]

loc_AD05:
		les	bx, [bp+@@dest]
		cmp	byte ptr es:[bx-1], 3Ah	; ':'
		jnz	short loc_AD16
		mov	byte ptr es:[bx], 5Ch ;	'\'
		inc	word ptr [bp+@@dest]

loc_AD16:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; s
		call	_strlen
		pop	cx
		pop	cx
		inc	ax
		mov	dx, ax
		mov	ax, [bp+buf]
		or	ax, [bp+arg_2]
		jz	short loc_AD7D
		cmp	dx, [bp+@@maxlen]
		jbe	short loc_AD58
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx

loc_AD43:
		xor	dx, dx
		xor	ax, ax
		jmp	short loc_AD8A
; ---------------------------------------------------------------------------

loc_AD49:
		les	bx, [bp+@@dest]
		mov	al, byte ptr [bp+var_E]
		mov	es:[bx], al
		inc	word ptr [bp+@@dest]
		jmp	loc_AC68
; ---------------------------------------------------------------------------

loc_AD58:
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	[bp+arg_2]
		push	[bp+buf]	; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx
		mov	dx, [bp+arg_2]
		mov	ax, [bp+buf]
		jmp	short loc_AD8A
; ---------------------------------------------------------------------------

loc_AD7D:
		push	dx		; size
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_realloc
		add	sp, 6

loc_AD8A:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__fullpath	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl perror(const char *s)
_perror		proc near

var_4		= word ptr -4
var_2		= word ptr -2
@@s		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		mov	ax, word_E17E
		cmp	ax, word_FC52
		jge	short loc_ADC0
		cmp	word_E17E, 0
		jl	short loc_ADC0
		mov	bx, word_E17E
		mov	cl, 2
		shl	bx, cl
		mov	dx, [bx+1A94h]
		mov	ax, [bx+1A92h]
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		jmp	short loc_ADC8
; ---------------------------------------------------------------------------

loc_ADC0:
		mov	[bp+var_2], ds
		mov	[bp+var_4], 1D4Fh

loc_ADC8:
		mov	ax, word ptr [bp+@@s]
		or	ax, word ptr [bp+@@s+2]
		jz	short loc_ADF8
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx], 0
		jz	short loc_ADF8
		push	ds
		mov	ax, 15A4h
		push	ax		; stream
		push	word ptr [bp+@@s+2]
		push	bx		; s
		call	_fputs
		add	sp, 8
		push	ds
		mov	ax, 15A4h
		push	ax		; stream
		push	ds
		mov	ax, 1D5Dh
		push	ax		; s
		call	_fputs
		add	sp, 8

loc_ADF8:
		push	ds
		mov	ax, 15A4h
		push	ax		; stream
		push	[bp+var_2]
		push	[bp+var_4]	; s
		call	_fputs
		add	sp, 8
		push	ds
		mov	ax, 15A4h
		push	ax		; stream
		push	ds
		mov	ax, 1D60h
		push	ax		; s
		call	_fputs
		add	sp, 8
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_perror		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _fputc(char c, FILE *stream)
__fputc		proc near

c		= byte ptr  4
@@stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+@@stream]
		dec	word ptr es:[bx]
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		mov	al, [bp+c]
		cbw
		push	ax		; c
		call	_fputc
		add	sp, 6
		pop	di
		pop	si
		pop	bp
		retn
__fputc		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fputc(int	c, FILE	*stream)
_fputc		proc near

c		= byte ptr  4
@@stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	al, [bp+c]
		mov	byte_14196, al
		les	bx, [bp+@@stream]
		cmp	word ptr es:[bx], 0FFFFh
		jge	short loc_AEA0
		inc	word ptr es:[bx]
		mov	bx, word ptr [bp+@@stream]
		mov	dx, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	al, byte_14196
		mov	es, dx
		mov	es:[si], al
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 8
		jnz	short loc_AE7A
		jmp	loc_AFBE
; ---------------------------------------------------------------------------

loc_AE7A:
		cmp	byte_14196, 0Ah
		jz	short loc_AE8B
		cmp	byte_14196, 0Dh
		jz	short loc_AE8B
		jmp	loc_AFBE
; ---------------------------------------------------------------------------

loc_AE8B:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		call	_fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	short loc_AE9D
		jmp	loc_AFBE
; ---------------------------------------------------------------------------

loc_AE9D:
		jmp	loc_AFB9
; ---------------------------------------------------------------------------

loc_AEA0:
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 90h
		jnz	short loc_AEB1
		test	byte ptr es:[bx+2], 2
		jnz	short loc_AEBC

loc_AEB1:
		les	bx, [bp+@@stream]
		or	word ptr es:[bx+2], 10h
		jmp	loc_AFB9
; ---------------------------------------------------------------------------

loc_AEBC:
		les	bx, [bp+@@stream]
		or	word ptr es:[bx+2], 100h
		mov	bx, word ptr [bp+@@stream]
		cmp	word ptr es:[bx+6], 0
		jz	short loc_AF38
		cmp	word ptr es:[bx], 0
		jz	short loc_AEE5
		push	word ptr [bp+@@stream+2]
		push	bx		; stream
		call	_fflush
		pop	cx
		pop	cx
		or	ax, ax
		jz	short loc_AEE5
		jmp	loc_AFB9
; ---------------------------------------------------------------------------

loc_AEE5:
		les	bx, [bp+@@stream]
		mov	ax, es:[bx+6]
		neg	ax
		mov	es:[bx], ax
		mov	dx, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	al, byte_14196
		mov	es, dx
		mov	es:[si], al
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 8
		jnz	short loc_AF12
		jmp	loc_AFBE
; ---------------------------------------------------------------------------

loc_AF12:
		cmp	byte_14196, 0Ah
		jz	short loc_AF23
		cmp	byte_14196, 0Dh
		jz	short loc_AF23
		jmp	loc_AFBE
; ---------------------------------------------------------------------------

loc_AF23:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		call	_fflush
		pop	cx
		pop	cx
		or	ax, ax
		jnz	short loc_AF35
		jmp	loc_AFBE
; ---------------------------------------------------------------------------

loc_AF35:
		jmp	loc_AFB9
; ---------------------------------------------------------------------------

loc_AF38:
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		add	ax, ax
		mov	bx, ax
		test	byte ptr [bx+1967h], 8
		jz	short loc_AF62
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		push	ax
		push	ax		; offset
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8

loc_AF62:
		cmp	byte_14196, 0Ah
		jnz	short loc_AF8D
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 40h
		jnz	short loc_AF8D
		mov	ax, 1
		push	ax		; len
		push	ds
		mov	ax, 1D62h
		push	ax		; buf
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	__rtl_write
		add	sp, 8
		cmp	ax, 1
		jnz	short loc_AFAA

loc_AF8D:
		mov	ax, 1
		push	ax		; len
		push	ds
		mov	ax, 6096h
		push	ax		; buf
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	__rtl_write
		add	sp, 8
		cmp	ax, 1
		jz	short loc_AFBE

loc_AFAA:
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+3], 2
		jnz	short loc_AFBE
		or	word ptr es:[bx+2], 10h

loc_AFB9:
		mov	ax, 0FFFFh
		jmp	short loc_AFC3
; ---------------------------------------------------------------------------

loc_AFBE:
		mov	al, byte_14196
		mov	ah, 0

loc_AFC3:
		pop	di
		pop	si
		pop	bp
		retn
_fputc		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl fputchar(int c)
_fputchar	proc near

c		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	ax, 1590h
		push	ax		; stream
		push	[bp+c]		; c
		call	_fputc
		add	sp, 6
		pop	di
		pop	si
		pop	bp
		retn
_fputchar	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_FPUTN(FILE *stream, size_t len, void *buf)
__FPUTN		proc near

var_2		= word ptr -2
@@stream		= dword	ptr  4
len		= word ptr  8
buf		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	ax, [bp+len]
		mov	[bp+var_2], ax
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 8
		jz	short loc_B024
		jmp	short loc_B017
; ---------------------------------------------------------------------------

loc_AFF8:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		les	bx, [bp+buf]
		inc	word ptr [bp+buf]
		mov	al, es:[bx]
		cbw
		push	ax		; c
		call	_fputc
		add	sp, 6
		cmp	ax, 0FFFFh
		jnz	short loc_B017
		jmp	loc_B1CB
; ---------------------------------------------------------------------------

loc_B017:
		mov	ax, [bp+len]
		dec	[bp+len]
		or	ax, ax
		jnz	short loc_AFF8
		jmp	loc_B1CF
; ---------------------------------------------------------------------------

loc_B024:
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 40h
		jnz	short loc_B031
		jmp	loc_B152
; ---------------------------------------------------------------------------

loc_B031:
		cmp	word ptr es:[bx+6], 0
		jnz	short loc_B03B
		jmp	loc_B106
; ---------------------------------------------------------------------------

loc_B03B:
		mov	ax, es:[bx+6]
		cmp	ax, [bp+len]
		jnb	short loc_B0A7
		cmp	word ptr es:[bx], 0
		jz	short loc_B05A
		push	word ptr [bp+@@stream+2]
		push	bx		; stream
		call	_fflush
		pop	cx
		pop	cx
		or	ax, ax
		jz	short loc_B05A
		jmp	loc_B1CB
; ---------------------------------------------------------------------------

loc_B05A:
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		add	ax, ax
		mov	bx, ax
		test	byte ptr [bx+1967h], 8
		jz	short loc_B084
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		push	ax
		push	ax		; offset
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8

loc_B084:
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	__rtl_write
		add	sp, 8
		cmp	ax, [bp+len]
		jnz	short loc_B0A4
		jmp	loc_B1CF
; ---------------------------------------------------------------------------

loc_B0A4:
		jmp	loc_B1CB
; ---------------------------------------------------------------------------

loc_B0A7:
		les	bx, [bp+@@stream]
		mov	ax, es:[bx]
		add	ax, [bp+len]
		jl	short loc_B0D6
		cmp	word ptr es:[bx], 0
		jnz	short loc_B0C4
		mov	ax, 0FFFFh
		sub	ax, es:[bx+6]
		mov	es:[bx], ax
		jmp	short loc_B0D6
; ---------------------------------------------------------------------------

loc_B0C4:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		call	_fflush
		pop	cx
		pop	cx
		or	ax, ax
		jz	short loc_B0D6
		jmp	loc_B1CB
; ---------------------------------------------------------------------------

loc_B0D6:
		push	[bp+len]	; n
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; src
		les	bx, [bp+@@stream]
		push	word ptr es:[bx+0Eh]
		push	word ptr es:[bx+0Ch] ; dest
		call	_memcpy
		add	sp, 0Ah
		les	bx, [bp+@@stream]
		mov	ax, es:[bx]
		add	ax, [bp+len]
		mov	es:[bx], ax
		mov	ax, [bp+len]
		add	es:[bx+0Ch], ax
		jmp	loc_B1CF
; ---------------------------------------------------------------------------

loc_B106:
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		add	ax, ax
		mov	bx, ax
		test	byte ptr [bx+1967h], 8
		jz	short loc_B130
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		push	ax
		push	ax		; offset
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	_lseek
		add	sp, 8

loc_B130:
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	__rtl_write
		add	sp, 8
		cmp	ax, [bp+len]
		jnz	short loc_B150
		jmp	loc_B1CF
; ---------------------------------------------------------------------------

loc_B150:
		jmp	short loc_B1CB
; ---------------------------------------------------------------------------

loc_B152:
		les	bx, [bp+@@stream]
		cmp	word ptr es:[bx+6], 0
		jz	short loc_B1AE
		jmp	short loc_B1A2
; ---------------------------------------------------------------------------

loc_B15E:
		les	bx, [bp+@@stream]
		inc	word ptr es:[bx]
		jge	short loc_B187
		mov	bx, word ptr [bp+@@stream]
		mov	dx, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		les	bx, [bp+buf]
		inc	word ptr [bp+buf]
		mov	al, es:[bx]
		mov	es, dx
		mov	es:[si], al
		mov	ah, 0
		jmp	short loc_B19D
; ---------------------------------------------------------------------------

loc_B187:
		push	word ptr [bp+@@stream+2]
		push	word ptr [bp+@@stream] ; stream
		les	bx, [bp+buf]
		inc	word ptr [bp+buf]
		mov	al, es:[bx]
		push	ax		; c
		call	__fputc
		add	sp, 6

loc_B19D:
		cmp	ax, 0FFFFh
		jz	short loc_B1CB

loc_B1A2:
		mov	ax, [bp+len]
		dec	[bp+len]
		or	ax, ax
		jnz	short loc_B15E
		jmp	short loc_B1CF
; ---------------------------------------------------------------------------

loc_B1AE:
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		les	bx, [bp+@@stream]
		mov	al, es:[bx+4]
		cbw
		push	ax		; handle
		call	___write
		add	sp, 8
		cmp	ax, [bp+len]
		jz	short loc_B1CF

loc_B1CB:
		xor	ax, ax
		jmp	short loc_B1D2
; ---------------------------------------------------------------------------

loc_B1CF:
		mov	ax, [bp+var_2]

loc_B1D2:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ah
__FPUTN		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl puts(const char *s)
_puts		proc near

var_2		= word ptr -2
buf		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	ax, word ptr [bp+buf]
		or	ax, word ptr [bp+buf+2]
		jnz	short loc_B1EE
		xor	ax, ax
		jmp	short loc_B231
; ---------------------------------------------------------------------------

loc_B1EE:
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; s
		call	_strlen
		pop	cx
		pop	cx
		mov	[bp+var_2], ax
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	ax		; len
		push	ds
		mov	ax, 1590h
		push	ax		; stream
		call	__FPUTN
		cmp	ax, [bp+var_2]
		jz	short loc_B215
		mov	ax, 0FFFFh
		jmp	short loc_B231
; ---------------------------------------------------------------------------

loc_B215:
		push	ds
		mov	ax, 1590h
		push	ax		; stream
		mov	ax, 0Ah
		push	ax		; c
		call	_fputc
		add	sp, 6
		cmp	ax, 0Ah
		jz	short loc_B22E
		mov	ax, 0FFFFh
		jmp	short loc_B231
; ---------------------------------------------------------------------------

loc_B22E:
		mov	ax, 0Ah

loc_B231:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_puts		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl setvbuf(FILE *stream, char *buf, int type, size_t	size)
_setvbuf	proc near

@@stream		= dword	ptr  4
buf		= dword	ptr  8
@@type		= word ptr  0Ch
@@size		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+@@stream]
		mov	ax, es:[bx+12h]
		cmp	ax, word ptr [bp+@@stream]
		jz	short loc_B24B
		jmp	loc_B319
; ---------------------------------------------------------------------------

loc_B24B:
		cmp	[bp+@@type], 2
		jle	short loc_B254
		jmp	loc_B319
; ---------------------------------------------------------------------------

loc_B254:
		cmp	[bp+@@size], 7FFFh
		jbe	short loc_B25E
		jmp	loc_B319
; ---------------------------------------------------------------------------

loc_B25E:
		cmp	word_FE66, 0
		jnz	short loc_B274
		cmp	word ptr [bp+@@stream], 1590h
		jnz	short loc_B274
		mov	word_FE66, 1
		jmp	short loc_B288
; ---------------------------------------------------------------------------

loc_B274:
		cmp	word_FE64, 0
		jnz	short loc_B288
		cmp	word ptr [bp+@@stream], 157Ch
		jnz	short loc_B288
		mov	word_FE64, 1

loc_B288:
		les	bx, [bp+@@stream]
		cmp	word ptr es:[bx], 0
		jz	short loc_B2A3
		mov	ax, 1
		push	ax		; whence
		xor	ax, ax
		push	ax
		push	ax		; offset
		push	word ptr [bp+@@stream+2]
		push	bx		; stream
		call	_fseek
		add	sp, 0Ah

loc_B2A3:
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 4
		jz	short loc_B2BA
		push	word ptr es:[bx+0Ah]
		push	word ptr es:[bx+8] ; block
		call	_farfree
		pop	cx
		pop	cx

loc_B2BA:
		les	bx, [bp+@@stream]
		and	word ptr es:[bx+2], 0FFF3h
		mov	bx, word ptr [bp+@@stream]
		mov	word ptr es:[bx+6], 0
		mov	dx, word ptr [bp+@@stream+2]
		mov	ax, word ptr [bp+@@stream]
		add	ax, 5
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		cmp	[bp+@@type], 2
		jz	short loc_B349
		cmp	[bp+@@size], 0
		jbe	short loc_B349
		mov	off_FFA0, 0B53Dh
		mov	ax, word ptr [bp+buf]
		or	ax, word ptr [bp+buf+2]
		jnz	short loc_B31E
		push	[bp+@@size]	; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+buf+2], dx
		mov	word ptr [bp+buf], ax
		or	ax, dx
		jz	short loc_B319
		les	bx, [bp+@@stream]
		or	word ptr es:[bx+2], 4
		jmp	short loc_B31E
; ---------------------------------------------------------------------------

loc_B319:
		mov	ax, 0FFFFh
		jmp	short loc_B34B
; ---------------------------------------------------------------------------

loc_B31E:
		les	bx, [bp+@@stream]
		mov	dx, word ptr [bp+buf+2]
		mov	ax, word ptr [bp+buf]
		mov	es:[bx+0Eh], dx
		mov	es:[bx+0Ch], ax
		mov	es:[bx+0Ah], dx
		mov	es:[bx+8], ax
		mov	ax, [bp+@@size]
		mov	es:[bx+6], ax
		cmp	[bp+@@type], 1
		jnz	short loc_B349
		or	word ptr es:[bx+2], 8

loc_B349:
		xor	ax, ax

loc_B34B:
		pop	di
		pop	si
		pop	bp
		retn
_setvbuf	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+8]
		push	word ptr [bp+0Ch]
		push	word ptr [bp+0Ah]
		les	bx, [bp+4]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		call	_memcpy
		add	sp, 0Ah
		mov	ax, [bp+8]
		les	bx, [bp+4]
		add	es:[bx], ax
		push	bx
		push	es
		mov	es, word ptr es:[bx+2]
		mov	ax, es
		pop	es
		pop	bx
		mov	bx, es:[bx]
		mov	es, ax
		mov	byte ptr es:[bx], 0
		mov	ax, [bp+8]
		pop	di
		pop	si
		pop	bp
		retn	0Ah

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int sprintf(char *buffer, const char *format,	...)
_sprintf	proc near

@@buffer		= dword	ptr  4
@@format		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= byte ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+@@buffer]
		mov	byte ptr es:[bx], 0
		mov	ax, 0B34Fh
		push	ax
		push	ss
		lea	ax, [bp+@@buffer]
		push	ax
		push	[bp+arg_6]
		push	[bp+@@format]
		lea	ax, [bp+arg_8]
		push	ax
		call	__VPRINTER
		pop	di
		pop	si
		pop	bp
		retn
_sprintf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl vsprintf(char *buffer, const char	*format, void *arglist)
_vsprintf	proc near

@@buffer		= dword	ptr  4
@@format		= dword	ptr  8
arglist		= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+@@buffer]
		mov	byte ptr es:[bx], 0
		mov	ax, 0B34Fh
		push	ax
		push	ss
		lea	ax, [bp+@@buffer]
		push	ax
		push	word ptr [bp+@@format+2]
		push	word ptr [bp+@@format]
		push	word ptr [bp+arglist]
		call	__VPRINTER
		pop	di
		pop	si
		pop	bp
		retn
_vsprintf	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl __write(int handle, void *buf, unsigned int len)
___write	proc near

var_90		= byte ptr -90h
var_E		= dword	ptr -0Eh
var_9		= byte ptr -9
var_8		= word ptr -8
var_6		= dword	ptr -6
var_2		= word ptr -2
@@handle		= word ptr  4
buf		= dword	ptr  6
len		= word ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 90h
		push	si
		push	di
		mov	ax, [bp+@@handle]
		cmp	ax, __nfile
		jb	short loc_B3F9
		mov	ax, 6
		push	ax
		call	__IOERROR
		jmp	loc_B537
; ---------------------------------------------------------------------------

loc_B3F9:
		mov	ax, [bp+len]
		inc	ax
		cmp	ax, 2
		jnb	short loc_B407
		xor	ax, ax
		jmp	loc_B537
; ---------------------------------------------------------------------------

loc_B407:
		mov	bx, [bp+@@handle]
		add	bx, bx
		test	byte ptr [bx+1967h], 8
		jz	short loc_B424
		mov	ax, 2
		push	ax		; fromwhere
		xor	ax, ax
		push	ax
		push	ax		; offset
		push	[bp+@@handle]	; handle
		call	_lseek
		add	sp, 8

loc_B424:
		mov	bx, [bp+@@handle]
		add	bx, bx
		test	byte ptr [bx+1967h], 40h
		jnz	short loc_B445
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	[bp+@@handle]	; handle
		call	__rtl_write
		add	sp, 8
		jmp	loc_B537
; ---------------------------------------------------------------------------

loc_B445:
		mov	bx, [bp+@@handle]
		add	bx, bx
		and	word ptr [bx+1966h], 0FDFFh
		mov	dx, word ptr [bp+buf+2]
		mov	ax, word ptr [bp+buf]
		mov	word ptr [bp+var_E+2], dx
		mov	word ptr [bp+var_E], ax
		mov	ax, [bp+len]
		mov	[bp+var_8], ax
		jmp	short loc_B4DF
; ---------------------------------------------------------------------------

loc_B464:
		dec	[bp+var_8]
		les	bx, [bp+var_E]
		inc	word ptr [bp+var_E]
		mov	al, es:[bx]
		mov	[bp+var_9], al
		cmp	al, 0Ah
		jnz	short loc_B481
		les	bx, [bp+var_6]
		mov	byte ptr es:[bx], 0Dh
		inc	word ptr [bp+var_6]

loc_B481:
		les	bx, [bp+var_6]
		mov	al, [bp+var_9]
		mov	es:[bx], al
		inc	word ptr [bp+var_6]
		lea	ax, [bp+var_90]
		mov	dx, word ptr [bp+var_6]
		xor	bx, bx
		sub	dx, ax
		sbb	bx, 0
		or	bx, bx
		jl	short loc_B4E9
		jnz	short loc_B4A7
		cmp	dx, 80h	; 'Ä'
		jb	short loc_B4E9

loc_B4A7:
		lea	ax, [bp+var_90]
		mov	dx, word ptr [bp+var_6]
		xor	bx, bx
		sub	dx, ax
		sbb	bx, 0
		mov	[bp+var_2], dx
		push	dx		; len
		push	ss
		push	ax		; buf
		push	[bp+@@handle]	; handle
		call	__rtl_write
		add	sp, 8
		mov	dx, ax
		cmp	ax, [bp+var_2]
		jz	short loc_B4DF
		cmp	dx, 0FFFFh
		jnz	short loc_B4D5
		mov	ax, 0FFFFh
		jmp	short loc_B532
; ---------------------------------------------------------------------------

loc_B4D5:
		mov	ax, [bp+len]
		sub	ax, [bp+var_8]
		add	ax, dx
		jmp	short loc_B52F
; ---------------------------------------------------------------------------

loc_B4DF:
		lea	ax, [bp+var_90]
		mov	word ptr [bp+var_6+2], ss
		mov	word ptr [bp+var_6], ax

loc_B4E9:
		cmp	[bp+var_8], 0
		jz	short loc_B4F2
		jmp	loc_B464
; ---------------------------------------------------------------------------

loc_B4F2:
		lea	ax, [bp+var_90]
		mov	dx, word ptr [bp+var_6]
		xor	bx, bx
		sub	dx, ax
		sbb	bx, 0
		mov	[bp+var_2], dx
		mov	ax, dx
		or	ax, ax
		jbe	short loc_B534
		push	dx		; len
		push	ss
		lea	ax, [bp+var_90]
		push	ax		; buf
		push	[bp+@@handle]	; handle
		call	__rtl_write
		add	sp, 8
		mov	dx, ax
		cmp	ax, [bp+var_2]
		jz	short loc_B534
		cmp	dx, 0FFFFh
		jnz	short loc_B52A
		mov	ax, 0FFFFh
		jmp	short loc_B532
; ---------------------------------------------------------------------------

loc_B52A:
		mov	ax, [bp+len]
		add	ax, dx

loc_B52F:
		sub	ax, [bp+var_2]

loc_B532:
		jmp	short loc_B537
; ---------------------------------------------------------------------------

loc_B534:
		mov	ax, [bp+len]

loc_B537:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
___write	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__xfflush	proc near

var_6		= word ptr -6
@@stream		= dword	ptr -4

		push	bp
		mov	bp, sp
		sub	sp, 6
		push	si
		push	di
		mov	[bp+var_6], 0
		mov	word ptr [bp+@@stream+2],	ds
		mov	word ptr [bp+@@stream], 157Ch
		jmp	short loc_B574
; ---------------------------------------------------------------------------

loc_B554:
		les	bx, [bp+@@stream]
		test	byte ptr es:[bx+2], 3
		jz	short loc_B56D
		cmp	word ptr es:[bx], 0
		jge	short loc_B56D
		push	word ptr [bp+@@stream+2]
		push	bx		; stream
		call	_fflush
		pop	cx
		pop	cx

loc_B56D:
		add	word ptr [bp+@@stream], 14h
		inc	[bp+var_6]

loc_B574:
		mov	ax, [bp+var_6]
		cmp	ax, __nfile
		jb	short loc_B554
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__xfflush	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _access(char *pathname, char)
__access	proc near

pathname	= dword	ptr  4
arg_4		= byte ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	ax, ax
		push	ax		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod
		add	sp, 6
		mov	dx, ax
		cmp	dx, 0FFFFh
		jnz	short loc_B5A0
		jmp	short loc_B5B8
; ---------------------------------------------------------------------------

loc_B5A0:
		test	[bp+arg_4], 2
		jz	short loc_B5AB
		test	dl, 1
		jnz	short loc_B5AF

loc_B5AB:
		xor	ax, ax
		jmp	short loc_B5B8
; ---------------------------------------------------------------------------

loc_B5AF:
		mov	word_E17E, 5
		mov	ax, 0FFFFh

loc_B5B8:
		pop	di
		pop	si
		pop	bp
		retn
__access	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int _chmod(const char	*pathname, int func, ...)
__chmod		proc near

pathname	= dword	ptr  4
func		= byte ptr  8
arg_6		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	cx, [bp+arg_6]
		mov	ah, 43h	; 'C'
		mov	al, [bp+func]
		lds	dx, [bp+pathname]
		int	21h		; DOS -
		pop	ds
		jb	short loc_B5D5
		xchg	ax, cx
		jmp	short loc_B5D9
; ---------------------------------------------------------------------------

loc_B5D5:
		push	ax
		call	__IOERROR

loc_B5D9:
		pop	di
		pop	si
		pop	bp
		retn
__chmod		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl chsize(int handle, __int32 size)
_chsize		proc near

var_84		= byte ptr -84h
var_4		= word ptr -4
var_2		= word ptr -2
@@handle		= word ptr  4
@@size		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 84h
		push	si
		push	di
		mov	ax, 4201h
		mov	bx, [bp+@@handle]
		sub	cx, cx
		mov	dx, cx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from present location
		jb	short loc_B665
		mov	[bp+var_4], ax
		mov	[bp+var_2], dx
		mov	ax, 4202h
		sub	cx, cx
		mov	dx, cx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from end of file
		jb	short loc_B665
		cmp	dx, [bp+arg_4]
		ja	short loc_B66B
		jb	short loc_B611
		cmp	ax, [bp+@@size]
		jnb	short loc_B66B

loc_B611:
		sub	[bp+@@size], ax
		sbb	[bp+arg_4], dx
		mov	cx, dx
		xchg	ax, dx
		mov	ax, 4200h
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		jb	short loc_B665
		push	ss
		pop	es
		lea	di, [bp+var_84]
		xor	ax, ax
		mov	cx, 40h	; '@'
		cld
		rep stosw

loc_B62F:
		mov	cx, 80h	; 'Ä'
		cmp	[bp+arg_4], 0
		jnz	short loc_B640
		cmp	cx, [bp+@@size]
		jbe	short loc_B640
		mov	cx, [bp+@@size]

loc_B640:
		sub	[bp+@@size], cx
		sbb	[bp+arg_4], 0
		lea	dx, [bp+var_84]
		push	ds
		push	ss
		pop	ds
		push	cx
		mov	ah, 40h
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	cx
		pop	ds
		jb	short loc_B665
		cmp	ax, cx
		jnz	short loc_B665
		mov	ax, [bp+@@size]
		or	ax, [bp+arg_4]
		jnz	short loc_B62F
		jmp	short loc_B683
; ---------------------------------------------------------------------------

loc_B665:
		push	ax
		call	__IOERROR
		jmp	short loc_B69E
; ---------------------------------------------------------------------------

loc_B66B:
		mov	ax, 4200h
		mov	bx, [bp+@@handle]
		mov	dx, [bp+@@size]
		mov	cx, [bp+arg_4]
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		jb	short loc_B665
		mov	ah, 40h	; '@'
		sub	cx, cx
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		jb	short loc_B665

loc_B683:
		mov	dx, [bp+var_4]
		mov	cx, [bp+var_2]
		xchg	ax, si
		mov	ax, 4200h
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from beginning of	file
		jb	short loc_B665
		mov	bx, [bp+@@handle]
		add	bx, bx
		or	word ptr [bx+1966h], 1000h
		xor	ax, ax

loc_B69E:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_chsize		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _rtl_close(int handle)
__rtl_close	proc near

@@handle		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 3Eh	; '>'
		mov	bx, [bp+@@handle]
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		jb	short loc_B6BE
		add	bx, bx
		mov	word ptr [bx+1966h], 0
		xor	ax, ax
		jmp	short loc_B6C2
; ---------------------------------------------------------------------------

loc_B6BE:
		push	ax
		call	__IOERROR

loc_B6C2:
		pop	di
		pop	si
		pop	bp
		retn
__rtl_close	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _close(int handle)
__close		proc near

@@handle		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+@@handle]	; handle
		call	__rtl_close
		pop	cx
		pop	di
		pop	si
		pop	bp
		retn
__close		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_B6D6	proc near

var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= byte ptr  6
arg_4		= word ptr  8
arg_6		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		push	ds
		mov	ah, [bp+arg_2]
		mov	cx, [bp+arg_4]
		lds	dx, [bp+arg_6]
		int	21h		; DOS -
		pop	ds
		jb	short loc_B701
		mov	[bp+var_2], ax
		mov	bx, [bp+var_2]
		add	bx, bx
		mov	ax, [bp+arg_0]
		mov	[bx+1966h], ax
		mov	ax, [bp+var_2]
		jmp	short loc_B705
; ---------------------------------------------------------------------------

loc_B701:
		push	ax
		call	__IOERROR

loc_B705:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ah
sub_B6D6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _rtl_creat(const char *path, int attribute)
__rtl_creat	proc near

@@path		= word ptr  4
arg_2		= word ptr  6
attribute	= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+arg_2]
		push	[bp+@@path]
		push	[bp+attribute]
		mov	al, 3Ch	; '<'
		push	ax
		mov	ax, 8004h
		push	ax
		call	sub_B6D6
		pop	di
		pop	si
		pop	bp
		retn
__rtl_creat	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _creat(const char	*path, int attribute)
__creat		proc near

@@path		= dword	ptr  4
attribute	= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+attribute]	; attribute
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	__rtl_creat
		add	sp, 6
		pop	di
		pop	si
		pop	bp
		retn
__creat		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl creattemp(char *path, int	amode)
_creattemp	proc near

@@path		= dword	ptr  4
amode		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	[bp+amode]
		mov	al, 5Ah	; 'Z'
		push	ax
		mov	ax, word_FACA
		or	ax, 4
		push	ax
		call	sub_B6D6
		pop	di
		pop	si
		pop	bp
		retn
_creattemp	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl creatnew(const char *path, int mode)
_creatnew	proc near

@@path		= dword	ptr  4
mode		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path]
		push	[bp+mode]
		mov	al, 5Bh	; '['
		push	ax
		mov	ax, word_FACA
		or	ax, 4
		push	ax
		call	sub_B6D6
		pop	di
		pop	si
		pop	bp
		retn
_creatnew	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl findfirst(const char *path, struct ffblk *ffblk, int attrib)
_findfirst	proc near

@@path		= dword	ptr  4
@@ffblk		= dword	ptr  8
attrib		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	ah, 2Fh
		int	21h		; DOS -	GET DISK TRANSFER AREA ADDRESS
					; Return: ES:BX	-> DTA
		push	es
		push	bx
		mov	ah, 1Ah
		lds	dx, [bp+@@ffblk]
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		mov	ah, 4Eh	; 'N'
		mov	cx, [bp+attrib]
		lds	dx, [bp+@@path]
		int	21h		; DOS -	2+ - FIND FIRST	ASCIZ (FINDFIRST)
					; CX = search attributes
					; DS:DX	-> ASCIZ filespec
					; (drive, path,	and wildcards allowed)
		pushf
		pop	cx
		xchg	ax, bx
		mov	ah, 1Ah
		pop	dx
		pop	ds
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		push	cx
		popf
		pop	ds
		jb	short loc_B7AE
		xor	ax, ax
		jmp	short loc_B7B2
; ---------------------------------------------------------------------------

loc_B7AE:
		push	bx
		call	__IOERROR

loc_B7B2:
		pop	di
		pop	si
		pop	bp
		retn
_findfirst	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl findnext(struct ffblk *ffblk)
_findnext	proc near

@@ffblk		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	ah, 2Fh
		int	21h		; DOS -	GET DISK TRANSFER AREA ADDRESS
					; Return: ES:BX	-> DTA
		push	es
		push	bx
		mov	ah, 1Ah
		lds	dx, [bp+@@ffblk]
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		mov	ah, 4Fh
		int	21h		; DOS -	2+ - FIND NEXT ASCIZ (FINDNEXT)
					; [DTA]	= data block from
					; last AH = 4Eh/4Fh call
		pushf
		pop	cx
		xchg	ax, bx
		mov	ah, 1Ah
		pop	dx
		pop	ds
		int	21h		; DOS -	SET DISK TRANSFER AREA ADDRESS
					; DS:DX	-> disk	transfer buffer
		push	cx
		popf
		pop	ds
		jb	short loc_B7DF
		xor	ax, ax
		jmp	short loc_B7E3
; ---------------------------------------------------------------------------

loc_B7DF:
		push	bx
		call	__IOERROR

loc_B7E3:
		pop	di
		pop	si
		pop	bp
		retn
_findnext	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	_getdcwd(int drive, char *buf, int len)
__getdcwd	proc near

@@src		= byte ptr -48h
var_47		= byte ptr -47h
var_46		= byte ptr -46h
var_45		= byte ptr -45h
var_2		= word ptr -2
drive		= word ptr  4
@@dest		= dword	ptr  6
@@size		= word ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 48h
		push	si
		push	di
		mov	ax, [bp+drive]
		mov	[bp+var_2], ax
		or	ax, ax
		jnz	short loc_B803
		mov	ah, 19h
		int	21h		; DOS -	GET DEFAULT DISK NUMBER
		mov	ah, 0
		inc	ax
		mov	[bp+var_2], ax

loc_B803:
		mov	al, byte ptr [bp+var_2]
		add	al, 40h	; '@'
		mov	[bp+@@src], al
		mov	[bp+var_47], 3Ah ; ':'
		mov	[bp+var_46], 5Ch ; '\'
		push	ds
		mov	ax, ss
		mov	ds, ax
		lea	si, [bp+var_45]
		mov	ah, 47h	; 'G'
		mov	dl, byte ptr [bp+var_2]
		int	21h		; DOS -	2+ - GET CURRENT DIRECTORY
					; DL = drive (0=default, 1=A, etc.)
					; DS:SI	points to 64-byte buffer area
		pop	ds
		jb	short loc_B85B
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; s
		call	_strlen
		pop	cx
		pop	cx
		cmp	ax, [bp+@@size]
		jb	short loc_B83C
		mov	word_E17E, 22h ; '"'
		jmp	short loc_B85B
; ---------------------------------------------------------------------------

loc_B83C:
		mov	ax, word ptr [bp+@@dest]
		or	ax, word ptr [bp+@@dest+2]
		jnz	short loc_B861
		push	[bp+@@size]	; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		or	ax, dx
		jnz	short loc_B861
		mov	word_E17E, 8

loc_B85B:
		xor	dx, dx
		xor	ax, ax
		jmp	short loc_B878
; ---------------------------------------------------------------------------

loc_B861:
		push	ss
		lea	ax, [bp+@@src]
		push	ax		; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_strcpy
		add	sp, 8
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]

loc_B878:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__getdcwd	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_B87E	proc near

arg_0		= word ptr  4
arg_2		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	cx, [bp+arg_0]
		mov	ah, 3Ch	; '<'
		lds	dx, [bp+arg_2]
		int	21h		; DOS -	2+ - CREATE A FILE WITH	HANDLE (CREAT)
					; CX = attributes for file
					; DS:DX	-> ASCIZ filename (may include drive and path)
		pop	ds
		jb	short loc_B893
		jmp	short loc_B897
; ---------------------------------------------------------------------------

loc_B893:
		push	ax
		call	__IOERROR

loc_B897:
		pop	di
		pop	si
		pop	bp
		retn	6
sub_B87E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_B89D	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	bx, [bp+arg_0]
		sub	cx, cx
		sub	dx, dx
		mov	ah, 40h
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	di
		pop	si
		pop	bp
		retn	2
sub_B89D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int open(const char *path, int access, ...)
_open		proc near

@@handle		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
pathname	= dword	ptr  4
oflags		= word ptr  8
arg_6		= word ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	si
		push	di
		test	[bp+oflags], 0C000h
		jnz	short loc_B8CB
		mov	ax, word_FACA
		and	ax, 0C000h
		or	[bp+oflags], ax

loc_B8CB:
		mov	ax, word_E17E
		mov	[bp+var_6], ax
		xor	ax, ax
		push	ax		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod
		add	sp, 6
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 0FFFFh
		jnz	short loc_B8F6
		cmp	word_FACE, 2
		jz	short loc_B8F6
		push	word_FACE
		jmp	short loc_B953
; ---------------------------------------------------------------------------

loc_B8F6:
		mov	ax, [bp+var_6]
		mov	word_E17E, ax
		test	byte ptr [bp+oflags+1],	1
		jz	short loc_B97B
		mov	ax, word_FACC
		and	[bp+arg_6], ax
		mov	ax, [bp+arg_6]
		test	ax, 180h
		jnz	short loc_B917
		mov	ax, 1
		push	ax
		call	__IOERROR

loc_B917:
		cmp	[bp+var_2], 0FFFFh
		jnz	short loc_B949
		test	byte ptr [bp+arg_6], 80h
		jz	short loc_B927
		xor	ax, ax
		jmp	short loc_B92A
; ---------------------------------------------------------------------------

loc_B927:
		mov	ax, 1

loc_B92A:
		mov	[bp+var_2], ax
		test	byte ptr [bp+oflags], 0F0h
		jz	short loc_B962
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname]
		xor	ax, ax
		push	ax
		call	sub_B87E
		mov	[bp+@@handle], ax
		or	ax, ax
		jge	short loc_B959
		jmp	loc_BA33
; ---------------------------------------------------------------------------

loc_B949:
		test	byte ptr [bp+oflags+1],	4
		jz	short loc_B97B
		mov	ax, 50h	; 'P'
		push	ax

loc_B953:
		call	__IOERROR
		jmp	loc_BA36
; ---------------------------------------------------------------------------

loc_B959:
		push	[bp+@@handle]	; handle
		call	__rtl_close
		pop	cx
		jmp	short loc_B97B
; ---------------------------------------------------------------------------

loc_B962:
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname]
		push	[bp+var_2]
		call	sub_B87E
		mov	[bp+@@handle], ax
		or	ax, ax
		jl	short loc_B978
		jmp	loc_B9F7
; ---------------------------------------------------------------------------

loc_B978:
		jmp	loc_BA33
; ---------------------------------------------------------------------------

loc_B97B:
		push	[bp+oflags]	; oflags
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; path
		call	__rtl_open
		add	sp, 6
		mov	[bp+@@handle], ax
		or	ax, ax
		jl	short loc_B9F7
		xor	ax, ax
		push	ax		; func
		push	[bp+@@handle]	; handle
		call	_ioctl
		pop	cx
		pop	cx
		mov	[bp+var_4], ax
		test	al, 80h
		jz	short loc_B9C8
		or	[bp+oflags], 2000h
		test	[bp+oflags], 8000h
		jz	short loc_B9D4
		and	ax, 0FFh
		or	ax, 20h
		xor	dx, dx
		push	dx
		push	ax
		mov	ax, 1
		push	ax		; func
		push	[bp+@@handle]	; handle
		call	_ioctl
		add	sp, 8
		jmp	short loc_B9D4
; ---------------------------------------------------------------------------

loc_B9C8:
		test	byte ptr [bp+oflags+1],	2
		jz	short loc_B9D4
		push	[bp+@@handle]
		call	sub_B89D

loc_B9D4:
		test	byte ptr [bp+var_2], 1
		jz	short loc_B9F7
		test	byte ptr [bp+oflags+1],	1
		jz	short loc_B9F7
		test	byte ptr [bp+oflags], 0F0h
		jz	short loc_B9F7
		mov	ax, 1
		push	ax
		push	ax		; func
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__chmod
		add	sp, 8

loc_B9F7:
		cmp	[bp+@@handle], 0
		jl	short loc_BA33
		mov	off_FFA4, 0A0F6h
		test	byte ptr [bp+oflags+1],	3
		jz	short loc_BA0E
		mov	ax, 1000h
		jmp	short loc_BA10
; ---------------------------------------------------------------------------

loc_BA0E:
		xor	ax, ax

loc_BA10:
		mov	dx, [bp+oflags]
		and	dx, 0F8FFh
		or	ax, dx
		push	ax
		test	byte ptr [bp+var_2], 1
		jz	short loc_BA24
		xor	ax, ax
		jmp	short loc_BA27
; ---------------------------------------------------------------------------

loc_BA24:
		mov	ax, 100h

loc_BA27:
		pop	dx
		or	dx, ax
		mov	bx, [bp+@@handle]
		add	bx, bx
		mov	[bx+1966h], dx

loc_BA33:
		mov	ax, [bp+@@handle]

loc_BA36:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_open		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _rtl_open(const char *path, int oflags)
__rtl_open	proc near

var_2		= word ptr -2
@@path		= dword	ptr  4
oflags		= word ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	al, 1
		mov	cx, [bp+oflags]
		test	cx, 2
		jnz	short loc_BA59
		mov	al, 2
		test	cx, 4
		jnz	short loc_BA59
		mov	al, 0

loc_BA59:
		push	ds
		lds	dx, [bp+@@path]
		mov	cl, 0F0h ; ''
		and	cl, byte ptr [bp+oflags]
		or	al, cl
		mov	ah, 3Dh
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read, 1 -	write, 2 - read	& write
		pop	ds
		jb	short loc_BA85
		mov	[bp+var_2], ax
		mov	ax, [bp+oflags]
		and	ax, 0B8FFh
		or	ax, 8000h
		mov	bx, [bp+var_2]
		add	bx, bx
		mov	[bx+1966h], ax
		mov	ax, [bp+var_2]
		jmp	short loc_BA89
; ---------------------------------------------------------------------------

loc_BA85:
		push	ax
		call	__IOERROR

loc_BA89:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__rtl_open	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _open(const char *path, int oflags)
__open		proc near

@@path		= dword	ptr  4
oflags		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+oflags]	; oflags
		push	word ptr [bp+@@path+2]
		push	word ptr [bp+@@path] ; path
		call	__rtl_open
		add	sp, 6
		pop	di
		pop	si
		pop	bp
		retn
__open		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl __read(int handle, void *buf, unsigned int len)
___read		proc near

var_3		= byte ptr -3
var_2		= word ptr -2
@@handle		= word ptr  4
buf		= dword	ptr  6
len		= word ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		mov	ax, [bp+@@handle]
		cmp	ax, __nfile
		jb	short loc_BAC2
		mov	ax, 6
		push	ax
		call	__IOERROR
		jmp	loc_BB6A
; ---------------------------------------------------------------------------

loc_BAC2:
		mov	ax, [bp+len]
		inc	ax
		cmp	ax, 2
		jb	short loc_BAD7
		mov	bx, [bp+@@handle]
		add	bx, bx
		test	byte ptr [bx+1967h], 2
		jz	short loc_BADC

loc_BAD7:
		xor	ax, ax
		jmp	loc_BB6A
; ---------------------------------------------------------------------------

loc_BADC:
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	[bp+@@handle]	; handle
		call	__rtl_read
		add	sp, 8
		mov	[bp+var_2], ax
		inc	ax
		cmp	ax, 2
		jb	short loc_BB03
		mov	bx, [bp+@@handle]
		add	bx, bx
		test	byte ptr [bx+1967h], 40h
		jnz	short loc_BB08

loc_BB03:
		mov	ax, [bp+var_2]
		jmp	short loc_BB6A
; ---------------------------------------------------------------------------

loc_BB08:
		mov	cx, [bp+var_2]
		les	si, [bp+buf]
		mov	di, si
		mov	bx, si
		cld

loc_BB13:
		lods	byte ptr es:[si]
		cmp	al, 1Ah
		jz	short loc_BB47
		cmp	al, 0Dh
		jz	short loc_BB22
		stosb
		loop	loc_BB13
		jmp	short loc_BB3F
; ---------------------------------------------------------------------------

loc_BB22:
		loop	loc_BB13
		push	es
		push	bx
		mov	ax, 1
		push	ax		; len
		lea	ax, [bp+var_3]
		push	ss
		push	ax		; buf
		push	[bp+@@handle]	; handle
		call	__read
		add	sp, 8
		pop	bx
		pop	es
		cld
		mov	al, [bp+var_3]
		stosb

loc_BB3F:
		cmp	di, bx
		jnz	short loc_BB45
		jmp	short loc_BADC
; ---------------------------------------------------------------------------

loc_BB45:
		jmp	short loc_BB67
; ---------------------------------------------------------------------------

loc_BB47:
		push	bx
		mov	ax, 1
		push	ax		; fromwhere
		neg	cx
		sbb	ax, ax
		push	ax
		push	cx		; offset
		push	[bp+@@handle]	; handle
		call	_lseek
		add	sp, 8
		mov	bx, [bp+@@handle]
		add	bx, bx
		or	word ptr [bx+1966h], 200h
		pop	bx

loc_BB67:
		sub	di, bx
		xchg	ax, di

loc_BB6A:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
___read		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _rtl_write(int handle, const void	*buf, unsigned int len)
__rtl_write	proc near

@@handle		= word ptr  4
buf		= dword	ptr  6
len		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	bx, [bp+@@handle]
		add	bx, bx
		test	byte ptr [bx+1966h], 1
		jz	short loc_BB87
		mov	ax, 5
		push	ax
		jmp	short loc_BBA8
; ---------------------------------------------------------------------------

loc_BB87:
		push	ds
		mov	ah, 40h	; '@'
		mov	bx, [bp+@@handle]
		mov	cx, [bp+len]
		lds	dx, [bp+buf]
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		pop	ds
		jb	short loc_BBA7
		push	ax
		mov	bx, [bp+@@handle]
		add	bx, bx
		or	word ptr [bx+1966h], 1000h
		pop	ax
		jmp	short loc_BBAB
; ---------------------------------------------------------------------------

loc_BBA7:
		push	ax

loc_BBA8:
		call	__IOERROR

loc_BBAB:
		pop	di
		pop	si
		pop	bp
		retn
__rtl_write	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _write(int handle, const void *buf, unsigned int len)
__write		proc near

@@handle		= word ptr  4
buf		= dword	ptr  6
len		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+len]	; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		push	[bp+@@handle]	; handle
		call	__rtl_write
		add	sp, 8
		pop	di
		pop	si
		pop	bp
		retn
__write		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int _chmod_0(const char *pathname, int func, ...)
__chmod_0	proc near

pathname	= dword	ptr  4
func		= byte ptr  8
arg_6		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		mov	cx, [bp+arg_6]
		mov	ah, 43h	; 'C'
		mov	al, [bp+func]
		lds	dx, [bp+pathname]
		int	21h		; DOS -
		pop	ds
		jb	short loc_BBE3
		xchg	ax, cx
		jmp	short loc_BBE7
; ---------------------------------------------------------------------------

loc_BBE3:
		push	ax
		call	__IOERROR

loc_BBE7:
		pop	di
		pop	si
		pop	bp
		retn
__chmod_0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int ioctl(int	handle,	int func, ...)
_ioctl		proc near

@@handle		= word ptr  4
func		= word ptr  6
arg_4		= dword	ptr  8
arg_8		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		lds	dx, [bp+arg_4]
		mov	ah, 44h	; 'D'
		mov	al, byte ptr [bp+func]
		mov	bx, [bp+@@handle]
		mov	cx, [bp+arg_8]
		int	21h		; DOS -	2+ - IOCTL -
		pop	ds
		jb	short loc_BC10
		cmp	[bp+func], 0
		jnz	short loc_BC0E
		mov	ax, dx
		jmp	short loc_BC14
; ---------------------------------------------------------------------------

loc_BC0E:
		jmp	short loc_BC14
; ---------------------------------------------------------------------------

loc_BC10:
		push	ax
		call	__IOERROR

loc_BC14:
		pop	di
		pop	si
		pop	bp
		retn
_ioctl		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_BC18	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, [bp+arg_0]
		cmp	dx, 0FFFFh
		jnz	short loc_BC2A
		mov	ax, 0FFFFh
		jmp	short loc_BC44
; ---------------------------------------------------------------------------

loc_BC2A:
		mov	al, dl
		mov	ah, 0
		mov	bx, ax
		test	byte ptr [bx+1D69h], 4
		jz	short loc_BC40
		mov	al, dl
		mov	ah, 0
		add	ax, 20h	; ' '
		jmp	short loc_BC44
; ---------------------------------------------------------------------------

loc_BC40:
		mov	al, dl
		mov	ah, 0

loc_BC44:
		pop	di
		pop	si
		pop	bp
		retn
sub_BC18	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_BC48	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	dx, [bp+arg_0]
		cmp	dx, 0FFFFh
		jnz	short loc_BC5A
		mov	ax, 0FFFFh
		jmp	short loc_BC74
; ---------------------------------------------------------------------------

loc_BC5A:
		mov	al, dl
		mov	ah, 0
		mov	bx, ax
		test	byte ptr [bx+1D69h], 8
		jz	short loc_BC70
		mov	al, dl
		mov	ah, 0
		add	ax, 0FFE0h
		jmp	short loc_BC74
; ---------------------------------------------------------------------------

loc_BC70:
		mov	al, dl
		mov	ah, 0

loc_BC74:
		pop	di
		pop	si
		pop	bp
		retn
sub_BC48	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strlwr(char *s)
_strlwr		proc near

@@s		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		push	ds
		lds	si, [bp+@@s]
		mov	dx, si
		jmp	short loc_BC91
; ---------------------------------------------------------------------------

loc_BC86:
		sub	al, 41h	; 'A'
		cmp	al, 19h
		ja	short loc_BC91
		add	al, 61h	; 'a'
		mov	[si-1],	al

loc_BC91:
		lodsb
		and	al, al
		jnz	short loc_BC86
		xchg	ax, dx
		mov	dx, ds
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn
_strlwr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	strupr(char *s)
_strupr		proc near

@@s		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		cld
		push	ds
		lds	si, [bp+@@s]
		mov	dx, si
		jmp	short loc_BCB7
; ---------------------------------------------------------------------------

loc_BCAC:
		sub	al, 61h	; 'a'
		cmp	al, 19h
		ja	short loc_BCB7
		add	al, 41h	; 'A'
		mov	[si-1],	al

loc_BCB7:
		lodsb
		and	al, al
		jnz	short loc_BCAC
		xchg	ax, dx
		mov	dx, ds
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn
_strupr		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_LDIV@		proc far
		pop	cx
		push	cs
		push	cx

LDIV@:
		xor	cx, cx
		jmp	short loc_BCE1
N_LDIV@		endp

; ---------------------------------------------------------------------------

N_LUDIV@:
		pop	cx
		push	cs
		push	cx

F_LUDIV@:
		mov	cx, 1
		jmp	short loc_BCE1

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_LMOD@		proc far
		pop	cx
		push	cs
		push	cx

F_LMOD@:
		mov	cx, 2
		jmp	short loc_BCE1
; ---------------------------------------------------------------------------

N_LUMOD@:
		pop	cx
		push	cs
		push	cx

LUMOD@:
		mov	cx, 3

loc_BCE1:
		push	bp
		push	si
		push	di
		mov	bp, sp
		mov	di, cx
		mov	ax, [bp+0Ah]
		mov	dx, [bp+0Ch]
		mov	bx, [bp+0Eh]
		mov	cx, [bp+10h]
		or	cx, cx
		jnz	short loc_BD00
		or	dx, dx
		jz	short loc_BD65
		or	bx, bx
		jz	short loc_BD65

loc_BD00:
		test	di, 1
		jnz	short loc_BD22
		or	dx, dx
		jns	short loc_BD14
		neg	dx
		neg	ax
		sbb	dx, 0
		or	di, 0Ch

loc_BD14:
		or	cx, cx
		jns	short loc_BD22
		neg	cx
		neg	bx
		sbb	cx, 0
		xor	di, 4

loc_BD22:
		mov	bp, cx
		mov	cx, 20h	; ' '
		push	di
		xor	di, di
		xor	si, si

loc_BD2C:
		shl	ax, 1
		rcl	dx, 1
		rcl	si, 1
		rcl	di, 1
		cmp	di, bp
		jb	short loc_BD43
		ja	short loc_BD3E
		cmp	si, bx
		jb	short loc_BD43

loc_BD3E:
		sub	si, bx
		sbb	di, bp
		inc	ax

loc_BD43:
		loop	loc_BD2C
		pop	bx
		test	bx, 2
		jz	short loc_BD52
		mov	ax, si
		mov	dx, di
		shr	bx, 1

loc_BD52:
		test	bx, 4
		jz	short loc_BD5F
		neg	dx
		neg	ax
		sbb	dx, 0

loc_BD5F:
		pop	di
		pop	si
		pop	bp
		retf	8
; ---------------------------------------------------------------------------

loc_BD65:
		div	bx
		test	di, 2
		jz	short loc_BD6E
		xchg	ax, dx

loc_BD6E:
		xor	dx, dx
		jmp	short loc_BD5F
N_LMOD@		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_LXLSH@	proc far
		pop	bx
		push	cs
		push	bx

LXLSH@:
		cmp	cl, 10h
		jnb	short loc_BD8A
		mov	bx, ax
		shl	ax, cl
		shl	dx, cl
		neg	cl
		add	cl, 10h
		shr	bx, cl
		or	dx, bx
		retf
; ---------------------------------------------------------------------------

loc_BD8A:
		sub	cl, 10h
		xchg	ax, dx
		xor	ax, ax
		shl	dx, cl
		retf
N_LXLSH@	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_LXRSH@	proc far
		pop	bx
		push	cs
		push	bx

LXRSH@:
		cmp	cl, 10h
		jnb	short loc_BDAB
		mov	bx, dx
		shr	ax, cl
		sar	dx, cl
		neg	cl
		add	cl, 10h
		shl	bx, cl
		or	ax, bx
		retf
; ---------------------------------------------------------------------------

loc_BDAB:
		sub	cl, 10h
		xchg	ax, dx
		cwd
		sar	ax, cl
		retf
N_LXRSH@	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_LXURSH@	proc far
		pop	bx
		push	cs
		push	bx

LXURSH@:
		cmp	cl, 10h
		jnb	short loc_BDCB
		mov	bx, dx
		shr	ax, cl
		shr	dx, cl
		neg	cl
		add	cl, 10h
		shl	bx, cl
		or	ax, bx
		retf
; ---------------------------------------------------------------------------

loc_BDCB:
		sub	cl, 10h
		xchg	ax, dx
		xor	dx, dx
		shr	ax, cl
		retf
N_LXURSH@	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_LXMUL@	proc near
		push	si
		xchg	ax, si
		xchg	ax, dx
		test	ax, ax
		jz	short loc_BDDD
		mul	bx

loc_BDDD:
		jcxz	short loc_BDE4
		xchg	ax, cx
		mul	si
		add	ax, cx

loc_BDE4:
		xchg	ax, si
		mul	bx
		add	dx, si
		pop	si
		retn
N_LXMUL@	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__LONGTOA	proc near

var_22		= byte ptr -22h
arg_0		= byte ptr  4
arg_2		= byte ptr  6
arg_4		= word ptr  8
arg_6		= dword	ptr  0Ah
arg_A		= word ptr  0Eh
arg_C		= word ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 22h
		push	si
		push	di
		push	es
		les	di, [bp+arg_6]
		mov	bx, [bp+arg_4]
		cmp	bx, 24h	; '$'
		ja	short loc_BE5B
		cmp	bl, 2
		jb	short loc_BE5B
		mov	ax, [bp+arg_A]
		mov	cx, [bp+arg_C]
		or	cx, cx
		jge	short loc_BE20
		cmp	[bp+arg_2], 0
		jz	short loc_BE20
		mov	byte ptr es:[di], 2Dh ;	'-'
		inc	di
		neg	cx
		neg	ax
		sbb	cx, 0

loc_BE20:
		lea	si, [bp+var_22]
		jcxz	short loc_BE35

loc_BE25:
		xchg	ax, cx
		sub	dx, dx
		div	bx
		xchg	ax, cx
		div	bx
		mov	ss:[si], dl
		inc	si
		jcxz	short loc_BE3D
		jmp	short loc_BE25
; ---------------------------------------------------------------------------

loc_BE35:
		sub	dx, dx
		div	bx
		mov	ss:[si], dl
		inc	si

loc_BE3D:
		or	ax, ax
		jnz	short loc_BE35
		lea	cx, [bp+var_22]
		neg	cx
		add	cx, si
		cld

loc_BE49:
		dec	si
		mov	al, ss:[si]
		sub	al, 0Ah
		jnb	short loc_BE55
		add	al, 3Ah	; ':'
		jmp	short loc_BE58
; ---------------------------------------------------------------------------

loc_BE55:
		add	al, [bp+arg_0]

loc_BE58:
		stosb
		loop	loc_BE49

loc_BE5B:
		mov	al, 0
		stosb
		pop	es
		mov	dx, word ptr [bp+arg_6+2]
		mov	ax, word ptr [bp+arg_6]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Eh
__LONGTOA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__UTOA		proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	ax, ax
		push	ax
		push	[bp+arg_4]
		push	[bp+arg_2]
		push	[bp+arg_0]
		mov	ax, 0Ah
		push	ax
		mov	al, 0
		push	ax
		mov	al, 61h	; 'a'
		push	ax
		call	__LONGTOA
		pop	di
		pop	si
		pop	bp
		retn	6
__UTOA		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_BE91	proc near

arg_0		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	es
		push	bp
		les	si, [bp+arg_0]
		cld
		sub	ax, ax
		cwd
		mov	cx, 0Ah
		mov	bh, 0
		mov	di, 1D69h

loc_BEA7:
		mov	bl, es:[si]
		inc	si
		test	byte ptr [bx+di], 1
		jnz	short loc_BEA7
		mov	bp, 0
		cmp	bl, 2Bh	; '+'
		jz	short loc_BEBE
		cmp	bl, 2Dh	; '-'
		jnz	short loc_BEC2
		inc	bp

loc_BEBE:
		mov	bl, es:[si]
		inc	si

loc_BEC2:
		cmp	bl, 39h	; '9'
		ja	short loc_BEF6
		sub	bl, 30h	; '0'
		jb	short loc_BEF6
		mul	cx
		add	ax, bx
		adc	dl, dh
		jz	short loc_BEBE
		jmp	short loc_BEE8
; ---------------------------------------------------------------------------

loc_BED6:
		mov	di, dx
		mov	cx, 0Ah
		mul	cx
		xchg	ax, di
		xchg	dx, cx
		mul	dx
		xchg	ax, dx
		xchg	ax, di
		add	ax, bx
		adc	dx, cx

loc_BEE8:
		mov	bl, es:[si]
		inc	si
		cmp	bl, 39h	; '9'
		ja	short loc_BEF6
		sub	bl, 30h	; '0'
		jnb	short loc_BED6

loc_BEF6:
		dec	bp
		jl	short loc_BF00
		neg	dx
		neg	ax
		sbb	dx, 0

loc_BF00:
		pop	bp
		pop	es
		pop	di
		pop	si
		pop	bp
		retn
sub_BE91	endp

; ---------------------------------------------------------------------------
		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+6]
		push	word ptr [bp+4]
		call	sub_BE91
		pop	cx
		pop	cx
		pop	di
		pop	si
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; BCC v4.x/5.x DOS runtime
; Attributes: library function noreturn

unknown_libname_1 proc near

		mov	dx, 1E6Ah
		jmp	short loc_BF22
; ---------------------------------------------------------------------------
		mov	dx, 1E6Fh

loc_BF22:
		mov	cx, 5
		mov	ah, 40h	; '@'
		mov	bx, 2
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		mov	cx, 27h	; '''
		mov	dx, 1E74h
		mov	ah, 40h
		int	21h		; DOS -	2+ - WRITE TO FILE WITH	HANDLE
					; BX = file handle, CX = number	of bytes to write, DS:DX -> buffer
		jmp	_abort
unknown_libname_1 endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: thunk

sub_BF39	proc near
		jmp	off_10218	; BCC v4.x/5.x DOS runtime
sub_BF39	endp

; ---------------------------------------------------------------------------
word_BF3D	dw 0
word_BF3F	dw 0
word_BF41	dw 0
word_BF43	dw 0
word_BF45	dw 0
; unsigned __int32 nbytes
nbytes		dw 0

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_BF49	proc near
		cmp	dx, cs:word_BF3D
		jz	short loc_BF87
		mov	ds, dx
		assume ds:nothing
		mov	ds, word ptr ds:2
		assume ds:dseg
		cmp	word_E102, 0
		jz	short loc_BF64
		mov	cs:word_BF3F, ds
		jmp	short loc_BF9C
; ---------------------------------------------------------------------------

loc_BF64:
		mov	ax, ds
		cmp	ax, cs:word_BF3D
		jz	short loc_BF82
		mov	ax, word ptr aNullCheck+4
		mov	cs:word_BF3F, ax
		push	ds
		xor	ax, ax
		push	ax
		call	sub_C01D
		mov	ds, cs:word_BF43
		jmp	short loc_BFA5
; ---------------------------------------------------------------------------

loc_BF82:
		mov	dx, cs:word_BF3D

loc_BF87:
		mov	cs:word_BF3D, 0
		mov	cs:word_BF3F, 0
		mov	cs:word_BF41, 0

loc_BF9C:
		mov	ds, cs:word_BF43
		push	dx
		xor	ax, ax
		push	ax

loc_BFA5:
		call	__brk
		add	sp, 4
		retn
sub_BF49	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_BFAC	proc near
		mov	ds, dx
		push	ds
		mov	es, word_E102
		mov	word_E102, 0
		mov	word ptr aNullCheck+4, es
		cmp	dx, cs:word_BF3D
		jz	short loc_BFF2
		cmp	word ptr es:2, 0
		jnz	short loc_BFF2
		mov	ax, word_E100
		pop	bx
		push	es
		add	es:0, ax
		mov	cx, es
		add	dx, ax
		mov	es, dx
		cmp	word ptr es:2, 0
		jnz	short loc_BFEB
		mov	es:8, cx
		jmp	short loc_BFF5
; ---------------------------------------------------------------------------

loc_BFEB:
		mov	es:2, cx
		jmp	short loc_BFF5
; ---------------------------------------------------------------------------

loc_BFF2:
		call	sub_C046

loc_BFF5:
		pop	es
		mov	ax, es
		add	ax, es:0
		mov	ds, ax
		cmp	word_E102, 0
		jz	short loc_C007
		retn
; ---------------------------------------------------------------------------

loc_C007:
		mov	ax, word_E100
		add	es:0, ax
		mov	ax, es
		mov	bx, ds
		add	bx, word_E100
		mov	es, bx
		mov	es:2, ax
sub_BFAC	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C01D	proc near
		mov	bx, ds
		cmp	bx, word ptr aNullCheck+2
		jz	short loc_C03E
		mov	es, word ptr aNullCheck+2
		mov	ds, word ptr aNullCheck
		mov	word ptr aNullCheck+2, es
		mov	word ptr es:4, ds
		mov	cs:word_BF41, ds
		mov	ds, bx
		retn
; ---------------------------------------------------------------------------

loc_C03E:
		mov	cs:word_BF41, 0
		retn
sub_C01D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C046	proc near
		mov	ax, cs:word_BF41
		or	ax, ax
		jz	short loc_C06F
		mov	bx, ss
		pushf
		cli
		mov	ss, ax
		mov	es, word ptr ss:6
		mov	word ptr ss:6, ds
		mov	word ptr aNullCheck, ss
		mov	ss, bx
		popf
		mov	word ptr es:4, ds
		mov	word ptr aNullCheck+2, es
		retn
; ---------------------------------------------------------------------------

loc_C06F:
		mov	cs:word_BF41, ds
		mov	word ptr aNullCheck, ds
		mov	word ptr aNullCheck+2, ds
		retn
sub_C046	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl farfree(void far	*block)
_farfree	proc near

arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	cs:word_BF43, ds
		mov	dx, [bp+arg_2]
		or	dx, dx
		jz	short loc_C09D
		cmp	dx, cs:word_BF3F
		jnz	short loc_C09A
		call	sub_BF49
		jmp	short loc_C09D
; ---------------------------------------------------------------------------

loc_C09A:
		call	sub_BFAC

loc_C09D:
		mov	ds, cs:word_BF43
		pop	di
		pop	si
		pop	bp
		retn
_farfree	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C0A6	proc near
		push	ax
		mov	ds, cs:word_BF43
		xor	ax, ax
		push	ax
		push	ax
		call	__sbrk
		add	sp, 4
		and	ax, 0Fh
		jz	short loc_C0CF
		mov	dx, 10h
		sub	dx, ax
		xor	ax, ax
		mov	ds, cs:word_BF43
		push	ax
		push	dx
		call	__sbrk
		add	sp, 4

loc_C0CF:
		pop	ax
		push	ax
		xor	bx, bx
		mov	bl, ah
		mov	cl, 4
		shr	bx, cl
		shl	ax, cl
		mov	ds, cs:word_BF43
		push	bx
		push	ax
		call	__sbrk
		add	sp, 4
		pop	bx
		cmp	ax, 0FFFFh
		jz	short loc_C106
		mov	cs:word_BF3D, dx
		mov	cs:word_BF3F, dx
		mov	ds, dx
		mov	word_E100, bx
		mov	word_E102, dx
		mov	ax, 4
		retn
; ---------------------------------------------------------------------------

loc_C106:
		xor	ax, ax
		cwd
		retn
sub_C0A6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C10A	proc near
		push	ax
		xor	bx, bx
		mov	bl, ah
		mov	cl, 4
		shr	bx, cl
		shl	ax, cl
		mov	ds, cs:word_BF43
		push	bx
		push	ax
		call	__sbrk
		add	sp, 4
		pop	bx
		cmp	ax, 0FFFFh
		jz	short loc_C160
		and	ax, 0Fh
		jnz	short loc_C145

loc_C12D:
		mov	cx, cs:word_BF3F
		mov	cs:word_BF3F, dx
		mov	ds, dx
		mov	word_E100, bx
		mov	word_E102, cx
		mov	ax, 4
		retn
; ---------------------------------------------------------------------------

loc_C145:
		push	bx
		push	dx
		neg	ax
		add	ax, 10h
		xor	bx, bx
		push	bx
		push	ax
		call	__sbrk
		add	sp, 4
		pop	dx
		pop	bx
		cmp	ax, 0FFFFh
		jz	short loc_C160
		inc	dx
		jmp	short loc_C12D
; ---------------------------------------------------------------------------

loc_C160:
		xor	ax, ax
		cwd
		retn
sub_C10A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C164	proc near
		mov	bx, dx
		sub	word_E100, ax
		add	dx, word_E100
		mov	ds, dx
		mov	word_E100, ax
		mov	word_E102, bx
		mov	bx, dx
		add	bx, word_E100
		mov	ds, bx
		mov	word_E102, dx
		mov	ax, 4
		retn
sub_C164	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	malloc(size_t size)
_malloc		proc near

@@size		= word ptr  4

		push	bp
		mov	bp, sp
		xor	dx, dx
		mov	ax, [bp+@@size]
		jmp	short loc_C19A
_malloc		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void far *__cdecl farmalloc(unsigned __int32 nbytes)
_farmalloc	proc near

@@nbytes		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_2]
		mov	ax, [bp+@@nbytes]

loc_C19A:
		mov	cx, ax
		or	cx, dx
		push	si
		push	di
		mov	cs:word_BF43, ds
		jz	short loc_C205
		add	ax, 13h
		adc	dx, 0
		jb	short loc_C1F0
		test	dx, 0FFF0h
		jnz	short loc_C1F0
		mov	cl, 4
		shr	ax, cl
		shl	dx, cl
		or	ah, dl
		mov	dx, cs:word_BF3D
		or	dx, dx
		jz	short loc_C1E6
		mov	dx, cs:word_BF41
		or	dx, dx
		jz	short loc_C1E1
		mov	bx, dx

loc_C1D1:
		mov	ds, dx
		cmp	word_E100, ax
		jnb	short loc_C1F5
		mov	dx, word ptr aNullCheck+2
		cmp	dx, bx
		jnz	short loc_C1D1

loc_C1E1:
		call	sub_C10A
		jmp	short loc_C205
; ---------------------------------------------------------------------------

loc_C1E6:
		call	sub_C0A6
		jmp	short loc_C205
; ---------------------------------------------------------------------------

loc_C1EB:
		call	sub_C164
		jmp	short loc_C205
; ---------------------------------------------------------------------------

loc_C1F0:
		xor	ax, ax
		cwd
		jmp	short loc_C205
; ---------------------------------------------------------------------------

loc_C1F5:
		ja	short loc_C1EB
		call	sub_C01D
		mov	bx, word ptr aNullCheck+4
		mov	word_E102, bx
		mov	ax, offset aNullCheck

loc_C205:
		mov	ds, cs:word_BF43
		pop	di
		pop	si
		pop	bp
		retn
_farmalloc	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C20E	proc near
		push	bx
		mov	si, cs:word_BF45
		push	si
		mov	si, cs:nbytes
		push	si		; nbytes
		call	_farmalloc
		add	sp, 4
		or	dx, dx
		jnz	short loc_C227
		pop	bx
		retn
; ---------------------------------------------------------------------------

loc_C227:
		pop	ds
		mov	es, dx
		push	es
		push	ds
		push	bx		; block
		mov	dx, word_E100
		cld
		dec	dx
		mov	di, 4
		mov	si, di
		mov	cx, 6
		rep movsw
		or	dx, dx
		jz	short loc_C278
		mov	ax, es
		inc	ax
		mov	es, ax
		assume es:seg000
		mov	ax, ds
		inc	ax
		mov	ds, ax
		assume ds:nothing

loc_C24B:
		xor	di, di
		mov	si, di
		mov	cx, dx
		cmp	cx, 1000h
		jbe	short loc_C25A
		mov	cx, 1000h

loc_C25A:
		shl	cx, 1
		shl	cx, 1
		shl	cx, 1
		rep movsw
		sub	dx, 1000h
		jbe	short loc_C278
		mov	ax, es
		add	ax, 1000h
		mov	es, ax
		assume es:nothing
		mov	ax, ds
		add	ax, 1000h
		mov	ds, ax
		assume ds:nothing
		jmp	short loc_C24B
; ---------------------------------------------------------------------------

loc_C278:
		mov	ds, cs:word_BF43
		assume ds:dseg
		call	_farfree
		add	sp, 4
		pop	dx
		mov	ax, 4
		retn
sub_C20E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; int __fastcall sub_C288(void far *block)
sub_C288	proc near
		cmp	bx, cs:word_BF3F
		jz	short loc_C2D3
		mov	di, bx
		add	di, ax
		mov	es, di
		assume es:nothing
		mov	si, cx
		sub	si, ax
		mov	es:0, si
		mov	es:2, bx
		push	es
		push	ax		; block
		mov	es, bx
		mov	es:0, ax
		mov	dx, bx
		add	dx, cx
		mov	es, dx
		cmp	word ptr es:2, 0
		jz	short loc_C2C0
		mov	es:2, di
		jmp	short loc_C2C5
; ---------------------------------------------------------------------------

loc_C2C0:
		mov	es:8, di

loc_C2C5:
		mov	si, bx
		call	_farfree
		add	sp, 4
		mov	dx, si
		mov	ax, 4
		retn
; ---------------------------------------------------------------------------

loc_C2D3:
		push	bx
		mov	es, bx
		mov	es:0, ax
		add	bx, ax
		push	bx
		xor	ax, ax
		push	ax
		call	__brk
		add	sp, 4
		pop	dx
		mov	ax, 4
		retn
sub_C288	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	realloc(void *block, size_t size)
_realloc	proc near

arg_2		= word ptr  6
block		= dword	ptr  8

		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	short loc_C2F8
; ---------------------------------------------------------------------------

; void far *__cdecl farrealloc(void far	*oldblock, unsigned __int32 nbytes)
_farrealloc:
		push	bp
		mov	bp, sp
		mov	dx, word ptr [bp+block+2]

loc_C2F8:
		mov	ax, word ptr [bp+block]
		mov	bx, [bp+arg_2]
		push	si
		push	di
		mov	cs:word_BF43, ds
		mov	cs:word_BF45, dx
		mov	cs:nbytes, ax
		or	bx, bx
		jz	short loc_C34C
		mov	cx, ax
		or	cx, dx
		jz	short loc_C356
		add	ax, 13h
		adc	dx, 0
		jb	short loc_C35E
		test	dx, 0FFF0h
		jnz	short loc_C35E
		mov	cl, 4
		shr	ax, cl
		shl	dx, cl
		or	ah, dl
		mov	es, bx
		mov	cx, es:0
		cmp	cx, ax
		jb	short loc_C347
		ja	short loc_C342
		mov	dx, bx
		mov	ax, 4		; block
		jmp	short loc_C361
; ---------------------------------------------------------------------------

loc_C342:
		call	sub_C288
		jmp	short loc_C361
; ---------------------------------------------------------------------------

loc_C347:
		call	sub_C20E
		jmp	short loc_C361
; ---------------------------------------------------------------------------

loc_C34C:
		push	dx
		push	ax		; nbytes
		call	_farmalloc
		add	sp, 4
		jmp	short loc_C361
; ---------------------------------------------------------------------------

loc_C356:
		push	bx
		push	ax		; block
		call	_farfree
		add	sp, 4

loc_C35E:
		xor	ax, ax
		cwd

loc_C361:
		mov	ds, cs:word_BF43
		pop	di
		pop	si
		pop	bp
		retn
_realloc	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_C36A	proc near

newsize		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		mov	ax, [bp+arg_2]
		inc	ax
		mov	[bp+newsize], ax
		mov	ax, segx
		sub	[bp+newsize], ax
		mov	ax, [bp+newsize]
		add	ax, 3Fh	; '?'
		mov	cl, 6
		shr	ax, cl
		mov	[bp+newsize], ax
		cmp	ax, word_FF9C
		jz	short loc_C3CC
		mov	cl, 6
		shl	[bp+newsize], cl
		mov	dx, word_E18E
		mov	ax, [bp+newsize]
		add	ax, segx
		cmp	ax, dx
		jbe	short loc_C3AF
		mov	ax, dx
		sub	ax, segx
		mov	[bp+newsize], ax

loc_C3AF:
		push	[bp+newsize]	; newsize
		push	segx		; segx
		call	_setblock
		pop	cx
		pop	cx
		mov	dx, ax
		cmp	dx, 0FFFFh
		jnz	short loc_C3DE
		mov	ax, [bp+newsize]
		mov	cl, 6
		shr	ax, cl
		mov	word_FF9C, ax

loc_C3CC:
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word_E18A, dx
		mov	word_E188, ax
		mov	ax, 1
		jmp	short loc_C3EE
; ---------------------------------------------------------------------------

loc_C3DE:
		mov	ax, segx
		add	ax, dx
		mov	word_E18E, ax
		mov	word_E18C, 0
		xor	ax, ax

loc_C3EE:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	4
sub_C36A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__brk		proc near

arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	cx, word_E186
		mov	bx, word_E184
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		call	N_PCMP@
		jb	short loc_C42E
		mov	cx, word_E18E
		mov	bx, word_E18C
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		call	N_PCMP@
		ja	short loc_C42E
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_C36A
		or	ax, ax
		jnz	short loc_C433

loc_C42E:
		mov	ax, 0FFFFh
		jmp	short loc_C435
; ---------------------------------------------------------------------------

loc_C433:
		xor	ax, ax

loc_C435:
		pop	di
		pop	si
		pop	bp
		retn
__brk		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__sbrk		proc near

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 8
		push	si
		push	di
		mov	ax, word_E18A
		xor	dx, dx
		mov	cl, 4
		call	near ptr N_LXLSH@
		add	ax, word_E188
		adc	dx, 0
		add	ax, [bp+arg_0]
		adc	dx, [bp+arg_2]
		cmp	dx, 0Fh
		jl	short loc_C464
		jg	short loc_C4B4
		cmp	ax, 0FFFFh
		ja	short loc_C4B4

loc_C464:
		mov	dx, word_E18A
		mov	ax, word_E188
		mov	cx, [bp+arg_2]
		mov	bx, [bp+arg_0]
		call	near ptr N_PADD@
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	cx, word_E186
		mov	bx, word_E184
		call	N_PCMP@
		jb	short loc_C4B4
		mov	cx, word_E18E
		mov	bx, word_E18C
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		call	N_PCMP@
		ja	short loc_C4B4
		mov	dx, word_E18A
		mov	ax, word_E188
		mov	[bp+var_6], dx
		mov	[bp+var_8], ax
		push	[bp+var_2]
		push	[bp+var_4]
		call	sub_C36A
		or	ax, ax
		jnz	short loc_C4BC

loc_C4B4:
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		jmp	short loc_C4C2
; ---------------------------------------------------------------------------

loc_C4BC:
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]

loc_C4C2:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__sbrk		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; unsigned __int32 farcoreleft(void)
_farcoreleft	proc near

var_4		= word ptr -4
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		mov	[bp+var_2], 0
		mov	[bp+var_4], 0
		mov	dx, word_E18E
		mov	ax, word_E18C
		mov	cx, word_E18A
		mov	bx, word_E188
		call	near ptr N_PSBP@
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		cmp	[bp+var_2], 0
		jb	short loc_C508
		ja	short loc_C500
		cmp	[bp+var_4], 10h
		jbe	short loc_C508

loc_C500:
		sub	[bp+var_4], 10h
		sbb	[bp+var_2], 0

loc_C508:
		and	[bp+var_4], 0FFF0h
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_farcoreleft	endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl setblock(unsigned	int segx, unsigned int newsize)
_setblock	proc near

@@segx		= word ptr  4
@@newsize		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 4Ah	; 'J'
		mov	bx, [bp+@@newsize]
		mov	es, [bp+@@segx]
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		jb	short loc_C52E
		mov	ax, 0FFFFh
		jmp	short loc_C534
; ---------------------------------------------------------------------------

loc_C52E:
		push	bx
		push	ax
		call	__IOERROR
		pop	ax

loc_C534:
		pop	di
		pop	si
		pop	bp
		retn
_setblock	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_PADD@		proc far
		pop	es
		push	cs
		push	es

F_PADD@:
		or	cx, cx
		jge	short loc_C54B
		not	bx
		not	cx
		add	bx, 1
		adc	cx, 0
		jmp	short loc_C57A
; ---------------------------------------------------------------------------

loc_C54B:
		add	ax, bx
		jnb	short loc_C553
		add	dx, 1000h

loc_C553:
		mov	ch, cl
		mov	cl, 4
		shl	ch, cl
		add	dh, ch
		mov	ch, al
		shr	ax, cl
		add	dx, ax
		mov	al, ch
		and	ax, 0Fh
		retf
; ---------------------------------------------------------------------------

N_PSUB@:
		pop	es
		push	cs
		push	es

F_PSUB@:
		or	cx, cx
		jge	short loc_C57A
		not	bx
		not	cx
		add	bx, 1
		adc	cx, 0
		jmp	short loc_C54B
; ---------------------------------------------------------------------------

loc_C57A:
		sub	ax, bx
		jnb	short loc_C582
		sub	dx, 1000h

loc_C582:
		mov	bh, cl
		mov	cl, 4
		shl	bh, cl
		xor	bl, bl
		sub	dx, bx
		mov	ch, al
		shr	ax, cl
		add	dx, ax
		mov	al, ch
		and	ax, 0Fh
		retf
N_PADD@		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_PSBP@		proc far
		pop	es
		push	cs
		push	es

PSBP@:
		push	di
		mov	di, cx
		mov	ch, dh
		mov	cl, 4
		shl	dx, cl
		shr	ch, cl
		add	dx, ax
		adc	ch, 0
		mov	ax, di
		shl	di, cl
		shr	ah, cl
		add	bx, di
		adc	ah, 0
		sub	dx, bx
		sbb	ch, ah
		mov	al, ch
		cbw
		xchg	ax, dx
		pop	di
		retf
N_PSBP@		endp ; sp-analysis failed


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

N_PCMP@		proc near
		push	cx
		mov	ch, al
		mov	cl, 4
		shr	ax, cl
		add	dx, ax
		mov	al, ch
		mov	ah, bl
		shr	bx, cl
		pop	cx
		add	cx, bx
		mov	bl, ah
		and	ax, 0Fh
		and	bx, 0Fh
		cmp	dx, cx
		jnz	short locret_C5E0
		cmp	ax, bx

locret_C5E0:
		retn
N_PCMP@		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

N_SCOPY@	proc near

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	ds
		lds	si, [bp+arg_0]
		les	di, [bp+arg_4]
		cld
		shr	cx, 1
		rep movsw
		adc	cx, cx
		rep movsb
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn	8
N_SCOPY@	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl __ErrorMessage(char *buf)
___ErrorMessage	proc near

buf		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; s
		call	_strlen
		pop	cx
		pop	cx
		push	ax		; len
		push	word ptr [bp+buf+2]
		push	word ptr [bp+buf] ; buf
		mov	al, stru_F6A4.fd
		cbw
		push	ax		; handle
		call	__rtl_write
		add	sp, 8
		pop	di
		pop	si
		pop	bp
		retn
___ErrorMessage	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

__getswitchar	proc near
		push	si
		push	di
		mov	ax, 3700h
		int	21h		; DOS -	2+ internal - GET SWITCHAR/AVAILDEV
					; Return: AL = FFh unsupported subfunction
					; DL = current switch character
		mov	al, dl
		mov	ah, 0
		pop	di
		pop	si
		retn
__getswitchar	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__setswitchar	proc near

arg_0		= byte ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, 3701h
		mov	dl, [bp+arg_0]
		int	21h		; DOS -	2+ internal - GET SWITCHAR/AVAILDEV
					; DL = new switch character
		pop	di
		pop	si
		pop	bp
		retn
__setswitchar	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void *__cdecl	bsearch(const void *key, const void *base, size_t nelem, size_t	width, int (__cdecl *fcmp)(const void *, const void *))
_bsearch	proc near

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
key		= word ptr  4
arg_2		= word ptr  6
base		= word ptr  8
arg_6		= word ptr  0Ah
nelem		= word ptr  0Ch
@@width		= word ptr  0Eh
fcmp		= word ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 0Ah
		push	si
		push	di
		mov	dx, [bp+arg_6]
		mov	ax, [bp+base]
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		jmp	short loc_C6B2
; ---------------------------------------------------------------------------

loc_C658:
		mov	ax, [bp+nelem]
		shr	ax, 1
		mov	[bp+var_A], ax
		imul	[bp+@@width]
		mov	dx, [bp+var_2]
		mov	bx, [bp+var_4]
		add	bx, ax
		mov	[bp+var_6], dx
		mov	[bp+var_8], bx
		push	dx
		push	bx
		push	[bp+arg_2]
		push	[bp+key]
		call	[bp+fcmp]
		add	sp, 8
		mov	dx, ax
		or	dx, dx
		jnz	short loc_C68D
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		jmp	short loc_C6BC
; ---------------------------------------------------------------------------

loc_C68D:
		or	dx, dx
		jge	short loc_C699
		mov	ax, [bp+var_A]
		mov	[bp+nelem], ax
		jmp	short loc_C6B2
; ---------------------------------------------------------------------------

loc_C699:
		mov	dx, [bp+var_6]
		mov	ax, [bp+var_8]
		add	ax, [bp+@@width]
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	ax, [bp+nelem]
		sub	ax, [bp+var_A]
		dec	ax
		mov	[bp+nelem], ax

loc_C6B2:
		cmp	[bp+nelem], 0
		ja	short loc_C658
		xor	dx, dx
		xor	ax, ax

loc_C6BC:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_bsearch	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl bdos(int dosfun, unsigned	int dosdx, unsigned int	dosal)
_bdos		proc near

dosfun		= byte ptr  4
dosdx		= word ptr  6
dosal		= byte ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, [bp+dosfun]
		mov	al, [bp+dosal]
		mov	dx, [bp+dosdx]
		int	21h		; DOS -
		pop	di
		pop	si
		pop	bp
		retn
_bdos		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

; void __cdecl __assertfail(char *msg, char *cond, char	*file, int line)
___assertfail	proc near

@@format		= dword	ptr  4
@@cond		= word ptr  8
arg_6		= word ptr  0Ah
@@file		= word ptr  0Ch
arg_A		= word ptr  0Eh
line		= word ptr  10h

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	[bp+line]
		push	[bp+arg_A]
		push	[bp+@@file]
		push	[bp+arg_6]
		push	[bp+@@cond]
		push	word ptr [bp+@@format+2]
		push	word ptr [bp+@@format] ; format
		push	ds
		mov	ax, 15A4h
		push	ax		; stream
		call	_fprintf
		add	sp, 12h
		call	_abort
___assertfail	endp

; ---------------------------------------------------------------------------
		pop	di
		pop	si
		pop	bp
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

; void abort(void)
_abort		proc near
		push	si
		push	di
		mov	ax, 16h
		push	ax		; sig
		call	_raise
		pop	cx
		call	__abort
_abort		endp

; ---------------------------------------------------------------------------
		pop	di
		pop	si
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl atexit(void (*func)(void))
_atexit		proc near

func		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		cmp	word_FF9E, 20h ; ' '
		jnz	short loc_C723
		mov	ax, 1
		jmp	short loc_C736
; ---------------------------------------------------------------------------

loc_C723:
		mov	bx, word_FF9E
		add	bx, bx
		mov	ax, word ptr [bp+func]
		mov	[bx+6098h], ax
		inc	word_FF9E
		xor	ax, ax

loc_C736:
		pop	di
		pop	si
		pop	bp
		retn
_atexit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

sub_C73A	proc near
		push	si
		push	di
		pop	di
		pop	si
		retn
sub_C73A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_C73F	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		cmp	[bp+arg_4], 0
		jnz	short loc_C768
		jmp	short loc_C75A
; ---------------------------------------------------------------------------

loc_C74C:
		dec	word_FF9E
		mov	bx, word_FF9E
		add	bx, bx
		call	word ptr [bx+6098h]

loc_C75A:
		cmp	word_FF9E, 0
		jnz	short loc_C74C
		call	__cleanup
		call	off_FFA0

loc_C768:
		call	__restorezero
		call	__checknull
		cmp	[bp+arg_2], 0
		jnz	short loc_C789
		cmp	[bp+arg_4], 0
		jnz	short loc_C782
		call	off_FFA2
		call	off_FFA4

loc_C782:
		push	[bp+arg_0]
		call	__terminate
; ---------------------------------------------------------------------------
		pop	cx

loc_C789:
		pop	di
		pop	si
		pop	bp
		retn	6
sub_C73F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

; void __cdecl exit(int	status)
_exit		proc near

status		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	ax, ax
		push	ax
		push	ax
		push	[bp+status]
		call	sub_C73F
		pop	di
		pop	si
		pop	bp
		retn
_exit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn	bp-based frame

; void __cdecl _exit(int status)
__exit		proc near

status		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, 1
		push	ax
		xor	ax, ax
		push	ax
		push	[bp+status]
		call	sub_C73F
		pop	di
		pop	si
		pop	bp
		retn
__exit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void _cexit(void)
__cexit		proc near
		push	si
		push	di
		xor	ax, ax
		push	ax
		mov	ax, 1
		push	ax
		xor	ax, ax
		push	ax
		call	sub_C73F
		pop	di
		pop	si
		retn
__cexit		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function

; void _c_exit(void)
__c_exit	proc near
		push	si
		push	di
		mov	ax, 1
		push	ax
		push	ax
		xor	ax, ax
		push	ax
		call	sub_C73F
		pop	di
		pop	si
		retn
__c_exit	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function noreturn

__abort		proc near
		push	si
		push	di
		push	ds
		mov	ax, 1EA6h
		push	ax		; buf
		call	___ErrorMessage
		pop	cx
		pop	cx
		mov	ax, 3
		push	ax		; status
		call	__exit
__abort		endp

; ---------------------------------------------------------------------------
		pop	cx
		pop	di
		pop	si
		retn

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void (__cdecl	__interrupt far	*__cdecl getvect(int interruptno))()
_getvect	proc near

interruptno	= byte ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 35h	; '5'
		mov	al, [bp+interruptno]
		int	21h		; DOS -	2+ - GET INTERRUPT VECTOR
					; AL = interrupt number
					; Return: ES:BX	= value	of interrupt vector
		xchg	ax, bx
		mov	dx, es
		pop	di
		pop	si
		pop	bp
		retn
_getvect	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl setvect(int interruptno,	void (__interrupt far *isr)())
_setvect	proc near

interruptno	= byte ptr  4
@@isr		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 25h	; '%'
		mov	al, [bp+interruptno]
		push	ds
		lds	dx, [bp+@@isr]
		int	21h		; DOS -	SET INTERRUPT VECTOR
					; AL = interrupt number
					; DS:DX	= new vector to	be used	for specified interrupt
		pop	ds
		pop	di
		pop	si
		pop	bp
		retn
_setvect	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_DOSENV(__int32, char *s, int, int)
__DOSENV	proc near

@@dest		= dword	ptr -0Ah
var_6		= word ptr -6
var_4		= dword	ptr -4
arg_0		= dword	ptr  4
@@s		= dword	ptr  8
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 0Ah
		push	si
		push	di
		mov	[bp+var_6], 1
		mov	dx, [bp+arg_A]
		mov	ax, [bp+arg_8]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		or	ax, dx
		jz	short loc_C869
		mov	[bp+var_6], 0
		jmp	short loc_C854
; ---------------------------------------------------------------------------

loc_C83D:
		les	bx, [bp+var_4]
		add	word ptr [bp+var_4], 4
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		call	_strlen
		pop	cx
		pop	cx
		inc	ax
		add	[bp+var_6], ax

loc_C854:
		les	bx, [bp+var_4]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jz	short loc_C869
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_C83D

loc_C869:
		inc	[bp+var_6]
		mov	ax, word ptr [bp+@@s]
		or	ax, word ptr [bp+@@s+2]
		jz	short loc_C885
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		pop	cx
		pop	cx
		add	ax, 3
		add	[bp+var_6], ax

loc_C885:
		cmp	[bp+var_6], 8000h
		jb	short loc_C88F
		jmp	loc_C970
; ---------------------------------------------------------------------------

loc_C88F:
		mov	ax, [bp+var_6]
		add	ax, 0Fh
		push	ax		; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		or	ax, dx
		jnz	short loc_C8A7
		jmp	loc_C970
; ---------------------------------------------------------------------------

loc_C8A7:
		les	bx, [bp+arg_0]
		mov	ax, word ptr [bp+@@dest]
		mov	es:[bx+2], dx
		mov	es:[bx], ax
		add	word ptr [bp+@@dest], 0Fh
		and	word ptr [bp+@@dest], 0FFF0h
		mov	dx, [bp+arg_A]
		mov	ax, [bp+arg_8]
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		or	ax, dx
		jz	short loc_C91B
		les	bx, [bp+var_4]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jz	short loc_C91B
		jmp	short loc_C904
; ---------------------------------------------------------------------------

loc_C8DA:
		les	bx, [bp+var_4]
		add	word ptr [bp+var_4], 4
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy_0
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+@@dest]

loc_C904:
		les	bx, [bp+var_4]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jz	short loc_C925
		les	bx, es:[bx]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_C8DA
		jmp	short loc_C925
; ---------------------------------------------------------------------------

loc_C91B:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+@@dest]

loc_C925:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+@@dest]
		mov	ax, word ptr [bp+@@s]
		or	ax, word ptr [bp+@@s+2]
		jz	short loc_C965
		les	bx, [bp+@@dest]
		mov	word ptr es:[bx], 1
		add	word ptr [bp+@@dest], 2
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy_0
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 0
		inc	word ptr [bp+@@dest]

loc_C965:
		mov	dx, word ptr [bp+@@dest+2]
		mov	ax, word ptr [bp+@@dest]
		sub	ax, [bp+var_6]
		jmp	short loc_C974
; ---------------------------------------------------------------------------

loc_C970:
		xor	dx, dx
		xor	ax, ax

loc_C974:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ch
__DOSENV	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl _searchenv(const	char *file, const char *varname, char *pathname)
__searchenv	proc near

ipath		= dword	ptr -4
@@file		= dword	ptr  4
@@name		= dword	ptr  8
pathname	= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		push	word ptr [bp+@@name+2]
		push	word ptr [bp+@@name] ; name
		call	_getenv
		pop	cx
		pop	cx
		mov	word ptr [bp+ipath+2], dx
		mov	word ptr [bp+ipath], ax
		or	ax, dx
		jnz	short loc_C9A1
		mov	word ptr [bp+ipath+2], ds
		mov	word ptr [bp+ipath], 1EC6h

loc_C9A1:
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		push	word ptr [bp+ipath+2]
		push	word ptr [bp+ipath] ; ipath
		push	word ptr [bp+@@file+2]
		push	word ptr [bp+@@file] ; file
		call	__searchstr
		add	sp, 0Ch
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__searchenv	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl _searchstr(const	char *file, const char *ipath, char *pathname)
__searchstr	proc near

block		= dword	ptr -6
var_1		= byte ptr -1
@@file		= dword	ptr  4
ipath		= dword	ptr  8
pathname	= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		sub	sp, 6
		push	si
		push	di
		mov	ax, 50h	; 'P'
		push	ax		; len
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; buf
		xor	ax, ax
		push	ax		; drive
		call	__getdcwd
		add	sp, 8
		or	ax, dx
		jnz	short loc_C9E2
		xor	dx, dx
		jmp	short loc_C9EF
; ---------------------------------------------------------------------------

loc_C9E2:
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; s
		call	_strlen
		pop	cx
		pop	cx
		mov	dx, ax

loc_C9EF:
		les	bx, [bp+pathname]
		add	bx, dx
		mov	byte ptr es:[bx], 0
		or	dx, dx
		jz	short loc_CA23
		mov	bx, dx
		add	bx, word ptr [bp+pathname]
		mov	al, es:[bx-1]
		mov	[bp+var_1], al
		cmp	al, 5Ch	; '\'
		jz	short loc_CA23
		cmp	[bp+var_1], 2Fh	; '/'
		jz	short loc_CA23
		push	ds
		mov	ax, 1EC8h
		push	ax		; src
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; dest
		call	_strcat
		add	sp, 8

loc_CA23:
		push	word ptr [bp+@@file+2]
		push	word ptr [bp+@@file] ; src
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; dest
		call	_strcat
		add	sp, 8
		xor	ax, ax
		push	ax		; char
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		call	__access
		add	sp, 6
		or	ax, ax
		jz	short loc_CA93
		les	bx, [bp+ipath]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_CA5A
		les	bx, [bp+pathname]
		mov	byte ptr es:[bx], 0
		jmp	short loc_CACE
; ---------------------------------------------------------------------------

loc_CA5A:
		xor	dx, dx
		jmp	short loc_CA72
; ---------------------------------------------------------------------------

loc_CA5E:
		les	bx, [bp+pathname]
		add	bx, dx
		push	es
		les	si, [bp+ipath]
		mov	al, es:[si]
		pop	es
		mov	es:[bx], al
		inc	word ptr [bp+ipath]
		inc	dx

loc_CA72:
		les	bx, [bp+ipath]
		cmp	byte ptr es:[bx], 3Bh ;	';'
		jz	short loc_CA81
		cmp	byte ptr es:[bx], 0
		jnz	short loc_CA5E

loc_CA81:
		les	bx, [bp+ipath]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_CA8D
		jmp	loc_C9EF
; ---------------------------------------------------------------------------

loc_CA8D:
		inc	word ptr [bp+ipath]
		jmp	loc_C9EF
; ---------------------------------------------------------------------------

loc_CA93:
		mov	ax, 50h	; 'P'
		push	ax		; maxlen
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; path
		xor	ax, ax
		push	ax
		push	ax		; buf
		call	__fullpath
		add	sp, 0Ah
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		or	ax, dx
		jz	short loc_CACE
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; src
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx

loc_CACE:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__searchstr	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	getenv(const char *name)
_getenv		proc near

var_4		= dword	ptr -4
@@name		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		les	di, [bp+@@name]
		mov	ax, es
		or	ax, di
		jz	short loc_CB05
		mov	al, 0
		mov	ah, es:[di]
		mov	cx, 0FFFFh
		cld
		repne scasb
		not	cx
		dec	cx
		jz	short loc_CB05
		les	di, dword_FFDA
		mov	word ptr [bp+var_4+2], es
		mov	bx, es
		or	bx, di
		mov	word ptr [bp+var_4], di
		jnz	short loc_CB12

loc_CB05:
		xor	dx, dx
		xor	ax, ax
		jmp	short loc_CB3E
; ---------------------------------------------------------------------------

loc_CB0B:
		add	word ptr [bp+var_4], 4
		les	di, [bp+var_4]

loc_CB12:
		les	di, es:[di]
		mov	bx, es
		or	bx, di
		jz	short loc_CB05
		mov	al, es:[di]
		or	al, al
		jz	short loc_CB05
		cmp	ah, al
		jnz	short loc_CB0B
		mov	bx, cx
		cmp	byte ptr es:[bx+di], 3Dh ; '='
		jnz	short loc_CB0B
		push	ds
		lds	si, [bp+@@name]
		repe cmpsb
		pop	ds
		xchg	cx, bx
		jnz	short loc_CB0B
		inc	di
		mov	ax, di
		mov	dx, es

loc_CB3E:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_getenv		endp

; ---------------------------------------------------------------------------
		db 8Fh dup(0)
word_CBD3	dw 0
		db 50h dup(0)
byte_CC25	db 0
byte_CC26	db 0
		db 1Ch dup(0), 33h, 0FFh, 8Ch, 0C8h, 8Eh, 0D8h,	8Eh, 0C0h
		db 0FAh, 8Eh, 0D0h, 8Dh, 0A5h, 8Fh, 0, 0FBh, 51h, 52h
		db 0B8h, 3, 4Bh, 8Dh, 9Dh, 0FBh, 0, 8Dh, 95h, 91h, 0, 0CDh
		db 21h,	5Ah, 59h, 72h, 2Dh, 33h, 0FFh, 0FAh, 8Eh, 95h
		db 0F1h, 0, 8Bh, 0A5h, 0F3h, 0,	0FBh, 8Bh, 0ECh, 33h, 0C0h
		db 50h,	8Bh, 85h, 8Fh, 0, 8Eh, 0D8h, 8Eh, 0C0h,	26h, 89h
		db 16h,	2, 0, 26h, 89h,	0Eh, 2Ch, 0, 2Eh, 8Bh, 85h, 0E1h
		db 0, 2Eh, 0FFh, 2Eh, 0F7h, 0, 0B4h, 40h, 0BBh,	2, 0, 0B9h
		db 0Fh,	0, 33h,	0D2h, 0CDh, 21h, 0B8h, 2, 4Ch, 0CDh, 21h
byte_CCA4	db 0FFh, 0
word_CCA6	dw 0
word_CCA8	dw 0
byte_CCAA	db 1

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__exec		proc near

var_C		= word ptr -0Ch
var_A		= dword	ptr -0Ah
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 0Ch
		cld
		push	si
		push	ds
		push	di
		push	es
		mov	ax, word_E176
		mov	cs:word_CCA8, ax
		mov	ax, 3D00h
		push	ds
		lds	dx, [bp+arg_0]
		int	21h		; DOS -	2+ - OPEN DISK FILE WITH HANDLE
					; DS:DX	-> ASCIZ filename
					; AL = access mode
					; 0 - read
		pop	ds
		mov	[bp+var_2], ax
		jnb	short loc_CCCF
		jmp	loc_CEDB
; ---------------------------------------------------------------------------

loc_CCCF:
		mov	es, segx
		mov	cs:word_CBD3, es
		mov	ax, es:2Ch
		mov	[bp+var_C], ax
		mov	di, 80h	; 'Ä'
		push	ds
		lds	si, [bp+arg_4]
		lodsb
		mov	dx, si
		stosb
		xor	cx, cx
		mov	cl, al
		inc	cx
		rep movsb
		mov	ax, 2901h
		mov	si, dx
		mov	di, 5Ch	; '\'
		int	21h		; DOS -	PARSE FILENAME
					; DS:SI	-> string to parse
					; ES:DI	-> buffer to fill with unopened	FCB
					; AL = bit mask	to control parsing
		mov	cs:byte_CC25, al

loc_CCFF:
		mov	al, [si]
		cmp	al, 20h	; ' '
		jz	short loc_CD10
		cmp	al, 9
		jz	short loc_CD10
		cmp	al, 0Dh
		jz	short loc_CD10
		inc	si
		jmp	short loc_CCFF
; ---------------------------------------------------------------------------

loc_CD10:
		mov	ax, 2901h
		mov	di, 6Ch	; 'l'
		int	21h		; DOS -	PARSE FILENAME
					; DS:SI	-> string to parse
					; ES:DI	-> buffer to fill with unopened	FCB
					; AL = bit mask	to control parsing
		mov	cs:byte_CC26, al
		pop	ds
		mov	ah, 4Ah	; 'J'
		mov	bx, 0FFFFh
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		cmp	byte ptr word_E17C, 3
		jnb	short loc_CD2F
		sub	bx, 280h

loc_CD2F:
		mov	[bp+var_4], bx
		mov	ax, [bp+arg_8]
		mov	dx, [bp+arg_A]
		mov	bx, ax
		or	bx, dx
		jnz	short loc_CD44
		xor	ax, ax
		mov	di, ax
		jmp	short loc_CD61
; ---------------------------------------------------------------------------

loc_CD44:
		mov	es, dx
		mov	di, ax
		push	di
		mov	cx, 0FFFFh
		xor	ax, ax

loc_CD4E:
		repne scasb
		cmp	es:[di], al
		jnz	short loc_CD4E
		dec	cx
		add	di, 3
		repne scasb
		dec	cx
		mov	ax, cx
		neg	ax
		pop	di

loc_CD61:
		mov	word ptr [bp+var_A], di
		mov	word ptr [bp+var_A+2], es
		add	ax, 0Fh
		mov	cx, 4
		shr	ax, cl
		mov	[bp+var_6], ax
		mov	si, word_E176
		dec	si
		mov	es, si
		cmp	ax, es:3
		jbe	short loc_CD89
		dec	cs:byte_CCAA
		inc	ax
		sub	[bp+var_4], ax

loc_CD89:
		lds	si, [bp+arg_0]
		push	cs
		pop	es
		assume es:seg000
		mov	di, 0CBD5h

loc_CD91:
		lodsb
		stosb
		or	al, al
		jnz	short loc_CD91
		mov	bx, [bp+var_2]
		push	ds
		pop	es
		assume es:dseg
		push	cs
		pop	ds
		assume ds:seg000
		mov	di, 0CB44h
		mov	ah, 3Fh	; '?'
		mov	cx, 18h
		lea	dx, [di+0E3h]
		int	21h		; DOS -	2+ - READ FROM FILE WITH HANDLE
					; BX = file handle, CX = number	of bytes to read
					; DS:DX	-> buffer
		jb	short loc_CDD3
		cmp	word ptr [di+0E3h], 5A4Dh
		jz	short loc_CDDF
		mov	ax, es:[si-5]
		or	ah, 20h
		cmp	ax, 632Eh
		jnz	short loc_CDD0
		mov	ax, es:[si-3]
		or	ax, 2020h
		cmp	ax, 6D6Fh
		jnz	short loc_CDD0
		jmp	short loc_CE1B
; ---------------------------------------------------------------------------

loc_CDD0:
		mov	ax, 0Bh

loc_CDD3:
		push	ax
		mov	ah, 3Eh	; '>'
		mov	bx, [bp+var_2]
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		pop	ax
		jmp	loc_CEDB
; ---------------------------------------------------------------------------

loc_CDDF:
		mov	ax, [di+0E7h]
		xor	dx, dx
		mov	dl, ah
		mov	ah, al
		xor	al, al
		shl	ax, 1
		rcl	dx, 1
		add	ax, [di+0E5h]
		adc	dx, 0
		mov	cx, 4

loc_CDF9:
		shr	dx, 1
		rcr	ax, 1
		loop	loc_CDF9
		inc	ax
		sub	ax, [di+0EBh]
		add	ax, [di+0EDh]
		xchg	ax, bx
		mov	ax, [di+8Fh]
		add	ax, 10h
		add	[di+0F9h], ax
		add	[di+0F1h], ax
		xchg	ax, bx
		jmp	short loc_CE45
; ---------------------------------------------------------------------------

loc_CE1B:
		mov	ax, 4202h
		xor	cx, cx
		xor	dx, dx
		int	21h		; DOS -	2+ - MOVE FILE READ/WRITE POINTER (LSEEK)
					; AL = method: offset from end of file
		mov	cx, 4

loc_CE27:
		shr	dx, 1
		rcr	ax, 1
		loop	loc_CE27
		inc	ax
		xchg	ax, bx
		mov	ax, [di+8Fh]
		mov	[di+0F9h], ax
		mov	word ptr [di+0F7h], 100h
		mov	[di+0F1h], ax
		add	ax, 10h
		xchg	ax, bx

loc_CE45:
		mov	[di+0FBh], bx
		mov	[di+0FDh], bx
		add	ax, 16h
		cmp	ax, [bp+var_4]
		mov	ax, 8
		jbe	short loc_CE5B
		jmp	loc_CDD3
; ---------------------------------------------------------------------------

loc_CE5B:
		mov	ah, 3Eh	; '>'
		mov	bx, [bp+var_2]
		int	21h		; DOS -	2+ - CLOSE A FILE WITH HANDLE
					; BX = file handle
		mov	es, word ptr [di+8Fh]
		assume es:nothing
		mov	ah, 4Ah	; 'J'
		mov	bx, [bp+var_4]
		int	21h		; DOS -	2+ - ADJUST MEMORY BLOCK SIZE (SETBLOCK)
					; ES = segment address of block	to change
					; BX = new size	in paragraphs
		jnb	short loc_CE72
		jmp	loc_CDD3
; ---------------------------------------------------------------------------

loc_CE72:
		add	bx, [di+8Fh]
		mov	dx, bx
		sub	bx, 17h
		mov	cs:word_CCA6, bx
		mov	es, bx
		mov	cx, 0B0h ; '∞'
		mov	si, 0CB44h
		xor	di, di
		rep movsw
		mov	es, [bp+var_C]
		mov	cx, [bp+var_6]
		cmp	cs:byte_CCAA, 0
		jnz	short loc_CEA4
		mov	ah, 48h	; 'H'
		mov	bx, cx
		int	21h		; DOS -	2+ - ALLOCATE MEMORY
					; BX = number of 16-byte paragraphs desired
		jb	short loc_CEDB
		jmp	short loc_CEA8
; ---------------------------------------------------------------------------

loc_CEA4:
		mov	ax, cs:word_CCA8

loc_CEA8:
		mov	es, ax
		xor	di, di
		lds	si, [bp+var_A]
		assume ds:dseg
		add	cx, cx
		add	cx, cx
		add	cx, cx
		rep movsw
		push	es
		push	dx
		push	ds
		mov	ds, cs:DGROUP@
		call	__cexit
		pop	ds
		pop	dx
		cmp	cs:byte_CCAA, 0
		jnz	short loc_CED5
		mov	es, cs:word_CCA8
		mov	ah, 49h
		int	21h		; DOS -	2+ - FREE MEMORY
					; ES = segment address of area to be freed

loc_CED5:
		pop	cx
		jmp	dword ptr cs:byte_CCA4
; ---------------------------------------------------------------------------

loc_CEDB:
		pop	es
		pop	di
		pop	ds
		pop	si
		push	ax
		call	__IOERROR
		mov	sp, bp
		pop	bp
		retn
__exec		endp

; ---------------------------------------------------------------------------
byte_CEE7	db 2 dup(0)
; ---------------------------------------------------------------------------

unknown_libname_2:			; BCC v4.x/5.x DOS runtime
		pop	word_FFD0
		pop	word_FFD2
		pop	word_FFD4
		mov	word ptr cs:byte_CEE7, ds
		mov	word_FFD6, si
		mov	word_FFD8, di
		cld
		mov	es, segx
		mov	si, 80h	; 'Ä'
		xor	ah, ah
		lods	byte ptr es:[si]
		inc	ax
		mov	bp, es
		xchg	dx, si
		xchg	ax, bx
		mov	si, word_E174
		inc	si
		inc	si
		mov	cx, 1
		cmp	byte ptr word_E17C, 3
		jb	short loc_CF3A
		mov	es, word_E176
		mov	di, si
		mov	cl, 7Fh	; ''
		xor	al, al
		repne scasb
		jcxz	short loc_CF34
		jmp	short loc_CF37
; ---------------------------------------------------------------------------

loc_CF34:
		jmp	loc_CFB9
; ---------------------------------------------------------------------------

loc_CF37:
		xor	cl, 7Fh

loc_CF3A:
		push	ax
		mov	ax, cx
		add	ax, bx
		inc	ax
		and	ax, 0FFFEh
		mov	di, sp
		sub	di, ax
		jb	short loc_CFB9
		mov	sp, di
		push	es
		pop	ds
		push	ss
		pop	es
		push	cx
		dec	cx
		rep movsb
		xor	al, al
		stosb
		mov	ds, bp
		xchg	si, dx
		xchg	bx, cx
		mov	ax, bx
		mov	dx, ax
		inc	bx

loc_CF61:
		call	sub_CF81
		ja	short loc_CF71

loc_CF66:
		jb	short loc_CFBC
		cmp	al, 0Dh
		jz	short loc_CF7D
		call	sub_CF81
		ja	short loc_CF66

loc_CF71:
		cmp	al, 20h	; ' '
		jz	short loc_CF7D
		cmp	al, 0Dh
		jz	short loc_CF7D
		cmp	al, 9
		jnz	short loc_CF61

loc_CF7D:
		xor	al, al
		jmp	short loc_CF61

; =============== S U B	R O U T	I N E =======================================


sub_CF81	proc near
		or	ax, ax
		jz	short loc_CF8C
		inc	dx
		stosb
		or	al, al
		jnz	short loc_CF8C
		inc	bx

loc_CF8C:
		xchg	ah, al
		xor	al, al
		stc
		jcxz	short locret_CFA8
		lodsb
		dec	cx
		sub	al, 22h	; '"'
		jz	short loc_CFA9
		add	al, 22h	; '"'
		cmp	al, 5Ch	; '\'
		jnz	short loc_CFA6
		cmp	byte ptr [si], 22h ; '"'
		jnz	short loc_CFA6
		lodsb
		dec	cx

loc_CFA6:
		or	si, si

locret_CFA8:
		retn
; ---------------------------------------------------------------------------

loc_CFA9:
		pushf
		cmp	byte ptr [si], 22h ; '"'
		jz	short loc_CFB1
		popf
		retn
; ---------------------------------------------------------------------------

loc_CFB1:
		popf
		inc	si
		dec	cx
		mov	ax, 100h
		jmp	short loc_CFA6
sub_CF81	endp

; ---------------------------------------------------------------------------

loc_CFB9:
		jmp	__abort
; ---------------------------------------------------------------------------

loc_CFBC:
		pop	cx
		add	cx, dx
		mov	ds, word ptr cs:byte_CEE7
		mov	__argc, bx
		inc	bx
		add	bx, bx
		add	bx, bx
		mov	si, sp
		mov	bp, sp
		sub	bp, bx
		jb	short loc_CFB9
		mov	sp, bp
		mov	word ptr dword_FFCC, bp
		mov	word ptr dword_FFCC+2, ss

loc_CFDF:
		jcxz	short loc_CFF2
		mov	[bp+0],	si
		mov	word ptr [bp+2], ss
		add	bp, 4

loc_CFEA:
		lods	byte ptr ss:[si]
		or	al, al
		loopne	loc_CFEA
		jz	short loc_CFDF

loc_CFF2:
		xor	ax, ax
		mov	[bp+0],	ax
		mov	[bp+2],	ax
		mov	ds, word ptr cs:byte_CEE7
		mov	si, word_FFD6
		mov	di, word_FFD8
		push	word_FFD4
		push	word_FFD2
		mov	ax, __argc
		mov	argc, ax
		mov	ax, word ptr dword_FFCC+2
		mov	word_E16E, ax
		mov	ax, word ptr dword_FFCC
		mov	argv, ax
		jmp	word_FFD0
; ---------------------------------------------------------------------------

unknown_libname_3:			; BCC v4.x/5.x DOS runtime
		push	si
		push	di
		mov	es, word_E176
		xor	di, di
		push	es
		push	word_E178
		call	_malloc
		pop	bx
		mov	bx, ax
		pop	es
		mov	word ptr dword_FFDA, ax
		mov	word ptr dword_FFDA+2, dx
		push	ds
		mov	ds, dx
		or	ax, dx
		jnz	short loc_D04A
		jmp	_abort
; ---------------------------------------------------------------------------

loc_D04A:
		xor	ax, ax
		mov	cx, 0FFFFh
		cmp	byte ptr es:[di], 0
		jz	short loc_D064

loc_D055:
		mov	[bx], di
		mov	word ptr [bx+2], es
		add	bx, 4
		repne scasb
		cmp	es:[di], al
		jnz	short loc_D055

loc_D064:
		mov	[bx], ax
		mov	[bx+2],	ax
		pop	ds
		pop	di
		pop	si
		mov	ax, word ptr dword_FFDA+2
		mov	word_E172, ax
		mov	ax, word ptr dword_FFDA
		mov	envp, ax
		retn
; ---------------------------------------------------------------------------
		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	dseg
		mov	ds, bp
		mov	bp, sp
		sub	sp, 2
		les	bx, [bp+12h]
		cmp	byte ptr es:[bx], 62h ;	'b'
		jz	short loc_D09C
		pushf
		call	dword_141DA
		jmp	short loc_D0D4
; ---------------------------------------------------------------------------

loc_D09C:
		mov	ax, word_FFE8
		mov	[bp-2],	ax
		cmp	ax, 1
		jz	short loc_D0D4
		cmp	word ptr [bp-2], 0
		jz	short loc_D0B3
		cmp	word ptr [bp-2], 0FFFFh
		jnz	short loc_D0BB

loc_D0B3:
		mov	ax, 1
		push	ax
		call	__exit
; ---------------------------------------------------------------------------
		pop	cx

loc_D0BB:
		mov	word_FFE8, 0
		push	ss
		lea	ax, [bp+0]
		push	ax
		mov	ax, 0Ah
		push	ax
		mov	ax, 0Bh
		push	ax
		call	word ptr [bp-2]
		add	sp, 8

loc_D0D4:
		mov	sp, bp
		pop	bp
		pop	di
		pop	si
		pop	ds
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		iret
; ---------------------------------------------------------------------------
		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	dseg
		mov	ds, bp
		mov	bp, sp
		sub	sp, 2
		mov	ax, word_FFE4
		mov	[bp-2],	ax
		cmp	ax, 1
		jz	short loc_D12B
		cmp	word ptr [bp-2], 0
		jz	short loc_D10A
		cmp	word ptr [bp-2], 0FFFFh
		jnz	short loc_D112

loc_D10A:
		mov	ax, 1
		push	ax
		call	__exit
; ---------------------------------------------------------------------------
		pop	cx

loc_D112:
		mov	word_FFE4, 0
		push	ss
		lea	ax, [bp+0]
		push	ax
		mov	ax, 14h
		push	ax
		mov	ax, 4
		push	ax
		call	word ptr [bp-2]
		add	sp, 8

loc_D12B:
		mov	sp, bp
		pop	bp
		pop	di
		pop	si
		pop	ds
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		iret
; ---------------------------------------------------------------------------
		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	dseg
		mov	ds, bp
		mov	bp, sp
		sub	sp, 2
		mov	ax, word_FFE6
		mov	[bp-2],	ax
		cmp	ax, 1
		jz	short loc_D182
		cmp	word ptr [bp-2], 0
		jz	short loc_D161
		cmp	word ptr [bp-2], 0FFFFh
		jnz	short loc_D169

loc_D161:
		mov	ax, 1
		push	ax
		call	__exit
; ---------------------------------------------------------------------------
		pop	cx

loc_D169:
		mov	word_FFE6, 0
		push	ss
		lea	ax, [bp+0]
		push	ax
		mov	ax, 7Fh	; ''
		push	ax
		mov	ax, 8
		push	ax
		call	word ptr [bp-2]
		add	sp, 8

loc_D182:
		mov	sp, bp
		pop	bp
		pop	di
		pop	si
		pop	ds
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		iret
; ---------------------------------------------------------------------------
		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	dseg
		mov	ds, bp
		mov	bp, sp
		sub	sp, 2
		mov	ax, word_FFE6
		mov	[bp-2],	ax
		cmp	ax, 1
		jz	short loc_D1D9
		cmp	word ptr [bp-2], 0
		jz	short loc_D1B8
		cmp	word ptr [bp-2], 0FFFFh
		jnz	short loc_D1C0

loc_D1B8:
		mov	ax, 1
		push	ax
		call	__exit
; ---------------------------------------------------------------------------
		pop	cx

loc_D1C0:
		mov	word_FFE6, 0
		push	ss
		lea	ax, [bp+0]
		push	ax
		mov	ax, 7Eh	; '~'
		push	ax
		mov	ax, 8
		push	ax
		call	word ptr [bp-2]
		add	sp, 8

loc_D1D9:
		mov	sp, bp
		pop	bp
		pop	di
		pop	si
		pop	ds
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		iret
; ---------------------------------------------------------------------------
		push	ax
		push	bx
		push	cx
		push	dx
		push	es
		push	ds
		push	si
		push	di
		push	bp
		mov	bp, seg	dseg
		mov	ds, bp
		mov	bp, sp
		sub	sp, 2
		mov	ax, word_FFE2
		mov	[bp-2],	ax
		cmp	ax, 1
		jz	short loc_D237
		cmp	word ptr [bp-2], 0
		jz	short loc_D20F
		cmp	word ptr [bp-2], 0FFFFh
		jnz	short loc_D217

loc_D20F:
		mov	ax, 1
		push	ax
		call	__exit
; ---------------------------------------------------------------------------
		pop	cx

loc_D217:
		mov	word_FFE2, 0
		push	word ptr isr+2
		push	word ptr isr
		mov	ax, 23h	; '#'
		push	ax
		call	_setvect
		add	sp, 6
		mov	ax, 2
		push	ax
		call	word ptr [bp-2]
		pop	cx

loc_D237:
		mov	sp, bp
		pop	bp
		pop	di
		pop	si
		pop	ds
		pop	es
		pop	dx
		pop	cx
		pop	bx
		pop	ax
		iret

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_D243	proc near

arg_0		= word ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	dx, dx

loc_D24A:
		mov	bx, dx
		mov	al, [bx+1EEEh]
		mov	ah, 0
		cmp	ax, [bp+arg_0]
		jnz	short loc_D25B
		mov	ax, dx
		jmp	short loc_D264
; ---------------------------------------------------------------------------

loc_D25B:
		inc	dx
		cmp	dx, 6
		jl	short loc_D24A
		mov	ax, 0FFFFh

loc_D264:
		pop	di
		pop	si
		pop	bp
		retn
sub_D243	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void (__cdecl	*__cdecl signal(int sig, void (__cdecl *func)()))(int)
_signal		proc near

var_2		= word ptr -2
sig		= word ptr  4
func		= dword	ptr  6

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		cmp	byte_FFE0, 0
		jnz	short loc_D282
		mov	word_141D8, 0D268h
		mov	byte_FFE0, 1

loc_D282:
		push	[bp+sig]
		call	sub_D243
		pop	cx
		mov	dx, ax
		cmp	ax, 0FFFFh
		jnz	short loc_D29C
		mov	word_E17E, 13h
		mov	ax, 0FFFFh
		jmp	loc_D364
; ---------------------------------------------------------------------------

loc_D29C:
		mov	bx, dx
		add	bx, bx
		mov	ax, [bx+1EE2h]
		mov	[bp+var_2], ax
		mov	bx, dx
		add	bx, bx
		mov	ax, word ptr [bp+func]
		mov	[bx+1EE2h], ax
		cmp	[bp+sig], 2
		jnz	short loc_D2F0
		cmp	byte_FFDF, 0
		jnz	short loc_D2D3
		mov	ax, 23h	; '#'
		push	ax		; interruptno
		call	_getvect
		pop	cx
		mov	word ptr isr+2, dx
		mov	word ptr isr, ax
		mov	byte_FFDF, 1

loc_D2D3:
		cmp	word ptr [bp+func], 0
		jnz	short loc_D2E3
		push	word ptr isr+2
		push	word ptr isr
		jmp	short loc_D2EB
; ---------------------------------------------------------------------------

loc_D2E3:
		mov	ax, seg	seg000
		push	ax
		mov	ax, 0D1E5h
		push	ax

loc_D2EB:
		mov	ax, 23h	; '#'
		jmp	short loc_D35A
; ---------------------------------------------------------------------------

loc_D2F0:
		cmp	[bp+sig], 8
		jnz	short loc_D314
		mov	ax, seg	seg000
		push	ax
		mov	ax, 0D137h
		push	ax		; isr
		xor	ax, ax
		push	ax		; interruptno
		call	_setvect
		add	sp, 6
		mov	ax, seg	seg000
		push	ax
		mov	ax, 0D18Eh
		push	ax
		mov	ax, 4
		jmp	short loc_D35A
; ---------------------------------------------------------------------------

loc_D314:
		cmp	[bp+sig], 0Bh
		jnz	short loc_D349
		cmp	byte_FFDE, 0
		jnz	short loc_D361
		mov	ax, 5
		push	ax		; interruptno
		call	_getvect
		pop	cx
		mov	word ptr dword_141DA+2,	dx
		mov	word ptr dword_141DA, ax
		mov	ax, seg	seg000
		push	ax
		mov	ax, 0D079h
		push	ax		; isr
		mov	ax, 5
		push	ax		; interruptno
		call	_setvect
		add	sp, 6
		mov	byte_FFDE, 1
		jmp	short loc_D361
; ---------------------------------------------------------------------------

loc_D349:
		cmp	[bp+sig], 4
		jnz	short loc_D361
		mov	ax, seg	seg000
		push	ax
		mov	ax, 0D0E0h
		push	ax		; isr
		mov	ax, 6

loc_D35A:
		push	ax		; interruptno
		call	_setvect
		add	sp, 6

loc_D361:
		mov	ax, [bp+var_2]

loc_D364:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_signal		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl raise(int	sig)
_raise		proc near

var_2		= word ptr -2
sig		= word ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		push	[bp+sig]
		call	sub_D243
		pop	cx
		mov	dx, ax
		cmp	ax, 0FFFFh
		jnz	short loc_D385
		mov	ax, 1
		jmp	short loc_D3DB
; ---------------------------------------------------------------------------

loc_D385:
		mov	bx, dx
		add	bx, bx
		mov	ax, [bx+1EE2h]
		mov	[bp+var_2], ax
		cmp	ax, 1
		jz	short loc_D3D9
		cmp	[bp+var_2], 0
		jnz	short loc_D3BE
		mov	ax, [bp+sig]
		cmp	ax, 2
		jz	short loc_D3AB
		cmp	ax, 16h
		jnz	short loc_D3B4
		call	__abort
; ---------------------------------------------------------------------------

loc_D3AB:
		xor	ax, ax
		int	23h		; DOS -	CONTROL	"C" EXIT ADDRESS
					; Return: return via RETF 2 with CF set
					; DOS will abort program with errorlevel 0
					; else
					; interrupted DOS call continues
		mov	ax, 4C03h
		int	21h		; DOS -	2+ - QUIT WITH EXIT CODE (EXIT)
					; AL = exit code
; ---------------------------------------------------------------------------

loc_D3B4:
		mov	ax, 1
		push	ax		; status
		call	__exit
; ---------------------------------------------------------------------------
		pop	cx
		jmp	short loc_D3D9
; ---------------------------------------------------------------------------

loc_D3BE:
		mov	bx, dx
		add	bx, bx
		mov	word ptr [bx+1EE2h], 0
		mov	bx, dx
		mov	al, [bx+1EF4h]
		mov	ah, 0
		push	ax
		push	[bp+sig]
		call	[bp+var_2]
		pop	cx
		pop	cx

loc_D3D9:
		xor	ax, ax

loc_D3DB:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_raise		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __stdcall	_DOSCMD(int, int, char *s, int,	int)
__DOSCMD	proc near

@@dest		= dword	ptr -0Eh
var_A		= dword	ptr -0Ah
var_6		= dword	ptr -6
@@size		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
@@s		= dword	ptr  8
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 0Eh
		push	si
		push	di
		mov	[bp+@@size], 3
		mov	ax, word ptr [bp+@@s]
		or	ax, word ptr [bp+@@s+2]
		jz	short loc_D408
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strlen
		pop	cx
		pop	cx
		add	ax, [bp+@@size]
		inc	ax
		mov	[bp+@@size], ax

loc_D408:
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		jmp	short loc_D430
; ---------------------------------------------------------------------------

loc_D416:
		les	bx, [bp+var_6]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; s
		call	_strlen
		pop	cx
		pop	cx
		add	ax, [bp+@@size]
		inc	ax
		mov	[bp+@@size], ax
		add	word ptr [bp+var_6], 4

loc_D430:
		les	bx, [bp+var_6]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jnz	short loc_D416
		push	[bp+@@size]	; size
		call	_malloc
		pop	cx
		mov	word ptr [bp+var_A+2], dx
		mov	word ptr [bp+var_A], ax
		or	ax, dx
		jnz	short loc_D454
		xor	dx, dx
		xor	ax, ax
		jmp	loc_D506
; ---------------------------------------------------------------------------

loc_D454:
		mov	dx, word ptr [bp+var_A+2]
		mov	ax, word ptr [bp+var_A]
		inc	ax
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 20h ;	' '
		inc	word ptr [bp+@@dest]
		mov	ax, word ptr [bp+@@s]
		or	ax, word ptr [bp+@@s+2]
		jz	short loc_D495
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy_0
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 20h ;	' '
		inc	word ptr [bp+@@dest]

loc_D495:
		mov	ax, [bp+arg_8]
		or	ax, [bp+arg_A]
		jz	short loc_D4E1
		mov	dx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+var_6+2], dx
		mov	word ptr [bp+var_6], ax
		jmp	short loc_D4D5
; ---------------------------------------------------------------------------

loc_D4AB:
		les	bx, [bp+var_6]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx] ; src
		push	word ptr [bp+@@dest+2]
		push	word ptr [bp+@@dest] ; dest
		call	_stpcpy_0
		add	sp, 8
		mov	word ptr [bp+@@dest+2], dx
		mov	word ptr [bp+@@dest], ax
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx], 20h ;	' '
		inc	word ptr [bp+@@dest]
		add	word ptr [bp+var_6], 4

loc_D4D5:
		les	bx, [bp+var_6]
		mov	ax, es:[bx]
		or	ax, es:[bx+2]
		jnz	short loc_D4AB

loc_D4E1:
		les	bx, [bp+@@dest]
		mov	byte ptr es:[bx-1], 0Dh
		mov	byte ptr es:[bx], 0
		mov	ax, word ptr [bp+@@dest]
		xor	dx, dx
		sub	ax, word ptr [bp+var_A]
		sbb	dx, 0
		add	al, 0FEh ; '˛'
		les	bx, [bp+var_A]
		mov	es:[bx], al
		mov	dx, word ptr [bp+var_A+2]
		mov	ax, word ptr [bp+var_A]

loc_D506:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	0Ch
__DOSCMD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl sub_D50E(int, int, char *pathname, char *src, int)
sub_D50E	proc near

@@file		= byte ptr -80h
arg_0		= word ptr  4
arg_2		= word ptr  6
pathname	= dword	ptr  8
@@src		= dword	ptr  0Ch
arg_C		= word ptr  10h

		push	bp
		mov	bp, sp
		sub	sp, 80h
		push	si
		push	di
		push	[bp+arg_2]
		push	[bp+arg_0]	; src
		push	ss
		lea	ax, [bp+@@file]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	ss
		lea	ax, [bp+@@file]
		push	ax		; dest
		call	_strcat
		add	sp, 8
		cmp	[bp+arg_C], 0
		jz	short loc_D560
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; pathname
		push	ds
		mov	ax, 1EFAh
		push	ax		; varname
		push	ss
		lea	ax, [bp+@@file]
		push	ax		; file
		call	__searchenv
		add	sp, 0Ch
		les	bx, [bp+pathname]
		cmp	byte ptr es:[bx], 0
		jz	short loc_D589
		jmp	short loc_D584
; ---------------------------------------------------------------------------

loc_D560:
		push	ss
		lea	ax, [bp+@@file]
		push	ax		; src
		push	word ptr [bp+pathname+2]
		push	word ptr [bp+pathname] ; dest
		call	_strcpy
		add	sp, 8
		mov	ax, 4
		push	ax		; char
		push	ss
		lea	ax, [bp+@@file]
		push	ax		; pathname
		call	__access
		add	sp, 6
		or	ax, ax
		jnz	short loc_D589

loc_D584:
		mov	ax, 1
		jmp	short loc_D58B
; ---------------------------------------------------------------------------

loc_D589:
		xor	ax, ax

loc_D58B:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_D50E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl _LoadProg(int, char *s, int, int,	int, int, int)
__LoadProg	proc near

pathname	= word ptr -9Ah
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= dword	ptr -14h
@@s1		= dword	ptr -10h
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
block		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
@@s		= dword	ptr  6
arg_6		= word ptr  0Ah
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh
arg_C		= word ptr  10h
arg_E		= word ptr  12h

		push	bp
		mov	bp, sp
		sub	sp, 9Ah
		push	si
		push	di
		les	bx, [bp+@@s]
		mov	al, es:[bx]
		cbw
		mov	dx, ax
		cmp	ax, 61h	; 'a'
		jb	short loc_D5AB
		sub	dx, 20h	; ' '

loc_D5AB:
		cmp	dx, 41h	; 'A'
		jb	short loc_D5BF
		cmp	dx, 5Ah	; 'Z'
		ja	short loc_D5BF
		les	bx, [bp+@@s]
		cmp	byte ptr es:[bx+1], 3Ah	; ':'
		jz	short loc_D5E7

loc_D5BF:
		mov	ax, 2Fh	; '/'
		push	ax		; c
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strchr
		add	sp, 6
		or	ax, dx
		jnz	short loc_D5E7
		mov	ax, 5Ch	; '\'
		push	ax		; c
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strchr
		add	sp, 6
		or	ax, dx
		jz	short loc_D5EC

loc_D5E7:
		mov	[bp+arg_E], 0

loc_D5EC:
		mov	[bp+var_1A], 0
		mov	ax, 2Eh	; '.'
		push	ax		; c
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		call	_strrchr
		add	sp, 6
		mov	word ptr [bp+@@s1+2], dx
		mov	word ptr [bp+@@s1], ax
		or	ax, dx
		jz	short loc_D646
		push	[bp+arg_E]	; int
		push	ds
		mov	ax, 1EFFh
		push	ax		; src
		push	ss
		lea	ax, [bp+pathname]
		push	ax		; pathname
		push	word ptr [bp+@@s+2] ; int
		push	word ptr [bp+@@s]	; int
		call	sub_D50E
		add	sp, 0Eh
		mov	[bp+var_18], ax
		or	ax, ax
		jnz	short loc_D62F
		jmp	loc_D6AE
; ---------------------------------------------------------------------------

loc_D62F:
		push	ds
		mov	ax, 1F00h
		push	ax		; s2
		push	word ptr [bp+@@s1+2]
		push	word ptr [bp+@@s1] ; s1
		call	_stricmp
		add	sp, 8
		or	ax, ax
		jnz	short loc_D6AE
		jmp	short loc_D6A9
; ---------------------------------------------------------------------------

loc_D646:
		push	[bp+arg_E]	; int
		push	ds
		mov	ax, 1F05h
		push	ax		; src
		push	ss
		lea	ax, [bp+pathname]
		push	ax		; pathname
		push	word ptr [bp+@@s+2] ; int
		push	word ptr [bp+@@s]	; int
		call	sub_D50E
		add	sp, 0Eh
		mov	[bp+var_18], ax
		or	ax, ax
		jnz	short loc_D6AE
		push	[bp+arg_E]	; int
		push	ds
		mov	ax, 1F0Ah
		push	ax		; src
		push	ss
		lea	ax, [bp+pathname]
		push	ax		; pathname
		push	word ptr [bp+@@s+2] ; int
		push	word ptr [bp+@@s]	; int
		call	sub_D50E
		add	sp, 0Eh
		mov	[bp+var_18], ax
		or	ax, ax
		jnz	short loc_D6AE
		push	[bp+arg_E]	; int
		push	ds
		mov	ax, 1F0Fh
		push	ax		; src
		push	ss
		lea	ax, [bp+pathname]
		push	ax		; pathname
		push	word ptr [bp+@@s+2] ; int
		push	word ptr [bp+@@s]	; int
		call	sub_D50E
		add	sp, 0Eh
		mov	[bp+var_18], ax
		or	ax, ax
		jz	short loc_D6AE

loc_D6A9:
		mov	[bp+var_1A], 1

loc_D6AE:
		cmp	[bp+var_18], 0
		jz	short loc_D6CE
		cmp	[bp+var_1A], 0
		jz	short loc_D6D7
		push	ds
		mov	ax, 1F14h
		push	ax		; name
		call	_getenv
		pop	cx
		pop	cx
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		or	ax, dx
		jnz	short loc_D6D7

loc_D6CE:
		mov	word_E17E, 2
		jmp	loc_D789
; ---------------------------------------------------------------------------

loc_D6D7:
		cmp	[bp+var_1A], 0
		jz	short loc_D6F0
		push	[bp+var_2]
		push	[bp+var_4]
		push	ds
		mov	ax, 1F1Ch
		push	ax
		push	[bp+arg_8]
		push	[bp+arg_6]
		jmp	short loc_D704
; ---------------------------------------------------------------------------

loc_D6F0:
		push	ss		; int
		lea	ax, [bp+pathname]
		push	ax		; int
		xor	ax, ax
		push	ax
		push	ax		; s
		mov	ax, [bp+arg_6]
		add	ax, 4
		push	[bp+arg_8]	; int
		push	ax		; int

loc_D704:
		call	__DOSCMD
		mov	word ptr [bp+block+2], dx
		mov	word ptr [bp+block], ax
		mov	ax, word ptr [bp+block]
		or	ax, word ptr [bp+block+2]
		jnz	short loc_D71D
		mov	word_E17E, 8
		jmp	short loc_D789
; ---------------------------------------------------------------------------

loc_D71D:
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; s
		call	_strlen
		pop	cx
		pop	cx
		cmp	ax, 7Fh	; ''
		jbe	short loc_D735
		mov	word_E17E, 14h
		jmp	short loc_D789
; ---------------------------------------------------------------------------

loc_D735:
		mov	ax, [bp+arg_A]
		or	ax, [bp+arg_C]
		jnz	short loc_D74A
		mov	dx, word ptr dword_FFDA+2
		mov	ax, word ptr dword_FFDA
		mov	[bp+arg_C], dx
		mov	[bp+arg_A], ax

loc_D74A:
		push	[bp+arg_C]	; int
		push	[bp+arg_A]	; int
		cmp	[bp+var_1A], 0
		jz	short loc_D75E
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		jmp	short loc_D764
; ---------------------------------------------------------------------------

loc_D75E:
		mov	dx, ss
		lea	ax, [bp+pathname]

loc_D764:
		push	dx
		push	ax		; s
		push	ss
		lea	ax, [bp+var_14]
		push	ax		; __int32
		call	__DOSENV
		mov	[bp+var_A], dx
		mov	[bp+var_C], ax
		or	ax, dx
		jnz	short loc_D78E
		mov	word_E17E, 8
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx

loc_D789:
		mov	ax, 0FFFFh
		jmp	short loc_D7D6
; ---------------------------------------------------------------------------

loc_D78E:
		call	off_FFA0
		push	[bp+var_A]
		push	[bp+var_C]
		push	word ptr [bp+block+2]
		push	word ptr [bp+block]
		cmp	[bp+var_1A], 0
		jz	short loc_D7AC
		mov	dx, [bp+var_2]
		mov	ax, [bp+var_4]
		jmp	short loc_D7B2
; ---------------------------------------------------------------------------

loc_D7AC:
		mov	dx, ss
		lea	ax, [bp+pathname]

loc_D7B2:
		push	dx
		push	ax
		call	[bp+arg_0]
		add	sp, 0Ch
		mov	[bp+var_16], ax
		push	word ptr [bp+var_14+2]
		push	word ptr [bp+var_14] ; block
		call	_farfree
		pop	cx
		pop	cx
		push	word ptr [bp+block+2]
		push	word ptr [bp+block] ; block
		call	_farfree
		pop	cx
		pop	cx
		mov	ax, [bp+var_16]

loc_D7D6:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
__LoadProg	endp

; ---------------------------------------------------------------------------
word_D7DC	dw 0
word_D7DE	dw 0

; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

__spawn		proc near

var_2E		= byte ptr -2Eh
var_1E		= byte ptr -1Eh
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 2Eh
		push	si
		push	ds
		push	di
		push	es
		push	ss
		pop	es
		mov	ax, [bp+arg_8]
		mov	dx, [bp+arg_A]
		mov	cl, 4
		shr	ax, cl
		add	ax, dx
		mov	[bp+var_E], ax
		push	ds
		lds	si, [bp+arg_4]
		mov	[bp+var_C], si
		mov	[bp+var_A], ds
		mov	ax, 2901h
		lea	di, [bp+var_2E]
		mov	[bp+var_8], di
		mov	[bp+var_6], es
		inc	si
		int	21h		; DOS -	PARSE FILENAME
					; DS:SI	-> string to parse
					; ES:DI	-> buffer to fill with unopened	FCB
					; AL = bit mask	to control parsing

loc_D814:
		mov	al, [si]
		cmp	al, 20h	; ' '
		jz	short loc_D825
		cmp	al, 9
		jz	short loc_D825
		cmp	al, 0Dh
		jz	short loc_D825
		inc	si
		jmp	short loc_D814
; ---------------------------------------------------------------------------

loc_D825:
		mov	ax, 2901h
		lea	di, [bp+var_1E]
		mov	[bp+var_4], di
		mov	[bp+var_2], es
		int	21h		; DOS -	PARSE FILENAME
					; DS:SI	-> string to parse
					; ES:DI	-> buffer to fill with unopened	FCB
					; AL = bit mask	to control parsing
		pop	ds
		push	ds
		push	es
		mov	es, segx
		lds	si, [bp+arg_0]
		mov	di, 80h	; 'Ä'
		mov	cx, 7Fh	; ''
		cld

loc_D844:
		lodsb
		test	al, al
		jz	short loc_D84E
		stosb
		loop	loc_D844
		mov	al, 0

loc_D84E:
		stosb
		pop	es
		pop	ds
		push	bp
		push	ds
		lea	bx, [bp+var_E]
		mov	ds, segx
		mov	dx, 80h	; 'Ä'
		mov	ax, 4B00h
		push	word ptr ss:2Eh
		push	word ptr ss:30h
		mov	cs:word_D7DE, ss
		mov	cs:word_D7DC, sp
		int	21h		; DOS -	2+ - LOAD OR EXECUTE (EXEC)
					; DS:DX	-> ASCIZ filename
					; ES:BX	-> parameter block
					; AL = subfunc:	load & execute program
		cli
		mov	ss, cs:word_D7DE
		mov	sp, cs:word_D7DC
		sti
		pop	word ptr ss:30h
		pop	word ptr ss:2Eh
		pop	ds
		pop	bp
		jnb	short loc_D896
		push	ax
		call	__IOERROR
		jmp	short loc_D89A
; ---------------------------------------------------------------------------

loc_D896:
		mov	ah, 4Dh
		int	21h		; DOS -	2+ - GET EXIT CODE OF SUBPROGRAM (WAIT)

loc_D89A:
		pop	es
		pop	di
		pop	ds
		pop	si
		mov	sp, bp
		pop	bp
		retn
__spawn		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl spawnve(int mode,	char *path, char **argv, char **env)
_spawnve	proc near

mode		= word ptr  4
@@s		= dword	ptr  6
@@argv		= word ptr  0Ah
arg_8		= word ptr  0Ch
@@env		= word ptr  0Eh
arg_C		= word ptr  10h

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, [bp+mode]
		or	ax, ax
		jz	short loc_D8B5
		cmp	ax, 2
		jz	short loc_D8D0
		jmp	short loc_D8F1
; ---------------------------------------------------------------------------

loc_D8B5:
		xor	ax, ax
		push	ax
		push	[bp+arg_C]
		push	[bp+@@env]
		push	[bp+arg_8]
		push	[bp+@@argv]
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]
		mov	ax, 0D7E0h
		push	ax
		jmp	short loc_D8E9
; ---------------------------------------------------------------------------

loc_D8D0:
		xor	ax, ax
		push	ax		; int
		push	[bp+arg_C]	; int
		push	[bp+@@env]	; int
		push	[bp+arg_8]	; int
		push	[bp+@@argv]	; int
		push	word ptr [bp+@@s+2]
		push	word ptr [bp+@@s]	; s
		mov	ax, 0CCABh
		push	ax		; int

loc_D8E9:
		call	__LoadProg
		add	sp, 10h
		jmp	short loc_D8FA
; ---------------------------------------------------------------------------

loc_D8F1:
		mov	word_E17E, 13h
		mov	ax, 0FFFFh

loc_D8FA:
		pop	di
		pop	si
		pop	bp
		retn
_spawnve	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl getdate(struct date *datep)
_getdate	proc near

datep		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 2Ah
		int	21h		; DOS -	GET CURRENT DATE
					; Return: DL = day, DH = month,	CX = year
					; AL = day of the week (0=Sunday, 1=Monday, etc.)
		les	bx, [bp+datep]
		mov	es:[bx], cx
		mov	es:[bx+2], dx
		pop	di
		pop	si
		pop	bp
		retn
_getdate	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; void __cdecl gettime(struct time *timep)
_gettime	proc near

timep		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ah, 2Ch
		int	21h		; DOS -	GET CURRENT TIME
					; Return: CH = hours, CL = minutes, DH = seconds
					; DL = hundredths of seconds
		les	bx, [bp+timep]
		mov	es:[bx], cx
		mov	es:[bx+2], dx
		pop	di
		pop	si
		pop	bp
		retn
_gettime	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_D92C	proc near

var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		cmp	[bp+arg_2], 0
		jg	short loc_D94C
		jl	short loc_D942
		cmp	[bp+arg_0], 0
		jnb	short loc_D94C

loc_D942:
		mov	[bp+arg_2], 0
		mov	[bp+arg_0], 0

loc_D94C:
		xor	ax, ax
		mov	dx, 3Ch	; '<'
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LMOD@
		mov	word_141FC, ax
		xor	ax, ax
		mov	dx, 3Ch	; '<'
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LDIV@
		mov	[bp+arg_2], dx
		mov	[bp+arg_0], ax
		xor	ax, ax
		mov	dx, 3Ch	; '<'
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LMOD@
		mov	word_141FE, ax
		xor	ax, ax
		mov	dx, 3Ch	; '<'
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LDIV@
		mov	[bp+arg_2], dx
		mov	[bp+arg_0], ax
		xor	ax, ax
		mov	dx, 88F8h
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LDIV@
		mov	dx, ax
		mov	cl, 2
		shl	ax, cl
		mov	word_14206, ax
		add	word_14206, 46h	; 'F'
		mov	ax, 5B5h
		imul	dx
		mov	[bp+var_2], ax
		xor	ax, ax
		mov	dx, 88F8h
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LMOD@
		mov	[bp+arg_2], dx
		mov	[bp+arg_0], ax

loc_D9DA:
		mov	cx, 2238h
		test	byte ptr word_14206, 3
		jnz	short loc_D9E7
		add	cx, 18h

loc_D9E7:
		mov	ax, cx
		cwd
		cmp	dx, [bp+arg_2]
		jl	short loc_D9F6
		jg	short loc_DA10
		cmp	ax, [bp+arg_0]
		ja	short loc_DA10

loc_D9F6:
		mov	ax, cx
		mov	bx, 18h
		cwd
		idiv	bx
		add	[bp+var_2], ax
		inc	word_14206
		mov	ax, cx
		cwd
		sub	[bp+arg_0], ax
		sbb	[bp+arg_2], dx
		jmp	short loc_D9DA
; ---------------------------------------------------------------------------

loc_DA10:
		cmp	[bp+arg_4], 0
		jz	short loc_DA60
		cmp	word_1020A, 0
		jz	short loc_DA60
		xor	ax, ax
		mov	dx, 18h
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LMOD@
		push	ax
		xor	ax, ax
		mov	dx, 18h
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LDIV@
		push	ax
		xor	ax, ax
		push	ax
		mov	ax, word_14206
		add	ax, 0FFBAh
		push	ax
		call	sub_E013
		or	ax, ax
		jz	short loc_DA60
		add	[bp+arg_0], 1
		adc	[bp+arg_2], 0
		mov	word_1420C, 1
		jmp	short loc_DA66
; ---------------------------------------------------------------------------

loc_DA60:
		mov	word_1420C, 0

loc_DA66:
		xor	ax, ax
		mov	dx, 18h
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LMOD@
		mov	word_14200, ax
		xor	ax, ax
		mov	dx, 18h
		push	ax
		push	dx
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	near ptr N_LDIV@
		mov	[bp+arg_2], dx
		mov	[bp+arg_0], ax
		mov	word_1420A, ax
		add	ax, 4
		add	[bp+var_2], ax
		mov	ax, [bp+var_2]
		mov	bx, 7
		xor	dx, dx
		div	bx
		mov	word_14208, dx
		add	[bp+arg_0], 1
		adc	[bp+arg_2], 0
		test	byte ptr word_14206, 3
		jnz	short loc_DAE7
		cmp	[bp+arg_2], 0
		jl	short loc_DACD
		jg	short loc_DAC3
		cmp	[bp+arg_0], 3Ch	; '<'
		jbe	short loc_DACD

loc_DAC3:
		sub	[bp+arg_0], 1
		sbb	[bp+arg_2], 0
		jmp	short loc_DAE7
; ---------------------------------------------------------------------------

loc_DACD:
		cmp	[bp+arg_2], 0
		jnz	short loc_DAE7
		cmp	[bp+arg_0], 3Ch	; '<'
		jnz	short loc_DAE7
		mov	word_14204, 1
		mov	word_14202, 1Dh
		jmp	short loc_DB1F
; ---------------------------------------------------------------------------

loc_DAE7:
		mov	word_14204, 0
		jmp	short loc_DB03
; ---------------------------------------------------------------------------

loc_DAEF:
		mov	bx, word_14204
		mov	al, [bx+1FC0h]
		cbw
		cwd
		sub	[bp+arg_0], ax
		sbb	[bp+arg_2], dx
		inc	word_14204

loc_DB03:
		mov	bx, word_14204
		mov	al, [bx+1FC0h]
		cbw
		cwd
		cmp	dx, [bp+arg_2]
		jl	short loc_DAEF
		jnz	short loc_DB19
		cmp	ax, [bp+arg_0]
		jb	short loc_DAEF

loc_DB19:
		mov	ax, [bp+arg_0]
		mov	word_14202, ax

loc_DB1F:
		mov	dx, ds
		mov	ax, 60FCh
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_D92C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; int __cdecl atime(char *buffer, __int32)
_atime		proc near

@@buffer		= dword	ptr  4
arg_4		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+arg_4]
		mov	ax, es:[bx+0Ah]
		add	ax, 76Ch
		push	ax
		push	word ptr es:[bx]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx+4]
		push	word ptr es:[bx+6]
		mov	bx, es:[bx+8]
		mov	cl, 2
		shl	bx, cl
		push	word ptr [bx+1F5Ah]
		push	word ptr [bx+1F58h]
		mov	bx, word ptr [bp+arg_4]
		mov	bx, es:[bx+0Ch]
		shl	bx, cl
		push	word ptr [bx+1F22h]
		push	word ptr [bx+1F20h]
		push	ds
		mov	ax, 20C5h
		push	ax		; format
		push	word ptr [bp+@@buffer+2]
		push	word ptr [bp+@@buffer] ; buffer
		call	_sprintf
		add	sp, 1Ah
		pop	di
		pop	si
		pop	bp
		retn
_atime		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; struct tm *__cdecl gmtime(const time_t *timer)
_gmtime		proc near

timer		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	ax, ax
		push	ax
		les	bx, [bp+timer]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		call	sub_D92C
		add	sp, 6
		pop	di
		pop	si
		pop	bp
		retn
_gmtime		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; struct tm *__cdecl localtime(const time_t *timer)
_localtime	proc near

var_4		= word ptr -4
var_2		= word ptr -2
timer		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		call	sub_DE20
		les	bx, [bp+timer]
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		sub	ax, word_10206
		sbb	dx, word_10208
		mov	[bp+var_2], dx
		mov	[bp+var_4], ax
		mov	ax, 1
		push	ax
		push	[bp+var_2]
		push	[bp+var_4]
		call	sub_D92C
		add	sp, 6
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_localtime	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	asctime(const struct tm	*tblock)
_asctime	proc near

tblock		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+tblock+2]
		push	word ptr [bp+tblock] ; __int32
		push	ds
		mov	ax, 60E2h
		push	ax		; buffer
		call	_atime
		add	sp, 8
		mov	dx, ax
		mov	bx, dx
		mov	byte ptr [bx+60E2h], 0Ah
		inc	dx
		mov	bx, dx
		mov	byte ptr [bx+60E2h], 0
		mov	dx, ds
		mov	ax, 60E2h
		pop	di
		pop	si
		pop	bp
		retn
_asctime	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; char *__cdecl	ctime(const time_t *time)
_ctime		proc near

timer		= dword	ptr  4

		push	bp
		mov	bp, sp
		push	si
		push	di
		push	word ptr [bp+timer+2]
		push	word ptr [bp+timer] ; timer
		call	_localtime
		pop	cx
		pop	cx
		push	dx
		push	ax		; tblock
		call	_asctime
		pop	cx
		pop	cx
		pop	di
		pop	si
		pop	bp
		retn
_ctime		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

sub_DC1F	proc near

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= word ptr  0Ah
arg_8		= word ptr  0Ch
arg_A		= word ptr  0Eh

		push	bp
		mov	bp, sp
		sub	sp, 0Ah
		push	si
		push	di
		cmp	[bp+arg_0], 46h	; 'F'
		jl	short loc_DC34
		cmp	[bp+arg_0], 8Ah	; 'ä'
		jle	short loc_DC3D

loc_DC34:
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh
		jmp	loc_DDB7
; ---------------------------------------------------------------------------

loc_DC3D:
		mov	ax, [bp+arg_A]
		mov	bx, 3Ch	; '<'
		cwd
		idiv	bx
		add	[bp+arg_8], ax
		mov	ax, [bp+arg_A]
		cwd
		idiv	bx
		mov	[bp+arg_A], dx
		mov	ax, [bp+arg_8]
		cwd
		idiv	bx
		add	[bp+arg_6], ax
		mov	ax, [bp+arg_8]
		cwd
		idiv	bx
		mov	[bp+arg_8], dx
		mov	ax, [bp+arg_6]
		mov	bx, 18h
		cwd
		idiv	bx
		add	[bp+arg_4], ax
		mov	ax, [bp+arg_6]
		cwd
		idiv	bx
		mov	[bp+arg_6], dx
		jmp	short loc_DCA1
; ---------------------------------------------------------------------------

loc_DC7B:
		test	byte ptr [bp+arg_0], 3
		jnz	short loc_DC93
		cmp	[bp+arg_2], 1
		jnz	short loc_DC93
		cmp	[bp+arg_4], 1Ch
		jle	short loc_DCC3
		sub	[bp+arg_4], 1Dh
		jmp	short loc_DC9E
; ---------------------------------------------------------------------------

loc_DC93:
		mov	bx, [bp+arg_2]
		mov	al, [bx+1FC0h]
		cbw
		sub	[bp+arg_4], ax

loc_DC9E:
		inc	[bp+arg_2]

loc_DCA1:
		mov	ax, [bp+arg_2]
		mov	bx, 0Ch
		cwd
		idiv	bx
		add	[bp+arg_0], ax
		mov	ax, [bp+arg_2]
		cwd
		idiv	bx
		mov	[bp+arg_2], dx
		mov	bx, [bp+arg_2]
		mov	al, [bx+1FC0h]
		cbw
		cmp	ax, [bp+arg_4]
		jle	short loc_DC7B

loc_DCC3:
		sub	[bp+arg_0], 46h	; 'F'
		mov	ax, [bp+arg_0]
		add	ax, 2
		mov	bx, 4
		cwd
		idiv	bx
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_0]
		add	ax, 46h	; 'F'
		test	al, 3
		jnz	short loc_DCE9
		cmp	[bp+arg_2], 2
		jge	short loc_DCE9
		dec	[bp+var_2]

loc_DCE9:
		mov	ax, [bp+arg_0]
		cwd
		push	ax
		push	dx
		xor	dx, dx
		mov	ax, 16Dh
		pop	cx
		pop	bx
		call	N_LXMUL@
		push	ax
		mov	ax, [bp+var_2]
		push	dx
		cwd
		pop	bx
		pop	cx
		add	cx, ax
		adc	bx, dx
		mov	si, [bp+arg_2]
		add	si, si
		mov	ax, [si+1FCCh]
		cwd
		add	cx, ax
		adc	bx, dx
		mov	ax, [bp+arg_4]
		cwd
		add	cx, ax
		adc	bx, dx
		mov	[bp+var_4], bx
		mov	[bp+var_6], cx
		mov	cx, [bp+var_4]
		mov	bx, [bp+var_6]
		mov	dx, 1
		mov	ax, 5180h
		call	N_LXMUL@
		push	ax
		mov	ax, [bp+arg_6]
		push	dx
		cwd
		push	ax
		push	dx
		xor	dx, dx
		mov	ax, 0E10h
		pop	cx
		pop	bx
		call	N_LXMUL@
		pop	bx
		pop	cx
		add	cx, ax
		adc	bx, dx
		mov	ax, [bp+arg_8]
		cwd
		push	cx
		push	bx
		push	ax
		push	dx
		xor	dx, dx
		mov	ax, 3Ch	; '<'
		pop	cx
		pop	bx
		call	N_LXMUL@
		pop	bx
		pop	cx
		add	cx, ax
		adc	bx, dx
		mov	ax, [bp+arg_A]
		cwd
		add	cx, ax
		adc	bx, dx
		add	cx, word_10206
		adc	bx, word_10208
		mov	[bp+var_8], bx
		mov	[bp+var_A], cx
		cmp	word_1020A, 0
		jz	short loc_DD9B
		push	[bp+arg_6]
		push	[bp+arg_4]
		mov	ax, [bp+arg_2]
		inc	ax
		push	ax
		push	[bp+arg_0]
		call	sub_E013
		or	ax, ax
		jz	short loc_DD9B
		sub	[bp+var_A], 0E10h
		sbb	[bp+var_8], 0

loc_DD9B:
		cmp	[bp+var_8], 0
		jl	short loc_DDB1
		jg	short loc_DDA9
		cmp	[bp+var_A], 0
		jbe	short loc_DDB1

loc_DDA9:
		mov	dx, [bp+var_8]
		mov	ax, [bp+var_A]
		jmp	short loc_DDB7
; ---------------------------------------------------------------------------

loc_DDB1:
		mov	dx, 0FFFFh
		mov	ax, 0FFFFh

loc_DDB7:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_DC1F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: library function bp-based	frame

; time_t __cdecl mktime(struct tm *timeptr)
_mktime		proc near

timer		= dword	ptr -4
timeptr		= dword	ptr  4

		push	bp
		mov	bp, sp
		sub	sp, 4
		push	si
		push	di
		les	bx, [bp+timeptr]
		push	word ptr es:[bx]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx+4]
		mov	ax, es:[bx+6]
		dec	ax
		push	ax
		push	word ptr es:[bx+8]
		push	word ptr es:[bx+0Ah]
		call	sub_DC1F
		add	sp, 0Ch
		mov	word ptr [bp+timer+2], dx
		mov	word ptr [bp+timer], ax
		cmp	word ptr [bp+timer+2], 0FFFFh
		jnz	short loc_DDF9
		cmp	word ptr [bp+timer], 0FFFFh
		jz	short loc_DE14

loc_DDF9:
		push	ss
		lea	ax, [bp+timer]
		push	ax		; timer
		call	_localtime
		pop	cx
		pop	cx
		push	word ptr [bp+timeptr+2]
		push	word ptr [bp+timeptr]
		mov	ax, 60FCh
		push	ds
		push	ax
		mov	cx, 12h
		call	N_SCOPY@

loc_DE14:
		mov	dx, word ptr [bp+timer+2]
		mov	ax, word ptr [bp+timer]
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
_mktime		endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_DE20	proc near


@@src		= dword	ptr -6
var_2		= word ptr -2

		push	bp
		mov	bp, sp
		sub	sp, 6
		push	si
		push	di
		push	ds
		mov	ax, 210Ch
		push	ax		; name
		call	_getenv
		pop	cx
		pop	cx
		mov	word ptr [bp+@@src+2], dx
		mov	word ptr [bp+@@src], ax
		or	ax, dx
		jnz	short loc_DE3F
		jmp	loc_DED2
; ---------------------------------------------------------------------------

loc_DE3F:
		push	dx
		push	word ptr [bp+@@src] ; s
		call	_strlen
		pop	cx
		pop	cx
		cmp	ax, 4
		jnb	short loc_DE50
		jmp	loc_DED2
; ---------------------------------------------------------------------------

loc_DE50:
		les	bx, [bp+@@src]
		mov	al, es:[bx]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 0Ch
		jz	short loc_DED2
		les	bx, [bp+@@src]
		mov	al, es:[bx+1]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 0Ch
		jz	short loc_DED2
		les	bx, [bp+@@src]
		mov	al, es:[bx+2]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 0Ch
		jz	short loc_DED2
		les	bx, [bp+@@src]
		cmp	byte ptr es:[bx+3], 2Dh	; '-'
		jz	short loc_DEAA
		cmp	byte ptr es:[bx+3], 2Bh	; '+'
		jz	short loc_DEAA
		mov	al, es:[bx+3]
		cbw
		mov	bx, ax
		test	byte ptr [bx+1D69h], 2
		jz	short loc_DED2

loc_DEAA:
		les	bx, [bp+@@src]
		mov	al, es:[bx+3]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 2
		jnz	short loc_DF0D
		les	bx, [bp+@@src]
		mov	al, es:[bx+4]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 2
		jnz	short loc_DF0D

loc_DED2:
		mov	word_1020A, 1
		mov	word_10208, 0
		mov	word_10206, 4650h
		push	ds
		mov	ax, 210Fh
		push	ax		; src
		push	word ptr off_101FE+2
		push	word ptr off_101FE	; dest
		call	_strcpy
		add	sp, 8
		push	ds
		mov	ax, 2113h
		push	ax		; src
		push	word ptr s+2
		push	word ptr s		; dest
		call	_strcpy
		add	sp, 8
		jmp	loc_E00D
; ---------------------------------------------------------------------------

loc_DF0D:
		mov	ax, 4
		push	ax		; n
		xor	ax, ax
		push	ax		; c
		push	word ptr s+2
		push	word ptr s		; s
		call	_memset
		add	sp, 8
		mov	ax, 3
		push	ax		; maxlen
		push	word ptr [bp+@@src+2]
		push	word ptr [bp+@@src] ; src
		push	word ptr off_101FE+2
		push	word ptr off_101FE	; dest
		call	_strncpy
		add	sp, 0Ah
		les	bx, dword ptr off_101FE
		mov	byte ptr es:[bx+3], 0
		mov	ax, word ptr [bp+@@src]
		add	ax, 3
		push	word ptr [bp+@@src+2]
		push	ax
		call	sub_BE91
		pop	cx
		pop	cx
		push	ax
		push	dx
		xor	dx, dx
		mov	ax, 0E10h
		pop	cx
		pop	bx
		call	N_LXMUL@
		mov	word_10208, dx
		mov	word_10206, ax
		mov	word_1020A, 0
		mov	[bp+var_2], 3
		jmp	loc_DFFE
; ---------------------------------------------------------------------------

loc_DF73:
		les	bx, [bp+@@src]
		add	bx, [bp+var_2]
		mov	al, es:[bx]
		cbw
		mov	bx, ax
		test	byte ptr [bx+1D69h], 0Ch
		jz	short loc_DFFB
		mov	ax, word ptr [bp+@@src]
		add	ax, [bp+var_2]
		push	word ptr [bp+@@src+2]
		push	ax		; s
		call	_strlen
		pop	cx
		pop	cx
		cmp	ax, 3
		jb	short loc_E00D
		mov	bx, [bp+var_2]
		mov	es, word ptr [bp+@@src+2]
		add	bx, word ptr [bp+@@src]
		mov	al, es:[bx+1]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 0Ch
		jz	short loc_E00D
		mov	bx, [bp+var_2]
		mov	es, word ptr [bp+@@src+2]
		add	bx, word ptr [bp+@@src]
		mov	al, es:[bx+2]
		cbw
		mov	bx, ax
		mov	al, [bx+1D69h]
		mov	ah, 0
		test	al, 0Ch
		jz	short loc_E00D
		mov	ax, 3
		push	ax		; maxlen
		mov	ax, word ptr [bp+@@src]
		add	ax, [bp+var_2]
		push	word ptr [bp+@@src+2]
		push	ax		; src
		push	word ptr s+2
		push	word ptr s		; dest
		call	_strncpy
		add	sp, 0Ah
		les	bx, dword ptr s
		mov	byte ptr es:[bx+3], 0
		mov	word_1020A, 1
		jmp	short loc_E00D
; ---------------------------------------------------------------------------

loc_DFFB:
		inc	[bp+var_2]

loc_DFFE:
		les	bx, [bp+@@src]
		add	bx, [bp+var_2]
		cmp	byte ptr es:[bx], 0
		jz	short loc_E00D
		jmp	loc_DF73
; ---------------------------------------------------------------------------

loc_E00D:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn
sub_DE20	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_E013	proc near

var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= byte ptr  0Ah

		push	bp
		mov	bp, sp
		sub	sp, 2
		push	si
		push	di
		cmp	[bp+arg_2], 0
		jnz	short loc_E054
		mov	ax, [bp+arg_4]
		mov	[bp+var_2], ax
		cmp	[bp+arg_4], 3Bh	; ';'
		jb	short loc_E03A
		mov	ax, [bp+arg_0]
		add	ax, 46h	; 'F'
		test	al, 3
		jnz	short loc_E03A
		dec	[bp+var_2]

loc_E03A:
		mov	[bp+arg_2], 0
		jmp	short loc_E044
; ---------------------------------------------------------------------------

loc_E041:
		inc	[bp+arg_2]

loc_E044:
		mov	bx, [bp+arg_2]
		add	bx, bx
		mov	ax, [bx+20E4h]
		cmp	ax, [bp+var_2]
		jbe	short loc_E041
		jmp	short loc_E074
; ---------------------------------------------------------------------------

loc_E054:
		mov	bx, [bp+arg_2]
		dec	bx
		add	bx, bx
		mov	ax, [bx+20E4h]
		add	[bp+arg_4], ax
		cmp	[bp+arg_2], 3
		jbe	short loc_E074
		mov	ax, [bp+arg_0]
		add	ax, 46h	; 'F'
		test	al, 3
		jnz	short loc_E074
		inc	[bp+arg_4]

loc_E074:
		cmp	[bp+arg_2], 4
		jb	short loc_E0F5
		jz	short loc_E084
		cmp	[bp+arg_2], 0Ah
		ja	short loc_E0F5
		jnz	short loc_E0F0

loc_E084:
		mov	bx, [bp+arg_2]
		shl	bx, 1
		cmp	[bp+arg_0], 10h
		jle	short loc_E09E
		cmp	[bp+arg_2], 4
		jnz	short loc_E09E
		mov	cx, [bx+20E2h]
		add	cx, 7
		jmp	short loc_E0A2
; ---------------------------------------------------------------------------

loc_E09E:
		mov	cx, [bx+20E4h]

loc_E0A2:
		mov	bx, [bp+arg_0]
		add	bx, 7B2h
		test	bl, 3
		jz	short loc_E0AF
		dec	cx

loc_E0AF:
		mov	bx, [bp+arg_0]
		inc	bx
		sar	bx, 1
		sar	bx, 1
		add	bx, cx
		mov	ax, 16Dh
		mul	[bp+arg_0]
		add	ax, bx
		add	ax, 4
		xor	dx, dx
		mov	bx, 7
		div	bx
		sub	cx, dx
		mov	ax, [bp+arg_4]
		cmp	[bp+arg_2], 4
		jnz	short loc_E0E4
		cmp	ax, cx
		ja	short loc_E0F0
		jnz	short loc_E0F5
		cmp	[bp+arg_6], 2
		jb	short loc_E0F5
		jmp	short loc_E0F0
; ---------------------------------------------------------------------------

loc_E0E4:
		cmp	ax, cx
		jb	short loc_E0F0
		jnz	short loc_E0F5
		cmp	[bp+arg_6], 1
		ja	short loc_E0F5

loc_E0F0:
		mov	ax, 1
		jmp	short loc_E0F7
; ---------------------------------------------------------------------------

loc_E0F5:
		xor	ax, ax

loc_E0F7:
		pop	di
		pop	si
		mov	sp, bp
		pop	bp
		retn	8
sub_E013	endp

; ---------------------------------------------------------------------------
seg000		ends

; ===========================================================================

; Segment type:	Pure data
dseg		segment	para public 'DATA' use16
		assume cs:dseg
word_E100	dw 0
word_E102	dw 0
aNullCheck	db 'NULL CHECK',0
		db 11h dup(0)
aBorlandCCopyri	db 'Borland C++ - Copyright 1994 Borland Intl.',0
aDivideError	db 'Divide error',0Dh,0Ah,0
dword_E15A	dd 0
dword_E15E	dd 0
dword_E162	dd 0
dword_E166	dd 0
; int argc
argc		dw 0
; char **argv
argv		dw 0
word_E16E	dw 0
; char **envp
envp		dw 0
word_E172	dw 0
word_E174	dw 0
word_E176	dw 0
word_E178	dw 0
; unsigned int segx
segx		dw 0
word_E17C	dw 0
word_E17E	dw 0
		dw 0FFFFh
		dw 6116h
word_E184	dw 0
word_E186	dw 0
word_E188	dw 0
word_E18A	dw 0
word_E18C	dw 0
word_E18E	dw 0
; char dest
dest		db 0
		db 70 dup(0)
word_E1D7	dw 0
		db 14 dup(0)
word_E1E7	dw 0
word_E1E9	dw 0
word_E1EB	dw 0
word_E1ED	dw 0
		db 74 dup(0)
word_E239	dw 0
word_E23B	dw 0
word_E23D	dw 0
word_E23F	dw 0
byte_E241	db 75 dup(0)
; void *src
src		dw 0
word_E28E	dw 0
; size_t maxlen
maxlen		dw 0
; size_t word_E292
word_E292	dw 0
word_E294	dw 7Fh
dword_E296	dd 0
word_E29A	dw 0
; int word_E29C
word_E29C	dw 0FFFFh
word_E29E	dw 0
; char aObj[4]
aObj		db 'obj',0
aS		db 9,'%s',0Ah,0
; char a[]
a@		db '@',0
; char a_[]
a_		db '.',0
; char asc_E2AD[]
asc_E2AD	db '\',0
aS_0		db '  %s',0
aS_1		db ' -> %s',0
; char asc_E2BB[]
asc_E2BB	db ' ',0
asc_E2BD	db '  ',0
aS_2		db '    %s',0
		align 2
word_E2C8	dw 0
; char msg[]
msg		db 'Assertion failed: %s, file %s, line %d',0Ah,0
; char cond[]
cond		db 'bytesRead > 0',0
; char aMakein_c[]
aMakein_c	db 'makein.c',0
		align 2
		db '$*$*$*',0
		db 'À',0
		db    3
aTurboMake	db 'Turbo Make',0
		align 2
; char a0x0400[]
a0x0400		db '0x0400',0
aMakefile	db 'makefile',0
word_E330	dw 20h
; char *off_E332
off_E332	dd aMakefile	; "makefile"
word_E336	dw 0
		db    0
		db  20h
word_E33A	dw 2400h
; char a__make__[]
a__make__	db '__MAKE__',0
; char a__msdos__[]
a__msdos__	db '__MSDOS__',0
; char a1[]
a1		db '1',0
a4_0		db '4.0 ',0
; char a_mak[]
a_mak		db '.mak',0
; char path[]
path		db 'builtins.mak',0
; char aS_3[]
aS_3		db '%s',0Ah,0
; char aS_4[]
aS_4		db '                     %s',0Ah,0
; char aCSC[]
aCSC		db '%c%s%c',0
; char aSS[]
aSS		db '%s%s',0
		db 0Ah
		db '                     ',0
; char asc_E3A8[3]
asc_E3A8	db 0Ah
		db 0Ah,0
		align 2
; char asc_E3AC[2]
asc_E3AC	db '/',0
; char a15sS[]
a15sS		db '%15s = %s',0Ah,0
		align 2
dword_E3BA	dd 0
byte_E3BE	db 0
		align 2
; __int32 off_E3C0
off_E3C0	dd byte_E3DA
dword_E3C4	dd 0
; char aMake_0[4]
aMake_0		db 'MAKE'
byte_E3CC	db 30h
byte_E3CD	db 30h
byte_E3CE	db 30h
byte_E3CF	db 30h
a_@@@		db '.@@@',0
		align 2
word_E3D6	dw 0
word_E3D8	dw 0
; char byte_E3DA
byte_E3DA	db 0
; char aSS_0[]
aSS_0		db '%s%s',0
; char aSSS[]
aSSS		db '%s%s%s',0
; char a__0[]
a__0		db '.',0
; char aNo[]
aNo		db 'NO',0
; char aPath[]
aPath		db 'PATH',0
; char a_S_[]
a_S_		db '.%s.',0
; char aPrecious[]
aPrecious	db 'PRECIOUS',0
; char aSuffixes[]
aSuffixes	db 'SUFFIXES',0
; char aAutodepend[]
aAutodepend	db 'AUTODEPEND',0
; char aSilent[]
aSilent		db 'SILENT',0
; char aSwap[]
aSwap		db 'SWAP',0
; char aIgnore[]
aIgnore		db 'IGNORE',0
; char aKeep[]
aKeep		db 'KEEP',0
; char aCacheautodepen[]
aCacheautodepen	db 'CACHEAUTODEPEND',0
; char s1[]
s1		db 'NOKEEP',0
; char aElse[]
aElse		db 'else',0
; char aInclude[]
aInclude	db 'include',0
; char aUndef[]
aUndef		db 'undef',0
; char aElif[]
aElif		db 'elif',0
; char aElseif[]
aElseif		db 'elseif',0
; char aIfdef[]
aIfdef		db 'ifdef',0
; char aIfndef[]
aIfndef		db 'ifndef',0
; char aEndif[]
aEndif		db 'endif',0
; char aError[]
aError		db 'error',0
; char aMessage[]
aMessage	db 'message',0
; char aCmdswitches[]
aCmdswitches	db 'cmdswitches',0
aS_5		db '%s',0Dh,0Ah,0
		align 2
byte_E494	db 2Bh dup(0)
; char name[]
_name		db 'PATH',0
; char asc_E4C4[]
asc_E4C4	db '\',0
; char aComspec[]
aComspec	db 'COMSPEC',0
; char asc_E4CE[]
asc_E4CE	db ' ',0
; char aBat[]
aBat		db 'bat',0
; char a_com[]
a_com		db '.com',0
; char a_exe[]
a_exe		db '.exe',0
; char a_bat[]
a_bat		db '.bat',0
		align 2
; char aDefined[]
aDefined	db 'defined',0
; char asc_E4EC[]
asc_E4EC	db ' ',0
; char asc_E4EE[]
asc_E4EE	db '**',0
		align 2
aDErrorsDuringM	db '*** %d errors during make ***',0Ah,0
aFatal		db 'Fatal',0
aError_0	db 'Error',0
aSDoesNotExistD	db 27h,'%s',27h,' does not exist - don',27h,'t know how to make it',0
aUnableToExecut	db 'Unable to execute command: %s',0
aIncorrectComma	db 'Incorrect command line argument: %s',0
aUnableToOpenMa	db 'Unable to open makefile',0
aNotEnoughMemor	db 'Not enough memory',0
aErrorDirective	db 'Error directive: %s',0
aUnableToRedire	db 'Unable to redirect input or output',0
aNoTerminatorSp	db 'No terminator specified for in-line file operator',0
aCircularDepend	db 'Circular dependency exists in makefile',0
aMacroSubstitut	db 'Macro substitute text %s is too long',0
aMacroReplaceTe	db 'Macro replace text %s is too long',0
aSMissingInMacr	db '%s - ',27h,')',27h,' missing in macro invocation',0
aCycleInInclude	db 'Cycle in include files: ',27h,'%s',27h,0
aCannotWriteASt	db 'Cannot write a string option.',0Ah,0
aCannotFindMake	db 'Cannot find MAKE.EXE',0Ah,0
aUnableToOpenFi	db 'Unable to open file %s.',0Ah,0
aSNotAMake_	db '%s not a MAKE.',0Ah,0
aWriteErrorOnFi	db 'Write error on file %s.',0Ah,0
aCommandArgumen	db 'Command arguments too long',0
aUnexpectedEndO	db 'Unexpected end of file in conditional started at line %d',0
aUnknownPreproc	db 'Unknown preprocessor statement',0
aBadFilenameFor	db 'Bad filename format in include statement',0
aFilenameTooLon	db 'Filename too long',0
aNoFilenameEndi	db 'No filename ending',0
aUnableToOpenIn	db 'Unable to open include file ',27h,'%s',27h,0
aMacroExpansion	db 'Macro expansion too long',0
aIfStatementToo	db 'If statement too long',0
aCommandTooLong	db 'Command too long',0
aRuleLineTooLon	db 'Rule line too long',0
aBadUndefStatem	db 'Bad undef statement syntax',0
aMisplacedElseS	db 'Misplaced else statement',0
aCommandSyntaxE	db 'Command syntax error',0
aMisplacedElifS	db 'Misplaced elif statement',0
aMisplacedEndif	db 'Misplaced endif statement',0
aIllegalCharact	db 'Illegal character in constant expression ',27h,'%c',27h,0
aExpressionSynt	db 'Expression syntax error in !if statement',0
aIllegalOctalDi	db 'Illegal octal digit',0
aCharacterConst	db 'Character constant too long',0
aDivisionByZero	db 'Division by zero',0
aRedefinitionOf	db 'Redefinition of target ',27h,'%s',27h,0
aBadMacroOutput	db 'Bad macro output translator',0
aTooManySuffixe	db 'Too many suffixes in .SUFFIXES list',0
aUseOfAndDepend	db 'Use of : and :: dependents for target ',27h,'%s',27h,0
aIfdefStatement	db 'Ifdef statement too long',0
aIfndefStatemen	db 'Ifndef statement too long',0
aNoMatchFoundFo	db ' No match found for wildcard ',27h,'%s',27h,0
aNoClosingQuote	db 'No closing quote',0
aStringTypeNotA	db 'String type not allowed with this operand',0
aIntAndStringTy	db 'Int and string types compared',0
aColonExpected	db 'Colon expected',0
aOnlyKeepOrNoke	db 'Only <<KEEP or <<NOKEEP',0
aUnexpectedEn_0	db 'Unexpected end of file',0
aCannotHavePath	db 'Cannot have path list for target',0
aCannotHaveMult	db 'Cannot have multiple paths for implicit rule',0
aNoMacroBefore	db 'No macro before =',0
aTooManyRulesFo	db 'Too many rules for target ',27h,'%s',27h,0
aIllegalInvalid	db 'Illegal/invalid option in CMDSWITCHES directive ',27h,'%s',27h,0
aUnknownCmdswit	db 'Unknown CMDSWITCHES operator ',27h,'%c',27h,0
		align 2
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F7h	; ˜
		db 0FFh
		db 0F7h	; ˜
		db 0FFh
		db 0F7h	; ˜
		db 0FFh
		db 0F7h	; ˜
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F7h	; ˜
		db 0FFh
		db 0ECh	; Ï
		db 0FFh
		db 0F9h	; ˘
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db    5
		db    0
		db 0F4h	; Ù
		db 0FFh
		db 0F2h	; Ú
		db 0FFh
		db  18h
		db    0
		db  19h
		db    0
		db    3
		db    0
		db    1
		db    0
		db 0F8h	; ¯
		db 0FFh
		db    2
		db    0
		db 0F8h	; ¯
		db 0FFh
		db    4
		db    0
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db 0F5h	; ı
		db 0FFh
		db  0Ch
		db    0
		db 0F8h	; ¯
		db 0FFh
		db 0EFh	; Ô
		db 0FFh
		db 0EEh	; Ó
		db 0FFh
		db 0EDh	; Ì
		db 0FFh
		db  0Bh
		db    0
		db 0F8h	; ¯
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db    8
		db    0
		db 0F3h	; Û
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F3h	; Û
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db 0F6h	; ˆ
		db 0FFh
		db 0F8h	; ¯
		db 0FFh
		db  17h
		db    0
		db 0F8h	; ¯
		db 0FFh
		db    0
		db  0Ch
		db  0Ch
		db  0Dh
		db  0Dh
		db  0Dh
		db    8
		db    6
		db    7
		db  0Bh
		db  0Bh
		db    3
		db    3
		db    9
		db    9
		db  0Ah
		db  0Ah
		db  0Ah
		db  0Ah
		db    5
		db    4
		db    0
		db    1
		db    2
		db    2
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    1
		db    0
aSyntaxMakeOpti	db 'Syntax: MAKE [options ...] target[s]',0Ah
		db '    -B%c              Builds all targets regardless of dependency'
		db ' dates',0Ah
		db '    -Dsymbol         Defines symbol',0Ah
		db '    -Dsymbol=string  Defines symbol to string',0Ah
		db '    -Idirectory      Names an include directory',0Ah
		db '    -K%c              Keeps (does not erase) temporary files crea'
		db 'ted by MAKE',0Ah
		db '    -N%c              Increases MAKE',27h,'s compatibility with NMAK'
		db 'E',0Ah
		db '    -S%c              Swaps MAKE out of memory to execute command'
		db 's.',0Ah
		db '    -W               Writes all non-string options back to the .E'
		db 'XE file',0Ah
		db '    -Usymbol         Undefine symbol',0Ah
		db '    -ffilename       Uses filename as the MAKEFILE',0Ah
		db '    -dswapdir        Writes MAKE',27h,'s swap file to swapdir',0Ah
		db '    -a%c              Performs auto-dependency checks for include'
		db ' files',0Ah
		db '    -c%c              Caches auto-dependency information',0Ah
		db '    -e%c              Ignores redefinition of environment variabl'
		db 'e macros',0Ah
		db '    -i%c              Ignores errors returned by commands',0Ah
		db '    -m%c              Displays the date and time stamp of each fi'
		db 'le',0Ah
		db '    -n%c              Prints commands but does not do them',0Ah
		db '    -p%c              Displays all macro definitions and implicit'
		db ' rules',0Ah
		db '    -q%c              Returns zero if target is up-to-date and no'
		db 'nzero',0Ah
		db '                     if it is not (for use in batch files)',0Ah
		db '    -r%c              Ignores rules and macros defined in BUILTIN'
		db 'S.MAK',0Ah
		db '    -s%c              Silent, does not print commands before doin'
		db 'g them',0Ah
		db '    -? or -h         Prints this message',0Ah
		db '      Options marked with ',27h,'+',27h,' are on by default. To turn of'
		db 'f a default',0Ah
		db '      option follow it by a ',27h,'-',27h,', for example: -a-',0
aMakeVersionSCo	db 'MAKE Version %s Copyright (c) 1987, 1996 Borland International',0Ah,0
aAvailableMemor	db 0Ah
		db 'Available memory %ld bytes',0Ah
		db 0Ah,0
; char format[]
format		db 'Implicit Rules:',0Ah,0
; char a_S_SCommands[]
a_S_SCommands	db '    .%s.%s:',0Ah
		db '        commands:    ',0
; char aCommandsC[]
aCommandsC	db 0Ah
		db '        commands:   %c',0
; char aTargets[]
aTargets	db 0Ah
		db 'Targets:',0Ah,0
; char aSFlagsSDepende[]
aSFlagsSDepende	db '    %s:',0Ah
		db '        flags:       %s',0Ah
		db '        dependents:  ',0
aPrecious_0	db '(PRECIOUS)',0
aWriteOptionsTo	db 0Ah
		db 'Write options to %s? ( Y/N ) [N]:',0
aEnterFullPathO	db 0Ah
		db 'Enter full path of MAKE.EXE to modify: ',0
; char aMacros[]
aMacros		db 0Ah
		db 'Macros:',0Ah,0
aFatalCouldNotC	db 'Fatal:  Could not create temporary file ',27h,'%s',27h,0Ah,0
aErrorDDeleting	db 0Ah
		db '** error %d ** deleting %s',0Ah,0
aDoesNotExist	db 'does not exist',0
aFileNotFound	db 'File not found',0
; char aFileCreationEr[]
aFileCreationEr	db 'File creation error',0
word_F4E0	dw 0
; char a[]
a@_0		db '!@#$%^&*()',0
		align 2
word_F4EE	dw 0
word_F4F0	dw 0
word_F4F2	dw 0
word_F4F4	dw 0
word_F4F6	dw 0
unk_F4F8	db    0
		db    0
word_F4FA	dw 0
word_F4FC	dw 0
word_F4FE	dw 0
word_F500	dw 0
word_F502	dw 0
word_F504	dw 0
; int word_F506
word_F506	dw 0
word_F508	dw 0
word_F50A	dw 0
word_F50C	dw 0
word_F50E	dw 0
word_F510	dw 0
unk_F512	db  3Fh	; ?
		db    0
		db    0
		db    0
		dd word_F4E0
		db  42h	; B
		db    0
		db    0
		db    0
		dd word_F50A
		db  44h	; D
		db    0
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db  49h	; I
		db    0
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db  4Bh	; K
		db    0
		db    0
		db    0
		dd word_F50C
		db  4Eh	; N
		db    0
		db    0
		db    0
		dd word_F50E
		db  53h	; S
		db    0
		db    0
		db    0
		dd word_F510
		db  55h	; U
		db    0
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db  57h	; W
		db    0
		db    3
		db    0
		db    0
		db    0
		db    0
		db    0
		db  61h	; a
		db    0
		db    0
		db    0
		dd word_F4EE
		db  62h	; b
		db    0
		db    0
		db    0
		dd word_F4F0
		db  63h	; c
		db    0
		db    0
		db    0
		dd word_F4F2
		db  64h	; d
		db    0
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db  65h	; e
		db    0
		db    0
		db    0
		dd word_F4F4
		db  66h	; f
		db    0
		db    1
		db    0
		db    0
		db    0
		db    0
		db    0
		db  68h	; h
		db    0
		db    0
		db    0
		dd word_F4E0
		db  69h	; i
		db    0
		db    0
		db    0
		dd word_F4F6
		db  6Ch	; l
		db    0
		db    0
		db    0
		dd unk_F4F8
		db  6Dh	; m
		db    0
		db    0
		db    0
		dd word_F4FA
		db  6Eh	; n
		db    0
		db    0
		db    0
		dd word_F4FC
		db  6Fh	; o
		db    0
		db    0
		db    0
		dd word_F500
		db  70h	; p
		db    0
		db    0
		db    0
		dd word_F4FE
		db  71h	; q
		db    0
		db    0
		db    0
		dd word_F502
		db  72h	; r
		db    0
		db    0
		db    0
		dd word_F504
		db  73h	; s
		db    0
		db    0
		db    0
		dd word_F506
		db  75h	; u
		db    0
		db    0
		db    0
		dd word_F508
unk_F5E2	db  31h	; 1
		db    0
unk_F5E4	db  0Ah
unk_F5E5	db  0Ah
		db    0
; char aAssertionFai_0[]
aAssertionFai_0	db 'Assertion failed: %s, file %s, line %d',0Ah,0
; char aBytesreadUint_[]
aBytesreadUint_	db 'bytesread < UINT_MAX',0
; char aConfig_c[]
aConfig_c	db 'config.c',0
aMake_exe	db 'MAKE.EXE',0
; char aMakeflags[]
aMakeflags	db 'MAKEFLAGS',0
; char aMake[]
aMake		db 'MAKE',0
; char aMakedir[]
aMakedir	db 'MAKEDIR',0
		align 2
word_F64E	dw 0
word_F650	dw 0
word_F652	dw 0
		dw 0
		dw 0
word_F658	dw 0
aS_6		db ' %s',0
aD		db ' %d',0
asc_F662	db ': ',0
asc_F665	db 0Ah,0
		db    0
a2147483648	db '2147483648',0
		db    0
unk_F674	db    0
		db    0
		db    0
		db    0
unk_F678	db    0
		db    0
		db    0
		db    0
stru_F67C	FILE <0, 209h, 0, 0, 0,	0, 0, 0, 157Ch>
; FILE stream
stream		FILE <0, 20Ah, 1, 0, 0,	0, 0, 0, 1590h>
stru_F6A4	FILE <0, 202h, 2, 0, 0,	0, 0, 0, 15A4h>
		FILE <0, 243h, 3, 0, 0,	0, 0, 0, 15B8h>
stru_F6CC	FILE <0, 242h, 4, 0, 0,	0, 0, 0, 15CCh>
		db 384h	dup(0)
; unsigned int _nfile
__nfile		dw 32h
__openfd	dw 6001h
		dw 6002h
		dw 6002h
		dw 0A004h
		dw 0A002h
		db 5Ah dup(0)
word_FACA	dw 4000h
word_FACC	dw 0FFFFh
word_FACE	dw 0
		db    0
		db  13h
		db    2
		db    2
		db    4
		db    5
		db    6
		db    8
		db    8
		db    8
		db  14h
		db  15h
		db    5
		db  13h
		db  0Eh
		db    5
		db    5
		db  11h
		db    2
		db  1Eh
		db  29h	; )
		db  2Ch	; ,
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  29h	; )
		db  2Ch	; ,
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db    5
		db    5
		db  29h	; )
		db  17h
		db  17h
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Fh
		db  2Ch	; ,
		db  23h	; #
		db    2
		db  2Ch	; ,
		db  0Fh
		db  2Ah	; *
		db  28h	; (
		db  28h	; (
		db  28h	; (
		db  13h
		db  1Bh
		db  1Ch
		db    2
		db    2
		db    5
		db  0Fh
		db    2
		db  17h
		db  28h	; (
		db  2Ah	; *
		db  13h
		db  2Ah	; *
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  0Eh
		db  23h	; #
		db  0Eh
		db  1Ch
		db  28h	; (
		db  17h
		db  23h	; #
		db  25h	; %
		db  13h
		db  28h	; (
		db    0
		db  28h	; (
		db  6Eh	; n
		db  75h	; u
		db  6Ch	; l
		db  6Ch	; l
		db  29h	; )
		db    0
		db    0
		db  14h
		db  14h
		db    1
		db  14h
		db  15h
		db  14h
		db  14h
		db  14h
		db  14h
		db    2
		db    0
		db  14h
		db    3
		db    4
		db  14h
		db    9
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db    5
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  0Fh
		db  17h
		db  0Fh
		db    8
		db  14h
		db  14h
		db  14h
		db    7
		db  14h
		db  16h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  0Dh
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  10h
		db  0Ah
		db  0Fh
		db  0Fh
		db  0Fh
		db    8
		db  0Ah
		db  14h
		db  14h
		db    6
		db  14h
		db  12h
		db  0Bh
		db  0Eh
		db  14h
		db  14h
		db  11h
		db  14h
		db  0Ch
		db  14h
		db  14h
		db  0Dh
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db  14h
		db    0
		dd aError0		; "Error 0"
		dd aInvalidFunctio	; "Invalid function number"
		dd aNoSuchFileOrDi	; "No such file	or directory"
		dd aPathNotFound	; "Path	not found"
		dd aTooManyOpenFil	; "Too many open files"
		dd aPermissionDeni	; "Permission denied"
		dd aBadFileNumber	; "Bad file number"
		dd aMemoryArenaTra	; "Memory arena	trashed"
		dd aNotEnoughMem_0	; "Not enough memory"
		dd aInvalidMemoryB	; "Invalid memory block	address"
		dd aInvalidEnviron	; "Invalid environment"
		dd aInvalidFormat	; "Invalid format"
		dd aInvalidAccessC	; "Invalid access code"
		dd aInvalidData		; "Invalid data"
		dd unk_FD5B
		dd aNoSuchDevice	; "No such device"
		dd aAttemptedToRem	; "Attempted to	remove current directory"
		dd aNotSameDevice	; "Not same device"
		dd aNoMoreFiles		; "No more files"
		dd aInvalidArgumen	; "Invalid argument"
		dd aArgListTooBig	; "Arg list too	big"
		dd aExecFormatErro	; "Exec	format error"
		dd aCrossDeviceLin	; "Cross-device	link"
		dd unk_FDF5
		dd unk_FDF6
		dd unk_FDF7
		dd unk_FDF8
		dd unk_FDF9
		dd unk_FDFA
		dd unk_FDFB
		dd unk_FDFC
		dd unk_FDFD
		dd unk_FDFE
		dd aMathArgument	; "Math	argument"
		dd aResultTooLarge	; "Result too large"
		dd aFileAlreadyExi	; "File	already	exists"
		dd aPossibleDeadlo	; "Possible deadlock"
		dd unk_FE44
		dd unk_FE45
		dd unk_FE46
		dd unk_FE47
		dd unk_FE48
		dd unk_FE49
		dd unk_FE4A
		dd unk_FE4B
		dd unk_FE4C
		dd unk_FE4D
		dd unk_FE4E
word_FC52	dw 30h
aError0		db 'Error 0',0
aInvalidFunctio	db 'Invalid function number',0
aNoSuchFileOrDi	db 'No such file or directory',0
aPathNotFound	db 'Path not found',0
aTooManyOpenFil	db 'Too many open files',0
aPermissionDeni	db 'Permission denied',0
aBadFileNumber	db 'Bad file number',0
aMemoryArenaTra	db 'Memory arena trashed',0
aNotEnoughMem_0	db 'Not enough memory',0
aInvalidMemoryB	db 'Invalid memory block address',0
aInvalidEnviron	db 'Invalid environment',0
aInvalidFormat	db 'Invalid format',0
aInvalidAccessC	db 'Invalid access code',0
aInvalidData	db 'Invalid data',0
unk_FD5B	db    0
aNoSuchDevice	db 'No such device',0
aAttemptedToRem	db 'Attempted to remove current directory',0
aNotSameDevice	db 'Not same device',0
aNoMoreFiles	db 'No more files',0
aInvalidArgumen	db 'Invalid argument',0
aArgListTooBig	db 'Arg list too big',0
aExecFormatErro	db 'Exec format error',0
aCrossDeviceLin	db 'Cross-device link',0
unk_FDF5	db    0
unk_FDF6	db    0
unk_FDF7	db    0
unk_FDF8	db    0
unk_FDF9	db    0
unk_FDFA	db    0
unk_FDFB	db    0
unk_FDFC	db    0
unk_FDFD	db    0
unk_FDFE	db    0
aMathArgument	db 'Math argument',0
aResultTooLarge	db 'Result too large',0
aFileAlreadyExi	db 'File already exists',0
aPossibleDeadlo	db 'Possible deadlock',0
unk_FE44	db    0
unk_FE45	db    0
unk_FE46	db    0
unk_FE47	db    0
unk_FE48	db    0
unk_FE49	db    0
unk_FE4A	db    0
unk_FE4B	db    0
unk_FE4C	db    0
unk_FE4D	db    0
unk_FE4E	db    0
aUnknownError	db 'Unknown error',0
		db ': ',0
		db 0Ah,0
		db 0Dh,0
word_FE64	dw 0
word_FE66	dw 0
		public __ctype
; unsigned __int8 _ctype[257]
__ctype		db    0, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h, 20h, 21h, 21h,	21h, 21h, 21h, 20h
		db  20h, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h, 20h, 20h, 20h,	20h, 20h, 20h, 20h
		db  20h, 81h, 40h, 40h,	40h, 40h, 40h, 40h
		db  40h, 40h, 40h, 40h,	40h, 40h, 40h, 40h
		db  40h, 12h, 12h, 12h,	12h, 12h, 12h, 12h
		db  12h, 12h, 12h, 40h,	40h, 40h, 40h, 40h
		db  40h, 40h, 14h, 14h,	14h, 14h, 14h, 14h
		db    4,   4,	4,   4,	  4,   4,   4,	 4
		db    4,   4,	4,   4,	  4,   4,   4,	 4
		db    4,   4,	4,   4,	40h, 40h, 40h, 40h
		db  40h, 40h, 18h, 18h,	18h, 18h, 18h, 18h
		db    8,   8,	8,   8,	  8,   8,   8,	 8
		db    8,   8,	8,   8,	  8,   8,   8,	 8
		db    8,   8,	8,   8,	40h, 40h, 40h, 40h
		db  20h,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0,   0,	0,   0,	  0,   0,   0,	 0
		db    0
		align 2
aPrintScanfFloa	db 'print scanf : floating point formats not linked',0Dh,0Ah,0
word_FF9C	dw 0
word_FF9E	dw 0
off_FFA0	dw offset sub_C73A
off_FFA2	dw offset sub_C73A
off_FFA4	dw offset sub_C73A
aAbnormalProgra	db 'Abnormal program termination',0Dh,0Ah,0
		dw 0
		db 0
		db '\',0
; int _argc
__argc		dw 0
dword_FFCC	dd 0
word_FFD0	dw 0
word_FFD2	dw 0
word_FFD4	dw 0
word_FFD6	dw 0
word_FFD8	dw 0
dword_FFDA	dd 0
byte_FFDE	db 0
byte_FFDF	db 0
byte_FFE0	db 0
		align 2
word_FFE2	dw 0
word_FFE4	dw 0
word_FFE6	dw 0
word_FFE8	dw 0
		db    0
		db    0
		db    0
		db    0
		db    2
		db    4
		db    8
		db  0Bh
		db  0Fh
		db  16h
		db    0
		db  15h
		db  8Ch	; å
		db  0Bh
		db    0
		db    0
aPath_0		db 'PATH',0
		db    0			; jumptable 0000856D cases 65535,65535,65535,65535,65535
					; jumptable 00008EA1 cases 65535,65535,65535,65535
					; jumptable 0000916D cases 65535,65535,65535,65535,65535,65535,65535
a_bat_0		db '.BAT',0
a_com_0		db '.COM',0
a_exe_0		db '.EXE',0
a_bat_1		db '.BAT',0
aComspec_0	db 'COMSPEC',0
aC		db '/c',0
		db    0
		dd aSun			; "Sun"
		dd aMon			; "Mon"
		dd aTue			; "Tue"
		dd aWed			; "Wed"
		dd aThu			; "Thu"
		dd aFri			; "Fri"
		dd aSat			; "Sat"
		dd aSunday		; "Sunday"
		dd aMonday		; "Monday"
		dd aTuesday		; "Tuesday"
		dd aWednesday		; "Wednesday"
		dd aThursday		; "Thursday"
		dd aFriday		; "Friday"
		dd aSaturday		; "Saturday"
		dd aJan			; "Jan"
		dd aFeb			; "Feb"
		dd aMar			; "Mar"
		dd aApr			; "Apr"
		dd aMay			; "May"
		dd aJun			; "Jun"
		dd aJul			; "Jul"
		dd aAug			; "Aug"
		dd aSep			; "Sep"
		dd aOct			; "Oct"
		dd aNov			; "Nov"
		dd aDec			; "Dec"
		dd aJanuary		; "January"
		dd aFebruary		; "February"
		dd aMarch		; "March"
		dd aApril		; "April"
		dd aMay_0		; "May"
		dd aJune		; "June"
		dd aJuly		; "July"
		dd aAugust		; "August"
		dd aSeptember		; "September"
		dd aOctober		; "October"
		dd aNovember		; "November"
		dd aDecember		; "December"
		dd g_aAm			; "AM"
		dd g_aPm			; "PM"
		db  1Fh
		db  1Ch
		db  1Fh
		db  1Eh
		db  1Fh
		db  1Eh
		db  1Fh
		db  1Fh
		db  1Eh
		db  1Fh
		db  1Eh
		db  1Fh
		db    0
		db    0
		db  1Fh
		db    0
		db  3Bh	; ;
		db    0
		db  5Ah	; Z
		db    0
		db  78h	; x
		db    0
		db  97h	; ó
		db    0
		db 0B5h	; µ
		db    0
		db 0D4h	; ‘
		db    0
		db 0F3h	; Û
		db    0
		db  11h
		db    1
		db  30h	; 0
		db    1
		db  4Eh	; N
		db    1
aSun		db 'Sun',0
aMon		db 'Mon',0
aTue		db 'Tue',0
aWed		db 'Wed',0
aThu		db 'Thu',0
aFri		db 'Fri',0
aSat		db 'Sat',0
aSunday		db 'Sunday',0
aMonday		db 'Monday',0
aTuesday	db 'Tuesday',0
aWednesday	db 'Wednesday',0
aThursday	db 'Thursday',0
aFriday		db 'Friday',0
aSaturday	db 'Saturday',0
aJan		db 'Jan',0
aFeb		db 'Feb',0
aMar		db 'Mar',0
aApr		db 'Apr',0
aMay		db 'May',0
aJun		db 'Jun',0
aJul		db 'Jul',0
aAug		db 'Aug',0
aSep		db 'Sep',0
aOct		db 'Oct',0
aNov		db 'Nov',0
aDec		db 'Dec',0
aJanuary	db 'January',0
aFebruary	db 'February',0
aMarch		db 'March',0
aApril		db 'April',0
aMay_0		db 'May',0
aJune		db 'June',0
aJuly		db 'July',0
aAugust		db 'August',0
aSeptember	db 'September',0
aOctober	db 'October',0
aNovember	db 'November',0
aDecember	db 'December',0
g_aAm		db 'AM',0
g_aPm		db 'PM',0
aSS02d02d02d02d	db '%s %s %02d %02d:%02d:%02d %4d',0
		db    0
		db    0
		db    0
		db  1Fh
		db    0
		db  3Bh	; ;
		db    0
		db  5Ah	; Z
		db    0
		db  78h	; x
		db    0
		db  97h	; ó
		db    0
		db 0B5h	; µ
		db    0
		db 0D4h	; ‘
		db    0
		db 0F3h	; Û
		db    0
		db  11h
		db    1
		db  30h	; 0
		db    1
		db  4Eh	; N
		db    1
		db  6Dh	; m
		db    1
; char *off_101FE
off_101FE	dd byte_1420E
; void *s
s		dd byte_14212
word_10206	dw 4650h
word_10208	dw 0
word_1020A	dw 1
aTz		db 'TZ',0
aEst		db 'EST',0
aEdt		db 'EDT',0
		db    0
off_10218	dw offset unknown_libname_1
					; BCC v4.x/5.x DOS runtime
		db  1Fh
		db 0BFh	; ø
		db  1Fh
		db 0BFh	; ø
		db  1Fh
		db 0BFh	; ø
InitStart	db    0
		db    2
		dw __setupio
		dw    0
		db    0
		db  10h
		dw unknown_libname_2	; BCC v4.x/5.x DOS runtime
		dw    0
		db    0
		db  10h
		dw unknown_libname_3	; BCC v4.x/5.x DOS runtime
		dw    0
		db    0
		db  1Eh
		dd sub_DE20
InitEnd		db    0
		db    2
		dw offset __freeio
		db    0
		db    0
bdata@		dw ?
; void *off_10240
off_10240	dw ?
word_10242	dw ?
byte_10244	db ?
		db    ?	;
		db    ?	;
byte_10247	db 42h dup(?)
byte_10289	db 9 dup(?)
byte_10292	db 5 dup(?)
; char byte_10297[81]
byte_10297	db 51h dup(?)
dword_102E8	dd ?
word_102EC	dw ?
word_102EE	dw ?
word_102F0	dw ?
word_102F2	dw ?
; char byte_102F4[80]
byte_102F4	db 50h dup(?)
; int handle
handle		dw ?
word_10346	dw ?
word_10348	dw ?
dword_1034A	dd ?
; __int32 offset
_offset		dw ?
word_10350	dw ?
byte_10352	db 400h	dup(?)
; char **env
env		dw ?
word_10754	dw ?
dword_10756	dd ?
dword_1075A	dd ?
word_1075E	dw ?
word_10760	dw ?
word_10762	dw ?
word_10764	dw ?
word_10766	dw ?
word_10768	dw ?
word_1076A	dw ?
word_1076C	dw ?
		db 1F40h dup(?)
; char byte_126AE[80]
byte_126AE	db 50h dup(?)
word_126FE	dw ?
word_12700	dw ?
word_12702	dw ?
; char *s2
s2		dw ?
word_12706	dw ?
; char byte_12708[80]
byte_12708	db 50h dup(?)
word_12758	dw ?
; char byte_1275A
byte_1275A	db ?
byte_1275B	db ?
byte_1275C	db ?
byte_1275D	db ?
		db 0FCh	dup(?)
; char byte_1285A
byte_1285A	db 1000h dup(?)
; char byte_1385A
byte_1385A	db ?
byte_1385B	db ?
byte_1385C	db ?
		db 1FDh	dup(?)
word_13A5A	dw ?
word_13A5C	dw ?
word_13A5E	dw ?
word_13A60	dw ?
dword_13A62	dd ?
		db 200h	dup(?)
; char byte_13C66[512]
byte_13C66	db 200h	dup(?)
; char byte_13E66[512]
byte_13E66	db 200h	dup(?)
; char *off_14066
off_14066	dd ?
; char byte_1406A[3]
byte_1406A	db 3 dup(?)
byte_1406D	db 3 dup(?)
; char byte_14070[66]
byte_14070	db 42h dup(?)
; char byte_140B2[66]
byte_140B2	db 42h dup(?)
; char byte_140F4[9]
byte_140F4	db 9 dup(?)
byte_140FD	db 9 dup(?)
; char byte_14106[5]
byte_14106	db 5 dup(?)
byte_1410B	db 5 dup(?)
; __int32 word_14110
word_14110	dw ?
word_14112	dw ?
; char *off_14114
off_14114	dw ?
word_14116	dw ?
; int word_14118
word_14118	dw ?
; int word_1411A
word_1411A	dw ?
; int word_1411C
word_1411C	dw ?
; int word_1411E
word_1411E	dw ?
word_14120	dw ?
word_14122	dw ?
dword_14124	dd ?
word_14128	dw ?
word_1412A	dw ?
word_1412C	dw ?
word_1412E	dw ?
word_14130	dw ?
word_14132	dw ?
word_14134	dw ?
word_14136	dw ?
word_14138	dw ?
word_1413A	dw ?
word_1413C	dw ?
word_1413E	dw ?
word_14140	dw ?
word_14142	dw ?
; char byte_14144[82]
byte_14144	db 52h dup(?)
byte_14196	db 42h dup(?)
word_141D8	dw ?
dword_141DA	dd ?
; void (__interrupt far	*isr)()
isr		dd ?
		db 1Ah	dup(?)
word_141FC	dw ?
word_141FE	dw ?
word_14200	dw ?
word_14202	dw ?
word_14204	dw ?
word_14206	dw ?
word_14208	dw ?
word_1420A	dw ?
word_1420C	dw ?
byte_1420E	db 4 dup(?)
byte_14212	db 4 dup(?)
dseg		ends

; ===========================================================================

; Segment type:	Uninitialized
seg002		segment	byte stack 'STACK' use16
		assume cs:seg002
		assume es:nothing, ss:nothing, ds:dseg,	fs:nothing, gs:nothing
		db 80h dup(?)
seg002		ends


		end start
